(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(c){if(c.ep)return;c.ep=!0;const h=a(c);fetch(c.href,h)}})();function by(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Yu={exports:{}},Jo={};var kp;function aS(){if(kp)return Jo;kp=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(r,c,h){var d=null;if(h!==void 0&&(d=""+h),c.key!==void 0&&(d=""+c.key),"key"in c){h={};for(var g in c)g!=="key"&&(h[g]=c[g])}else h=c;return c=h.ref,{$$typeof:u,type:r,key:d,ref:c!==void 0?c:null,props:h}}return Jo.Fragment=n,Jo.jsx=a,Jo.jsxs=a,Jo}var Op;function oS(){return Op||(Op=1,Yu.exports=aS()),Yu.exports}var Y=oS(),Qu={exports:{}},te={};var Mp;function rS(){if(Mp)return te;Mp=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),k=Symbol.iterator;function B(A){return A===null||typeof A!="object"?null:(A=k&&A[k]||A["@@iterator"],typeof A=="function"?A:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,Ae={};function Re(A,L,K){this.props=A,this.context=L,this.refs=Ae,this.updater=K||W}Re.prototype.isReactComponent={},Re.prototype.setState=function(A,L){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,L,"setState")},Re.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function le(){}le.prototype=Re.prototype;function de(A,L,K){this.props=A,this.context=L,this.refs=Ae,this.updater=K||W}var Le=de.prototype=new le;Le.constructor=de,F(Le,Re.prototype),Le.isPureReactComponent=!0;var Ge=Array.isArray;function Ye(){}var ie={H:null,A:null,T:null,S:null},nt=Object.prototype.hasOwnProperty;function Tt(A,L,K){var j=K.ref;return{$$typeof:u,type:A,key:L,ref:j!==void 0?j:null,props:K}}function wn(A,L){return Tt(A.type,L,A.props)}function Ht(A){return typeof A=="object"&&A!==null&&A.$$typeof===u}function ft(A){var L={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(K){return L[K]})}var Jt=/\/+/g;function Zt(A,L){return typeof A=="object"&&A!==null&&A.key!=null?ft(""+A.key):L.toString(36)}function gt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Ye,Ye):(A.status="pending",A.then(function(L){A.status==="pending"&&(A.status="fulfilled",A.value=L)},function(L){A.status==="pending"&&(A.status="rejected",A.reason=L)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function N(A,L,K,j,ee){var re=typeof A;(re==="undefined"||re==="boolean")&&(A=null);var pe=!1;if(A===null)pe=!0;else switch(re){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(A.$$typeof){case u:case n:pe=!0;break;case S:return pe=A._init,N(pe(A._payload),L,K,j,ee)}}if(pe)return ee=ee(A),pe=j===""?"."+Zt(A,0):j,Ge(ee)?(K="",pe!=null&&(K=pe.replace(Jt,"$&/")+"/"),N(ee,L,K,"",function(me){return me})):ee!=null&&(Ht(ee)&&(ee=wn(ee,K+(ee.key==null||A&&A.key===ee.key?"":(""+ee.key).replace(Jt,"$&/")+"/")+pe)),L.push(ee)),1;pe=0;var it=j===""?".":j+":";if(Ge(A))for(var P=0;P<A.length;P++)j=A[P],re=it+Zt(j,P),pe+=N(j,L,K,re,ee);else if(P=B(A),typeof P=="function")for(A=P.call(A),P=0;!(j=A.next()).done;)j=j.value,re=it+Zt(j,P++),pe+=N(j,L,K,re,ee);else if(re==="object"){if(typeof A.then=="function")return N(gt(A),L,K,j,ee);throw L=String(A),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return pe}function x(A,L,K){if(A==null)return A;var j=[],ee=0;return N(A,j,"","",function(re){return L.call(K,re,ee++)}),j}function X(A){if(A._status===-1){var L=A._result;L=L(),L.then(function(K){(A._status===0||A._status===-1)&&(A._status=1,A._result=K)},function(K){(A._status===0||A._status===-1)&&(A._status=2,A._result=K)}),A._status===-1&&(A._status=0,A._result=L)}if(A._status===1)return A._result.default;throw A._result}var Se=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Ee={map:x,forEach:function(A,L,K){x(A,function(){L.apply(this,arguments)},K)},count:function(A){var L=0;return x(A,function(){L++}),L},toArray:function(A){return x(A,function(L){return L})||[]},only:function(A){if(!Ht(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return te.Activity=_,te.Children=Ee,te.Component=Re,te.Fragment=a,te.Profiler=c,te.PureComponent=de,te.StrictMode=r,te.Suspense=m,te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,te.__COMPILER_RUNTIME={__proto__:null,c:function(A){return ie.H.useMemoCache(A)}},te.cache=function(A){return function(){return A.apply(null,arguments)}},te.cacheSignal=function(){return null},te.cloneElement=function(A,L,K){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var j=F({},A.props),ee=A.key;if(L!=null)for(re in L.key!==void 0&&(ee=""+L.key),L)!nt.call(L,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&L.ref===void 0||(j[re]=L[re]);var re=arguments.length-2;if(re===1)j.children=K;else if(1<re){for(var pe=Array(re),it=0;it<re;it++)pe[it]=arguments[it+2];j.children=pe}return Tt(A.type,ee,j)},te.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:h,_context:A},A},te.createElement=function(A,L,K){var j,ee={},re=null;if(L!=null)for(j in L.key!==void 0&&(re=""+L.key),L)nt.call(L,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(ee[j]=L[j]);var pe=arguments.length-2;if(pe===1)ee.children=K;else if(1<pe){for(var it=Array(pe),P=0;P<pe;P++)it[P]=arguments[P+2];ee.children=it}if(A&&A.defaultProps)for(j in pe=A.defaultProps,pe)ee[j]===void 0&&(ee[j]=pe[j]);return Tt(A,re,ee)},te.createRef=function(){return{current:null}},te.forwardRef=function(A){return{$$typeof:g,render:A}},te.isValidElement=Ht,te.lazy=function(A){return{$$typeof:S,_payload:{_status:-1,_result:A},_init:X}},te.memo=function(A,L){return{$$typeof:y,type:A,compare:L===void 0?null:L}},te.startTransition=function(A){var L=ie.T,K={};ie.T=K;try{var j=A(),ee=ie.S;ee!==null&&ee(K,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(Ye,Se)}catch(re){Se(re)}finally{L!==null&&K.types!==null&&(L.types=K.types),ie.T=L}},te.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},te.use=function(A){return ie.H.use(A)},te.useActionState=function(A,L,K){return ie.H.useActionState(A,L,K)},te.useCallback=function(A,L){return ie.H.useCallback(A,L)},te.useContext=function(A){return ie.H.useContext(A)},te.useDebugValue=function(){},te.useDeferredValue=function(A,L){return ie.H.useDeferredValue(A,L)},te.useEffect=function(A,L){return ie.H.useEffect(A,L)},te.useEffectEvent=function(A){return ie.H.useEffectEvent(A)},te.useId=function(){return ie.H.useId()},te.useImperativeHandle=function(A,L,K){return ie.H.useImperativeHandle(A,L,K)},te.useInsertionEffect=function(A,L){return ie.H.useInsertionEffect(A,L)},te.useLayoutEffect=function(A,L){return ie.H.useLayoutEffect(A,L)},te.useMemo=function(A,L){return ie.H.useMemo(A,L)},te.useOptimistic=function(A,L){return ie.H.useOptimistic(A,L)},te.useReducer=function(A,L,K){return ie.H.useReducer(A,L,K)},te.useRef=function(A){return ie.H.useRef(A)},te.useState=function(A){return ie.H.useState(A)},te.useSyncExternalStore=function(A,L,K){return ie.H.useSyncExternalStore(A,L,K)},te.useTransition=function(){return ie.H.useTransition()},te.version="19.2.3",te}var Np;function Ch(){return Np||(Np=1,Qu.exports=rS()),Qu.exports}var $e=Ch();const sS=by($e);var Fu={exports:{}},Zo={},Vu={exports:{}},Xu={};var Dp;function cS(){return Dp||(Dp=1,(function(u){function n(N,x){var X=N.length;N.push(x);e:for(;0<X;){var Se=X-1>>>1,Ee=N[Se];if(0<c(Ee,x))N[Se]=x,N[X]=Ee,X=Se;else break e}}function a(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var x=N[0],X=N.pop();if(X!==x){N[0]=X;e:for(var Se=0,Ee=N.length,A=Ee>>>1;Se<A;){var L=2*(Se+1)-1,K=N[L],j=L+1,ee=N[j];if(0>c(K,X))j<Ee&&0>c(ee,K)?(N[Se]=ee,N[j]=X,Se=j):(N[Se]=K,N[L]=X,Se=L);else if(j<Ee&&0>c(ee,X))N[Se]=ee,N[j]=X,Se=j;else break e}}return x}function c(N,x){var X=N.sortIndex-x.sortIndex;return X!==0?X:N.id-x.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;u.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();u.unstable_now=function(){return d.now()-g}}var m=[],y=[],S=1,_=null,k=3,B=!1,W=!1,F=!1,Ae=!1,Re=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;function Le(N){for(var x=a(y);x!==null;){if(x.callback===null)r(y);else if(x.startTime<=N)r(y),x.sortIndex=x.expirationTime,n(m,x);else break;x=a(y)}}function Ge(N){if(F=!1,Le(N),!W)if(a(m)!==null)W=!0,Ye||(Ye=!0,ft());else{var x=a(y);x!==null&&gt(Ge,x.startTime-N)}}var Ye=!1,ie=-1,nt=5,Tt=-1;function wn(){return Ae?!0:!(u.unstable_now()-Tt<nt)}function Ht(){if(Ae=!1,Ye){var N=u.unstable_now();Tt=N;var x=!0;try{e:{W=!1,F&&(F=!1,le(ie),ie=-1),B=!0;var X=k;try{t:{for(Le(N),_=a(m);_!==null&&!(_.expirationTime>N&&wn());){var Se=_.callback;if(typeof Se=="function"){_.callback=null,k=_.priorityLevel;var Ee=Se(_.expirationTime<=N);if(N=u.unstable_now(),typeof Ee=="function"){_.callback=Ee,Le(N),x=!0;break t}_===a(m)&&r(m),Le(N)}else r(m);_=a(m)}if(_!==null)x=!0;else{var A=a(y);A!==null&&gt(Ge,A.startTime-N),x=!1}}break e}finally{_=null,k=X,B=!1}x=void 0}}finally{x?ft():Ye=!1}}}var ft;if(typeof de=="function")ft=function(){de(Ht)};else if(typeof MessageChannel<"u"){var Jt=new MessageChannel,Zt=Jt.port2;Jt.port1.onmessage=Ht,ft=function(){Zt.postMessage(null)}}else ft=function(){Re(Ht,0)};function gt(N,x){ie=Re(function(){N(u.unstable_now())},x)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(N){N.callback=null},u.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<N?Math.floor(1e3/N):5},u.unstable_getCurrentPriorityLevel=function(){return k},u.unstable_next=function(N){switch(k){case 1:case 2:case 3:var x=3;break;default:x=k}var X=k;k=x;try{return N()}finally{k=X}},u.unstable_requestPaint=function(){Ae=!0},u.unstable_runWithPriority=function(N,x){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=k;k=N;try{return x()}finally{k=X}},u.unstable_scheduleCallback=function(N,x,X){var Se=u.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Se+X:Se):X=Se,N){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=X+Ee,N={id:S++,callback:x,priorityLevel:N,startTime:X,expirationTime:Ee,sortIndex:-1},X>Se?(N.sortIndex=X,n(y,N),a(m)===null&&N===a(y)&&(F?(le(ie),ie=-1):F=!0,gt(Ge,X-Se))):(N.sortIndex=Ee,n(m,N),W||B||(W=!0,Ye||(Ye=!0,ft()))),N},u.unstable_shouldYield=wn,u.unstable_wrapCallback=function(N){var x=k;return function(){var X=k;k=x;try{return N.apply(this,arguments)}finally{k=X}}}})(Xu)),Xu}var Up;function lS(){return Up||(Up=1,Vu.exports=cS()),Vu.exports}var Ju={exports:{}},mt={};var Hp;function uS(){if(Hp)return mt;Hp=1;var u=Ch();function n(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(m,y,S){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:_==null?null:""+_,children:m,containerInfo:y,implementation:S}}var d=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mt.createPortal=function(m,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return h(m,y,null,S)},mt.flushSync=function(m){var y=d.T,S=r.p;try{if(d.T=null,r.p=2,m)return m()}finally{d.T=y,r.p=S,r.d.f()}},mt.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(m,y))},mt.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},mt.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var S=y.as,_=g(S,y.crossOrigin),k=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?r.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:k,fetchPriority:B}):S==="script"&&r.d.X(m,{crossOrigin:_,integrity:k,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},mt.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=g(y.as,y.crossOrigin);r.d.M(m,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(m)},mt.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,_=g(S,y.crossOrigin);r.d.L(m,S,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},mt.preloadModule=function(m,y){if(typeof m=="string")if(y){var S=g(y.as,y.crossOrigin);r.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(m)},mt.requestFormReset=function(m){r.d.r(m)},mt.unstable_batchedUpdates=function(m,y){return m(y)},mt.useFormState=function(m,y,S){return d.H.useFormState(m,y,S)},mt.useFormStatus=function(){return d.H.useHostTransitionStatus()},mt.version="19.2.3",mt}var Lp;function hS(){if(Lp)return Ju.exports;Lp=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Ju.exports=uS(),Ju.exports}var zp;function dS(){if(zp)return Zo;zp=1;var u=lS(),n=Ch(),a=hS();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(h(e)!==e)throw Error(r(188))}function y(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,o=t;;){var s=i.return;if(s===null)break;var l=s.alternate;if(l===null){if(o=s.return,o!==null){i=o;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===i)return m(s),e;if(l===o)return m(s),t;l=l.sibling}throw Error(r(188))}if(i.return!==o.return)i=s,o=l;else{for(var f=!1,p=s.child;p;){if(p===i){f=!0,i=s,o=l;break}if(p===o){f=!0,o=s,i=l;break}p=p.sibling}if(!f){for(p=l.child;p;){if(p===i){f=!0,i=l,o=s;break}if(p===o){f=!0,o=l,i=s;break}p=p.sibling}if(!f)throw Error(r(189))}}if(i.alternate!==o)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,k=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),Ae=Symbol.for("react.strict_mode"),Re=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),de=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),Ge=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),Tt=Symbol.for("react.activity"),wn=Symbol.for("react.memo_cache_sentinel"),Ht=Symbol.iterator;function ft(e){return e===null||typeof e!="object"?null:(e=Ht&&e[Ht]||e["@@iterator"],typeof e=="function"?e:null)}var Jt=Symbol.for("react.client.reference");function Zt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Jt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Re:return"Profiler";case Ae:return"StrictMode";case Ge:return"Suspense";case Ye:return"SuspenseList";case Tt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case W:return"Portal";case de:return e.displayName||"Context";case le:return(e._context.displayName||"Context")+".Consumer";case Le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ie:return t=e.displayName||null,t!==null?t:Zt(e.type)||"Memo";case nt:t=e._payload,e=e._init;try{return Zt(e(t))}catch{}}return null}var gt=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Se=[],Ee=-1;function A(e){return{current:e}}function L(e){0>Ee||(e.current=Se[Ee],Se[Ee]=null,Ee--)}function K(e,t){Ee++,Se[Ee]=e.current,e.current=t}var j=A(null),ee=A(null),re=A(null),pe=A(null);function it(e,t){switch(K(re,t),K(ee,e),K(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?$m(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=$m(t),e=Wm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(j),K(j,e)}function P(){L(j),L(ee),L(re)}function me(e){e.memoizedState!==null&&K(pe,e);var t=j.current,i=Wm(t,e.type);t!==i&&(K(ee,e),K(j,i))}function un(e){ee.current===e&&(L(j),L(ee)),pe.current===e&&(L(pe),Qo._currentValue=X)}var Rc,Rd;function Mi(e){if(Rc===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Rc=t&&t[1]||"",Rd=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rc+e+Rd}var Ic=!1;function kc(e,t){if(!e||Ic)return"";Ic=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(I){var R=I}Reflect.construct(e,[],U)}else{try{U.call()}catch(I){R=I}e.call(U.prototype)}}else{try{throw Error()}catch(I){R=I}(U=e())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(I){if(I&&R&&typeof I.stack=="string")return[I.stack,R.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=o.DetermineComponentFrameRoot(),f=l[0],p=l[1];if(f&&p){var C=f.split(`
`),w=p.split(`
`);for(s=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;s<w.length&&!w[s].includes("DetermineComponentFrameRoot");)s++;if(o===C.length||s===w.length)for(o=C.length-1,s=w.length-1;1<=o&&0<=s&&C[o]!==w[s];)s--;for(;1<=o&&0<=s;o--,s--)if(C[o]!==w[s]){if(o!==1||s!==1)do if(o--,s--,0>s||C[o]!==w[s]){var M=`
`+C[o].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),M}while(1<=o&&0<=s);break}}}finally{Ic=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Mi(i):""}function HT(e,t){switch(e.tag){case 26:case 27:case 5:return Mi(e.type);case 16:return Mi("Lazy");case 13:return e.child!==t&&t!==null?Mi("Suspense Fallback"):Mi("Suspense");case 19:return Mi("SuspenseList");case 0:case 15:return kc(e.type,!1);case 11:return kc(e.type.render,!1);case 1:return kc(e.type,!0);case 31:return Mi("Activity");default:return""}}function Id(e){try{var t="",i=null;do t+=HT(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Oc=Object.prototype.hasOwnProperty,Mc=u.unstable_scheduleCallback,Nc=u.unstable_cancelCallback,LT=u.unstable_shouldYield,zT=u.unstable_requestPaint,Lt=u.unstable_now,PT=u.unstable_getCurrentPriorityLevel,kd=u.unstable_ImmediatePriority,Od=u.unstable_UserBlockingPriority,gr=u.unstable_NormalPriority,xT=u.unstable_LowPriority,Md=u.unstable_IdlePriority,BT=u.log,KT=u.unstable_setDisableYieldValue,io=null,zt=null;function Xn(e){if(typeof BT=="function"&&KT(e),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(io,e)}catch{}}var Pt=Math.clz32?Math.clz32:jT,GT=Math.log,qT=Math.LN2;function jT(e){return e>>>=0,e===0?32:31-(GT(e)/qT|0)|0}var mr=256,pr=262144,yr=4194304;function Ni(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Cr(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var s=0,l=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var p=o&134217727;return p!==0?(o=p&~l,o!==0?s=Ni(o):(f&=p,f!==0?s=Ni(f):i||(i=p&~e,i!==0&&(s=Ni(i))))):(p=o&~l,p!==0?s=Ni(p):f!==0?s=Ni(f):i||(i=o&~e,i!==0&&(s=Ni(i)))),s===0?0:t!==0&&t!==s&&(t&l)===0&&(l=s&-s,i=t&-t,l>=i||l===32&&(i&4194048)!==0)?t:s}function ao(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function YT(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nd(){var e=yr;return yr<<=1,(yr&62914560)===0&&(yr=4194304),e}function Dc(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function oo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function QT(e,t,i,o,s,l){var f=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var p=e.entanglements,C=e.expirationTimes,w=e.hiddenUpdates;for(i=f&~i;0<i;){var M=31-Pt(i),U=1<<M;p[M]=0,C[M]=-1;var R=w[M];if(R!==null)for(w[M]=null,M=0;M<R.length;M++){var I=R[M];I!==null&&(I.lane&=-536870913)}i&=~U}o!==0&&Dd(e,o,0),l!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=l&~(f&~t))}function Dd(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-Pt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Ud(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-Pt(i),s=1<<o;s&t|e[o]&t&&(e[o]|=t),i&=~s}}function Hd(e,t){var i=t&-t;return i=(i&42)!==0?1:Uc(i),(i&(e.suspendedLanes|t))!==0?0:i}function Uc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ld(){var e=x.p;return e!==0?e:(e=window.event,e===void 0?32:Sp(e.type))}function zd(e,t){var i=x.p;try{return x.p=e,t()}finally{x.p=i}}var Jn=Math.random().toString(36).slice(2),at="__reactFiber$"+Jn,bt="__reactProps$"+Jn,aa="__reactContainer$"+Jn,Lc="__reactEvents$"+Jn,FT="__reactListeners$"+Jn,VT="__reactHandles$"+Jn,Pd="__reactResources$"+Jn,ro="__reactMarker$"+Jn;function zc(e){delete e[at],delete e[bt],delete e[Lc],delete e[FT],delete e[VT]}function oa(e){var t=e[at];if(t)return t;for(var i=e.parentNode;i;){if(t=i[aa]||i[at]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=rp(e);e!==null;){if(i=e[at])return i;e=rp(e)}return t}e=i,i=e.parentNode}return null}function ra(e){if(e=e[at]||e[aa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function so(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function sa(e){var t=e[Pd];return t||(t=e[Pd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[ro]=!0}var xd=new Set,Bd={};function Di(e,t){ca(e,t),ca(e+"Capture",t)}function ca(e,t){for(Bd[e]=t,e=0;e<t.length;e++)xd.add(t[e])}var XT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kd={},Gd={};function JT(e){return Oc.call(Gd,e)?!0:Oc.call(Kd,e)?!1:XT.test(e)?Gd[e]=!0:(Kd[e]=!0,!1)}function Tr(e,t,i){if(JT(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function vr(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Rn(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ZT(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var s=o.get,l=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pc(e){if(!e._valueTracker){var t=qd(e)?"checked":"value";e._valueTracker=ZT(e,t,""+e[t])}}function jd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=qd(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $T=/[\n"\\]/g;function Wt(e){return e.replace($T,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function xc(e,t,i,o,s,l,f,p){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$t(t)):e.value!==""+$t(t)&&(e.value=""+$t(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Bc(e,f,$t(t)):i!=null?Bc(e,f,$t(i)):o!=null&&e.removeAttribute("value"),s==null&&l!=null&&(e.defaultChecked=!!l),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+$t(p):e.removeAttribute("name")}function Yd(e,t,i,o,s,l,f,p){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||i!=null){if(!(l!=="submit"&&l!=="reset"||t!=null)){Pc(e);return}i=i!=null?""+$t(i):"",t=t!=null?""+$t(t):i,p||t===e.value||(e.value=t),e.defaultValue=t}o=o??s,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=p?e.checked:!!o,e.defaultChecked=!!o,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Pc(e)}function Bc(e,t,i){t==="number"&&Ar(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function la(e,t,i,o){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&o&&(e[i].defaultSelected=!0)}else{for(i=""+$t(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,o&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Qd(e,t,i){if(t!=null&&(t=""+$t(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+$t(i):""}function Fd(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(r(92));if(gt(o)){if(1<o.length)throw Error(r(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=$t(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Pc(e)}function ua(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var WT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vd(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||WT.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Xd(e,t,i){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var s in t)o=t[s],t.hasOwnProperty(s)&&i[s]!==o&&Vd(e,s,o)}else for(var l in t)t.hasOwnProperty(l)&&Vd(e,l,t[l])}function Kc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ev=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sr(e){return tv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function In(){}var Gc=null;function qc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ha=null,da=null;function Jd(e){var t=ra(e);if(t&&(e=t.stateNode)){var i=e[bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(xc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Wt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var s=o[bt]||null;if(!s)throw Error(r(90));xc(o,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&jd(o)}break e;case"textarea":Qd(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&la(e,!!i.multiple,t,!1)}}}var jc=!1;function Zd(e,t,i){if(jc)return e(t,i);jc=!0;try{var o=e(t);return o}finally{if(jc=!1,(ha!==null||da!==null)&&(ls(),ha&&(t=ha,e=da,da=ha=null,Jd(t),e)))for(t=0;t<e.length;t++)Jd(e[t])}}function co(e,t){var i=e.stateNode;if(i===null)return null;var o=i[bt]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yc=!1;if(kn)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Yc=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Yc=!1}var Zn=null,Qc=null,Er=null;function $d(){if(Er)return Er;var e,t=Qc,i=t.length,o,s="value"in Zn?Zn.value:Zn.textContent,l=s.length;for(e=0;e<i&&t[e]===s[e];e++);var f=i-e;for(o=1;o<=f&&t[i-o]===s[l-o];o++);return Er=s.slice(e,1<o?1-o:void 0)}function _r(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function br(){return!0}function Wd(){return!1}function wt(e){function t(i,o,s,l,f){this._reactName=i,this._targetInst=s,this.type=o,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?br:Wd,this.isPropagationStopped=Wd,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),t}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wr=wt(Ui),uo=_({},Ui,{view:0,detail:0}),nv=wt(uo),Fc,Vc,ho,Rr=_({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ho&&(ho&&e.type==="mousemove"?(Fc=e.screenX-ho.screenX,Vc=e.screenY-ho.screenY):Vc=Fc=0,ho=e),Fc)},movementY:function(e){return"movementY"in e?e.movementY:Vc}}),ef=wt(Rr),iv=_({},Rr,{dataTransfer:0}),av=wt(iv),ov=_({},uo,{relatedTarget:0}),Xc=wt(ov),rv=_({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),sv=wt(rv),cv=_({},Ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lv=wt(cv),uv=_({},Ui,{data:0}),tf=wt(uv),hv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fv[e])?!!t[e]:!1}function Jc(){return gv}var mv=_({},uo,{key:function(e){if(e.key){var t=hv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_r(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(e){return e.type==="keypress"?_r(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_r(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pv=wt(mv),yv=_({},Rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nf=wt(yv),Cv=_({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),Tv=wt(Cv),vv=_({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Av=wt(vv),Sv=_({},Rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ev=wt(Sv),_v=_({},Ui,{newState:0,oldState:0}),bv=wt(_v),wv=[9,13,27,32],Zc=kn&&"CompositionEvent"in window,fo=null;kn&&"documentMode"in document&&(fo=document.documentMode);var Rv=kn&&"TextEvent"in window&&!fo,af=kn&&(!Zc||fo&&8<fo&&11>=fo),of=" ",rf=!1;function sf(e,t){switch(e){case"keyup":return wv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fa=!1;function Iv(e,t){switch(e){case"compositionend":return cf(t);case"keypress":return t.which!==32?null:(rf=!0,of);case"textInput":return e=t.data,e===of&&rf?null:e;default:return null}}function kv(e,t){if(fa)return e==="compositionend"||!Zc&&sf(e,t)?(e=$d(),Er=Qc=Zn=null,fa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return af&&t.locale!=="ko"?null:t.data;default:return null}}var Ov={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ov[e.type]:t==="textarea"}function uf(e,t,i,o){ha?da?da.push(o):da=[o]:ha=o,t=ps(t,"onChange"),0<t.length&&(i=new wr("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var go=null,mo=null;function Mv(e){Qm(e,0)}function Ir(e){var t=so(e);if(jd(t))return e}function hf(e,t){if(e==="change")return t}var df=!1;if(kn){var $c;if(kn){var Wc="oninput"in document;if(!Wc){var ff=document.createElement("div");ff.setAttribute("oninput","return;"),Wc=typeof ff.oninput=="function"}$c=Wc}else $c=!1;df=$c&&(!document.documentMode||9<document.documentMode)}function gf(){go&&(go.detachEvent("onpropertychange",mf),mo=go=null)}function mf(e){if(e.propertyName==="value"&&Ir(mo)){var t=[];uf(t,mo,e,qc(e)),Zd(Mv,t)}}function Nv(e,t,i){e==="focusin"?(gf(),go=t,mo=i,go.attachEvent("onpropertychange",mf)):e==="focusout"&&gf()}function Dv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ir(mo)}function Uv(e,t){if(e==="click")return Ir(t)}function Hv(e,t){if(e==="input"||e==="change")return Ir(t)}function Lv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xt=typeof Object.is=="function"?Object.is:Lv;function po(e,t){if(xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var s=i[o];if(!Oc.call(t,s)||!xt(e[s],t[s]))return!1}return!0}function pf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yf(e,t){var i=pf(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=pf(i)}}function Cf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ar(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ar(e.document)}return t}function el(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var zv=kn&&"documentMode"in document&&11>=document.documentMode,ga=null,tl=null,yo=null,nl=!1;function vf(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;nl||ga==null||ga!==Ar(o)||(o=ga,"selectionStart"in o&&el(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),yo&&po(yo,o)||(yo=o,o=ps(tl,"onSelect"),0<o.length&&(t=new wr("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=ga)))}function Hi(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ma={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},il={},Af={};kn&&(Af=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Li(e){if(il[e])return il[e];if(!ma[e])return e;var t=ma[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Af)return il[e]=t[i];return e}var Sf=Li("animationend"),Ef=Li("animationiteration"),_f=Li("animationstart"),Pv=Li("transitionrun"),xv=Li("transitionstart"),Bv=Li("transitioncancel"),bf=Li("transitionend"),wf=new Map,al="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");al.push("scrollEnd");function hn(e,t){wf.set(e,t),Di(t,[e])}var kr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},en=[],pa=0,ol=0;function Or(){for(var e=pa,t=ol=pa=0;t<e;){var i=en[t];en[t++]=null;var o=en[t];en[t++]=null;var s=en[t];en[t++]=null;var l=en[t];if(en[t++]=null,o!==null&&s!==null){var f=o.pending;f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s}l!==0&&Rf(i,s,l)}}function Mr(e,t,i,o){en[pa++]=e,en[pa++]=t,en[pa++]=i,en[pa++]=o,ol|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function rl(e,t,i,o){return Mr(e,t,i,o),Nr(e)}function zi(e,t){return Mr(e,null,null,t),Nr(e)}function Rf(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var s=!1,l=e.return;l!==null;)l.childLanes|=i,o=l.alternate,o!==null&&(o.childLanes|=i),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(s=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,s&&t!==null&&(s=31-Pt(i),e=l.hiddenUpdates,o=e[s],o===null?e[s]=[t]:o.push(t),t.lane=i|536870912),l):null}function Nr(e){if(50<xo)throw xo=0,mu=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ya={};function Kv(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,i,o){return new Kv(e,t,i,o)}function sl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function On(e,t){var i=e.alternate;return i===null?(i=Bt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function If(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Dr(e,t,i,o,s,l){var f=0;if(o=e,typeof e=="function")sl(e)&&(f=1);else if(typeof e=="string")f=QA(e,i,j.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Tt:return e=Bt(31,i,t,s),e.elementType=Tt,e.lanes=l,e;case F:return Pi(i.children,s,l,t);case Ae:f=8,s|=24;break;case Re:return e=Bt(12,i,t,s|2),e.elementType=Re,e.lanes=l,e;case Ge:return e=Bt(13,i,t,s),e.elementType=Ge,e.lanes=l,e;case Ye:return e=Bt(19,i,t,s),e.elementType=Ye,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case de:f=10;break e;case le:f=9;break e;case Le:f=11;break e;case ie:f=14;break e;case nt:f=16,o=null;break e}f=29,i=Error(r(130,e===null?"null":typeof e,"")),o=null}return t=Bt(f,i,t,s),t.elementType=e,t.type=o,t.lanes=l,t}function Pi(e,t,i,o){return e=Bt(7,e,o,t),e.lanes=i,e}function cl(e,t,i){return e=Bt(6,e,null,t),e.lanes=i,e}function kf(e){var t=Bt(18,null,null,0);return t.stateNode=e,t}function ll(e,t,i){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Of=new WeakMap;function tn(e,t){if(typeof e=="object"&&e!==null){var i=Of.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Id(t)},Of.set(e,t),t)}return{value:e,source:t,stack:Id(t)}}var Ca=[],Ta=0,Ur=null,Co=0,nn=[],an=0,$n=null,Cn=1,Tn="";function Mn(e,t){Ca[Ta++]=Co,Ca[Ta++]=Ur,Ur=e,Co=t}function Mf(e,t,i){nn[an++]=Cn,nn[an++]=Tn,nn[an++]=$n,$n=e;var o=Cn;e=Tn;var s=32-Pt(o)-1;o&=~(1<<s),i+=1;var l=32-Pt(t)+s;if(30<l){var f=s-s%5;l=(o&(1<<f)-1).toString(32),o>>=f,s-=f,Cn=1<<32-Pt(t)+s|i<<s|o,Tn=l+e}else Cn=1<<l|i<<s|o,Tn=e}function ul(e){e.return!==null&&(Mn(e,1),Mf(e,1,0))}function hl(e){for(;e===Ur;)Ur=Ca[--Ta],Ca[Ta]=null,Co=Ca[--Ta],Ca[Ta]=null;for(;e===$n;)$n=nn[--an],nn[an]=null,Tn=nn[--an],nn[an]=null,Cn=nn[--an],nn[an]=null}function Nf(e,t){nn[an++]=Cn,nn[an++]=Tn,nn[an++]=$n,Cn=t.id,Tn=t.overflow,$n=e}var ot=null,Ue=null,fe=!1,Wn=null,on=!1,dl=Error(r(519));function ei(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw To(tn(t,e)),dl}function Df(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[at]=e,t[bt]=o,i){case"dialog":ce("cancel",t),ce("close",t);break;case"iframe":case"object":case"embed":ce("load",t);break;case"video":case"audio":for(i=0;i<Ko.length;i++)ce(Ko[i],t);break;case"source":ce("error",t);break;case"img":case"image":case"link":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"input":ce("invalid",t),Yd(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ce("invalid",t);break;case"textarea":ce("invalid",t),Fd(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||Jm(t.textContent,i)?(o.popover!=null&&(ce("beforetoggle",t),ce("toggle",t)),o.onScroll!=null&&ce("scroll",t),o.onScrollEnd!=null&&ce("scrollend",t),o.onClick!=null&&(t.onclick=In),t=!0):t=!1,t||ei(e,!0)}function Uf(e){for(ot=e.return;ot;)switch(ot.tag){case 5:case 31:case 13:on=!1;return;case 27:case 3:on=!0;return;default:ot=ot.return}}function va(e){if(e!==ot)return!1;if(!fe)return Uf(e),fe=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ou(e.type,e.memoizedProps)),i=!i),i&&Ue&&ei(e),Uf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ue=op(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ue=op(e)}else t===27?(t=Ue,gi(e.type)?(e=Hu,Hu=null,Ue=e):Ue=t):Ue=ot?sn(e.stateNode.nextSibling):null;return!0}function xi(){Ue=ot=null,fe=!1}function fl(){var e=Wn;return e!==null&&(Ot===null?Ot=e:Ot.push.apply(Ot,e),Wn=null),e}function To(e){Wn===null?Wn=[e]:Wn.push(e)}var gl=A(null),Bi=null,Nn=null;function ti(e,t,i){K(gl,t._currentValue),t._currentValue=i}function Dn(e){e._currentValue=gl.current,L(gl)}function ml(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function pl(e,t,i,o){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){var f=s.child;l=l.firstContext;e:for(;l!==null;){var p=l;l=s;for(var C=0;C<t.length;C++)if(p.context===t[C]){l.lanes|=i,p=l.alternate,p!==null&&(p.lanes|=i),ml(l.return,i,e),o||(f=null);break e}l=p.next}}else if(s.tag===18){if(f=s.return,f===null)throw Error(r(341));f.lanes|=i,l=f.alternate,l!==null&&(l.lanes|=i),ml(f,i,e),f=null}else f=s.child;if(f!==null)f.return=s;else for(f=s;f!==null;){if(f===e){f=null;break}if(s=f.sibling,s!==null){s.return=f.return,f=s;break}f=f.return}s=f}}function Aa(e,t,i,o){e=null;for(var s=t,l=!1;s!==null;){if(!l){if((s.flags&524288)!==0)l=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var f=s.alternate;if(f===null)throw Error(r(387));if(f=f.memoizedProps,f!==null){var p=s.type;xt(s.pendingProps.value,f.value)||(e!==null?e.push(p):e=[p])}}else if(s===pe.current){if(f=s.alternate,f===null)throw Error(r(387));f.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Qo):e=[Qo])}s=s.return}e!==null&&pl(t,e,i,o),t.flags|=262144}function Hr(e){for(e=e.firstContext;e!==null;){if(!xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ki(e){Bi=e,Nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return Hf(Bi,e)}function Lr(e,t){return Bi===null&&Ki(e),Hf(e,t)}function Hf(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Nn===null){if(e===null)throw Error(r(308));Nn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Nn=Nn.next=t;return i}var Gv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},qv=u.unstable_scheduleCallback,jv=u.unstable_NormalPriority,Qe={$$typeof:de,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yl(){return{controller:new Gv,data:new Map,refCount:0}}function vo(e){e.refCount--,e.refCount===0&&qv(jv,function(){e.controller.abort()})}var Ao=null,Cl=0,Sa=0,Ea=null;function Yv(e,t){if(Ao===null){var i=Ao=[];Cl=0,Sa=Au(),Ea={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Cl++,t.then(Lf,Lf),t}function Lf(){if(--Cl===0&&Ao!==null){Ea!==null&&(Ea.status="fulfilled");var e=Ao;Ao=null,Sa=0,Ea=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Qv(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(o.status="rejected",o.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),o}var zf=N.S;N.S=function(e,t){vm=Lt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Yv(e,t),zf!==null&&zf(e,t)};var Gi=A(null);function Tl(){var e=Gi.current;return e!==null?e:De.pooledCache}function zr(e,t){t===null?K(Gi,Gi.current):K(Gi,t.pool)}function Pf(){var e=Tl();return e===null?null:{parent:Qe._currentValue,pool:e}}var _a=Error(r(460)),vl=Error(r(474)),Pr=Error(r(542)),xr={then:function(){}};function xf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Bf(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(In,In),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gf(e),e;default:if(typeof t.status=="string")t.then(In,In);else{if(e=De,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=o}},function(o){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gf(e),e}throw ji=t,_a}}function qi(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ji=i,_a):i}}var ji=null;function Kf(){if(ji===null)throw Error(r(459));var e=ji;return ji=null,e}function Gf(e){if(e===_a||e===Pr)throw Error(r(483))}var ba=null,So=0;function Br(e){var t=So;return So+=1,ba===null&&(ba=[]),Bf(ba,e,t)}function Eo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Kr(e,t){throw t.$$typeof===k?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function qf(e){function t(E,v){if(e){var b=E.deletions;b===null?(E.deletions=[v],E.flags|=16):b.push(v)}}function i(E,v){if(!e)return null;for(;v!==null;)t(E,v),v=v.sibling;return null}function o(E){for(var v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(E,v){return E=On(E,v),E.index=0,E.sibling=null,E}function l(E,v,b){return E.index=b,e?(b=E.alternate,b!==null?(b=b.index,b<v?(E.flags|=67108866,v):b):(E.flags|=67108866,v)):(E.flags|=1048576,v)}function f(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function p(E,v,b,D){return v===null||v.tag!==6?(v=cl(b,E.mode,D),v.return=E,v):(v=s(v,b),v.return=E,v)}function C(E,v,b,D){var V=b.type;return V===F?M(E,v,b.props.children,D,b.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===nt&&qi(V)===v.type)?(v=s(v,b.props),Eo(v,b),v.return=E,v):(v=Dr(b.type,b.key,b.props,null,E.mode,D),Eo(v,b),v.return=E,v)}function w(E,v,b,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=ll(b,E.mode,D),v.return=E,v):(v=s(v,b.children||[]),v.return=E,v)}function M(E,v,b,D,V){return v===null||v.tag!==7?(v=Pi(b,E.mode,D,V),v.return=E,v):(v=s(v,b),v.return=E,v)}function U(E,v,b){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=cl(""+v,E.mode,b),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case B:return b=Dr(v.type,v.key,v.props,null,E.mode,b),Eo(b,v),b.return=E,b;case W:return v=ll(v,E.mode,b),v.return=E,v;case nt:return v=qi(v),U(E,v,b)}if(gt(v)||ft(v))return v=Pi(v,E.mode,b,null),v.return=E,v;if(typeof v.then=="function")return U(E,Br(v),b);if(v.$$typeof===de)return U(E,Lr(E,v),b);Kr(E,v)}return null}function R(E,v,b,D){var V=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return V!==null?null:p(E,v,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case B:return b.key===V?C(E,v,b,D):null;case W:return b.key===V?w(E,v,b,D):null;case nt:return b=qi(b),R(E,v,b,D)}if(gt(b)||ft(b))return V!==null?null:M(E,v,b,D,null);if(typeof b.then=="function")return R(E,v,Br(b),D);if(b.$$typeof===de)return R(E,v,Lr(E,b),D);Kr(E,b)}return null}function I(E,v,b,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return E=E.get(b)||null,p(v,E,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case B:return E=E.get(D.key===null?b:D.key)||null,C(v,E,D,V);case W:return E=E.get(D.key===null?b:D.key)||null,w(v,E,D,V);case nt:return D=qi(D),I(E,v,b,D,V)}if(gt(D)||ft(D))return E=E.get(b)||null,M(v,E,D,V,null);if(typeof D.then=="function")return I(E,v,b,Br(D),V);if(D.$$typeof===de)return I(E,v,b,Lr(v,D),V);Kr(v,D)}return null}function q(E,v,b,D){for(var V=null,ye=null,Q=v,ae=v=0,he=null;Q!==null&&ae<b.length;ae++){Q.index>ae?(he=Q,Q=null):he=Q.sibling;var Ce=R(E,Q,b[ae],D);if(Ce===null){Q===null&&(Q=he);break}e&&Q&&Ce.alternate===null&&t(E,Q),v=l(Ce,v,ae),ye===null?V=Ce:ye.sibling=Ce,ye=Ce,Q=he}if(ae===b.length)return i(E,Q),fe&&Mn(E,ae),V;if(Q===null){for(;ae<b.length;ae++)Q=U(E,b[ae],D),Q!==null&&(v=l(Q,v,ae),ye===null?V=Q:ye.sibling=Q,ye=Q);return fe&&Mn(E,ae),V}for(Q=o(Q);ae<b.length;ae++)he=I(Q,E,ae,b[ae],D),he!==null&&(e&&he.alternate!==null&&Q.delete(he.key===null?ae:he.key),v=l(he,v,ae),ye===null?V=he:ye.sibling=he,ye=he);return e&&Q.forEach(function(Ti){return t(E,Ti)}),fe&&Mn(E,ae),V}function Z(E,v,b,D){if(b==null)throw Error(r(151));for(var V=null,ye=null,Q=v,ae=v=0,he=null,Ce=b.next();Q!==null&&!Ce.done;ae++,Ce=b.next()){Q.index>ae?(he=Q,Q=null):he=Q.sibling;var Ti=R(E,Q,Ce.value,D);if(Ti===null){Q===null&&(Q=he);break}e&&Q&&Ti.alternate===null&&t(E,Q),v=l(Ti,v,ae),ye===null?V=Ti:ye.sibling=Ti,ye=Ti,Q=he}if(Ce.done)return i(E,Q),fe&&Mn(E,ae),V;if(Q===null){for(;!Ce.done;ae++,Ce=b.next())Ce=U(E,Ce.value,D),Ce!==null&&(v=l(Ce,v,ae),ye===null?V=Ce:ye.sibling=Ce,ye=Ce);return fe&&Mn(E,ae),V}for(Q=o(Q);!Ce.done;ae++,Ce=b.next())Ce=I(Q,E,ae,Ce.value,D),Ce!==null&&(e&&Ce.alternate!==null&&Q.delete(Ce.key===null?ae:Ce.key),v=l(Ce,v,ae),ye===null?V=Ce:ye.sibling=Ce,ye=Ce);return e&&Q.forEach(function(iS){return t(E,iS)}),fe&&Mn(E,ae),V}function Oe(E,v,b,D){if(typeof b=="object"&&b!==null&&b.type===F&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case B:e:{for(var V=b.key;v!==null;){if(v.key===V){if(V=b.type,V===F){if(v.tag===7){i(E,v.sibling),D=s(v,b.props.children),D.return=E,E=D;break e}}else if(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===nt&&qi(V)===v.type){i(E,v.sibling),D=s(v,b.props),Eo(D,b),D.return=E,E=D;break e}i(E,v);break}else t(E,v);v=v.sibling}b.type===F?(D=Pi(b.props.children,E.mode,D,b.key),D.return=E,E=D):(D=Dr(b.type,b.key,b.props,null,E.mode,D),Eo(D,b),D.return=E,E=D)}return f(E);case W:e:{for(V=b.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){i(E,v.sibling),D=s(v,b.children||[]),D.return=E,E=D;break e}else{i(E,v);break}else t(E,v);v=v.sibling}D=ll(b,E.mode,D),D.return=E,E=D}return f(E);case nt:return b=qi(b),Oe(E,v,b,D)}if(gt(b))return q(E,v,b,D);if(ft(b)){if(V=ft(b),typeof V!="function")throw Error(r(150));return b=V.call(b),Z(E,v,b,D)}if(typeof b.then=="function")return Oe(E,v,Br(b),D);if(b.$$typeof===de)return Oe(E,v,Lr(E,b),D);Kr(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,v!==null&&v.tag===6?(i(E,v.sibling),D=s(v,b),D.return=E,E=D):(i(E,v),D=cl(b,E.mode,D),D.return=E,E=D),f(E)):i(E,v)}return function(E,v,b,D){try{So=0;var V=Oe(E,v,b,D);return ba=null,V}catch(Q){if(Q===_a||Q===Pr)throw Q;var ye=Bt(29,Q,null,E.mode);return ye.lanes=D,ye.return=E,ye}}}var Yi=qf(!0),jf=qf(!1),ni=!1;function Al(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ii(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ai(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ve&2)!==0){var s=o.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),o.pending=t,t=Nr(e),Rf(e,null,i),t}return Mr(e,o,t,i),Nr(e)}function _o(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Ud(e,i)}}function El(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var s=null,l=null;if(i=i.firstBaseUpdate,i!==null){do{var f={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};l===null?s=l=f:l=l.next=f,i=i.next}while(i!==null);l===null?s=l=t:l=l.next=t}else s=l=t;i={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var _l=!1;function bo(){if(_l){var e=Ea;if(e!==null)throw e}}function wo(e,t,i,o){_l=!1;var s=e.updateQueue;ni=!1;var l=s.firstBaseUpdate,f=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var C=p,w=C.next;C.next=null,f===null?l=w:f.next=w,f=C;var M=e.alternate;M!==null&&(M=M.updateQueue,p=M.lastBaseUpdate,p!==f&&(p===null?M.firstBaseUpdate=w:p.next=w,M.lastBaseUpdate=C))}if(l!==null){var U=s.baseState;f=0,M=w=C=null,p=l;do{var R=p.lane&-536870913,I=R!==p.lane;if(I?(ue&R)===R:(o&R)===R){R!==0&&R===Sa&&(_l=!0),M!==null&&(M=M.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var q=e,Z=p;R=t;var Oe=i;switch(Z.tag){case 1:if(q=Z.payload,typeof q=="function"){U=q.call(Oe,U,R);break e}U=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=Z.payload,R=typeof q=="function"?q.call(Oe,U,R):q,R==null)break e;U=_({},U,R);break e;case 2:ni=!0}}R=p.callback,R!==null&&(e.flags|=64,I&&(e.flags|=8192),I=s.callbacks,I===null?s.callbacks=[R]:I.push(R))}else I={lane:R,tag:p.tag,payload:p.payload,callback:p.callback,next:null},M===null?(w=M=I,C=U):M=M.next=I,f|=R;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;I=p,p=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);M===null&&(C=U),s.baseState=C,s.firstBaseUpdate=w,s.lastBaseUpdate=M,l===null&&(s.shared.lanes=0),li|=f,e.lanes=f,e.memoizedState=U}}function Yf(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Qf(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Yf(i[e],t)}var wa=A(null),Gr=A(0);function Ff(e,t){e=Gn,K(Gr,e),K(wa,t),Gn=e|t.baseLanes}function bl(){K(Gr,Gn),K(wa,wa.current)}function wl(){Gn=Gr.current,L(wa),L(Gr)}var Kt=A(null),rn=null;function oi(e){var t=e.alternate;K(qe,qe.current&1),K(Kt,e),rn===null&&(t===null||wa.current!==null||t.memoizedState!==null)&&(rn=e)}function Rl(e){K(qe,qe.current),K(Kt,e),rn===null&&(rn=e)}function Vf(e){e.tag===22?(K(qe,qe.current),K(Kt,e),rn===null&&(rn=e)):ri()}function ri(){K(qe,qe.current),K(Kt,Kt.current)}function Gt(e){L(Kt),rn===e&&(rn=null),L(qe)}var qe=A(0);function qr(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Du(i)||Uu(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Un=0,ne=null,Ie=null,Fe=null,jr=!1,Ra=!1,Qi=!1,Yr=0,Ro=0,Ia=null,Fv=0;function xe(){throw Error(r(321))}function Il(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!xt(e[i],t[i]))return!1;return!0}function kl(e,t,i,o,s,l){return Un=l,ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Mg:jl,Qi=!1,l=i(o,s),Qi=!1,Ra&&(l=Jf(t,i,o,s)),Xf(e),l}function Xf(e){N.H=Oo;var t=Ie!==null&&Ie.next!==null;if(Un=0,Fe=Ie=ne=null,jr=!1,Ro=0,Ia=null,t)throw Error(r(300));e===null||Ve||(e=e.dependencies,e!==null&&Hr(e)&&(Ve=!0))}function Jf(e,t,i,o){ne=e;var s=0;do{if(Ra&&(Ia=null),Ro=0,Ra=!1,25<=s)throw Error(r(301));if(s+=1,Fe=Ie=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}N.H=Ng,l=t(i,o)}while(Ra);return l}function Vv(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?Io(t):t,e=e.useState()[0],(Ie!==null?Ie.memoizedState:null)!==e&&(ne.flags|=1024),t}function Ol(){var e=Yr!==0;return Yr=0,e}function Ml(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Nl(e){if(jr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}jr=!1}Un=0,Fe=Ie=ne=null,Ra=!1,Ro=Yr=0,Ia=null}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ne.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function je(){if(Ie===null){var e=ne.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=Fe===null?ne.memoizedState:Fe.next;if(t!==null)Fe=t,Ie=e;else{if(e===null)throw ne.alternate===null?Error(r(467)):Error(r(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Fe===null?ne.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Qr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Io(e){var t=Ro;return Ro+=1,Ia===null&&(Ia=[]),e=Bf(Ia,e,t),t=ne,(Fe===null?t.memoizedState:Fe.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Mg:jl),e}function Fr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Io(e);if(e.$$typeof===de)return rt(e)}throw Error(r(438,String(e)))}function Dl(e){var t=null,i=ne.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Qr(),ne.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=wn;return t.index++,i}function Hn(e,t){return typeof t=="function"?t(e):t}function Vr(e){var t=je();return Ul(t,Ie,e)}function Ul(e,t,i){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var s=e.baseQueue,l=o.pending;if(l!==null){if(s!==null){var f=s.next;s.next=l.next,l.next=f}t.baseQueue=s=l,o.pending=null}if(l=e.baseState,s===null)e.memoizedState=l;else{t=s.next;var p=f=null,C=null,w=t,M=!1;do{var U=w.lane&-536870913;if(U!==w.lane?(ue&U)===U:(Un&U)===U){var R=w.revertLane;if(R===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),U===Sa&&(M=!0);else if((Un&R)===R){w=w.next,R===Sa&&(M=!0);continue}else U={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},C===null?(p=C=U,f=l):C=C.next=U,ne.lanes|=R,li|=R;U=w.action,Qi&&i(l,U),l=w.hasEagerState?w.eagerState:i(l,U)}else R={lane:U,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},C===null?(p=C=R,f=l):C=C.next=R,ne.lanes|=U,li|=U;w=w.next}while(w!==null&&w!==t);if(C===null?f=l:C.next=p,!xt(l,e.memoizedState)&&(Ve=!0,M&&(i=Ea,i!==null)))throw i;e.memoizedState=l,e.baseState=f,e.baseQueue=C,o.lastRenderedState=l}return s===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Hl(e){var t=je(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var o=i.dispatch,s=i.pending,l=t.memoizedState;if(s!==null){i.pending=null;var f=s=s.next;do l=e(l,f.action),f=f.next;while(f!==s);xt(l,t.memoizedState)||(Ve=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),i.lastRenderedState=l}return[l,o]}function Zf(e,t,i){var o=ne,s=je(),l=fe;if(l){if(i===void 0)throw Error(r(407));i=i()}else i=t();var f=!xt((Ie||s).memoizedState,i);if(f&&(s.memoizedState=i,Ve=!0),s=s.queue,Pl(eg.bind(null,o,s,e),[e]),s.getSnapshot!==t||f||Fe!==null&&Fe.memoizedState.tag&1){if(o.flags|=2048,ka(9,{destroy:void 0},Wf.bind(null,o,s,i,t),null),De===null)throw Error(r(349));l||(Un&127)!==0||$f(o,t,i)}return i}function $f(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=ne.updateQueue,t===null?(t=Qr(),ne.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Wf(e,t,i,o){t.value=i,t.getSnapshot=o,tg(t)&&ng(e)}function eg(e,t,i){return i(function(){tg(t)&&ng(e)})}function tg(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!xt(e,i)}catch{return!0}}function ng(e){var t=zi(e,2);t!==null&&Mt(t,e,2)}function Ll(e){var t=vt();if(typeof e=="function"){var i=e;if(e=i(),Qi){Xn(!0);try{i()}finally{Xn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},t}function ig(e,t,i,o){return e.baseState=i,Ul(e,Ie,typeof o=="function"?o:Hn)}function Xv(e,t,i,o,s){if(Zr(e))throw Error(r(485));if(e=t.action,e!==null){var l={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){l.listeners.push(f)}};N.T!==null?i(!0):l.isTransition=!1,o(l),i=t.pending,i===null?(l.next=t.pending=l,ag(t,l)):(l.next=i.next,t.pending=i.next=l)}}function ag(e,t){var i=t.action,o=t.payload,s=e.state;if(t.isTransition){var l=N.T,f={};N.T=f;try{var p=i(s,o),C=N.S;C!==null&&C(f,p),og(e,t,p)}catch(w){zl(e,t,w)}finally{l!==null&&f.types!==null&&(l.types=f.types),N.T=l}}else try{l=i(s,o),og(e,t,l)}catch(w){zl(e,t,w)}}function og(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){rg(e,t,o)},function(o){return zl(e,t,o)}):rg(e,t,i)}function rg(e,t,i){t.status="fulfilled",t.value=i,sg(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ag(e,i)))}function zl(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,sg(t),t=t.next;while(t!==o)}e.action=null}function sg(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cg(e,t){return t}function lg(e,t){if(fe){var i=De.formState;if(i!==null){e:{var o=ne;if(fe){if(Ue){t:{for(var s=Ue,l=on;s.nodeType!==8;){if(!l){s=null;break t}if(s=sn(s.nextSibling),s===null){s=null;break t}}l=s.data,s=l==="F!"||l==="F"?s:null}if(s){Ue=sn(s.nextSibling),o=s.data==="F!";break e}}ei(o)}o=!1}o&&(t=i[0])}}return i=vt(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cg,lastRenderedState:t},i.queue=o,i=Ig.bind(null,ne,o),o.dispatch=i,o=Ll(!1),l=ql.bind(null,ne,!1,o.queue),o=vt(),s={state:t,dispatch:null,action:e,pending:null},o.queue=s,i=Xv.bind(null,ne,s,l,i),s.dispatch=i,o.memoizedState=e,[t,i,!1]}function ug(e){var t=je();return hg(t,Ie,e)}function hg(e,t,i){if(t=Ul(e,t,cg)[0],e=Vr(Hn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Io(t)}catch(f){throw f===_a?Pr:f}else o=t;t=je();var s=t.queue,l=s.dispatch;return i!==t.memoizedState&&(ne.flags|=2048,ka(9,{destroy:void 0},Jv.bind(null,s,i),null)),[o,l,e]}function Jv(e,t){e.action=t}function dg(e){var t=je(),i=Ie;if(i!==null)return hg(t,i,e);je(),t=t.memoizedState,i=je();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function ka(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=ne.updateQueue,t===null&&(t=Qr(),ne.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function fg(){return je().memoizedState}function Xr(e,t,i,o){var s=vt();ne.flags|=e,s.memoizedState=ka(1|t,{destroy:void 0},i,o===void 0?null:o)}function Jr(e,t,i,o){var s=je();o=o===void 0?null:o;var l=s.memoizedState.inst;Ie!==null&&o!==null&&Il(o,Ie.memoizedState.deps)?s.memoizedState=ka(t,l,i,o):(ne.flags|=e,s.memoizedState=ka(1|t,l,i,o))}function gg(e,t){Xr(8390656,8,e,t)}function Pl(e,t){Jr(2048,8,e,t)}function Zv(e){ne.flags|=4;var t=ne.updateQueue;if(t===null)t=Qr(),ne.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function mg(e){var t=je().memoizedState;return Zv({ref:t,nextImpl:e}),function(){if((ve&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function pg(e,t){return Jr(4,2,e,t)}function yg(e,t){return Jr(4,4,e,t)}function Cg(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tg(e,t,i){i=i!=null?i.concat([e]):null,Jr(4,4,Cg.bind(null,t,e),i)}function xl(){}function vg(e,t){var i=je();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Il(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Ag(e,t){var i=je();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Il(t,o[1]))return o[0];if(o=e(),Qi){Xn(!0);try{e()}finally{Xn(!1)}}return i.memoizedState=[o,t],o}function Bl(e,t,i){return i===void 0||(Un&1073741824)!==0&&(ue&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Sm(),ne.lanes|=e,li|=e,i)}function Sg(e,t,i,o){return xt(i,t)?i:wa.current!==null?(e=Bl(e,i,o),xt(e,t)||(Ve=!0),e):(Un&42)===0||(Un&1073741824)!==0&&(ue&261930)===0?(Ve=!0,e.memoizedState=i):(e=Sm(),ne.lanes|=e,li|=e,t)}function Eg(e,t,i,o,s){var l=x.p;x.p=l!==0&&8>l?l:8;var f=N.T,p={};N.T=p,ql(e,!1,t,i);try{var C=s(),w=N.S;if(w!==null&&w(p,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var M=Qv(C,o);ko(e,t,M,Yt(e))}else ko(e,t,o,Yt(e))}catch(U){ko(e,t,{then:function(){},status:"rejected",reason:U},Yt())}finally{x.p=l,f!==null&&p.types!==null&&(f.types=p.types),N.T=f}}function $v(){}function Kl(e,t,i,o){if(e.tag!==5)throw Error(r(476));var s=_g(e).queue;Eg(e,s,t,X,i===null?$v:function(){return bg(e),i(o)})}function _g(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:X},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function bg(e){var t=_g(e);t.next===null&&(t=e.alternate.memoizedState),ko(e,t.next.queue,{},Yt())}function Gl(){return rt(Qo)}function wg(){return je().memoizedState}function Rg(){return je().memoizedState}function Wv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Yt();e=ii(i);var o=ai(t,e,i);o!==null&&(Mt(o,t,i),_o(o,t,i)),t={cache:yl()},e.payload=t;return}t=t.return}}function eA(e,t,i){var o=Yt();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Zr(e)?kg(t,i):(i=rl(e,t,i,o),i!==null&&(Mt(i,e,o),Og(i,t,o)))}function Ig(e,t,i){var o=Yt();ko(e,t,i,o)}function ko(e,t,i,o){var s={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Zr(e))kg(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,p=l(f,i);if(s.hasEagerState=!0,s.eagerState=p,xt(p,f))return Mr(e,t,s,0),De===null&&Or(),!1}catch{}if(i=rl(e,t,s,o),i!==null)return Mt(i,e,o),Og(i,t,o),!0}return!1}function ql(e,t,i,o){if(o={lane:2,revertLane:Au(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zr(e)){if(t)throw Error(r(479))}else t=rl(e,i,o,2),t!==null&&Mt(t,e,2)}function Zr(e){var t=e.alternate;return e===ne||t!==null&&t===ne}function kg(e,t){Ra=jr=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Og(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Ud(e,i)}}var Oo={readContext:rt,use:Fr,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe};Oo.useEffectEvent=xe;var Mg={readContext:rt,use:Fr,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:gg,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Xr(4194308,4,Cg.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Xr(4194308,4,e,t)},useInsertionEffect:function(e,t){Xr(4,2,e,t)},useMemo:function(e,t){var i=vt();t=t===void 0?null:t;var o=e();if(Qi){Xn(!0);try{e()}finally{Xn(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=vt();if(i!==void 0){var s=i(t);if(Qi){Xn(!0);try{i(t)}finally{Xn(!1)}}}else s=t;return o.memoizedState=o.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},o.queue=e,e=e.dispatch=eA.bind(null,ne,e),[o.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ll(e);var t=e.queue,i=Ig.bind(null,ne,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:xl,useDeferredValue:function(e,t){var i=vt();return Bl(i,e,t)},useTransition:function(){var e=Ll(!1);return e=Eg.bind(null,ne,e.queue,!0,!1),vt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=ne,s=vt();if(fe){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),De===null)throw Error(r(349));(ue&127)!==0||$f(o,t,i)}s.memoizedState=i;var l={value:i,getSnapshot:t};return s.queue=l,gg(eg.bind(null,o,l,e),[e]),o.flags|=2048,ka(9,{destroy:void 0},Wf.bind(null,o,l,i,t),null),i},useId:function(){var e=vt(),t=De.identifierPrefix;if(fe){var i=Tn,o=Cn;i=(o&~(1<<32-Pt(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Yr++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=Fv++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Gl,useFormState:lg,useActionState:lg,useOptimistic:function(e){var t=vt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=ql.bind(null,ne,!0,i),i.dispatch=t,[e,t]},useMemoCache:Dl,useCacheRefresh:function(){return vt().memoizedState=Wv.bind(null,ne)},useEffectEvent:function(e){var t=vt(),i={impl:e};return t.memoizedState=i,function(){if((ve&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},jl={readContext:rt,use:Fr,useCallback:vg,useContext:rt,useEffect:Pl,useImperativeHandle:Tg,useInsertionEffect:pg,useLayoutEffect:yg,useMemo:Ag,useReducer:Vr,useRef:fg,useState:function(){return Vr(Hn)},useDebugValue:xl,useDeferredValue:function(e,t){var i=je();return Sg(i,Ie.memoizedState,e,t)},useTransition:function(){var e=Vr(Hn)[0],t=je().memoizedState;return[typeof e=="boolean"?e:Io(e),t]},useSyncExternalStore:Zf,useId:wg,useHostTransitionStatus:Gl,useFormState:ug,useActionState:ug,useOptimistic:function(e,t){var i=je();return ig(i,Ie,e,t)},useMemoCache:Dl,useCacheRefresh:Rg};jl.useEffectEvent=mg;var Ng={readContext:rt,use:Fr,useCallback:vg,useContext:rt,useEffect:Pl,useImperativeHandle:Tg,useInsertionEffect:pg,useLayoutEffect:yg,useMemo:Ag,useReducer:Hl,useRef:fg,useState:function(){return Hl(Hn)},useDebugValue:xl,useDeferredValue:function(e,t){var i=je();return Ie===null?Bl(i,e,t):Sg(i,Ie.memoizedState,e,t)},useTransition:function(){var e=Hl(Hn)[0],t=je().memoizedState;return[typeof e=="boolean"?e:Io(e),t]},useSyncExternalStore:Zf,useId:wg,useHostTransitionStatus:Gl,useFormState:dg,useActionState:dg,useOptimistic:function(e,t){var i=je();return Ie!==null?ig(i,Ie,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Dl,useCacheRefresh:Rg};Ng.useEffectEvent=mg;function Yl(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:_({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ql={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Yt(),s=ii(o);s.payload=t,i!=null&&(s.callback=i),t=ai(e,s,o),t!==null&&(Mt(t,e,o),_o(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Yt(),s=ii(o);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=ai(e,s,o),t!==null&&(Mt(t,e,o),_o(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Yt(),o=ii(i);o.tag=2,t!=null&&(o.callback=t),t=ai(e,o,i),t!==null&&(Mt(t,e,i),_o(t,e,i))}};function Dg(e,t,i,o,s,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,l,f):t.prototype&&t.prototype.isPureReactComponent?!po(i,o)||!po(s,l):!0}function Ug(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Ql.enqueueReplaceState(t,t.state,null)}function Fi(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=_({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}function Hg(e){kr(e)}function Lg(e){console.error(e)}function zg(e){kr(e)}function $r(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Pg(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Fl(e,t,i){return i=ii(i),i.tag=3,i.payload={element:null},i.callback=function(){$r(e,t)},i}function xg(e){return e=ii(e),e.tag=3,e}function Bg(e,t,i,o){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var l=o.value;e.payload=function(){return s(l)},e.callback=function(){Pg(t,i,o)}}var f=i.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){Pg(t,i,o),typeof s!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var p=o.stack;this.componentDidCatch(o.value,{componentStack:p!==null?p:""})})}function tA(e,t,i,o,s){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Aa(t,i,s,!0),i=Kt.current,i!==null){switch(i.tag){case 31:case 13:return rn===null?us():i.alternate===null&&Be===0&&(Be=3),i.flags&=-257,i.flags|=65536,i.lanes=s,o===xr?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),Cu(e,o,s)),!1;case 22:return i.flags|=65536,o===xr?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),Cu(e,o,s)),!1}throw Error(r(435,i.tag))}return Cu(e,o,s),us(),!1}if(fe)return t=Kt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,o!==dl&&(e=Error(r(422),{cause:o}),To(tn(e,i)))):(o!==dl&&(t=Error(r(423),{cause:o}),To(tn(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,o=tn(o,i),s=Fl(e.stateNode,o,s),El(e,s),Be!==4&&(Be=2)),!1;var l=Error(r(520),{cause:o});if(l=tn(l,i),Po===null?Po=[l]:Po.push(l),Be!==4&&(Be=2),t===null)return!0;o=tn(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=Fl(i.stateNode,o,e),El(i,e),!1;case 1:if(t=i.type,l=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(ui===null||!ui.has(l))))return i.flags|=65536,s&=-s,i.lanes|=s,s=xg(s),Bg(s,e,i,o),El(i,s),!1}i=i.return}while(i!==null);return!1}var Vl=Error(r(461)),Ve=!1;function st(e,t,i,o){t.child=e===null?jf(t,null,i,o):Yi(t,e.child,i,o)}function Kg(e,t,i,o,s){i=i.render;var l=t.ref;if("ref"in o){var f={};for(var p in o)p!=="ref"&&(f[p]=o[p])}else f=o;return Ki(t),o=kl(e,t,i,f,l,s),p=Ol(),e!==null&&!Ve?(Ml(e,t,s),Ln(e,t,s)):(fe&&p&&ul(t),t.flags|=1,st(e,t,o,s),t.child)}function Gg(e,t,i,o,s){if(e===null){var l=i.type;return typeof l=="function"&&!sl(l)&&l.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=l,qg(e,t,l,o,s)):(e=Dr(i.type,null,o,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!nu(e,s)){var f=l.memoizedProps;if(i=i.compare,i=i!==null?i:po,i(f,o)&&e.ref===t.ref)return Ln(e,t,s)}return t.flags|=1,e=On(l,o),e.ref=t.ref,e.return=t,t.child=e}function qg(e,t,i,o,s){if(e!==null){var l=e.memoizedProps;if(po(l,o)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=o=l,nu(e,s))(e.flags&131072)!==0&&(Ve=!0);else return t.lanes=e.lanes,Ln(e,t,s)}return Xl(e,t,i,o,s)}function jg(e,t,i,o){var s=o.children,l=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(l=l!==null?l.baseLanes|i:i,e!==null){for(o=t.child=e.child,s=0;o!==null;)s=s|o.lanes|o.childLanes,o=o.sibling;o=s&~l}else o=0,t.child=null;return Yg(e,t,l,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&zr(t,l!==null?l.cachePool:null),l!==null?Ff(t,l):bl(),Vf(t);else return o=t.lanes=536870912,Yg(e,t,l!==null?l.baseLanes|i:i,i,o)}else l!==null?(zr(t,l.cachePool),Ff(t,l),ri(),t.memoizedState=null):(e!==null&&zr(t,null),bl(),ri());return st(e,t,s,i),t.child}function Mo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Yg(e,t,i,o,s){var l=Tl();return l=l===null?null:{parent:Qe._currentValue,pool:l},t.memoizedState={baseLanes:i,cachePool:l},e!==null&&zr(t,null),bl(),Vf(t),e!==null&&Aa(e,t,o,!0),t.childLanes=s,null}function Wr(e,t){return t=ts({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Qg(e,t,i){return Yi(t,e.child,null,i),e=Wr(t,t.pendingProps),e.flags|=2,Gt(t),t.memoizedState=null,e}function nA(e,t,i){var o=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(fe){if(o.mode==="hidden")return e=Wr(t,o),t.lanes=536870912,Mo(null,e);if(Rl(t),(e=Ue)?(e=ap(e,on),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:$n!==null?{id:Cn,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},i=kf(e),i.return=t,t.child=i,ot=t,Ue=null)):e=null,e===null)throw ei(t);return t.lanes=536870912,null}return Wr(t,o)}var l=e.memoizedState;if(l!==null){var f=l.dehydrated;if(Rl(t),s)if(t.flags&256)t.flags&=-257,t=Qg(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(Ve||Aa(e,t,i,!1),s=(i&e.childLanes)!==0,Ve||s){if(o=De,o!==null&&(f=Hd(o,i),f!==0&&f!==l.retryLane))throw l.retryLane=f,zi(e,f),Mt(o,e,f),Vl;us(),t=Qg(e,t,i)}else e=l.treeContext,Ue=sn(f.nextSibling),ot=t,fe=!0,Wn=null,on=!1,e!==null&&Nf(t,e),t=Wr(t,o),t.flags|=4096;return t}return e=On(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function es(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Xl(e,t,i,o,s){return Ki(t),i=kl(e,t,i,o,void 0,s),o=Ol(),e!==null&&!Ve?(Ml(e,t,s),Ln(e,t,s)):(fe&&o&&ul(t),t.flags|=1,st(e,t,i,s),t.child)}function Fg(e,t,i,o,s,l){return Ki(t),t.updateQueue=null,i=Jf(t,o,i,s),Xf(e),o=Ol(),e!==null&&!Ve?(Ml(e,t,l),Ln(e,t,l)):(fe&&o&&ul(t),t.flags|=1,st(e,t,i,l),t.child)}function Vg(e,t,i,o,s){if(Ki(t),t.stateNode===null){var l=ya,f=i.contextType;typeof f=="object"&&f!==null&&(l=rt(f)),l=new i(o,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Ql,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=o,l.state=t.memoizedState,l.refs={},Al(t),f=i.contextType,l.context=typeof f=="object"&&f!==null?rt(f):ya,l.state=t.memoizedState,f=i.getDerivedStateFromProps,typeof f=="function"&&(Yl(t,i,f,o),l.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(f=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),f!==l.state&&Ql.enqueueReplaceState(l,l.state,null),wo(t,o,l,s),bo(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){l=t.stateNode;var p=t.memoizedProps,C=Fi(i,p);l.props=C;var w=l.context,M=i.contextType;f=ya,typeof M=="object"&&M!==null&&(f=rt(M));var U=i.getDerivedStateFromProps;M=typeof U=="function"||typeof l.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,M||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p||w!==f)&&Ug(t,l,o,f),ni=!1;var R=t.memoizedState;l.state=R,wo(t,o,l,s),bo(),w=t.memoizedState,p||R!==w||ni?(typeof U=="function"&&(Yl(t,i,U,o),w=t.memoizedState),(C=ni||Dg(t,i,C,o,R,w,f))?(M||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=w),l.props=o,l.state=w,l.context=f,o=C):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{l=t.stateNode,Sl(e,t),f=t.memoizedProps,M=Fi(i,f),l.props=M,U=t.pendingProps,R=l.context,w=i.contextType,C=ya,typeof w=="object"&&w!==null&&(C=rt(w)),p=i.getDerivedStateFromProps,(w=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==U||R!==C)&&Ug(t,l,o,C),ni=!1,R=t.memoizedState,l.state=R,wo(t,o,l,s),bo();var I=t.memoizedState;f!==U||R!==I||ni||e!==null&&e.dependencies!==null&&Hr(e.dependencies)?(typeof p=="function"&&(Yl(t,i,p,o),I=t.memoizedState),(M=ni||Dg(t,i,M,o,R,I,C)||e!==null&&e.dependencies!==null&&Hr(e.dependencies))?(w||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,I,C),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,I,C)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=I),l.props=o,l.state=I,l.context=C,o=M):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),o=!1)}return l=o,es(e,t),o=(t.flags&128)!==0,l||o?(l=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&o?(t.child=Yi(t,e.child,null,s),t.child=Yi(t,null,i,s)):st(e,t,i,s),t.memoizedState=l.state,e=t.child):e=Ln(e,t,s),e}function Xg(e,t,i,o){return xi(),t.flags|=256,st(e,t,i,o),t.child}var Jl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zl(e){return{baseLanes:e,cachePool:Pf()}}function $l(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=jt),e}function Jg(e,t,i){var o=t.pendingProps,s=!1,l=(t.flags&128)!==0,f;if((f=l)||(f=e!==null&&e.memoizedState===null?!1:(qe.current&2)!==0),f&&(s=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(fe){if(s?oi(t):ri(),(e=Ue)?(e=ap(e,on),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:$n!==null?{id:Cn,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},i=kf(e),i.return=t,t.child=i,ot=t,Ue=null)):e=null,e===null)throw ei(t);return Uu(e)?t.lanes=32:t.lanes=536870912,null}var p=o.children;return o=o.fallback,s?(ri(),s=t.mode,p=ts({mode:"hidden",children:p},s),o=Pi(o,s,i,null),p.return=t,o.return=t,p.sibling=o,t.child=p,o=t.child,o.memoizedState=Zl(i),o.childLanes=$l(e,f,i),t.memoizedState=Jl,Mo(null,o)):(oi(t),Wl(t,p))}var C=e.memoizedState;if(C!==null&&(p=C.dehydrated,p!==null)){if(l)t.flags&256?(oi(t),t.flags&=-257,t=eu(e,t,i)):t.memoizedState!==null?(ri(),t.child=e.child,t.flags|=128,t=null):(ri(),p=o.fallback,s=t.mode,o=ts({mode:"visible",children:o.children},s),p=Pi(p,s,i,null),p.flags|=2,o.return=t,p.return=t,o.sibling=p,t.child=o,Yi(t,e.child,null,i),o=t.child,o.memoizedState=Zl(i),o.childLanes=$l(e,f,i),t.memoizedState=Jl,t=Mo(null,o));else if(oi(t),Uu(p)){if(f=p.nextSibling&&p.nextSibling.dataset,f)var w=f.dgst;f=w,o=Error(r(419)),o.stack="",o.digest=f,To({value:o,source:null,stack:null}),t=eu(e,t,i)}else if(Ve||Aa(e,t,i,!1),f=(i&e.childLanes)!==0,Ve||f){if(f=De,f!==null&&(o=Hd(f,i),o!==0&&o!==C.retryLane))throw C.retryLane=o,zi(e,o),Mt(f,e,o),Vl;Du(p)||us(),t=eu(e,t,i)}else Du(p)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Ue=sn(p.nextSibling),ot=t,fe=!0,Wn=null,on=!1,e!==null&&Nf(t,e),t=Wl(t,o.children),t.flags|=4096);return t}return s?(ri(),p=o.fallback,s=t.mode,C=e.child,w=C.sibling,o=On(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,w!==null?p=On(w,p):(p=Pi(p,s,i,null),p.flags|=2),p.return=t,o.return=t,o.sibling=p,t.child=o,Mo(null,o),o=t.child,p=e.child.memoizedState,p===null?p=Zl(i):(s=p.cachePool,s!==null?(C=Qe._currentValue,s=s.parent!==C?{parent:C,pool:C}:s):s=Pf(),p={baseLanes:p.baseLanes|i,cachePool:s}),o.memoizedState=p,o.childLanes=$l(e,f,i),t.memoizedState=Jl,Mo(e.child,o)):(oi(t),i=e.child,e=i.sibling,i=On(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=i,t.memoizedState=null,i)}function Wl(e,t){return t=ts({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ts(e,t){return e=Bt(22,e,null,t),e.lanes=0,e}function eu(e,t,i){return Yi(t,e.child,null,i),e=Wl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zg(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),ml(e.return,t,i)}function tu(e,t,i,o,s,l){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:s,treeForkCount:l}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=i,f.tailMode=s,f.treeForkCount=l)}function $g(e,t,i){var o=t.pendingProps,s=o.revealOrder,l=o.tail;o=o.children;var f=qe.current,p=(f&2)!==0;if(p?(f=f&1|2,t.flags|=128):f&=1,K(qe,f),st(e,t,o,i),o=fe?Co:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zg(e,i,t);else if(e.tag===19)Zg(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&qr(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),tu(t,!1,s,i,l,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qr(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}tu(t,!0,i,null,l,o);break;case"together":tu(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Ln(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),li|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Aa(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=On(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=On(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function nu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Hr(e)))}function iA(e,t,i){switch(t.tag){case 3:it(t,t.stateNode.containerInfo),ti(t,Qe,e.memoizedState.cache),xi();break;case 27:case 5:me(t);break;case 4:it(t,t.stateNode.containerInfo);break;case 10:ti(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Rl(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(oi(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Jg(e,t,i):(oi(t),e=Ln(e,t,i),e!==null?e.sibling:null);oi(t);break;case 19:var s=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Aa(e,t,i,!1),o=(i&t.childLanes)!==0),s){if(o)return $g(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(qe,qe.current),o)break;return null;case 22:return t.lanes=0,jg(e,t,i,t.pendingProps);case 24:ti(t,Qe,e.memoizedState.cache)}return Ln(e,t,i)}function Wg(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ve=!0;else{if(!nu(e,i)&&(t.flags&128)===0)return Ve=!1,iA(e,t,i);Ve=(e.flags&131072)!==0}else Ve=!1,fe&&(t.flags&1048576)!==0&&Mf(t,Co,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=qi(t.elementType),t.type=e,typeof e=="function")sl(e)?(o=Fi(e,o),t.tag=1,t=Vg(null,t,e,o,i)):(t.tag=0,t=Xl(null,t,e,o,i));else{if(e!=null){var s=e.$$typeof;if(s===Le){t.tag=11,t=Kg(null,t,e,o,i);break e}else if(s===ie){t.tag=14,t=Gg(null,t,e,o,i);break e}}throw t=Zt(e)||e,Error(r(306,t,""))}}return t;case 0:return Xl(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,s=Fi(o,t.pendingProps),Vg(e,t,o,s,i);case 3:e:{if(it(t,t.stateNode.containerInfo),e===null)throw Error(r(387));o=t.pendingProps;var l=t.memoizedState;s=l.element,Sl(e,t),wo(t,o,null,i);var f=t.memoizedState;if(o=f.cache,ti(t,Qe,o),o!==l.cache&&pl(t,[Qe],i,!0),bo(),o=f.element,l.isDehydrated)if(l={element:o,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Xg(e,t,o,i);break e}else if(o!==s){s=tn(Error(r(424)),t),To(s),t=Xg(e,t,o,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ue=sn(e.firstChild),ot=t,fe=!0,Wn=null,on=!0,i=jf(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(xi(),o===s){t=Ln(e,t,i);break e}st(e,t,o,i)}t=t.child}return t;case 26:return es(e,t),e===null?(i=up(t.type,null,t.pendingProps,null))?t.memoizedState=i:fe||(i=t.type,e=t.pendingProps,o=ys(re.current).createElement(i),o[at]=t,o[bt]=e,ct(o,i,e),et(o),t.stateNode=o):t.memoizedState=up(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return me(t),e===null&&fe&&(o=t.stateNode=sp(t.type,t.pendingProps,re.current),ot=t,on=!0,s=Ue,gi(t.type)?(Hu=s,Ue=sn(o.firstChild)):Ue=s),st(e,t,t.pendingProps.children,i),es(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&fe&&((s=o=Ue)&&(o=DA(o,t.type,t.pendingProps,on),o!==null?(t.stateNode=o,ot=t,Ue=sn(o.firstChild),on=!1,s=!0):s=!1),s||ei(t)),me(t),s=t.type,l=t.pendingProps,f=e!==null?e.memoizedProps:null,o=l.children,Ou(s,l)?o=null:f!==null&&Ou(s,f)&&(t.flags|=32),t.memoizedState!==null&&(s=kl(e,t,Vv,null,null,i),Qo._currentValue=s),es(e,t),st(e,t,o,i),t.child;case 6:return e===null&&fe&&((e=i=Ue)&&(i=UA(i,t.pendingProps,on),i!==null?(t.stateNode=i,ot=t,Ue=null,e=!0):e=!1),e||ei(t)),null;case 13:return Jg(e,t,i);case 4:return it(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Yi(t,null,o,i):st(e,t,o,i),t.child;case 11:return Kg(e,t,t.type,t.pendingProps,i);case 7:return st(e,t,t.pendingProps,i),t.child;case 8:return st(e,t,t.pendingProps.children,i),t.child;case 12:return st(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,ti(t,t.type,o.value),st(e,t,o.children,i),t.child;case 9:return s=t.type._context,o=t.pendingProps.children,Ki(t),s=rt(s),o=o(s),t.flags|=1,st(e,t,o,i),t.child;case 14:return Gg(e,t,t.type,t.pendingProps,i);case 15:return qg(e,t,t.type,t.pendingProps,i);case 19:return $g(e,t,i);case 31:return nA(e,t,i);case 22:return jg(e,t,i,t.pendingProps);case 24:return Ki(t),o=rt(Qe),e===null?(s=Tl(),s===null&&(s=De,l=yl(),s.pooledCache=l,l.refCount++,l!==null&&(s.pooledCacheLanes|=i),s=l),t.memoizedState={parent:o,cache:s},Al(t),ti(t,Qe,s)):((e.lanes&i)!==0&&(Sl(e,t),wo(t,null,null,i),bo()),s=e.memoizedState,l=t.memoizedState,s.parent!==o?(s={parent:o,cache:o},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),ti(t,Qe,o)):(o=l.cache,ti(t,Qe,o),o!==s.cache&&pl(t,[Qe],i,!0))),st(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function zn(e){e.flags|=4}function iu(e,t,i,o,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(wm())e.flags|=8192;else throw ji=xr,vl}else e.flags&=-16777217}function em(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!mp(t))if(wm())e.flags|=8192;else throw ji=xr,vl}function ns(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Nd():536870912,e.lanes|=t,Da|=t)}function No(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags&65011712,o|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function aA(e,t,i){var o=t.pendingProps;switch(hl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return He(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Dn(Qe),P(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(va(t)?zn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,fl())),He(t),null;case 26:var s=t.type,l=t.memoizedState;return e===null?(zn(t),l!==null?(He(t),em(t,l)):(He(t),iu(t,s,null,o,i))):l?l!==e.memoizedState?(zn(t),He(t),em(t,l)):(He(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&zn(t),He(t),iu(t,s,e,o,i)),null;case 27:if(un(t),i=re.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&zn(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return He(t),null}e=j.current,va(t)?Df(t):(e=sp(s,o,i),t.stateNode=e,zn(t))}return He(t),null;case 5:if(un(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&zn(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return He(t),null}if(l=j.current,va(t))Df(t);else{var f=ys(re.current);switch(l){case 1:l=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:l=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":l=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":l=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":l=f.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof o.is=="string"?f.createElement("select",{is:o.is}):f.createElement("select"),o.multiple?l.multiple=!0:o.size&&(l.size=o.size);break;default:l=typeof o.is=="string"?f.createElement(s,{is:o.is}):f.createElement(s)}}l[at]=t,l[bt]=o;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=l;e:switch(ct(l,s,o),s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&zn(t)}}return He(t),iu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&zn(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(r(166));if(e=re.current,va(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,s=ot,s!==null)switch(s.tag){case 27:case 5:o=s.memoizedProps}e[at]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Jm(e.nodeValue,i)),e||ei(t,!0)}else e=ys(e).createTextNode(o),e[at]=t,t.stateNode=e}return He(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=va(t),i!==null){if(e===null){if(!o)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[at]=t}else xi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),e=!1}else i=fl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Gt(t),t):(Gt(t),null);if((t.flags&128)!==0)throw Error(r(558))}return He(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=va(t),o!==null&&o.dehydrated!==null){if(e===null){if(!s)throw Error(r(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));s[at]=t}else xi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),s=!1}else s=fl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Gt(t),t):(Gt(t),null)}return Gt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,s=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(s=o.alternate.memoizedState.cachePool.pool),l=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),l!==s&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),ns(t,t.updateQueue),He(t),null);case 4:return P(),e===null&&bu(t.stateNode.containerInfo),He(t),null;case 10:return Dn(t.type),He(t),null;case 19:if(L(qe),o=t.memoizedState,o===null)return He(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)No(o,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(l=qr(e),l!==null){for(t.flags|=128,No(o,!1),e=l.updateQueue,t.updateQueue=e,ns(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)If(i,e),i=i.sibling;return K(qe,qe.current&1|2),fe&&Mn(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&Lt()>ss&&(t.flags|=128,s=!0,No(o,!1),t.lanes=4194304)}else{if(!s)if(e=qr(l),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,ns(t,e),No(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!fe)return He(t),null}else 2*Lt()-o.renderingStartTime>ss&&i!==536870912&&(t.flags|=128,s=!0,No(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Lt(),e.sibling=null,i=qe.current,K(qe,s?i&1|2:i&1),fe&&Mn(t,o.treeForkCount),e):(He(t),null);case 22:case 23:return Gt(t),wl(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),i=t.updateQueue,i!==null&&ns(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&L(Gi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Dn(Qe),He(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function oA(e,t){switch(hl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dn(Qe),P(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return un(t),null;case 31:if(t.memoizedState!==null){if(Gt(t),t.alternate===null)throw Error(r(340));xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Gt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(qe),null;case 4:return P(),null;case 10:return Dn(t.type),null;case 22:case 23:return Gt(t),wl(),e!==null&&L(Gi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Dn(Qe),null;case 25:return null;default:return null}}function tm(e,t){switch(hl(t),t.tag){case 3:Dn(Qe),P();break;case 26:case 27:case 5:un(t);break;case 4:P();break;case 31:t.memoizedState!==null&&Gt(t);break;case 13:Gt(t);break;case 19:L(qe);break;case 10:Dn(t.type);break;case 22:case 23:Gt(t),wl(),e!==null&&L(Gi);break;case 24:Dn(Qe)}}function Do(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&e)===e){o=void 0;var l=i.create,f=i.inst;o=l(),f.destroy=o}i=i.next}while(i!==s)}}catch(p){be(t,t.return,p)}}function si(e,t,i){try{var o=t.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var l=s.next;o=l;do{if((o.tag&e)===e){var f=o.inst,p=f.destroy;if(p!==void 0){f.destroy=void 0,s=t;var C=i,w=p;try{w()}catch(M){be(s,C,M)}}}o=o.next}while(o!==l)}}catch(M){be(t,t.return,M)}}function nm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Qf(t,i)}catch(o){be(e,e.return,o)}}}function im(e,t,i){i.props=Fi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){be(e,t,o)}}function Uo(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(s){be(e,t,s)}}function vn(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(s){be(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){be(e,t,s)}else i.current=null}function am(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(s){be(e,e.return,s)}}function au(e,t,i){try{var o=e.stateNode;RA(o,e.type,i,t),o[bt]=t}catch(s){be(e,e.return,s)}}function om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&gi(e.type)||e.tag===4}function ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&gi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ru(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=In));else if(o!==4&&(o===27&&gi(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(ru(e,t,i),e=e.sibling;e!==null;)ru(e,t,i),e=e.sibling}function is(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&gi(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(is(e,t,i),e=e.sibling;e!==null;)is(e,t,i),e=e.sibling}function rm(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ct(t,o,i),t[at]=e,t[bt]=i}catch(l){be(e,e.return,l)}}var Pn=!1,Xe=!1,su=!1,sm=typeof WeakSet=="function"?WeakSet:Set,tt=null;function rA(e,t){if(e=e.containerInfo,Iu=_s,e=Tf(e),el(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var s=o.anchorOffset,l=o.focusNode;o=o.focusOffset;try{i.nodeType,l.nodeType}catch{i=null;break e}var f=0,p=-1,C=-1,w=0,M=0,U=e,R=null;t:for(;;){for(var I;U!==i||s!==0&&U.nodeType!==3||(p=f+s),U!==l||o!==0&&U.nodeType!==3||(C=f+o),U.nodeType===3&&(f+=U.nodeValue.length),(I=U.firstChild)!==null;)R=U,U=I;for(;;){if(U===e)break t;if(R===i&&++w===s&&(p=f),R===l&&++M===o&&(C=f),(I=U.nextSibling)!==null)break;U=R,R=U.parentNode}U=I}i=p===-1||C===-1?null:{start:p,end:C}}else i=null}i=i||{start:0,end:0}}else i=null;for(ku={focusedElem:e,selectionRange:i},_s=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){switch(t=tt,l=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)s=e[i],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&l!==null){e=void 0,i=t,s=l.memoizedProps,l=l.memoizedState,o=i.stateNode;try{var q=Fi(i.type,s);e=o.getSnapshotBeforeUpdate(q,l),o.__reactInternalSnapshotBeforeUpdate=e}catch(Z){be(i,i.return,Z)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Nu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}}function cm(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Bn(e,i),o&4&&Do(5,i);break;case 1:if(Bn(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(f){be(i,i.return,f)}else{var s=Fi(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){be(i,i.return,f)}}o&64&&nm(i),o&512&&Uo(i,i.return);break;case 3:if(Bn(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Qf(e,t)}catch(f){be(i,i.return,f)}}break;case 27:t===null&&o&4&&rm(i);case 26:case 5:Bn(e,i),t===null&&o&4&&am(i),o&512&&Uo(i,i.return);break;case 12:Bn(e,i);break;case 31:Bn(e,i),o&4&&hm(e,i);break;case 13:Bn(e,i),o&4&&dm(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=mA.bind(null,i),HA(e,i))));break;case 22:if(o=i.memoizedState!==null||Pn,!o){t=t!==null&&t.memoizedState!==null||Xe,s=Pn;var l=Xe;Pn=o,(Xe=t)&&!l?Kn(e,i,(i.subtreeFlags&8772)!==0):Bn(e,i),Pn=s,Xe=l}break;case 30:break;default:Bn(e,i)}}function lm(e){var t=e.alternate;t!==null&&(e.alternate=null,lm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&zc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ze=null,Rt=!1;function xn(e,t,i){for(i=i.child;i!==null;)um(e,t,i),i=i.sibling}function um(e,t,i){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(io,i)}catch{}switch(i.tag){case 26:Xe||vn(i,t),xn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Xe||vn(i,t);var o=ze,s=Rt;gi(i.type)&&(ze=i.stateNode,Rt=!1),xn(e,t,i),qo(i.stateNode),ze=o,Rt=s;break;case 5:Xe||vn(i,t);case 6:if(o=ze,s=Rt,ze=null,xn(e,t,i),ze=o,Rt=s,ze!==null)if(Rt)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(i.stateNode)}catch(l){be(i,t,l)}else try{ze.removeChild(i.stateNode)}catch(l){be(i,t,l)}break;case 18:ze!==null&&(Rt?(e=ze,np(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ka(e)):np(ze,i.stateNode));break;case 4:o=ze,s=Rt,ze=i.stateNode.containerInfo,Rt=!0,xn(e,t,i),ze=o,Rt=s;break;case 0:case 11:case 14:case 15:si(2,i,t),Xe||si(4,i,t),xn(e,t,i);break;case 1:Xe||(vn(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&im(i,t,o)),xn(e,t,i);break;case 21:xn(e,t,i);break;case 22:Xe=(o=Xe)||i.memoizedState!==null,xn(e,t,i),Xe=o;break;default:xn(e,t,i)}}function hm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ka(e)}catch(i){be(t,t.return,i)}}}function dm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ka(e)}catch(i){be(t,t.return,i)}}function sA(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new sm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new sm),t;default:throw Error(r(435,e.tag))}}function as(e,t){var i=sA(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var s=pA.bind(null,e,o);o.then(s,s)}})}function It(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var s=i[o],l=e,f=t,p=f;e:for(;p!==null;){switch(p.tag){case 27:if(gi(p.type)){ze=p.stateNode,Rt=!1;break e}break;case 5:ze=p.stateNode,Rt=!1;break e;case 3:case 4:ze=p.stateNode.containerInfo,Rt=!0;break e}p=p.return}if(ze===null)throw Error(r(160));um(l,f,s),ze=null,Rt=!1,l=s.alternate,l!==null&&(l.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)fm(t,e),t=t.sibling}var dn=null;function fm(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:It(t,e),kt(e),o&4&&(si(3,e,e.return),Do(3,e),si(5,e,e.return));break;case 1:It(t,e),kt(e),o&512&&(Xe||i===null||vn(i,i.return)),o&64&&Pn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var s=dn;if(It(t,e),kt(e),o&512&&(Xe||i===null||vn(i,i.return)),o&4){var l=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(o){case"title":l=s.getElementsByTagName("title")[0],(!l||l[ro]||l[at]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=s.createElement(o),s.head.insertBefore(l,s.querySelector("head > title"))),ct(l,o,i),l[at]=e,et(l),o=l;break e;case"link":var f=fp("link","href",s).get(o+(i.href||""));if(f){for(var p=0;p<f.length;p++)if(l=f[p],l.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&l.getAttribute("rel")===(i.rel==null?null:i.rel)&&l.getAttribute("title")===(i.title==null?null:i.title)&&l.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){f.splice(p,1);break t}}l=s.createElement(o),ct(l,o,i),s.head.appendChild(l);break;case"meta":if(f=fp("meta","content",s).get(o+(i.content||""))){for(p=0;p<f.length;p++)if(l=f[p],l.getAttribute("content")===(i.content==null?null:""+i.content)&&l.getAttribute("name")===(i.name==null?null:i.name)&&l.getAttribute("property")===(i.property==null?null:i.property)&&l.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&l.getAttribute("charset")===(i.charSet==null?null:i.charSet)){f.splice(p,1);break t}}l=s.createElement(o),ct(l,o,i),s.head.appendChild(l);break;default:throw Error(r(468,o))}l[at]=e,et(l),o=l}e.stateNode=o}else gp(s,e.type,e.stateNode);else e.stateNode=dp(s,o,e.memoizedProps);else l!==o?(l===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):l.count--,o===null?gp(s,e.type,e.stateNode):dp(s,o,e.memoizedProps)):o===null&&e.stateNode!==null&&au(e,e.memoizedProps,i.memoizedProps)}break;case 27:It(t,e),kt(e),o&512&&(Xe||i===null||vn(i,i.return)),i!==null&&o&4&&au(e,e.memoizedProps,i.memoizedProps);break;case 5:if(It(t,e),kt(e),o&512&&(Xe||i===null||vn(i,i.return)),e.flags&32){s=e.stateNode;try{ua(s,"")}catch(q){be(e,e.return,q)}}o&4&&e.stateNode!=null&&(s=e.memoizedProps,au(e,s,i!==null?i.memoizedProps:s)),o&1024&&(su=!0);break;case 6:if(It(t,e),kt(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(q){be(e,e.return,q)}}break;case 3:if(vs=null,s=dn,dn=Cs(t.containerInfo),It(t,e),dn=s,kt(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Ka(t.containerInfo)}catch(q){be(e,e.return,q)}su&&(su=!1,gm(e));break;case 4:o=dn,dn=Cs(e.stateNode.containerInfo),It(t,e),kt(e),dn=o;break;case 12:It(t,e),kt(e);break;case 31:It(t,e),kt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,as(e,o)));break;case 13:It(t,e),kt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(rs=Lt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,as(e,o)));break;case 22:s=e.memoizedState!==null;var C=i!==null&&i.memoizedState!==null,w=Pn,M=Xe;if(Pn=w||s,Xe=M||C,It(t,e),Xe=M,Pn=w,kt(e),o&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||C||Pn||Xe||Vi(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){C=i=t;try{if(l=C.stateNode,s)f=l.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{p=C.stateNode;var U=C.memoizedProps.style,R=U!=null&&U.hasOwnProperty("display")?U.display:null;p.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(q){be(C,C.return,q)}}}else if(t.tag===6){if(i===null){C=t;try{C.stateNode.nodeValue=s?"":C.memoizedProps}catch(q){be(C,C.return,q)}}}else if(t.tag===18){if(i===null){C=t;try{var I=C.stateNode;s?ip(I,!0):ip(C.stateNode,!1)}catch(q){be(C,C.return,q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,as(e,i))));break;case 19:It(t,e),kt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,as(e,o)));break;case 30:break;case 21:break;default:It(t,e),kt(e)}}function kt(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(om(o)){i=o;break}o=o.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var s=i.stateNode,l=ou(e);is(e,l,s);break;case 5:var f=i.stateNode;i.flags&32&&(ua(f,""),i.flags&=-33);var p=ou(e);is(e,p,f);break;case 3:case 4:var C=i.stateNode.containerInfo,w=ou(e);ru(e,w,C);break;default:throw Error(r(161))}}catch(M){be(e,e.return,M)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Bn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cm(e,t.alternate,t),t=t.sibling}function Vi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:si(4,t,t.return),Vi(t);break;case 1:vn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&im(t,t.return,i),Vi(t);break;case 27:qo(t.stateNode);case 26:case 5:vn(t,t.return),Vi(t);break;case 22:t.memoizedState===null&&Vi(t);break;case 30:Vi(t);break;default:Vi(t)}e=e.sibling}}function Kn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,s=e,l=t,f=l.flags;switch(l.tag){case 0:case 11:case 15:Kn(s,l,i),Do(4,l);break;case 1:if(Kn(s,l,i),o=l,s=o.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(w){be(o,o.return,w)}if(o=l,s=o.updateQueue,s!==null){var p=o.stateNode;try{var C=s.shared.hiddenCallbacks;if(C!==null)for(s.shared.hiddenCallbacks=null,s=0;s<C.length;s++)Yf(C[s],p)}catch(w){be(o,o.return,w)}}i&&f&64&&nm(l),Uo(l,l.return);break;case 27:rm(l);case 26:case 5:Kn(s,l,i),i&&o===null&&f&4&&am(l),Uo(l,l.return);break;case 12:Kn(s,l,i);break;case 31:Kn(s,l,i),i&&f&4&&hm(s,l);break;case 13:Kn(s,l,i),i&&f&4&&dm(s,l);break;case 22:l.memoizedState===null&&Kn(s,l,i),Uo(l,l.return);break;case 30:break;default:Kn(s,l,i)}t=t.sibling}}function cu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&vo(i))}function lu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vo(e))}function fn(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mm(e,t,i,o),t=t.sibling}function mm(e,t,i,o){var s=t.flags;switch(t.tag){case 0:case 11:case 15:fn(e,t,i,o),s&2048&&Do(9,t);break;case 1:fn(e,t,i,o);break;case 3:fn(e,t,i,o),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vo(e)));break;case 12:if(s&2048){fn(e,t,i,o),e=t.stateNode;try{var l=t.memoizedProps,f=l.id,p=l.onPostCommit;typeof p=="function"&&p(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){be(t,t.return,C)}}else fn(e,t,i,o);break;case 31:fn(e,t,i,o);break;case 13:fn(e,t,i,o);break;case 23:break;case 22:l=t.stateNode,f=t.alternate,t.memoizedState!==null?l._visibility&2?fn(e,t,i,o):Ho(e,t):l._visibility&2?fn(e,t,i,o):(l._visibility|=2,Oa(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),s&2048&&cu(f,t);break;case 24:fn(e,t,i,o),s&2048&&lu(t.alternate,t);break;default:fn(e,t,i,o)}}function Oa(e,t,i,o,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var l=e,f=t,p=i,C=o,w=f.flags;switch(f.tag){case 0:case 11:case 15:Oa(l,f,p,C,s),Do(8,f);break;case 23:break;case 22:var M=f.stateNode;f.memoizedState!==null?M._visibility&2?Oa(l,f,p,C,s):Ho(l,f):(M._visibility|=2,Oa(l,f,p,C,s)),s&&w&2048&&cu(f.alternate,f);break;case 24:Oa(l,f,p,C,s),s&&w&2048&&lu(f.alternate,f);break;default:Oa(l,f,p,C,s)}t=t.sibling}}function Ho(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,s=o.flags;switch(o.tag){case 22:Ho(i,o),s&2048&&cu(o.alternate,o);break;case 24:Ho(i,o),s&2048&&lu(o.alternate,o);break;default:Ho(i,o)}t=t.sibling}}var Lo=8192;function Ma(e,t,i){if(e.subtreeFlags&Lo)for(e=e.child;e!==null;)pm(e,t,i),e=e.sibling}function pm(e,t,i){switch(e.tag){case 26:Ma(e,t,i),e.flags&Lo&&e.memoizedState!==null&&FA(i,dn,e.memoizedState,e.memoizedProps);break;case 5:Ma(e,t,i);break;case 3:case 4:var o=dn;dn=Cs(e.stateNode.containerInfo),Ma(e,t,i),dn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Lo,Lo=16777216,Ma(e,t,i),Lo=o):Ma(e,t,i));break;default:Ma(e,t,i)}}function ym(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];tt=o,Tm(o,e)}ym(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cm(e),e=e.sibling}function Cm(e){switch(e.tag){case 0:case 11:case 15:zo(e),e.flags&2048&&si(9,e,e.return);break;case 3:zo(e);break;case 12:zo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,os(e)):zo(e);break;default:zo(e)}}function os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];tt=o,Tm(o,e)}ym(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:si(8,t,t.return),os(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,os(t));break;default:os(t)}e=e.sibling}}function Tm(e,t){for(;tt!==null;){var i=tt;switch(i.tag){case 0:case 11:case 15:si(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:vo(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,tt=o;else e:for(i=e;tt!==null;){o=tt;var s=o.sibling,l=o.return;if(lm(o),o===i){tt=null;break e}if(s!==null){s.return=l,tt=s;break e}tt=l}}}var cA={getCacheForType:function(e){var t=rt(Qe),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return rt(Qe).controller.signal}},lA=typeof WeakMap=="function"?WeakMap:Map,ve=0,De=null,se=null,ue=0,_e=0,qt=null,ci=!1,Na=!1,uu=!1,Gn=0,Be=0,li=0,Xi=0,hu=0,jt=0,Da=0,Po=null,Ot=null,du=!1,rs=0,vm=0,ss=1/0,cs=null,ui=null,Ze=0,hi=null,Ua=null,qn=0,fu=0,gu=null,Am=null,xo=0,mu=null;function Yt(){return(ve&2)!==0&&ue!==0?ue&-ue:N.T!==null?Au():Ld()}function Sm(){if(jt===0)if((ue&536870912)===0||fe){var e=pr;pr<<=1,(pr&3932160)===0&&(pr=262144),jt=e}else jt=536870912;return e=Kt.current,e!==null&&(e.flags|=32),jt}function Mt(e,t,i){(e===De&&(_e===2||_e===9)||e.cancelPendingCommit!==null)&&(Ha(e,0),di(e,ue,jt,!1)),oo(e,i),((ve&2)===0||e!==De)&&(e===De&&((ve&2)===0&&(Xi|=i),Be===4&&di(e,ue,jt,!1)),An(e))}function Em(e,t,i){if((ve&6)!==0)throw Error(r(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||ao(e,t),s=o?dA(e,t):yu(e,t,!0),l=o;do{if(s===0){Na&&!o&&di(e,t,0,!1);break}else{if(i=e.current.alternate,l&&!uA(i)){s=yu(e,t,!1),l=!1;continue}if(s===2){if(l=t,e.errorRecoveryDisabledLanes&l)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var p=e;s=Po;var C=p.current.memoizedState.isDehydrated;if(C&&(Ha(p,f).flags|=256),f=yu(p,f,!1),f!==2){if(uu&&!C){p.errorRecoveryDisabledLanes|=l,Xi|=l,s=4;break e}l=Ot,Ot=s,l!==null&&(Ot===null?Ot=l:Ot.push.apply(Ot,l))}s=f}if(l=!1,s!==2)continue}}if(s===1){Ha(e,0),di(e,t,0,!0);break}e:{switch(o=e,l=s,l){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:di(o,t,jt,!ci);break e;case 2:Ot=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(s=rs+300-Lt(),10<s)){if(di(o,t,jt,!ci),Cr(o,0,!0)!==0)break e;qn=t,o.timeoutHandle=ep(_m.bind(null,o,i,Ot,cs,du,t,jt,Xi,Da,ci,l,"Throttled",-0,0),s);break e}_m(o,i,Ot,cs,du,t,jt,Xi,Da,ci,l,null,-0,0)}}break}while(!0);An(e)}function _m(e,t,i,o,s,l,f,p,C,w,M,U,R,I){if(e.timeoutHandle=-1,U=t.subtreeFlags,U&8192||(U&16785408)===16785408){U={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:In},pm(t,l,U);var q=(l&62914560)===l?rs-Lt():(l&4194048)===l?vm-Lt():0;if(q=VA(U,q),q!==null){qn=l,e.cancelPendingCommit=q(Nm.bind(null,e,t,l,i,o,s,f,p,C,M,U,null,R,I)),di(e,l,f,!w);return}}Nm(e,t,l,i,o,s,f,p,C)}function uA(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var s=i[o],l=s.getSnapshot;s=s.value;try{if(!xt(l(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function di(e,t,i,o){t&=~hu,t&=~Xi,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var s=t;0<s;){var l=31-Pt(s),f=1<<l;o[l]=-1,s&=~f}i!==0&&Dd(e,i,t)}function ls(){return(ve&6)===0?(Bo(0),!1):!0}function pu(){if(se!==null){if(_e===0)var e=se.return;else e=se,Nn=Bi=null,Nl(e),ba=null,So=0,e=se;for(;e!==null;)tm(e.alternate,e),e=e.return;se=null}}function Ha(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,OA(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),qn=0,pu(),De=e,se=i=On(e.current,null),ue=t,_e=0,qt=null,ci=!1,Na=ao(e,t),uu=!1,Da=jt=hu=Xi=li=Be=0,Ot=Po=null,du=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var s=31-Pt(o),l=1<<s;t|=e[s],o&=~l}return Gn=t,Or(),i}function bm(e,t){ne=null,N.H=Oo,t===_a||t===Pr?(t=Kf(),_e=3):t===vl?(t=Kf(),_e=4):_e=t===Vl?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,qt=t,se===null&&(Be=1,$r(e,tn(t,e.current)))}function wm(){var e=Kt.current;return e===null?!0:(ue&4194048)===ue?rn===null:(ue&62914560)===ue||(ue&536870912)!==0?e===rn:!1}function Rm(){var e=N.H;return N.H=Oo,e===null?Oo:e}function Im(){var e=N.A;return N.A=cA,e}function us(){Be=4,ci||(ue&4194048)!==ue&&Kt.current!==null||(Na=!0),(li&134217727)===0&&(Xi&134217727)===0||De===null||di(De,ue,jt,!1)}function yu(e,t,i){var o=ve;ve|=2;var s=Rm(),l=Im();(De!==e||ue!==t)&&(cs=null,Ha(e,t)),t=!1;var f=Be;e:do try{if(_e!==0&&se!==null){var p=se,C=qt;switch(_e){case 8:pu(),f=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(t=!0);var w=_e;if(_e=0,qt=null,La(e,p,C,w),i&&Na){f=0;break e}break;default:w=_e,_e=0,qt=null,La(e,p,C,w)}}hA(),f=Be;break}catch(M){bm(e,M)}while(!0);return t&&e.shellSuspendCounter++,Nn=Bi=null,ve=o,N.H=s,N.A=l,se===null&&(De=null,ue=0,Or()),f}function hA(){for(;se!==null;)km(se)}function dA(e,t){var i=ve;ve|=2;var o=Rm(),s=Im();De!==e||ue!==t?(cs=null,ss=Lt()+500,Ha(e,t)):Na=ao(e,t);e:do try{if(_e!==0&&se!==null){t=se;var l=qt;t:switch(_e){case 1:_e=0,qt=null,La(e,t,l,1);break;case 2:case 9:if(xf(l)){_e=0,qt=null,Om(t);break}t=function(){_e!==2&&_e!==9||De!==e||(_e=7),An(e)},l.then(t,t);break e;case 3:_e=7;break e;case 4:_e=5;break e;case 7:xf(l)?(_e=0,qt=null,Om(t)):(_e=0,qt=null,La(e,t,l,7));break;case 5:var f=null;switch(se.tag){case 26:f=se.memoizedState;case 5:case 27:var p=se;if(f?mp(f):p.stateNode.complete){_e=0,qt=null;var C=p.sibling;if(C!==null)se=C;else{var w=p.return;w!==null?(se=w,hs(w)):se=null}break t}}_e=0,qt=null,La(e,t,l,5);break;case 6:_e=0,qt=null,La(e,t,l,6);break;case 8:pu(),Be=6;break e;default:throw Error(r(462))}}fA();break}catch(M){bm(e,M)}while(!0);return Nn=Bi=null,N.H=o,N.A=s,ve=i,se!==null?0:(De=null,ue=0,Or(),Be)}function fA(){for(;se!==null&&!LT();)km(se)}function km(e){var t=Wg(e.alternate,e,Gn);e.memoizedProps=e.pendingProps,t===null?hs(e):se=t}function Om(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Fg(i,t,t.pendingProps,t.type,void 0,ue);break;case 11:t=Fg(i,t,t.pendingProps,t.type.render,t.ref,ue);break;case 5:Nl(t);default:tm(i,t),t=se=If(t,Gn),t=Wg(i,t,Gn)}e.memoizedProps=e.pendingProps,t===null?hs(e):se=t}function La(e,t,i,o){Nn=Bi=null,Nl(t),ba=null,So=0;var s=t.return;try{if(tA(e,s,t,i,ue)){Be=1,$r(e,tn(i,e.current)),se=null;return}}catch(l){if(s!==null)throw se=s,l;Be=1,$r(e,tn(i,e.current)),se=null;return}t.flags&32768?(fe||o===1?e=!0:Na||(ue&536870912)!==0?e=!1:(ci=e=!0,(o===2||o===9||o===3||o===6)&&(o=Kt.current,o!==null&&o.tag===13&&(o.flags|=16384))),Mm(t,e)):hs(t)}function hs(e){var t=e;do{if((t.flags&32768)!==0){Mm(t,ci);return}e=t.return;var i=aA(t.alternate,t,Gn);if(i!==null){se=i;return}if(t=t.sibling,t!==null){se=t;return}se=t=e}while(t!==null);Be===0&&(Be=5)}function Mm(e,t){do{var i=oA(e.alternate,e);if(i!==null){i.flags&=32767,se=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){se=e;return}se=e=i}while(e!==null);Be=6,se=null}function Nm(e,t,i,o,s,l,f,p,C){e.cancelPendingCommit=null;do ds();while(Ze!==0);if((ve&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(l=t.lanes|t.childLanes,l|=ol,QT(e,i,l,f,p,C),e===De&&(se=De=null,ue=0),Ua=t,hi=e,qn=i,fu=l,gu=s,Am=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yA(gr,function(){return zm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,s=x.p,x.p=2,f=ve,ve|=4;try{rA(e,t,i)}finally{ve=f,x.p=s,N.T=o}}Ze=1,Dm(),Um(),Hm()}}function Dm(){if(Ze===1){Ze=0;var e=hi,t=Ua,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var o=x.p;x.p=2;var s=ve;ve|=4;try{fm(t,e);var l=ku,f=Tf(e.containerInfo),p=l.focusedElem,C=l.selectionRange;if(f!==p&&p&&p.ownerDocument&&Cf(p.ownerDocument.documentElement,p)){if(C!==null&&el(p)){var w=C.start,M=C.end;if(M===void 0&&(M=w),"selectionStart"in p)p.selectionStart=w,p.selectionEnd=Math.min(M,p.value.length);else{var U=p.ownerDocument||document,R=U&&U.defaultView||window;if(R.getSelection){var I=R.getSelection(),q=p.textContent.length,Z=Math.min(C.start,q),Oe=C.end===void 0?Z:Math.min(C.end,q);!I.extend&&Z>Oe&&(f=Oe,Oe=Z,Z=f);var E=yf(p,Z),v=yf(p,Oe);if(E&&v&&(I.rangeCount!==1||I.anchorNode!==E.node||I.anchorOffset!==E.offset||I.focusNode!==v.node||I.focusOffset!==v.offset)){var b=U.createRange();b.setStart(E.node,E.offset),I.removeAllRanges(),Z>Oe?(I.addRange(b),I.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),I.addRange(b))}}}}for(U=[],I=p;I=I.parentNode;)I.nodeType===1&&U.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<U.length;p++){var D=U[p];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}_s=!!Iu,ku=Iu=null}finally{ve=s,x.p=o,N.T=i}}e.current=t,Ze=2}}function Um(){if(Ze===2){Ze=0;var e=hi,t=Ua,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var o=x.p;x.p=2;var s=ve;ve|=4;try{cm(e,t.alternate,t)}finally{ve=s,x.p=o,N.T=i}}Ze=3}}function Hm(){if(Ze===4||Ze===3){Ze=0,zT();var e=hi,t=Ua,i=qn,o=Am;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ze=5:(Ze=0,Ua=hi=null,Lm(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(ui=null),Hc(i),t=t.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(io,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=N.T,s=x.p,x.p=2,N.T=null;try{for(var l=e.onRecoverableError,f=0;f<o.length;f++){var p=o[f];l(p.value,{componentStack:p.stack})}}finally{N.T=t,x.p=s}}(qn&3)!==0&&ds(),An(e),s=e.pendingLanes,(i&261930)!==0&&(s&42)!==0?e===mu?xo++:(xo=0,mu=e):xo=0,Bo(0)}}function Lm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vo(t)))}function ds(){return Dm(),Um(),Hm(),zm()}function zm(){if(Ze!==5)return!1;var e=hi,t=fu;fu=0;var i=Hc(qn),o=N.T,s=x.p;try{x.p=32>i?32:i,N.T=null,i=gu,gu=null;var l=hi,f=qn;if(Ze=0,Ua=hi=null,qn=0,(ve&6)!==0)throw Error(r(331));var p=ve;if(ve|=4,Cm(l.current),mm(l,l.current,f,i),ve=p,Bo(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(io,l)}catch{}return!0}finally{x.p=s,N.T=o,Lm(e,t)}}function Pm(e,t,i){t=tn(i,t),t=Fl(e.stateNode,t,2),e=ai(e,t,2),e!==null&&(oo(e,2),An(e))}function be(e,t,i){if(e.tag===3)Pm(e,e,i);else for(;t!==null;){if(t.tag===3){Pm(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ui===null||!ui.has(o))){e=tn(i,e),i=xg(2),o=ai(t,i,2),o!==null&&(Bg(i,o,t,e),oo(o,2),An(o));break}}t=t.return}}function Cu(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new lA;var s=new Set;o.set(t,s)}else s=o.get(t),s===void 0&&(s=new Set,o.set(t,s));s.has(i)||(uu=!0,s.add(i),e=gA.bind(null,e,t,i),t.then(e,e))}function gA(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,De===e&&(ue&i)===i&&(Be===4||Be===3&&(ue&62914560)===ue&&300>Lt()-rs?(ve&2)===0&&Ha(e,0):hu|=i,Da===ue&&(Da=0)),An(e)}function xm(e,t){t===0&&(t=Nd()),e=zi(e,t),e!==null&&(oo(e,t),An(e))}function mA(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),xm(e,i)}function pA(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(t),xm(e,i)}function yA(e,t){return Mc(e,t)}var fs=null,za=null,Tu=!1,gs=!1,vu=!1,fi=0;function An(e){e!==za&&e.next===null&&(za===null?fs=za=e:za=za.next=e),gs=!0,Tu||(Tu=!0,TA())}function Bo(e,t){if(!vu&&gs){vu=!0;do for(var i=!1,o=fs;o!==null;){if(e!==0){var s=o.pendingLanes;if(s===0)var l=0;else{var f=o.suspendedLanes,p=o.pingedLanes;l=(1<<31-Pt(42|e)+1)-1,l&=s&~(f&~p),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(i=!0,qm(o,l))}else l=ue,l=Cr(o,o===De?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(l&3)===0||ao(o,l)||(i=!0,qm(o,l));o=o.next}while(i);vu=!1}}function CA(){Bm()}function Bm(){gs=Tu=!1;var e=0;fi!==0&&kA()&&(e=fi);for(var t=Lt(),i=null,o=fs;o!==null;){var s=o.next,l=Km(o,t);l===0?(o.next=null,i===null?fs=s:i.next=s,s===null&&(za=i)):(i=o,(e!==0||(l&3)!==0)&&(gs=!0)),o=s}Ze!==0&&Ze!==5||Bo(e),fi!==0&&(fi=0)}function Km(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var f=31-Pt(l),p=1<<f,C=s[f];C===-1?((p&i)===0||(p&o)!==0)&&(s[f]=YT(p,t)):C<=t&&(e.expiredLanes|=p),l&=~p}if(t=De,i=ue,i=Cr(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(_e===2||_e===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Nc(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ao(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&Nc(o),Hc(i)){case 2:case 8:i=Od;break;case 32:i=gr;break;case 268435456:i=Md;break;default:i=gr}return o=Gm.bind(null,e),i=Mc(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&Nc(o),e.callbackPriority=2,e.callbackNode=null,2}function Gm(e,t){if(Ze!==0&&Ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ds()&&e.callbackNode!==i)return null;var o=ue;return o=Cr(e,e===De?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Em(e,o,t),Km(e,Lt()),e.callbackNode!=null&&e.callbackNode===i?Gm.bind(null,e):null)}function qm(e,t){if(ds())return null;Em(e,t,!0)}function TA(){MA(function(){(ve&6)!==0?Mc(kd,CA):Bm()})}function Au(){if(fi===0){var e=Sa;e===0&&(e=mr,mr<<=1,(mr&261888)===0&&(mr=256)),fi=e}return fi}function jm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Sr(""+e)}function Ym(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function vA(e,t,i,o,s){if(t==="submit"&&i&&i.stateNode===s){var l=jm((s[bt]||null).action),f=o.submitter;f&&(t=(t=f[bt]||null)?jm(t.formAction):f.getAttribute("formAction"),t!==null&&(l=t,f=null));var p=new wr("action","action",null,o,s);e.push({event:p,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(fi!==0){var C=f?Ym(s,f):new FormData(s);Kl(i,{pending:!0,data:C,method:s.method,action:l},null,C)}}else typeof l=="function"&&(p.preventDefault(),C=f?Ym(s,f):new FormData(s),Kl(i,{pending:!0,data:C,method:s.method,action:l},l,C))},currentTarget:s}]})}}for(var Su=0;Su<al.length;Su++){var Eu=al[Su],AA=Eu.toLowerCase(),SA=Eu[0].toUpperCase()+Eu.slice(1);hn(AA,"on"+SA)}hn(Sf,"onAnimationEnd"),hn(Ef,"onAnimationIteration"),hn(_f,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(Pv,"onTransitionRun"),hn(xv,"onTransitionStart"),hn(Bv,"onTransitionCancel"),hn(bf,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ko));function Qm(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],s=o.event;o=o.listeners;e:{var l=void 0;if(t)for(var f=o.length-1;0<=f;f--){var p=o[f],C=p.instance,w=p.currentTarget;if(p=p.listener,C!==l&&s.isPropagationStopped())break e;l=p,s.currentTarget=w;try{l(s)}catch(M){kr(M)}s.currentTarget=null,l=C}else for(f=0;f<o.length;f++){if(p=o[f],C=p.instance,w=p.currentTarget,p=p.listener,C!==l&&s.isPropagationStopped())break e;l=p,s.currentTarget=w;try{l(s)}catch(M){kr(M)}s.currentTarget=null,l=C}}}}function ce(e,t){var i=t[Lc];i===void 0&&(i=t[Lc]=new Set);var o=e+"__bubble";i.has(o)||(Fm(t,e,2,!1),i.add(o))}function _u(e,t,i){var o=0;t&&(o|=4),Fm(i,e,o,t)}var ms="_reactListening"+Math.random().toString(36).slice(2);function bu(e){if(!e[ms]){e[ms]=!0,xd.forEach(function(i){i!=="selectionchange"&&(EA.has(i)||_u(i,!1,e),_u(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ms]||(t[ms]=!0,_u("selectionchange",!1,t))}}function Fm(e,t,i,o){switch(Sp(t)){case 2:var s=ZA;break;case 8:s=$A;break;default:s=Bu}i=s.bind(null,t,i,e),s=void 0,!Yc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),o?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function wu(e,t,i,o,s){var l=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var p=o.stateNode.containerInfo;if(p===s)break;if(f===4)for(f=o.return;f!==null;){var C=f.tag;if((C===3||C===4)&&f.stateNode.containerInfo===s)return;f=f.return}for(;p!==null;){if(f=oa(p),f===null)return;if(C=f.tag,C===5||C===6||C===26||C===27){o=l=f;continue e}p=p.parentNode}}o=o.return}Zd(function(){var w=l,M=qc(i),U=[];e:{var R=wf.get(e);if(R!==void 0){var I=wr,q=e;switch(e){case"keypress":if(_r(i)===0)break e;case"keydown":case"keyup":I=pv;break;case"focusin":q="focus",I=Xc;break;case"focusout":q="blur",I=Xc;break;case"beforeblur":case"afterblur":I=Xc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Tv;break;case Sf:case Ef:case _f:I=sv;break;case bf:I=Av;break;case"scroll":case"scrollend":I=nv;break;case"wheel":I=Ev;break;case"copy":case"cut":case"paste":I=lv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=nf;break;case"toggle":case"beforetoggle":I=bv}var Z=(t&4)!==0,Oe=!Z&&(e==="scroll"||e==="scrollend"),E=Z?R!==null?R+"Capture":null:R;Z=[];for(var v=w,b;v!==null;){var D=v;if(b=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||b===null||E===null||(D=co(v,E),D!=null&&Z.push(Go(v,D,b))),Oe)break;v=v.return}0<Z.length&&(R=new I(R,q,null,i,M),U.push({event:R,listeners:Z}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",R&&i!==Gc&&(q=i.relatedTarget||i.fromElement)&&(oa(q)||q[aa]))break e;if((I||R)&&(R=M.window===M?M:(R=M.ownerDocument)?R.defaultView||R.parentWindow:window,I?(q=i.relatedTarget||i.toElement,I=w,q=q?oa(q):null,q!==null&&(Oe=h(q),Z=q.tag,q!==Oe||Z!==5&&Z!==27&&Z!==6)&&(q=null)):(I=null,q=w),I!==q)){if(Z=ef,D="onMouseLeave",E="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(Z=nf,D="onPointerLeave",E="onPointerEnter",v="pointer"),Oe=I==null?R:so(I),b=q==null?R:so(q),R=new Z(D,v+"leave",I,i,M),R.target=Oe,R.relatedTarget=b,D=null,oa(M)===w&&(Z=new Z(E,v+"enter",q,i,M),Z.target=b,Z.relatedTarget=Oe,D=Z),Oe=D,I&&q)t:{for(Z=_A,E=I,v=q,b=0,D=E;D;D=Z(D))b++;D=0;for(var V=v;V;V=Z(V))D++;for(;0<b-D;)E=Z(E),b--;for(;0<D-b;)v=Z(v),D--;for(;b--;){if(E===v||v!==null&&E===v.alternate){Z=E;break t}E=Z(E),v=Z(v)}Z=null}else Z=null;I!==null&&Vm(U,R,I,Z,!1),q!==null&&Oe!==null&&Vm(U,Oe,q,Z,!0)}}e:{if(R=w?so(w):window,I=R.nodeName&&R.nodeName.toLowerCase(),I==="select"||I==="input"&&R.type==="file")var ye=hf;else if(lf(R))if(df)ye=Hv;else{ye=Dv;var Q=Nv}else I=R.nodeName,!I||I.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?w&&Kc(w.elementType)&&(ye=hf):ye=Uv;if(ye&&(ye=ye(e,w))){uf(U,ye,i,M);break e}Q&&Q(e,R,w),e==="focusout"&&w&&R.type==="number"&&w.memoizedProps.value!=null&&Bc(R,"number",R.value)}switch(Q=w?so(w):window,e){case"focusin":(lf(Q)||Q.contentEditable==="true")&&(ga=Q,tl=w,yo=null);break;case"focusout":yo=tl=ga=null;break;case"mousedown":nl=!0;break;case"contextmenu":case"mouseup":case"dragend":nl=!1,vf(U,i,M);break;case"selectionchange":if(zv)break;case"keydown":case"keyup":vf(U,i,M)}var ae;if(Zc)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else fa?sf(e,i)&&(he="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(he="onCompositionStart");he&&(af&&i.locale!=="ko"&&(fa||he!=="onCompositionStart"?he==="onCompositionEnd"&&fa&&(ae=$d()):(Zn=M,Qc="value"in Zn?Zn.value:Zn.textContent,fa=!0)),Q=ps(w,he),0<Q.length&&(he=new tf(he,e,null,i,M),U.push({event:he,listeners:Q}),ae?he.data=ae:(ae=cf(i),ae!==null&&(he.data=ae)))),(ae=Rv?Iv(e,i):kv(e,i))&&(he=ps(w,"onBeforeInput"),0<he.length&&(Q=new tf("onBeforeInput","beforeinput",null,i,M),U.push({event:Q,listeners:he}),Q.data=ae)),vA(U,e,w,i,M)}Qm(U,t)})}function Go(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ps(e,t){for(var i=t+"Capture",o=[];e!==null;){var s=e,l=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||l===null||(s=co(e,i),s!=null&&o.unshift(Go(e,s,l)),s=co(e,t),s!=null&&o.push(Go(e,s,l))),e.tag===3)return o;e=e.return}return[]}function _A(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vm(e,t,i,o,s){for(var l=t._reactName,f=[];i!==null&&i!==o;){var p=i,C=p.alternate,w=p.stateNode;if(p=p.tag,C!==null&&C===o)break;p!==5&&p!==26&&p!==27||w===null||(C=w,s?(w=co(i,l),w!=null&&f.unshift(Go(i,w,C))):s||(w=co(i,l),w!=null&&f.push(Go(i,w,C)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var bA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function Xm(e){return(typeof e=="string"?e:""+e).replace(bA,`
`).replace(wA,"")}function Jm(e,t){return t=Xm(t),Xm(e)===t}function ke(e,t,i,o,s,l){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||ua(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&ua(e,""+o);break;case"className":vr(e,"class",o);break;case"tabIndex":vr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":vr(e,i,o);break;case"style":Xd(e,o,l);break;case"data":if(t!=="object"){vr(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Sr(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(i==="formAction"?(t!=="input"&&ke(e,t,"name",s.name,s,null),ke(e,t,"formEncType",s.formEncType,s,null),ke(e,t,"formMethod",s.formMethod,s,null),ke(e,t,"formTarget",s.formTarget,s,null)):(ke(e,t,"encType",s.encType,s,null),ke(e,t,"method",s.method,s,null),ke(e,t,"target",s.target,s,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Sr(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=In);break;case"onScroll":o!=null&&ce("scroll",e);break;case"onScrollEnd":o!=null&&ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Sr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ce("beforetoggle",e),ce("toggle",e),Tr(e,"popover",o);break;case"xlinkActuate":Rn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Rn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Rn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Rn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Rn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Rn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Tr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ev.get(i)||i,Tr(e,i,o))}}function Ru(e,t,i,o,s,l){switch(i){case"style":Xd(e,o,l);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof o=="string"?ua(e,o):(typeof o=="number"||typeof o=="bigint")&&ua(e,""+o);break;case"onScroll":o!=null&&ce("scroll",e);break;case"onScrollEnd":o!=null&&ce("scrollend",e);break;case"onClick":o!=null&&(e.onclick=In);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),l=e[bt]||null,l=l!=null?l[i]:null,typeof l=="function"&&e.removeEventListener(t,l,s),typeof o=="function")){typeof l!="function"&&l!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,s);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):Tr(e,i,o)}}}function ct(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",e),ce("load",e);var o=!1,s=!1,l;for(l in i)if(i.hasOwnProperty(l)){var f=i[l];if(f!=null)switch(l){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ke(e,t,l,f,i,null)}}s&&ke(e,t,"srcSet",i.srcSet,i,null),o&&ke(e,t,"src",i.src,i,null);return;case"input":ce("invalid",e);var p=l=f=s=null,C=null,w=null;for(o in i)if(i.hasOwnProperty(o)){var M=i[o];if(M!=null)switch(o){case"name":s=M;break;case"type":f=M;break;case"checked":C=M;break;case"defaultChecked":w=M;break;case"value":l=M;break;case"defaultValue":p=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,t));break;default:ke(e,t,o,M,i,null)}}Yd(e,l,p,C,w,f,s,!1);return;case"select":ce("invalid",e),o=f=l=null;for(s in i)if(i.hasOwnProperty(s)&&(p=i[s],p!=null))switch(s){case"value":l=p;break;case"defaultValue":f=p;break;case"multiple":o=p;default:ke(e,t,s,p,i,null)}t=l,i=f,e.multiple=!!o,t!=null?la(e,!!o,t,!1):i!=null&&la(e,!!o,i,!0);return;case"textarea":ce("invalid",e),l=s=o=null;for(f in i)if(i.hasOwnProperty(f)&&(p=i[f],p!=null))switch(f){case"value":o=p;break;case"defaultValue":s=p;break;case"children":l=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:ke(e,t,f,p,i,null)}Fd(e,o,s,l);return;case"option":for(C in i)i.hasOwnProperty(C)&&(o=i[C],o!=null)&&(C==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":ke(e,t,C,o,i,null));return;case"dialog":ce("beforetoggle",e),ce("toggle",e),ce("cancel",e),ce("close",e);break;case"iframe":case"object":ce("load",e);break;case"video":case"audio":for(o=0;o<Ko.length;o++)ce(Ko[o],e);break;case"image":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"embed":case"source":case"link":ce("error",e),ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in i)if(i.hasOwnProperty(w)&&(o=i[w],o!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ke(e,t,w,o,i,null)}return;default:if(Kc(t)){for(M in i)i.hasOwnProperty(M)&&(o=i[M],o!==void 0&&Ru(e,t,M,o,i,void 0));return}}for(p in i)i.hasOwnProperty(p)&&(o=i[p],o!=null&&ke(e,t,p,o,i,null))}function RA(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,l=null,f=null,p=null,C=null,w=null,M=null;for(I in i){var U=i[I];if(i.hasOwnProperty(I)&&U!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":C=U;default:o.hasOwnProperty(I)||ke(e,t,I,null,o,U)}}for(var R in o){var I=o[R];if(U=i[R],o.hasOwnProperty(R)&&(I!=null||U!=null))switch(R){case"type":l=I;break;case"name":s=I;break;case"checked":w=I;break;case"defaultChecked":M=I;break;case"value":f=I;break;case"defaultValue":p=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,t));break;default:I!==U&&ke(e,t,R,I,o,U)}}xc(e,f,p,C,w,M,l,s);return;case"select":I=f=p=R=null;for(l in i)if(C=i[l],i.hasOwnProperty(l)&&C!=null)switch(l){case"value":break;case"multiple":I=C;default:o.hasOwnProperty(l)||ke(e,t,l,null,o,C)}for(s in o)if(l=o[s],C=i[s],o.hasOwnProperty(s)&&(l!=null||C!=null))switch(s){case"value":R=l;break;case"defaultValue":p=l;break;case"multiple":f=l;default:l!==C&&ke(e,t,s,l,o,C)}t=p,i=f,o=I,R!=null?la(e,!!i,R,!1):!!o!=!!i&&(t!=null?la(e,!!i,t,!0):la(e,!!i,i?[]:"",!1));return;case"textarea":I=R=null;for(p in i)if(s=i[p],i.hasOwnProperty(p)&&s!=null&&!o.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:ke(e,t,p,null,o,s)}for(f in o)if(s=o[f],l=i[f],o.hasOwnProperty(f)&&(s!=null||l!=null))switch(f){case"value":R=s;break;case"defaultValue":I=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(r(91));break;default:s!==l&&ke(e,t,f,s,o,l)}Qd(e,R,I);return;case"option":for(var q in i)R=i[q],i.hasOwnProperty(q)&&R!=null&&!o.hasOwnProperty(q)&&(q==="selected"?e.selected=!1:ke(e,t,q,null,o,R));for(C in o)R=o[C],I=i[C],o.hasOwnProperty(C)&&R!==I&&(R!=null||I!=null)&&(C==="selected"?e.selected=R&&typeof R!="function"&&typeof R!="symbol":ke(e,t,C,R,o,I));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Z in i)R=i[Z],i.hasOwnProperty(Z)&&R!=null&&!o.hasOwnProperty(Z)&&ke(e,t,Z,null,o,R);for(w in o)if(R=o[w],I=i[w],o.hasOwnProperty(w)&&R!==I&&(R!=null||I!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(137,t));break;default:ke(e,t,w,R,o,I)}return;default:if(Kc(t)){for(var Oe in i)R=i[Oe],i.hasOwnProperty(Oe)&&R!==void 0&&!o.hasOwnProperty(Oe)&&Ru(e,t,Oe,void 0,o,R);for(M in o)R=o[M],I=i[M],!o.hasOwnProperty(M)||R===I||R===void 0&&I===void 0||Ru(e,t,M,R,o,I);return}}for(var E in i)R=i[E],i.hasOwnProperty(E)&&R!=null&&!o.hasOwnProperty(E)&&ke(e,t,E,null,o,R);for(U in o)R=o[U],I=i[U],!o.hasOwnProperty(U)||R===I||R==null&&I==null||ke(e,t,U,R,o,I)}function Zm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var s=i[o],l=s.transferSize,f=s.initiatorType,p=s.duration;if(l&&p&&Zm(f)){for(f=0,p=s.responseEnd,o+=1;o<i.length;o++){var C=i[o],w=C.startTime;if(w>p)break;var M=C.transferSize,U=C.initiatorType;M&&Zm(U)&&(C=C.responseEnd,f+=M*(C<p?1:(p-w)/(C-w)))}if(--o,t+=8*(l+f)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Iu=null,ku=null;function ys(e){return e.nodeType===9?e:e.ownerDocument}function $m(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ou(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mu=null;function kA(){var e=window.event;return e&&e.type==="popstate"?e===Mu?!1:(Mu=e,!0):(Mu=null,!1)}var ep=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0,tp=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof tp<"u"?function(e){return tp.resolve(null).then(e).catch(NA)}:ep;function NA(e){setTimeout(function(){throw e})}function gi(e){return e==="head"}function np(e,t){var i=t,o=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(s),Ka(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")qo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,qo(i);for(var l=i.firstChild;l;){var f=l.nextSibling,p=l.nodeName;l[ro]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&l.rel.toLowerCase()==="stylesheet"||i.removeChild(l),l=f}}else i==="body"&&qo(e.ownerDocument.body);i=s}while(i);Ka(t)}function ip(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Nu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Nu(i),zc(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function DA(e,t,i,o){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ro])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function UA(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=sn(e.nextSibling),e===null))return null;return e}function ap(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=sn(e.nextSibling),e===null))return null;return e}function Du(e){return e.data==="$?"||e.data==="$~"}function Uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function HA(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Hu=null;function op(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return sn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function rp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function sp(e,t,i){switch(t=ys(i),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function qo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);zc(e)}var cn=new Map,cp=new Set;function Cs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var jn=x.d;x.d={f:LA,r:zA,D:PA,C:xA,L:BA,m:KA,X:qA,S:GA,M:jA};function LA(){var e=jn.f(),t=ls();return e||t}function zA(e){var t=ra(e);t!==null&&t.tag===5&&t.type==="form"?bg(t):jn.r(e)}var Pa=typeof document>"u"?null:document;function lp(e,t,i){var o=Pa;if(o&&typeof t=="string"&&t){var s=Wt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),cp.has(s)||(cp.add(s),e={rel:e,crossOrigin:i,href:t},o.querySelector(s)===null&&(t=o.createElement("link"),ct(t,"link",e),et(t),o.head.appendChild(t)))}}function PA(e){jn.D(e),lp("dns-prefetch",e,null)}function xA(e,t){jn.C(e,t),lp("preconnect",e,t)}function BA(e,t,i){jn.L(e,t,i);var o=Pa;if(o&&e&&t){var s='link[rel="preload"][as="'+Wt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+Wt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+Wt(i.imageSizes)+'"]')):s+='[href="'+Wt(e)+'"]';var l=s;switch(t){case"style":l=xa(e);break;case"script":l=Ba(e)}cn.has(l)||(e=_({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),cn.set(l,e),o.querySelector(s)!==null||t==="style"&&o.querySelector(jo(l))||t==="script"&&o.querySelector(Yo(l))||(t=o.createElement("link"),ct(t,"link",e),et(t),o.head.appendChild(t)))}}function KA(e,t){jn.m(e,t);var i=Pa;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Wt(o)+'"][href="'+Wt(e)+'"]',l=s;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Ba(e)}if(!cn.has(l)&&(e=_({rel:"modulepreload",href:e},t),cn.set(l,e),i.querySelector(s)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Yo(l)))return}o=i.createElement("link"),ct(o,"link",e),et(o),i.head.appendChild(o)}}}function GA(e,t,i){jn.S(e,t,i);var o=Pa;if(o&&e){var s=sa(o).hoistableStyles,l=xa(e);t=t||"default";var f=s.get(l);if(!f){var p={loading:0,preload:null};if(f=o.querySelector(jo(l)))p.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},i),(i=cn.get(l))&&Lu(e,i);var C=f=o.createElement("link");et(C),ct(C,"link",e),C._p=new Promise(function(w,M){C.onload=w,C.onerror=M}),C.addEventListener("load",function(){p.loading|=1}),C.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Ts(f,t,o)}f={type:"stylesheet",instance:f,count:1,state:p},s.set(l,f)}}}function qA(e,t){jn.X(e,t);var i=Pa;if(i&&e){var o=sa(i).hoistableScripts,s=Ba(e),l=o.get(s);l||(l=i.querySelector(Yo(s)),l||(e=_({src:e,async:!0},t),(t=cn.get(s))&&zu(e,t),l=i.createElement("script"),et(l),ct(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},o.set(s,l))}}function jA(e,t){jn.M(e,t);var i=Pa;if(i&&e){var o=sa(i).hoistableScripts,s=Ba(e),l=o.get(s);l||(l=i.querySelector(Yo(s)),l||(e=_({src:e,async:!0,type:"module"},t),(t=cn.get(s))&&zu(e,t),l=i.createElement("script"),et(l),ct(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},o.set(s,l))}}function up(e,t,i,o){var s=(s=re.current)?Cs(s):null;if(!s)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=xa(i.href),i=sa(s).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=xa(i.href);var l=sa(s).hoistableStyles,f=l.get(e);if(f||(s=s.ownerDocument||s,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,f),(l=s.querySelector(jo(e)))&&!l._p&&(f.instance=l,f.state.loading=5),cn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},cn.set(e,i),l||YA(s,e,i,f.state))),t&&o===null)throw Error(r(528,""));return f}if(t&&o!==null)throw Error(r(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ba(i),i=sa(s).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function xa(e){return'href="'+Wt(e)+'"'}function jo(e){return'link[rel="stylesheet"]['+e+"]"}function hp(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function YA(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),ct(t,"link",i),et(t),e.head.appendChild(t))}function Ba(e){return'[src="'+Wt(e)+'"]'}function Yo(e){return"script[async]"+e}function dp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Wt(i.href)+'"]');if(o)return t.instance=o,et(o),o;var s=_({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),et(o),ct(o,"style",s),Ts(o,i.precedence,e),t.instance=o;case"stylesheet":s=xa(i.href);var l=e.querySelector(jo(s));if(l)return t.state.loading|=4,t.instance=l,et(l),l;o=hp(i),(s=cn.get(s))&&Lu(o,s),l=(e.ownerDocument||e).createElement("link"),et(l);var f=l;return f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),ct(l,"link",o),t.state.loading|=4,Ts(l,i.precedence,e),t.instance=l;case"script":return l=Ba(i.src),(s=e.querySelector(Yo(l)))?(t.instance=s,et(s),s):(o=i,(s=cn.get(l))&&(o=_({},i),zu(o,s)),e=e.ownerDocument||e,s=e.createElement("script"),et(s),ct(s,"link",o),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,Ts(o,i.precedence,e));return t.instance}function Ts(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=o.length?o[o.length-1]:null,l=s,f=0;f<o.length;f++){var p=o[f];if(p.dataset.precedence===t)l=p;else if(l!==s)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function zu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vs=null;function fp(e,t,i){if(vs===null){var o=new Map,s=vs=new Map;s.set(i,o)}else s=vs,o=s.get(i),o||(o=new Map,s.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var l=i[s];if(!(l[ro]||l[at]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var f=l.getAttribute(t)||"";f=e+f;var p=o.get(f);p?p.push(l):o.set(f,[l])}}return o}function gp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function QA(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function mp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function FA(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var s=xa(o.href),l=t.querySelector(jo(s));if(l){t=l._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=As.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=l,et(l);return}l=t.ownerDocument||t,o=hp(o),(s=cn.get(s))&&Lu(o,s),l=l.createElement("link"),et(l);var f=l;f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),ct(l,"link",o),i.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=As.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Pu=0;function VA(e,t){return e.stylesheets&&e.count===0&&Es(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Es(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+t);0<e.imgBytes&&Pu===0&&(Pu=62500*IA());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Es(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>Pu?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(s)}}:null}function As(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Es(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ss=null;function Es(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ss=new Map,t.forEach(XA,e),Ss=null,As.call(e))}function XA(e,t){if(!(t.state.loading&4)){var i=Ss.get(e);if(i)var o=i.get(null);else{i=new Map,Ss.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<s.length;l++){var f=s[l];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(i.set(f.dataset.precedence,f),o=f)}o&&i.set(null,o)}s=t.instance,f=s.getAttribute("data-precedence"),l=i.get(f)||o,l===o&&i.set(null,s),i.set(f,s),this.count++,o=As.bind(this),s.addEventListener("load",o),s.addEventListener("error",o),l?l.parentNode.insertBefore(s,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Qo={$$typeof:de,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function JA(e,t,i,o,s,l,f,p,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.hiddenUpdates=Dc(null),this.identifierPrefix=o,this.onUncaughtError=s,this.onCaughtError=l,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function pp(e,t,i,o,s,l,f,p,C,w,M,U){return e=new JA(e,t,i,f,C,w,M,U,p),t=1,l===!0&&(t|=24),l=Bt(3,null,null,t),e.current=l,l.stateNode=e,t=yl(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:o,isDehydrated:i,cache:t},Al(l),e}function yp(e){return e?(e=ya,e):ya}function Cp(e,t,i,o,s,l){s=yp(s),o.context===null?o.context=s:o.pendingContext=s,o=ii(t),o.payload={element:i},l=l===void 0?null:l,l!==null&&(o.callback=l),i=ai(e,o,t),i!==null&&(Mt(i,e,t),_o(i,e,t))}function Tp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function xu(e,t){Tp(e,t),(e=e.alternate)&&Tp(e,t)}function vp(e){if(e.tag===13||e.tag===31){var t=zi(e,67108864);t!==null&&Mt(t,e,67108864),xu(e,67108864)}}function Ap(e){if(e.tag===13||e.tag===31){var t=Yt();t=Uc(t);var i=zi(e,t);i!==null&&Mt(i,e,t),xu(e,t)}}var _s=!0;function ZA(e,t,i,o){var s=N.T;N.T=null;var l=x.p;try{x.p=2,Bu(e,t,i,o)}finally{x.p=l,N.T=s}}function $A(e,t,i,o){var s=N.T;N.T=null;var l=x.p;try{x.p=8,Bu(e,t,i,o)}finally{x.p=l,N.T=s}}function Bu(e,t,i,o){if(_s){var s=Ku(o);if(s===null)wu(e,t,o,bs,i),Ep(e,o);else if(eS(s,e,t,i,o))o.stopPropagation();else if(Ep(e,o),t&4&&-1<WA.indexOf(e)){for(;s!==null;){var l=ra(s);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var f=Ni(l.pendingLanes);if(f!==0){var p=l;for(p.pendingLanes|=2,p.entangledLanes|=2;f;){var C=1<<31-Pt(f);p.entanglements[1]|=C,f&=~C}An(l),(ve&6)===0&&(ss=Lt()+500,Bo(0))}}break;case 31:case 13:p=zi(l,2),p!==null&&Mt(p,l,2),ls(),xu(l,2)}if(l=Ku(o),l===null&&wu(e,t,o,bs,i),l===s)break;s=l}s!==null&&o.stopPropagation()}else wu(e,t,o,null,i)}}function Ku(e){return e=qc(e),Gu(e)}var bs=null;function Gu(e){if(bs=null,e=oa(e),e!==null){var t=h(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=g(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bs=e,null}function Sp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(PT()){case kd:return 2;case Od:return 8;case gr:case xT:return 32;case Md:return 268435456;default:return 32}default:return 32}}var qu=!1,mi=null,pi=null,yi=null,Fo=new Map,Vo=new Map,Ci=[],WA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ep(e,t){switch(e){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Fo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(t.pointerId)}}function Xo(e,t,i,o,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:l,targetContainers:[s]},t!==null&&(t=ra(t),t!==null&&vp(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function eS(e,t,i,o,s){switch(t){case"focusin":return mi=Xo(mi,e,t,i,o,s),!0;case"dragenter":return pi=Xo(pi,e,t,i,o,s),!0;case"mouseover":return yi=Xo(yi,e,t,i,o,s),!0;case"pointerover":var l=s.pointerId;return Fo.set(l,Xo(Fo.get(l)||null,e,t,i,o,s)),!0;case"gotpointercapture":return l=s.pointerId,Vo.set(l,Xo(Vo.get(l)||null,e,t,i,o,s)),!0}return!1}function _p(e){var t=oa(e.target);if(t!==null){var i=h(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,zd(e.priority,function(){Ap(i)});return}}else if(t===31){if(t=g(i),t!==null){e.blockedOn=t,zd(e.priority,function(){Ap(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ws(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Ku(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Gc=o,i.target.dispatchEvent(o),Gc=null}else return t=ra(i),t!==null&&vp(t),e.blockedOn=i,!1;t.shift()}return!0}function bp(e,t,i){ws(e)&&i.delete(t)}function tS(){qu=!1,mi!==null&&ws(mi)&&(mi=null),pi!==null&&ws(pi)&&(pi=null),yi!==null&&ws(yi)&&(yi=null),Fo.forEach(bp),Vo.forEach(bp)}function Rs(e,t){e.blockedOn===t&&(e.blockedOn=null,qu||(qu=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,tS)))}var Is=null;function wp(e){Is!==e&&(Is=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Is===e&&(Is=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],s=e[t+2];if(typeof o!="function"){if(Gu(o||i)===null)continue;break}var l=ra(i);l!==null&&(e.splice(t,3),t-=3,Kl(l,{pending:!0,data:s,method:i.method,action:o},o,s))}}))}function Ka(e){function t(C){return Rs(C,e)}mi!==null&&Rs(mi,e),pi!==null&&Rs(pi,e),yi!==null&&Rs(yi,e),Fo.forEach(t),Vo.forEach(t);for(var i=0;i<Ci.length;i++){var o=Ci[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ci.length&&(i=Ci[0],i.blockedOn===null);)_p(i),i.blockedOn===null&&Ci.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var s=i[o],l=i[o+1],f=s[bt]||null;if(typeof l=="function")f||wp(i);else if(f){var p=null;if(l&&l.hasAttribute("formAction")){if(s=l,f=l[bt]||null)p=f.formAction;else if(Gu(s)!==null)continue}else p=f.action;typeof p=="function"?i[o+1]=p:(i.splice(o,3),o-=3),wp(i)}}}function Rp(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(f){return s=f})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function ju(e){this._internalRoot=e}ks.prototype.render=ju.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var i=t.current,o=Yt();Cp(i,o,e,t,null,null)},ks.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cp(e.current,2,null,e,null,null),ls(),t[aa]=null}};function ks(e){this._internalRoot=e}ks.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ld();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ci.length&&t!==0&&t<Ci[i].priority;i++);Ci.splice(i,0,e),i===0&&_p(e)}};var Ip=n.version;if(Ip!=="19.2.3")throw Error(r(527,Ip,"19.2.3"));x.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var nS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Os=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Os.isDisabled&&Os.supportsFiber)try{io=Os.inject(nS),zt=Os}catch{}}return Zo.createRoot=function(e,t){if(!c(e))throw Error(r(299));var i=!1,o="",s=Hg,l=Lg,f=zg;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=pp(e,1,!1,null,null,i,o,null,s,l,f,Rp),e[aa]=t.current,bu(e),new ju(t)},Zo.hydrateRoot=function(e,t,i){if(!c(e))throw Error(r(299));var o=!1,s="",l=Hg,f=Lg,p=zg,C=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(l=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError),i.formState!==void 0&&(C=i.formState)),t=pp(e,1,!0,t,i??null,o,s,C,l,f,p,Rp),t.context=yp(null),i=t.current,o=Yt(),o=Uc(o),s=ii(o),s.callback=null,ai(i,s,o),i=o,t.current.lanes=i,oo(t,i),An(t),e[aa]=t.current,bu(e),new ks(t)},Zo.version="19.2.3",Zo}var Pp;function fS(){if(Pp)return Fu.exports;Pp=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Fu.exports=dS(),Fu.exports}var gS=fS();const mS=by(gS);const H={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ei={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Zi={GET:"GET",POST:"POST"},Wa=[H.OPENID_SCOPE,H.PROFILE_SCOPE,H.OFFLINE_ACCESS_SCOPE],xp=[...Wa,H.EMAIL_SCOPE],St={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Bp={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},bi={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ms={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},ht={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},Th={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},cc={QUERY:"query",FRAGMENT:"fragment"},pS={QUERY:"query"},wy={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Ns={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},or={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ut={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},vh="appmetadata",yS="client_info",qs="1",js={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Qt={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},lt={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},we={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},tr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Kp={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Ga={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Zu={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ji={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},CS={Pop:"pop"},Ry=300;const Ys="unexpected_error",TS="post_request_failed";const Gp={[Ys]:"Unexpected error in authentication.",[TS]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Ne extends Error{constructor(n,a,r){const c=a?`${n}: ${a}`:n;super(c),Object.setPrototypeOf(this,Ne.prototype),this.errorCode=n||H.EMPTY_STRING,this.errorMessage=a||H.EMPTY_STRING,this.subError=r||H.EMPTY_STRING,this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function ah(u,n){return new Ne(u,n?`${Gp[u]} ${n}`:Gp[u])}const Ah="client_info_decoding_error",Iy="client_info_empty_error",Sh="token_parsing_error",ky="null_or_empty_token",Qn="endpoints_resolution_error",Oy="network_error",My="openid_config_error",Ny="hash_not_deserialized",Za="invalid_state",Dy="state_mismatch",oh="state_not_found",Uy="nonce_mismatch",Eh="auth_time_not_found",Hy="max_age_transpired",vS="multiple_matching_tokens",AS="multiple_matching_accounts",Ly="multiple_matching_appMetadata",zy="request_cannot_be_made",Py="cannot_remove_empty_scope",xy="cannot_append_scopeset",rh="empty_input_scopeset",SS="device_code_polling_cancelled",ES="device_code_expired",_S="device_code_unknown_error",_h="no_account_in_silent_request",By="invalid_cache_record",bh="invalid_cache_environment",sh="no_account_found",ch="no_crypto_object",bS="unexpected_credential_type",wS="invalid_assertion",RS="invalid_client_credential",wi="token_refresh_required",IS="user_timeout_reached",Ky="token_claims_cnf_required_for_signedjwt",Gy="authorization_code_missing_from_server_response",qy="binding_key_not_removed",jy="end_session_endpoint_not_supported",wh="key_id_missing",kS="no_network_connectivity",OS="user_canceled",MS="missing_tenant_id_error",oe="method_not_implemented",NS="nested_app_auth_bridge_disabled",DS="platform_broker_error";const qp={[Ah]:"The client info could not be parsed/decoded correctly",[Iy]:"The client info was empty",[Sh]:"Token cannot be parsed",[ky]:"The token is null or empty",[Qn]:"Endpoints cannot be resolved",[Oy]:"Network request failed",[My]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Ny]:"The hash parameters could not be deserialized",[Za]:"State was not the expected format",[Dy]:"State mismatch error",[oh]:"State not found",[Uy]:"Nonce mismatch error",[Eh]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Hy]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[vS]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[AS]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ly]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[zy]:"Token request cannot be made without authorization code or refresh token.",[Py]:"Cannot remove null or empty scope from ScopeSet",[xy]:"Cannot append ScopeSet",[rh]:"Empty input ScopeSet cannot be processed",[SS]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[ES]:"Device code is expired.",[_S]:"Device code stopped polling for unknown reasons.",[_h]:"Please pass an account object, silent flow is not supported without account information",[By]:"Cache record object was null or undefined.",[bh]:"Invalid environment when attempting to create cache entry",[sh]:"No account found in cache for given key.",[ch]:"No crypto object detected.",[bS]:"Unexpected credential type.",[wS]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[RS]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[wi]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[IS]:"User defined timeout for device code polling reached",[Ky]:"Cannot generate a POP jwt if the token_claims are not populated",[Gy]:"Server response does not contain an authorization code to proceed",[qy]:"Could not remove the credential's binding key from storage.",[jy]:"The provided authority does not support logout",[wh]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[kS]:"No network connectivity. Check your internet connection.",[OS]:"User cancelled the flow.",[MS]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[oe]:"This method has not been implemented",[NS]:"The nested app auth bridge is disabled",[DS]:"An error occurred in the native broker. See the platformBrokerError property for details."};class Rh extends Ne{constructor(n,a){super(n,a?`${qp[n]}: ${a}`:qp[n]),this.name="ClientAuthError",Object.setPrototypeOf(this,Rh.prototype)}}function z(u,n){return new Rh(u,n)}const Qs={createNewGuid:()=>{throw z(oe)},base64Decode:()=>{throw z(oe)},base64Encode:()=>{throw z(oe)},base64UrlEncode:()=>{throw z(oe)},encodeKid:()=>{throw z(oe)},async getPublicKeyThumbprint(){throw z(oe)},async removeTokenBindingKey(){throw z(oe)},async clearKeystore(){throw z(oe)},async signJwt(){throw z(oe)},async hashString(){throw z(oe)}};var Pe;(function(u){u[u.Error=0]="Error",u[u.Warning=1]="Warning",u[u.Info=2]="Info",u[u.Verbose=3]="Verbose",u[u.Trace=4]="Trace"})(Pe||(Pe={}));class ki{constructor(n,a,r){this.level=Pe.Info;const c=()=>{},h=n||ki.createDefaultLoggerOptions();this.localCallback=h.loggerCallback||c,this.piiLoggingEnabled=h.piiLoggingEnabled||!1,this.level=typeof h.logLevel=="number"?h.logLevel:Pe.Info,this.correlationId=h.correlationId||H.EMPTY_STRING,this.packageName=a||H.EMPTY_STRING,this.packageVersion=r||H.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Pe.Info}}clone(n,a,r){return new ki({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},n,a)}logMessage(n,a){if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const h=`${`[${new Date().toUTCString()}] : [${a.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Pe[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,h,a.containsPii||!1)}executeCallback(n,a,r){this.localCallback&&this.localCallback(n,a,r)}error(n,a){this.logMessage(n,{logLevel:Pe.Error,containsPii:!1,correlationId:a||H.EMPTY_STRING})}errorPii(n,a){this.logMessage(n,{logLevel:Pe.Error,containsPii:!0,correlationId:a||H.EMPTY_STRING})}warning(n,a){this.logMessage(n,{logLevel:Pe.Warning,containsPii:!1,correlationId:a||H.EMPTY_STRING})}warningPii(n,a){this.logMessage(n,{logLevel:Pe.Warning,containsPii:!0,correlationId:a||H.EMPTY_STRING})}info(n,a){this.logMessage(n,{logLevel:Pe.Info,containsPii:!1,correlationId:a||H.EMPTY_STRING})}infoPii(n,a){this.logMessage(n,{logLevel:Pe.Info,containsPii:!0,correlationId:a||H.EMPTY_STRING})}verbose(n,a){this.logMessage(n,{logLevel:Pe.Verbose,containsPii:!1,correlationId:a||H.EMPTY_STRING})}verbosePii(n,a){this.logMessage(n,{logLevel:Pe.Verbose,containsPii:!0,correlationId:a||H.EMPTY_STRING})}trace(n,a){this.logMessage(n,{logLevel:Pe.Trace,containsPii:!1,correlationId:a||H.EMPTY_STRING})}tracePii(n,a){this.logMessage(n,{logLevel:Pe.Trace,containsPii:!0,correlationId:a||H.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Yy="@azure/msal-common",Ih="15.14.0";const kh={None:"none"};const Qy="redirect_uri_empty",US="claims_request_parsing_error",Fy="authority_uri_insecure",Wo="url_parse_error",Vy="empty_url_error",Xy="empty_input_scopes_error",Oh="invalid_claims",Jy="token_request_empty",Zy="logout_request_empty",HS="invalid_code_challenge_method",Mh="pkce_params_missing",Nh="invalid_cloud_discovery_metadata",$y="invalid_authority_metadata",Wy="untrusted_authority",lc="missing_ssh_jwk",eC="missing_ssh_kid",LS="missing_nonce_authentication_header",zS="invalid_authentication_header",tC="cannot_set_OIDCOptions",nC="cannot_allow_platform_broker",iC="authority_mismatch",aC="invalid_request_method_for_EAR",oC="invalid_authorize_post_body_parameters",rC="invalid_platform_broker_configuration";const PS={[Qy]:"A redirect URI is required for all calls, and none has been set.",[US]:"Could not parse the given claims request object.",[Fy]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Wo]:"URL could not be parsed into appropriate segments.",[Vy]:"URL was empty or null.",[Xy]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Oh]:"Given claims parameter must be a stringified JSON object.",[Jy]:"Token request was empty and not found in cache.",[Zy]:"The logout request was null or undefined.",[HS]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Mh]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Nh]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[$y]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Wy]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[lc]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[eC]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[LS]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[zS]:"Invalid authentication header provided",[tC]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[nC]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[iC]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[oC]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[aC]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[rC]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."};class Dh extends Ne{constructor(n){super(n,PS[n]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Dh.prototype)}}function Me(u){return new Dh(u)}class Ft{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},r=n.split("&"),c=h=>decodeURIComponent(h.replace(/\+/g," "));return r.forEach(h=>{if(h.trim()){const[d,g]=h.split(/=(.+)/g,2);d&&g&&(a[c(d)]=c(g))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}static matchPattern(n,a){return new RegExp(n.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(a)}}class We{constructor(n){const a=n?Ft.trimArrayEntries([...n]):[],r=a?Ft.removeEmptyStringsFromArray(a):[];if(!r||!r.length)throw Me(Xy);this.scopes=new Set,r.forEach(c=>this.scopes.add(c))}static fromString(n){const r=(n||H.EMPTY_STRING).split(" ");return new We(r)}static createSearchScopes(n){const a=n&&n.length>0?n:[...Wa],r=new We(a);return r.containsOnlyOIDCScopes()?r.removeScope(H.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(n){const a=this.printScopesLowerCase().split(" "),r=new We(a);return n?r.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return xp.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw z(xy)}}removeScope(n){if(!n)throw z(Py);this.scopes.delete(n.trim())}removeOIDCScopes(){xp.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw z(rh);const a=new Set;return n.scopes.forEach(r=>a.add(r.toLowerCase())),this.scopes.forEach(r=>a.add(r.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw z(rh);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),r=n.getScopeCount(),c=this.getScopeCount();return a.size<c+r}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):H.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Fs(u,n){if(!u)throw z(Iy);try{const a=n(u);return JSON.parse(a)}catch{throw z(Ah)}}function Ya(u){if(!u)throw z(Ah);const n=u.split(or.CLIENT_INFO_SEPARATOR,2);return{uid:n[0],utid:n.length<2?H.EMPTY_STRING:n[1]}}function jp(u,n){return!!u&&!!n&&u===n.split(".")[1]}function uc(u,n,a,r){if(r){const{oid:c,sub:h,tid:d,name:g,tfp:m,acr:y,preferred_username:S,upn:_,login_hint:k}=r,B=d||m||y||"";return{tenantId:B,localAccountId:c||h||"",name:g,username:S||_||"",loginHint:k,isHomeTenant:jp(B,u)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:jp(a,u)}}function Uh(u,n,a,r){let c=u;if(n){const{isHomeTenant:h,...d}=n;c={...u,...d}}if(a){const{isHomeTenant:h,...d}=uc(u.homeAccountId,u.localAccountId,u.tenantId,a);return c={...c,...d,idTokenClaims:a,idToken:r},c}return c}const mn={Default:0,Adfs:1,Dsts:2,Ciam:3};function Hh(u){return u&&(u.tid||u.tfp||u.acr)||null}const Dt={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class Ke{static getAccountInfo(n){return{homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:n.username,localAccountId:n.localAccountId,loginHint:n.loginHint,name:n.name,nativeAccountId:n.nativeAccountId,authorityType:n.authorityType,tenantProfiles:new Map((n.tenantProfiles||[]).map(a=>[a.tenantId,a])),dataBoundary:n.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(n,a,r){const c=new Ke;a.authorityType===mn.Adfs?c.authorityType=Ns.ADFS_ACCOUNT_TYPE:a.protocolMode===Dt.OIDC?c.authorityType=Ns.GENERIC_ACCOUNT_TYPE:c.authorityType=Ns.MSSTS_ACCOUNT_TYPE;let h;n.clientInfo&&r&&(h=Fs(n.clientInfo,r),h.xms_tdbr&&(c.dataBoundary=h.xms_tdbr==="EU"?"EU":"None")),c.clientInfo=n.clientInfo,c.homeAccountId=n.homeAccountId,c.nativeAccountId=n.nativeAccountId;const d=n.environment||a&&a.getPreferredCache();if(!d)throw z(bh);c.environment=d,c.realm=h?.utid||Hh(n.idTokenClaims)||"",c.localAccountId=h?.uid||n.idTokenClaims?.oid||n.idTokenClaims?.sub||"";const g=n.idTokenClaims?.preferred_username||n.idTokenClaims?.upn,m=n.idTokenClaims?.emails?n.idTokenClaims.emails[0]:null;if(c.username=g||m||"",c.loginHint=n.idTokenClaims?.login_hint,c.name=n.idTokenClaims?.name||"",c.cloudGraphHostName=n.cloudGraphHostName,c.msGraphHost=n.msGraphHost,n.tenantProfiles)c.tenantProfiles=n.tenantProfiles;else{const y=uc(n.homeAccountId,c.localAccountId,c.realm,n.idTokenClaims);c.tenantProfiles=[y]}return c}static createFromAccountInfo(n,a,r){const c=new Ke;return c.authorityType=n.authorityType||Ns.GENERIC_ACCOUNT_TYPE,c.homeAccountId=n.homeAccountId,c.localAccountId=n.localAccountId,c.nativeAccountId=n.nativeAccountId,c.realm=n.tenantId,c.environment=n.environment,c.username=n.username,c.name=n.name,c.loginHint=n.loginHint,c.cloudGraphHostName=a,c.msGraphHost=r,c.tenantProfiles=Array.from(n.tenantProfiles?.values()||[]),c.dataBoundary=n.dataBoundary,c}static generateHomeAccountId(n,a,r,c,h){if(!(a===mn.Adfs||a===mn.Dsts)){if(n)try{const d=Fs(n,c.base64Decode);if(d.uid&&d.utid)return`${d.uid}.${d.utid}`}catch{}r.warning("No client info in response")}return h?.sub||""}static isAccountEntity(n){return n?n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("realm")&&n.hasOwnProperty("localAccountId")&&n.hasOwnProperty("username")&&n.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(n,a,r){if(!n||!a)return!1;let c=!0;if(r){const h=n.idTokenClaims||{},d=a.idTokenClaims||{};c=h.iat===d.iat&&h.nonce===d.nonce}return n.homeAccountId===a.homeAccountId&&n.localAccountId===a.localAccountId&&n.username===a.username&&n.tenantId===a.tenantId&&n.loginHint===a.loginHint&&n.environment===a.environment&&n.nativeAccountId===a.nativeAccountId&&c}}function _n(u,n){const a=xS(u);try{const r=n(a);return JSON.parse(r)}catch{throw z(Sh)}}function bn(u){if(!u.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return u.signin_state.some(r=>n.includes(r.trim().toLowerCase()))}function xS(u){if(!u)throw z(ky);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(u);if(!a||a.length<4)throw z(Sh);return a[2]}function sC(u,n){if(n===0||Date.now()-3e5>u+n)throw z(Hy)}function Yp(u){if(!u)return u;let n=u.toLowerCase();return Ft.endsWith(n,"?")?n=n.slice(0,-1):Ft.endsWith(n,"?/")&&(n=n.slice(0,-2)),Ft.endsWith(n,"/")||(n+="/"),n}function cC(u){return u.startsWith("#/")?u.substring(2):u.startsWith("#")||u.startsWith("?")?u.substring(1):u}function Vs(u){if(!u||u.indexOf("=")<0)return null;try{const n=cC(u),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw z(Ny)}return null}function rr(u,n=!0,a){const r=new Array;return u.forEach((c,h)=>{!n&&a&&h in a?r.push(`${h}=${c}`):r.push(`${h}=${encodeURIComponent(c)}`)}),r.join("&")}function Qp(u){if(!u)return u;const n=u.split("#")[0];try{const a=new URL(n),r=a.origin+a.pathname+a.search;return Yp(r)}catch{return Yp(n)}}class Te{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw Me(Vy);n.includes("#")||(this._urlString=Te.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return Ft.endsWith(a,"?")?a=a.slice(0,-1):Ft.endsWith(a,"?/")&&(a=a.slice(0,-2)),Ft.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw Me(Wo)}if(!n.HostNameAndPort||!n.PathSegments)throw Me(Wo);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw Me(Fy)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return Te.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),r=a.PathSegments;return n&&r.length!==0&&(r[0]===bi.COMMON||r[0]===bi.ORGANIZATIONS)&&(r[0]=n),Te.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw Me(Wo);const r={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let c=r.AbsolutePath.split("/");return c=c.filter(h=>h&&h.length>0),r.PathSegments=c,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=n.match(a);if(!r)throw Me(Wo);return r[2]}static getAbsoluteUrl(n,a){if(n[0]===H.FORWARD_SLASH){const c=new Te(a).getUrlComponents();return c.Protocol+"//"+c.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new Te(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}static hashContainsKnownProperties(n){return!!Vs(n)}}const lC={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Fp=lC.endpointMetadata,Lh=lC.instanceDiscoveryMetadata,uC=new Set;Lh.metadata.forEach(u=>{u.aliases.forEach(n=>{uC.add(n)})});function BS(u,n){let a;const r=u.canonicalAuthority;if(r){const c=new Te(r).getUrlComponents().HostNameAndPort;a=Vp(c,u.cloudDiscoveryMetadata?.metadata,Qt.CONFIG,n)||Vp(c,Lh.metadata,Qt.HARDCODED_VALUES,n)||u.knownAuthorities}return a||[]}function Vp(u,n,a,r){if(r?.trace(`getAliasesFromMetadata called with source: ${a}`),u&&n){const c=Xs(n,u);if(c)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${a}, returning aliases`),c.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${a}`)}return null}function KS(u){return Xs(Lh.metadata,u)}function Xs(u,n){for(let a=0;a<u.length;a++){const r=u[a];if(r.aliases.includes(n))return r}return null}const Js="cache_quota_exceeded",zh="cache_error_unknown";const $u={[Js]:"Exceeded cache storage capacity.",[zh]:"Unexpected error occurred when using cache storage."};class Qa extends Ne{constructor(n,a){const r=a||($u[n]?$u[n]:$u[zh]);super(`${n}: ${r}`),Object.setPrototypeOf(this,Qa.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=r}}function lh(u){return u instanceof Error?u.name==="QuotaExceededError"||u.name==="NS_ERROR_DOM_QUOTA_REACHED"||u.message.includes("exceeded the quota")?new Qa(Js):new Qa(u.name,u.message):new Qa(zh)}class uh{constructor(n,a,r,c,h){this.clientId=n,this.cryptoImpl=a,this.commonLogger=r.clone(Yy,Ih),this.staticAuthorityOptions=h,this.performanceClient=c}getAllAccounts(n,a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){if(Object.keys(n).length===0||Object.values(n).every(c=>!c))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(n,a);return r.length>1?r.sort(h=>h.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(n,a){const r=this.getAccountsFilteredBy(n,a);return r.length>0?Ke.getAccountInfo(r[0]):null}buildTenantProfiles(n,a,r){return n.flatMap(c=>this.getTenantProfilesFromAccountEntity(c,a,r?.tenantId,r))}getTenantedAccountInfoByFilter(n,a,r,c,h){let d=null,g;if(h&&!this.tenantProfileMatchesFilter(r,h))return null;const m=this.getIdToken(n,c,a,r.tenantId);return m&&(g=_n(m.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(g,h))?null:(d=Uh(n,r,g,m?.secret),d)}getTenantProfilesFromAccountEntity(n,a,r,c){const h=Ke.getAccountInfo(n);let d=h.tenantProfiles||new Map;const g=this.getTokenKeys();if(r){const y=d.get(r);if(y)d=new Map([[r,y]]);else return[]}const m=[];return d.forEach(y=>{const S=this.getTenantedAccountInfoByFilter(h,g,y,a,c);S&&m.push(S)}),m}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,r,c,h){if(!n)throw z(By);try{n.account&&await this.setAccount(n.account,a,r,c),n.idToken&&h?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,r),n.accessToken&&h?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,r),n.refreshToken&&h?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,r),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(d){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),d instanceof Ne?d:lh(d)}}async saveAccessToken(n,a,r){const c={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType,requestedClaimsHash:n.requestedClaimsHash},h=this.getTokenKeys(),d=We.fromString(n.target);h.accessToken.forEach(g=>{if(!this.accessTokenKeyMatchesFilter(g,c,!1))return;const m=this.getAccessTokenCredential(g,a);m&&this.credentialMatchesFilter(m,c)&&We.fromString(m.target).intersectingScopeSets(d)&&this.removeAccessToken(g,a)}),await this.setAccessTokenCredential(n,a,r)}getAccountsFilteredBy(n,a){const r=this.getAccountKeys(),c=[];return r.forEach(h=>{const d=this.getAccount(h,a);if(!d||n.homeAccountId&&!this.matchHomeAccountId(d,n.homeAccountId)||n.username&&!this.matchUsername(d.username,n.username)||n.environment&&!this.matchEnvironment(d,n.environment)||n.realm&&!this.matchRealm(d,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(d,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(d,n.authorityType))return;const g={localAccountId:n?.localAccountId,name:n?.name},m=d.tenantProfiles?.filter(y=>this.tenantProfileMatchesFilter(y,g));m&&m.length===0||c.push(d)}),c}credentialMatchesFilter(n,a){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||(a.requestedClaimsHash||n.requestedClaimsHash)&&n.requestedClaimsHash!==a.requestedClaimsHash||n.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===we.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n){const a=this.getKeys(),r={};return a.forEach(c=>{if(!this.isAppMetadata(c))return;const h=this.getAppMetadata(c);h&&(n.environment&&!this.matchEnvironment(h,n.environment)||n.clientId&&!this.matchClientId(h,n.clientId)||(r[c]=h))}),r}getAuthorityMetadataByAlias(n){const a=this.getAuthorityMetadataKeys();let r=null;return a.forEach(c=>{if(!this.isAuthorityMetadata(c)||c.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(c);h&&h.aliases.indexOf(n)!==-1&&(r=h)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(r=>{this.removeAccount(r,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const r=this.getAccountKeys(),c=h=>h.includes(n.homeAccountId)&&h.includes(n.environment);r.filter(c).forEach(h=>{this.removeItem(h,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const r=this.getTokenKeys(),c=h=>h.includes(n.homeAccountId)&&h.includes(n.environment);r.idToken.filter(c).forEach(h=>{this.removeIdToken(h,a)}),r.accessToken.filter(c).forEach(h=>{this.removeAccessToken(h,a)}),r.refreshToken.filter(c).forEach(h=>{this.removeRefreshToken(h,a)})}removeAccessToken(n,a){const r=this.getAccessTokenCredential(n,a);if(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),!r||r.credentialType.toLowerCase()!==ut.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==we.POP)return;const c=r.keyId;c&&this.cryptoImpl.removeTokenBindingKey(c).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${c}`,a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}removeAppMetadata(n){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,n)}),!0}getIdToken(n,a,r,c,h){this.commonLogger.trace("CacheManager - getIdToken called");const d={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:ut.ID_TOKEN,clientId:this.clientId,realm:c},g=this.getIdTokensByFilter(d,a,r),m=g.size;if(m<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(m>1){let y=g;if(!c){const S=new Map;g.forEach((k,B)=>{k.realm===n.tenantId&&S.set(B,k)});const _=S.size;if(_<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),g.values().next().value;if(_===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),S.values().next().value;y=S}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),y.forEach((S,_)=>{this.removeIdToken(_,a)}),h&&a&&h.addFields({multiMatchedID:g.size},a),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),g.values().next().value}getIdTokensByFilter(n,a,r){const c=r&&r.idToken||this.getTokenKeys().idToken,h=new Map;return c.forEach(d=>{if(!this.idTokenKeyMatchesFilter(d,{clientId:this.clientId,...n}))return;const g=this.getIdTokenCredential(d,a);g&&this.credentialMatchesFilter(g,n)&&h.set(d,g)}),h}idTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,r,c){const h=a.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",h);const d=We.createSearchScopes(a.scopes),g=a.authenticationScheme||we.BEARER,m=g.toLowerCase()!==we.BEARER.toLowerCase()?ut.ACCESS_TOKEN_WITH_AUTH_SCHEME:ut.ACCESS_TOKEN,y={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:m,clientId:this.clientId,realm:c||n.tenantId,target:d,tokenType:g,keyId:a.sshKid,requestedClaimsHash:a.requestedClaimsHash},S=r&&r.accessToken||this.getTokenKeys().accessToken,_=[];S.forEach(B=>{if(this.accessTokenKeyMatchesFilter(B,y,!0)){const W=this.getAccessTokenCredential(B,h);W&&this.credentialMatchesFilter(W,y)&&_.push(W)}});const k=_.length;return k<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",h),null):k>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",h),_.forEach(B=>{this.removeAccessToken(this.generateCredentialKey(B),h)}),this.performanceClient.addFields({multiMatchedAT:_.length},h),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",h),_[0])}accessTokenKeyMatchesFilter(n,a,r){const c=n.toLowerCase();if(a.clientId&&c.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&c.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&c.indexOf(a.realm.toLowerCase())===-1||a.requestedClaimsHash&&c.indexOf(a.requestedClaimsHash.toLowerCase())===-1)return!1;if(a.target){const h=a.target.asArray();for(let d=0;d<h.length;d++){if(r&&!c.includes(h[d].toLowerCase()))return!1;if(!r&&c.includes(h[d].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const r=this.getTokenKeys(),c=[];return r.accessToken.forEach(h=>{if(!this.accessTokenKeyMatchesFilter(h,n,!0))return;const d=this.getAccessTokenCredential(h,a);d&&this.credentialMatchesFilter(d,n)&&c.push(d)}),c}getRefreshToken(n,a,r,c,h){this.commonLogger.trace("CacheManager - getRefreshToken called");const d=a?qs:void 0,g={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:ut.REFRESH_TOKEN,clientId:this.clientId,familyId:d},m=c&&c.refreshToken||this.getTokenKeys().refreshToken,y=[];m.forEach(_=>{if(this.refreshTokenKeyMatchesFilter(_,g)){const k=this.getRefreshTokenCredential(_,r);k&&this.credentialMatchesFilter(k,g)&&y.push(k)}});const S=y.length;return S<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(S>1&&h&&r&&h.addFields({multiMatchedRT:S},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),y[0])}refreshTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.familyId&&r.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n){const a={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(a),c=Object.keys(r).map(d=>r[d]),h=c.length;if(h<1)return null;if(h>1)throw z(Ly);return c[0]}isAppMetadataFOCI(n){const a=this.readAppMetadataFromCache(n);return!!(a&&a.familyId===qs)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const r=n.oid||n.sub;return a===r}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a){if(this.staticAuthorityOptions){const c=BS(this.staticAuthorityOptions,this.commonLogger);if(c.includes(a)&&c.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==ut.ACCESS_TOKEN&&n.credentialType!==ut.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:We.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(vh)!==-1}isAuthorityMetadata(n){return n.indexOf(js.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(n){return`${js.CACHE_KEY}-${this.clientId}-${n}`}static toObject(n,a){for(const r in a)n[r]=a[r];return n}}class GS extends uh{async setAccount(){throw z(oe)}getAccount(){throw z(oe)}async setIdTokenCredential(){throw z(oe)}getIdTokenCredential(){throw z(oe)}async setAccessTokenCredential(){throw z(oe)}getAccessTokenCredential(){throw z(oe)}async setRefreshTokenCredential(){throw z(oe)}getRefreshTokenCredential(){throw z(oe)}setAppMetadata(){throw z(oe)}getAppMetadata(){throw z(oe)}setServerTelemetry(){throw z(oe)}getServerTelemetry(){throw z(oe)}setAuthorityMetadata(){throw z(oe)}getAuthorityMetadata(){throw z(oe)}getAuthorityMetadataKeys(){throw z(oe)}setThrottlingCache(){throw z(oe)}getThrottlingCache(){throw z(oe)}removeItem(){throw z(oe)}getKeys(){throw z(oe)}getAccountKeys(){throw z(oe)}getTokenKeys(){throw z(oe)}generateCredentialKey(){throw z(oe)}generateAccountKey(){throw z(oe)}}const T={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse",LoadExternalTokens:"LoadExternalTokens",LoadAccount:"loadAccount",LoadIdToken:"loadIdToken",LoadAccessToken:"loadAccessToken",LoadRefreshToken:"loadRefreshToken"},qS={InProgress:1};class Xp{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class hC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:qS.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""},measurement:new Xp}}startPerformanceMeasurement(){return new Xp}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const dC={tokenRenewalOffsetSeconds:Ry,preventCorsPreflight:!1},jS={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Pe.Info,correlationId:H.EMPTY_STRING},YS={claimsBasedCachingEnabled:!1},QS={async sendGetRequestAsync(){throw z(oe)},async sendPostRequestAsync(){throw z(oe)}},FS={sku:H.SKU,version:Ih,cpu:H.EMPTY_STRING,os:H.EMPTY_STRING},VS={clientSecret:H.EMPTY_STRING,clientAssertion:void 0},XS={azureCloudInstance:kh.None,tenant:`${H.DEFAULT_COMMON_TENANT}`},JS={application:{appName:"",appVersion:""}};function ZS({authOptions:u,systemOptions:n,loggerOptions:a,cacheOptions:r,storageInterface:c,networkInterface:h,cryptoInterface:d,clientCredentials:g,libraryInfo:m,telemetry:y,serverTelemetryManager:S,persistencePlugin:_,serializableCache:k}){const B={...jS,...a};return{authOptions:$S(u),systemOptions:{...dC,...n},loggerOptions:B,cacheOptions:{...YS,...r},storageInterface:c||new GS(u.clientId,Qs,new ki(B),new hC),networkInterface:h||QS,cryptoInterface:d||Qs,clientCredentials:g||VS,libraryInfo:{...FS,...m},telemetry:{...JS,...y},serverTelemetryManager:S||null,persistencePlugin:_||null,serializableCache:k||null}}function $S(u){return{clientCapabilities:[],azureCloudOptions:XS,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...u}}function fC(u){return u.authOptions.authority.options.protocolMode===Dt.OIDC}const pn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};const $i="client_id",gC="redirect_uri",WS="response_type",eE="response_mode",tE="grant_type",nE="claims",iE="scope",aE="refresh_token",oE="state",rE="nonce",sE="prompt",cE="code",lE="code_challenge",uE="code_challenge_method",hE="code_verifier",dE="client-request-id",fE="x-client-SKU",gE="x-client-VER",mE="x-client-OS",pE="x-client-CPU",yE="x-client-current-telemetry",CE="x-client-last-telemetry",TE="x-ms-lib-capability",vE="x-app-name",AE="x-app-ver",SE="post_logout_redirect_uri",EE="id_token_hint",_E="client_secret",bE="client_assertion",wE="client_assertion_type",mC="token_type",pC="req_cnf",Jp="return_spa_code",RE="nativebroker",IE="logout_hint",kE="sid",OE="login_hint",ME="domain_hint",NE="x-client-xtra-sku",Zs="brk_client_id",$s="brk_redirect_uri",hh="instance_aware",DE="ear_jwk",UE="ear_jwe_crypto";function hc(u,n,a){if(!n)return;const r=u.get($i);r&&u.has(Zs)&&a?.addFields({embeddedClientId:r,embeddedRedirectUri:u.get(gC)},n)}function Ph(u,n){u.set(WS,n)}function HE(u,n){u.set(eE,n||pS.QUERY)}function LE(u){u.set(RE,"1")}function xh(u,n,a=!0,r=Wa){a&&!r.includes("openid")&&!n.includes("openid")&&r.push("openid");const c=a?[...n||[],...r]:n||[],h=new We(c);u.set(iE,h.printScopes())}function Bh(u,n){u.set($i,n)}function Kh(u,n){u.set(gC,n)}function zE(u,n){u.set(SE,n)}function PE(u,n){u.set(EE,n)}function xE(u,n){u.set(ME,n)}function Ds(u,n){u.set(OE,n)}function Ws(u,n){u.set(St.CCS_HEADER,`UPN:${n}`)}function nr(u,n){u.set(St.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function Zp(u,n){u.set(kE,n)}function Gh(u,n,a){const r=YE(n,a);try{JSON.parse(r)}catch{throw Me(Oh)}u.set(nE,r)}function qh(u,n){u.set(dE,n)}function jh(u,n){u.set(fE,n.sku),u.set(gE,n.version),n.os&&u.set(mE,n.os),n.cpu&&u.set(pE,n.cpu)}function Yh(u,n){n?.appName&&u.set(vE,n.appName),n?.appVersion&&u.set(AE,n.appVersion)}function BE(u,n){u.set(sE,n)}function yC(u,n){n&&u.set(oE,n)}function KE(u,n){u.set(rE,n)}function Qh(u,n,a){if(n&&a)u.set(lE,n),u.set(uE,a);else throw Me(Mh)}function GE(u,n){u.set(cE,n)}function qE(u,n){u.set(aE,n)}function jE(u,n){u.set(hE,n)}function CC(u,n){u.set(_E,n)}function TC(u,n){n&&u.set(bE,n)}function vC(u,n){n&&u.set(wE,n)}function AC(u,n){u.set(tE,n)}function Fh(u){u.set(yS,"1")}function SC(u){u.has(hh)||u.set(hh,"true")}function Ri(u,n){Object.entries(n).forEach(([a,r])=>{!u.has(a)&&r&&u.set(a,r)})}function YE(u,n){let a;if(!u)a={};else try{a=JSON.parse(u)}catch{throw Me(Oh)}return n&&n.length>0&&(a.hasOwnProperty(Ms.ACCESS_TOKEN)||(a[Ms.ACCESS_TOKEN]={}),a[Ms.ACCESS_TOKEN][Ms.XMS_CC]={values:n}),JSON.stringify(a)}function Vh(u,n){n&&(u.set(mC,we.POP),u.set(pC,n))}function EC(u,n){n&&(u.set(mC,we.SSH),u.set(pC,n))}function _C(u,n){u.set(yE,n.generateCurrentRequestHeaderValue()),u.set(CE,n.generateLastRequestHeaderValue())}function bC(u){u.set(TE,tr.X_MS_LIB_CAPABILITY_VALUE)}function QE(u,n){u.set(IE,n)}function dc(u,n,a){u.has(Zs)||u.set(Zs,n),u.has($s)||u.set($s,a)}function FE(u,n){u.set(DE,encodeURIComponent(n)),u.set(UE,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function VE(u,n){Object.entries(n).forEach(([a,r])=>{r&&u.set(a,r)})}function XE(u){return u.hasOwnProperty("authorization_endpoint")&&u.hasOwnProperty("token_endpoint")&&u.hasOwnProperty("issuer")&&u.hasOwnProperty("jwks_uri")}function JE(u){return u.hasOwnProperty("tenant_discovery_endpoint")&&u.hasOwnProperty("metadata")}function ZE(u){return u.hasOwnProperty("error")&&u.hasOwnProperty("error_description")}const Vt=(u,n,a,r,c)=>(...h)=>{a.trace(`Executing function ${n}`);const d=r?.startMeasurement(n,c);if(c){const g=n+"CallCount";r?.incrementFields({[g]:1},c)}try{const g=u(...h);return d?.end({success:!0}),a.trace(`Returning result from ${n}`),g}catch(g){a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw d?.end({success:!1},g),g}},O=(u,n,a,r,c)=>(...h)=>{a.trace(`Executing function ${n}`);const d=r?.startMeasurement(n,c);if(c){const g=n+"CallCount";r?.incrementFields({[g]:1},c)}return r?.setPreQueueTime(n,c),u(...h).then(g=>(a.trace(`Returning result from ${n}`),d?.end({success:!0}),g)).catch(g=>{a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw d?.end({success:!1},g),g})};class fc{constructor(n,a,r,c){this.networkInterface=n,this.logger=a,this.performanceClient=r,this.correlationId=c}async detectRegion(n,a){this.performanceClient?.addQueueMeasurement(T.RegionDiscoveryDetectRegion,this.correlationId);let r=n;if(r)a.region_source=Ga.ENVIRONMENT_VARIABLE;else{const c=fc.IMDS_OPTIONS;try{const h=await O(this.getRegionFromIMDS.bind(this),T.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(H.IMDS_VERSION,c);if(h.status===Ei.SUCCESS&&(r=h.body,a.region_source=Ga.IMDS),h.status===Ei.BAD_REQUEST){const d=await O(this.getCurrentVersion.bind(this),T.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(c);if(!d)return a.region_source=Ga.FAILED_AUTO_DETECTION,null;const g=await O(this.getRegionFromIMDS.bind(this),T.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,c);g.status===Ei.SUCCESS&&(r=g.body,a.region_source=Ga.IMDS)}}catch{return a.region_source=Ga.FAILED_AUTO_DETECTION,null}}return r||(a.region_source=Ga.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(n,a){return this.performanceClient?.addQueueMeasurement(T.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${H.IMDS_ENDPOINT}?api-version=${n}&format=text`,a,H.IMDS_TIMEOUT)}async getCurrentVersion(n){this.performanceClient?.addQueueMeasurement(T.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const a=await this.networkInterface.sendGetRequestAsync(`${H.IMDS_ENDPOINT}?format=json`,n);return a.status===Ei.BAD_REQUEST&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}fc.IMDS_OPTIONS={headers:{Metadata:"true"}};function Ut(){return Math.round(new Date().getTime()/1e3)}function $p(u){return u.getTime()/1e3}function Fa(u){return u?new Date(Number(u)*1e3):new Date}function ec(u,n){const a=Number(u)||0;return Ut()+n>a}function Wp(u,n){const a=Number(u)+n*24*60*60*1e3;return Date.now()>a}function $E(u){return Number(u)>Ut()}function gc(u,n,a,r,c){return{credentialType:ut.ID_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,realm:c,lastUpdatedAt:Date.now().toString()}}function mc(u,n,a,r,c,h,d,g,m,y,S,_,k,B,W){const F={homeAccountId:u,credentialType:ut.ACCESS_TOKEN,secret:a,cachedAt:Ut().toString(),expiresOn:d.toString(),extendedExpiresOn:g.toString(),environment:n,clientId:r,realm:c,target:h,tokenType:S||we.BEARER,lastUpdatedAt:Date.now().toString()};if(_&&(F.userAssertionHash=_),y&&(F.refreshOn=y.toString()),B&&(F.requestedClaims=B,F.requestedClaimsHash=W),F.tokenType?.toLowerCase()!==we.BEARER.toLowerCase())switch(F.credentialType=ut.ACCESS_TOKEN_WITH_AUTH_SCHEME,F.tokenType){case we.POP:const Ae=_n(a,m);if(!Ae?.cnf?.kid)throw z(Ky);F.keyId=Ae.cnf.kid;break;case we.SSH:F.keyId=k}return F}function wC(u,n,a,r,c,h,d){const g={credentialType:ut.REFRESH_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,lastUpdatedAt:Date.now().toString()};return h&&(g.userAssertionHash=h),c&&(g.familyId=c),d&&(g.expiresOn=d.toString()),g}function pc(u){return u.hasOwnProperty("homeAccountId")&&u.hasOwnProperty("environment")&&u.hasOwnProperty("credentialType")&&u.hasOwnProperty("clientId")&&u.hasOwnProperty("secret")}function ey(u){return u?pc(u)&&u.hasOwnProperty("realm")&&u.hasOwnProperty("target")&&(u.credentialType===ut.ACCESS_TOKEN||u.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function WE(u){return u?pc(u)&&u.hasOwnProperty("realm")&&u.credentialType===ut.ID_TOKEN:!1}function ty(u){return u?pc(u)&&u.credentialType===ut.REFRESH_TOKEN:!1}function e_(u,n){const a=u.indexOf(lt.CACHE_KEY)===0;let r=!0;return n&&(r=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&r}function t_(u,n){let a=!1;u&&(a=u.indexOf(tr.THROTTLING_PREFIX)===0);let r=!0;return n&&(r=n.hasOwnProperty("throttleTime")),a&&r}function n_({environment:u,clientId:n}){return[vh,u,n].join(or.CACHE_KEY_SEPARATOR).toLowerCase()}function i_(u,n){return n?u.indexOf(vh)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function a_(u,n){return n?u.indexOf(js.CACHE_KEY)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function ny(){return Ut()+js.REFRESH_TIME_SECONDS}function Us(u,n,a){u.authorization_endpoint=n.authorization_endpoint,u.token_endpoint=n.token_endpoint,u.end_session_endpoint=n.end_session_endpoint,u.issuer=n.issuer,u.endpointsFromNetwork=a,u.jwks_uri=n.jwks_uri}function Wu(u,n,a){u.aliases=n.aliases,u.preferred_cache=n.preferred_cache,u.preferred_network=n.preferred_network,u.aliasesFromNetwork=a}function iy(u){return u.expiresAt<=Ut()}class yt{constructor(n,a,r,c,h,d,g,m){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=r,this.authorityOptions=c,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=h,this.performanceClient=g,this.correlationId=d,this.managedIdentity=m||!1,this.regionDiscovery=new fc(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(H.CIAM_AUTH_URL))return mn.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case H.ADFS:return mn.Adfs;case H.DSTS:return mn.Dsts}return mn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new Te(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw z(Qn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw z(Qn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw z(Qn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw z(jy);return this.replacePath(this.metadata.end_session_endpoint)}else throw z(Qn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw z(Qn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw z(Qn)}canReplaceTenant(n){return n.PathSegments.length===1&&!yt.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===mn.Default&&this.protocolMode!==Dt.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const c=new Te(this.metadata.canonical_authority).getUrlComponents(),h=c.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((g,m)=>{let y=h[m];if(m===0&&this.canReplaceTenant(c)){const S=new Te(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];y!==S&&(this.logger.verbose(`Replacing tenant domain name ${y} with id ${S}`),y=S)}g!==y&&(a=a.replace(`/${y}/`,`/${g}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===mn.Adfs||this.protocolMode===Dt.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(T.AuthorityResolveEndpointsAsync,this.correlationId);const n=this.getCurrentMetadataEntity(),a=await O(this.updateCloudDiscoveryMetadata.bind(this),T.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const r=await O(this.updateEndpointMetadata.bind(this),T.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:ny(),jwks_uri:""}),n}updateCachedMetadata(n,a,r){a!==Qt.CACHE&&r?.source!==Qt.CACHE&&(n.expiresAt=ny(),n.canonical_authority=this.canonicalAuthority);const c=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache);this.cacheManager.setAuthorityMetadata(c,n),this.metadata=n}async updateEndpointMetadata(n){this.performanceClient?.addQueueMeasurement(T.AuthorityUpdateEndpointMetadata,this.correlationId);const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===Qt.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const c=await O(this.updateMetadataWithRegionalInformation.bind(this),T.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(a.metadata);Us(n,c,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let r=await O(this.getEndpointMetadataFromNetwork.bind(this),T.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await O(this.updateMetadataWithRegionalInformation.bind(this),T.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Us(n,r,!0),Qt.NETWORK;throw z(My,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("Found endpoint metadata in authority configuration"),Us(n,a,!1),{source:Qt.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const c=this.getEndpointMetadataFromHardcodedValues();if(c)return Us(n,c,!1),{source:Qt.HARDCODED_VALUES,metadata:c};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=iy(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Qt.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(n){return new Te(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Me($y)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(T.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{const r=await this.networkInterface.sendGetRequestAsync(a,n);return XE(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Fp?Fp[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){this.performanceClient?.addQueueMeasurement(T.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==H.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Zu.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,yt.replaceWithRegionalInformation(n,a);const r=await O(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),T.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Zu.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,yt.replaceWithRegionalInformation(n,r);this.regionDiscoveryMetadata.region_outcome=Zu.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){this.performanceClient?.addQueueMeasurement(T.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const r=await O(this.getCloudDiscoveryMetadataFromNetwork.bind(this),T.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Wu(n,r,!0),Qt.NETWORK;throw Me(Wy)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||H.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||H.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${n.canonical_authority||H.NOT_APPLICABLE}`);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Wu(n,a,!1),Qt.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const c=KS(this.hostnameAndPort);if(c)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Wu(n,c,!1),Qt.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=iy(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Qt.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===mn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),yt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=Xs(n.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),a)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),a;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Me(Nh)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),yt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(T.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const n=`${H.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let r=null;try{const c=await this.networkInterface.sendGetRequestAsync(n,a);let h,d;if(JE(c.body))h=c.body,d=h.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${h.tenant_discovery_endpoint}`);else if(ZE(c.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${c.status}`),h=c.body,h.error===H.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${h.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${h.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),d=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Xs(d,this.hostnameAndPort)}catch(c){if(c instanceof Ne)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${c.errorCode}
Error Description: ${c.errorMessage}`);else{const h=c;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${h.name}
Error Description: ${h.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=yt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&Te.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let r;if(a&&a.azureCloudInstance!==kh.None){const c=a.tenant?a.tenant:H.DEFAULT_COMMON_TENANT;r=`${a.azureCloudInstance}/${c}/`}return r||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return H.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw z(Qn)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return uC.has(n)}static isPublicCloudAuthority(n){return H.KNOWN_PUBLIC_CLOUDS.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,r){const c=new Te(n);c.validateAsUri();const h=c.getUrlComponents();let d=`${a}.${h.HostNameAndPort}`;this.isPublicCloudAuthority(h.HostNameAndPort)&&(d=`${a}.${H.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const g=Te.constructAuthorityUriFromObject({...c.getUrlComponents(),HostNameAndPort:d}).urlString;return r?`${g}?${r}`:g}static replaceWithRegionalInformation(n,a){const r={...n};return r.authorization_endpoint=yt.buildRegionalAuthorityString(r.authorization_endpoint,a),r.token_endpoint=yt.buildRegionalAuthorityString(r.token_endpoint,a),r.end_session_endpoint&&(r.end_session_endpoint=yt.buildRegionalAuthorityString(r.end_session_endpoint,a)),r}static transformCIAMAuthority(n){let a=n;const c=new Te(n).getUrlComponents();if(c.PathSegments.length===0&&c.HostNameAndPort.endsWith(H.CIAM_AUTH_URL)){const h=c.HostNameAndPort.split(".")[0];a=`${a}${h}${H.AAD_TENANT_DOMAIN_SUFFIX}`}return a}}yt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",bi.COMMON,bi.CONSUMERS,bi.ORGANIZATIONS]);function o_(u){const r=new Te(u).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case bi.COMMON:case bi.ORGANIZATIONS:case bi.CONSUMERS:return;default:return r}}function RC(u){return u.endsWith(H.FORWARD_SLASH)?u:`${u}${H.FORWARD_SLASH}`}function r_(u){const n=u.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw Me(Nh)}return{canonicalAuthority:u.authority?RC(u.authority):void 0,knownAuthorities:u.knownAuthorities,cloudDiscoveryMetadata:a}}async function IC(u,n,a,r,c,h,d){d?.addQueueMeasurement(T.AuthorityFactoryCreateDiscoveredInstance,h);const g=yt.transformCIAMAuthority(RC(u)),m=new yt(g,n,a,r,c,h,d);try{return await O(m.resolveEndpointsAsync.bind(m),T.AuthorityResolveEndpointsAsync,c,d,h)(),m}catch{throw z(Qn)}}class ia extends Ne{constructor(n,a,r,c,h){super(n,a,r),this.name="ServerError",this.errorNo=c,this.status=h,Object.setPrototypeOf(this,ia.prototype)}}function yc(u,n,a){return{clientId:u,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.tokenBodyParameters?.clientId}}class Sn{static generateThrottlingStorageKey(n){return`${tr.THROTTLING_PREFIX}.${JSON.stringify(n)}`}static preProcess(n,a,r){const c=Sn.generateThrottlingStorageKey(a),h=n.getThrottlingCache(c);if(h){if(h.throttleTime<Date.now()){n.removeItem(c,r);return}throw new ia(h.errorCodes?.join(" ")||H.EMPTY_STRING,h.errorMessage,h.subError)}}static postProcess(n,a,r,c){if(Sn.checkResponseStatus(r)||Sn.checkResponseForRetryAfter(r)){const h={throttleTime:Sn.calculateThrottleTime(parseInt(r.headers[St.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};n.setThrottlingCache(Sn.generateThrottlingStorageKey(a),h,c)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty(St.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,r=Date.now()/1e3;return Math.floor(Math.min(r+(a||tr.DEFAULT_THROTTLE_TIME_SECONDS),r+tr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(n,a,r,c){const h=yc(a,r,c),d=this.generateThrottlingStorageKey(h);n.removeItem(d,r.correlationId)}}class Cc extends Ne{constructor(n,a,r){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,Cc.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=r}}function er(u,n,a,r){return u.errorMessage=`${u.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new Cc(u,n,a)}class Xh{constructor(n,a){this.config=ZS(n),this.logger=new ki(this.config.loggerOptions,Yy,Ih),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}createTokenRequestHeaders(n){const a={};if(a[St.CONTENT_TYPE]=H.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case pn.HOME_ACCOUNT_ID:try{const r=Ya(n.credential);a[St.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case pn.UPN:a[St.CCS_HEADER]=`UPN: ${n.credential}`;break}return a}async executePostToTokenEndpoint(n,a,r,c,h,d){d&&this.performanceClient?.addQueueMeasurement(d,h);const g=await this.sendPostRequest(c,n,{body:a,headers:r},h);return this.config.serverTelemetryManager&&g.status<500&&g.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),g}async sendPostRequest(n,a,r,c){Sn.preProcess(this.cacheManager,n,c);let h;try{h=await O(this.networkClient.sendPostRequestAsync.bind(this.networkClient),T.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,c)(a,r);const d=h.headers||{};this.performanceClient?.addFields({refreshTokenSize:h.body.refresh_token?.length||0,httpVerToken:d[St.X_MS_HTTP_VERSION]||"",requestId:d[St.X_MS_REQUEST_ID]||""},c)}catch(d){if(d instanceof Cc){const g=d.responseHeaders;throw g&&this.performanceClient?.addFields({httpVerToken:g[St.X_MS_HTTP_VERSION]||"",requestId:g[St.X_MS_REQUEST_ID]||"",contentTypeHeader:g[St.CONTENT_TYPE]||void 0,contentLengthHeader:g[St.CONTENT_LENGTH]||void 0,httpStatus:d.httpStatus},c),d.error}throw d instanceof Ne?d:z(Oy)}return Sn.postProcess(this.cacheManager,n,h,c),h}async updateAuthority(n,a){this.performanceClient?.addQueueMeasurement(T.UpdateTokenEndpointAuthority,a);const r=`https://${n}/${this.authority.tenant}/`,c=await IC(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=c}createTokenQueryParameters(n){const a=new Map;return n.embeddedClientId&&dc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenQueryParameters&&Ri(a,n.tokenQueryParameters),qh(a,n.correlationId),hc(a,n.correlationId,this.performanceClient),rr(a)}}const tc="no_tokens_found",kC="native_account_unavailable",Jh="refresh_token_expired",Zh="ux_not_allowed",s_="interaction_required",c_="consent_required",l_="login_required",Tc="bad_token";const ay=[s_,c_,l_,Tc,Zh],u_=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],h_={[tc]:"No refresh token found in the cache. Please sign-in.",[kC]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Jh]:"Refresh token has expired.",[Tc]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Zh]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Xt extends Ne{constructor(n,a,r,c,h,d,g,m){super(n,a,r),Object.setPrototypeOf(this,Xt.prototype),this.timestamp=c||H.EMPTY_STRING,this.traceId=h||H.EMPTY_STRING,this.correlationId=d||H.EMPTY_STRING,this.claims=g||H.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=m}}function OC(u,n,a){const r=!!u&&ay.indexOf(u)>-1,c=!!a&&u_.indexOf(a)>-1,h=!!n&&ay.some(d=>n.indexOf(d)>-1);return r||h||c}function nc(u){return new Xt(u,h_[u])}class eo{static setRequestState(n,a,r){const c=eo.generateLibraryState(n,r);return a?`${c}${H.RESOURCE_DELIM}${a}`:c}static generateLibraryState(n,a){if(!n)throw z(ch);const r={id:n.createNewGuid()};a&&(r.meta=a);const c=JSON.stringify(r);return n.base64Encode(c)}static parseRequestState(n,a){if(!n)throw z(ch);if(!a)throw z(Za);try{const r=a.split(H.RESOURCE_DELIM),c=r[0],h=r.length>1?r.slice(1).join(H.RESOURCE_DELIM):H.EMPTY_STRING,d=n.base64Decode(c),g=JSON.parse(d);return{userRequestState:h||H.EMPTY_STRING,libraryState:g}}catch{throw z(Za)}}}const d_={SW:"sw"};class $a{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){this.performanceClient?.addQueueMeasurement(T.PopTokenGenerateCnf,n.correlationId);const r=await O(this.generateKid.bind(this),T.PopTokenGenerateCnf,a,this.performanceClient,n.correlationId)(n),c=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:c}}async generateKid(n){return this.performanceClient?.addQueueMeasurement(T.PopTokenGenerateKid,n.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:d_.SW}}async signPopToken(n,a,r){return this.signPayload(n,a,r)}async signPayload(n,a,r,c){const{resourceRequestMethod:h,resourceRequestUri:d,shrClaims:g,shrNonce:m,shrOptions:y}=r,_=(d?new Te(d):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:Ut(),m:h?.toUpperCase(),u:_?.HostNameAndPort,nonce:m||this.cryptoUtils.createNewGuid(),p:_?.AbsolutePath,q:_?.QueryString?[[],_.QueryString]:void 0,client_claims:g||void 0,...c},a,y,r.correlationId)}}class f_{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Wi{constructor(n,a,r,c,h,d,g){this.clientId=n,this.cacheStorage=a,this.cryptoObj=r,this.logger=c,this.serializableCache=h,this.persistencePlugin=d,this.performanceClient=g}validateTokenResponse(n,a){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||H.NOT_AVAILABLE} - Timestamp: ${n.timestamp||H.NOT_AVAILABLE} - Description: ${n.error_description||H.NOT_AVAILABLE} - Correlation ID: ${n.correlation_id||H.NOT_AVAILABLE} - Trace ID: ${n.trace_id||H.NOT_AVAILABLE}`,c=n.error_codes?.length?n.error_codes[0]:void 0,h=new ia(n.error,r,n.suberror,c,n.status);if(a&&n.status&&n.status>=Ei.SERVER_ERROR_RANGE_START&&n.status<=Ei.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${h}`);return}else if(a&&n.status&&n.status>=Ei.CLIENT_ERROR_RANGE_START&&n.status<=Ei.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${h}`);return}throw OC(n.error,n.error_description,n.suberror)?new Xt(n.error,n.error_description,n.suberror,n.timestamp||H.EMPTY_STRING,n.trace_id||H.EMPTY_STRING,n.correlation_id||H.EMPTY_STRING,n.claims||H.EMPTY_STRING,c):h}}async handleServerTokenResponse(n,a,r,c,h,d,g,m,y,S){this.performanceClient?.addQueueMeasurement(T.HandleServerTokenResponse,n.correlation_id);let _;if(n.id_token){if(_=_n(n.id_token||H.EMPTY_STRING,this.cryptoObj.base64Decode),d&&d.nonce&&_.nonce!==d.nonce)throw z(Uy);if(c.maxAge||c.maxAge===0){const F=_.auth_time;if(!F)throw z(Eh);sC(F,c.maxAge)}}this.homeAccountIdentifier=Ke.generateHomeAccountId(n.client_info||H.EMPTY_STRING,a.authorityType,this.logger,this.cryptoObj,_);let k;d&&d.state&&(k=eo.parseRequestState(this.cryptoObj,d.state)),n.key_id=n.key_id||c.sshKid||void 0;const B=this.generateCacheRecord(n,a,r,c,_,g,d);let W;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),W=new f_(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(W)),m&&!y&&B.account){const F=this.cacheStorage.generateAccountKey(Ke.getAccountInfo(B.account));if(!this.cacheStorage.getAccount(F,c.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Wi.generateAuthenticationResult(this.cryptoObj,a,B,!1,c,_,k,void 0,S)}await this.cacheStorage.saveCacheRecord(B,c.correlationId,bn(_||{}),h,c.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&W&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(W))}return Wi.generateAuthenticationResult(this.cryptoObj,a,B,!1,c,_,k,n,S)}generateCacheRecord(n,a,r,c,h,d,g){const m=a.getPreferredCache();if(!m)throw z(bh);const y=Hh(h);let S,_;n.id_token&&h&&(S=gc(this.homeAccountIdentifier,m,n.id_token,this.clientId,y||""),_=$h(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,c.correlationId,h,n.client_info,m,y,g,void 0,this.logger));let k=null;if(n.access_token){const F=n.scope?We.fromString(n.scope):new We(c.scopes||[]),Ae=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,Re=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,le=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,de=r+Ae,Le=de+Re,Ge=le&&le>0?r+le:void 0;k=mc(this.homeAccountIdentifier,m,n.access_token,this.clientId,y||a.tenant||"",F.printScopes(),de,Le,this.cryptoObj.base64Decode,Ge,n.token_type,d,n.key_id,c.claims,c.requestedClaimsHash)}let B=null;if(n.refresh_token){let F;if(n.refresh_token_expires_in){const Ae=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;F=r+Ae,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:F},c.correlationId)}B=wC(this.homeAccountIdentifier,m,n.refresh_token,this.clientId,n.foci,d,F)}let W=null;return n.foci&&(W={clientId:this.clientId,environment:m,familyId:n.foci}),{account:_,idToken:S,accessToken:k,refreshToken:B,appMetadata:W}}static async generateAuthenticationResult(n,a,r,c,h,d,g,m,y){let S=H.EMPTY_STRING,_=[],k=null,B,W,F=H.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===we.POP&&!h.popKid){const de=new $a(n),{secret:Le,keyId:Ge}=r.accessToken;if(!Ge)throw z(wh);S=await de.signPopToken(Le,Ge,h)}else S=r.accessToken.secret;_=We.fromString(r.accessToken.target).asArray(),k=Fa(r.accessToken.expiresOn),B=Fa(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(W=Fa(r.accessToken.refreshOn))}r.appMetadata&&(F=r.appMetadata.familyId===qs?qs:"");const Ae=d?.oid||d?.sub||"",Re=d?.tid||"";m?.spa_accountid&&r.account&&(r.account.nativeAccountId=m?.spa_accountid);const le=r.account?Uh(Ke.getAccountInfo(r.account),void 0,d,r.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:Ae,tenantId:Re,scopes:_,account:le,idToken:r?.idToken?.secret||"",idTokenClaims:d||{},accessToken:S,fromCache:c,expiresOn:k,extExpiresOn:B,refreshOn:W,correlationId:h.correlationId,requestId:y||H.EMPTY_STRING,familyId:F,tokenType:r.accessToken?.tokenType||H.EMPTY_STRING,state:g?g.userRequestState:H.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||H.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||H.EMPTY_STRING,code:m?.spa_code,fromNativeBroker:!1}}}function $h(u,n,a,r,c,h,d,g,m,y,S,_){_?.verbose("setCachedAccount called");const B=u.getAccountKeys().find(le=>le.startsWith(a));let W=null;B&&(W=u.getAccount(B,c));const F=W||Ke.createAccount({homeAccountId:a,idTokenClaims:h,clientInfo:d,environment:g,cloudGraphHostName:y?.cloud_graph_host_name,msGraphHost:y?.msgraph_host,nativeAccountId:S},n,r),Ae=F.tenantProfiles||[],Re=m||F.realm;if(Re&&!Ae.find(le=>le.tenantId===Re)){const le=uc(a,F.localAccountId,Re,h);Ae.push(le)}return F.tenantProfiles=Ae,F}async function MC(u,n,a){return typeof u=="string"?u:u({clientId:n,tokenEndpoint:a})}class NC extends Xh{constructor(n,a){super(n,a),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,r){if(this.performanceClient?.addQueueMeasurement(T.AuthClientAcquireToken,n.correlationId),!n.code)throw z(zy);const c=Ut(),h=await O(this.executeTokenRequest.bind(this),T.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(this.authority,n),d=h.headers?.[St.X_MS_REQUEST_ID],g=new Wi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return g.validateTokenResponse(h.body),O(g.handleServerTokenResponse.bind(g),T.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(h.body,this.authority,c,n,a,r,void 0,void 0,void 0,d)}getLogoutUri(n){if(!n)throw Me(Zy);const a=this.createLogoutUrlQueryString(n);return Te.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(T.AuthClientExecuteTokenRequest,a.correlationId);const r=this.createTokenQueryParameters(a),c=Te.appendQueryString(n.tokenEndpoint,r),h=await O(this.createTokenRequestBody.bind(this),T.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,a.correlationId)(a);let d;if(a.clientInfo)try{const y=Fs(a.clientInfo,this.cryptoUtils.base64Decode);d={credential:`${y.uid}${or.CLIENT_INFO_SEPARATOR}${y.utid}`,type:pn.HOME_ACCOUNT_ID}}catch(y){this.logger.verbose("Could not parse client info for CCS Header: "+y)}const g=this.createTokenRequestHeaders(d||a.ccsCredential),m=yc(this.config.authOptions.clientId,a);return O(this.executePostToTokenEndpoint.bind(this),T.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,a.correlationId)(c,h,g,m,a.correlationId,T.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(T.AuthClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(Bh(a,n.embeddedClientId||n.tokenBodyParameters?.[$i]||this.config.authOptions.clientId),this.includeRedirectUri)Kh(a,n.redirectUri);else if(!n.redirectUri)throw Me(Qy);if(xh(a,n.scopes,!0,this.oidcDefaultScopes),GE(a,n.code),jh(a,this.config.libraryInfo),Yh(a,this.config.telemetry.application),bC(a),this.serverTelemetryManager&&!fC(this.config)&&_C(a,this.serverTelemetryManager),n.codeVerifier&&jE(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&CC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;TC(a,await MC(c.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),vC(a,c.assertionType)}if(AC(a,wy.AUTHORIZATION_CODE_GRANT),Fh(a),n.authenticationScheme===we.POP){const c=new $a(this.cryptoUtils,this.performanceClient);let h;n.popKid?h=this.cryptoUtils.encodeKid(n.popKid):h=(await O(c.generateCnf.bind(c),T.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Vh(a,h)}else if(n.authenticationScheme===we.SSH)if(n.sshJwk)EC(a,n.sshJwk);else throw Me(lc);(!Ft.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Gh(a,n.claims,this.config.authOptions.clientCapabilities);let r;if(n.clientInfo)try{const c=Fs(n.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${c.uid}${or.CLIENT_INFO_SEPARATOR}${c.utid}`,type:pn.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}else r=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case pn.HOME_ACCOUNT_ID:try{const c=Ya(r.credential);nr(a,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case pn.UPN:Ws(a,r.credential);break}return n.embeddedClientId&&dc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&Ri(a,n.tokenBodyParameters),n.enableSpaAuthorizationCode&&(!n.tokenBodyParameters||!n.tokenBodyParameters[Jp])&&Ri(a,{[Jp]:"1"}),hc(a,n.correlationId,this.performanceClient),rr(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&zE(a,n.postLogoutRedirectUri),n.correlationId&&qh(a,n.correlationId),n.idTokenHint&&PE(a,n.idTokenHint),n.state&&yC(a,n.state),n.logoutHint&&QE(a,n.logoutHint),n.extraQueryParameters&&Ri(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&SC(a),rr(a,this.config.authOptions.encodeExtraQueryParams,n.extraQueryParameters)}}const g_=300;class m_ extends Xh{constructor(n,a){super(n,a)}async acquireToken(n,a){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientAcquireToken,n.correlationId);const r=Ut(),c=await O(this.executeTokenRequest.bind(this),T.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(n,this.authority),h=c.headers?.[St.X_MS_REQUEST_ID],d=new Wi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(c.body),O(d.handleServerTokenResponse.bind(d),T.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(c.body,this.authority,r,n,a,void 0,void 0,!0,n.forceCache,h)}async acquireTokenByRefreshToken(n,a){if(!n)throw Me(Jy);if(this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientAcquireTokenByRefreshToken,n.correlationId),!n.account)throw z(_h);if(this.cacheManager.isAppMetadataFOCI(n.account.environment))try{return await O(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(c){const h=c instanceof Xt&&c.errorCode===tc,d=c instanceof ia&&c.errorCode===Kp.INVALID_GRANT_ERROR&&c.subError===Kp.CLIENT_MISMATCH_ERROR;if(h||d)return O(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw c}return O(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,r){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId);const c=Vt(this.cacheManager.getRefreshToken.bind(this.cacheManager),T.CacheManagerGetRefreshToken,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0,this.performanceClient);if(!c)throw nc(tc);if(c.expiresOn){const d=n.refreshTokenExpirationOffsetSeconds||g_;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(c.expiresOn),rtOffsetSeconds:d},n.correlationId),ec(c.expiresOn,d))throw nc(Jh)}const h={...n,refreshToken:c.secret,authenticationScheme:n.authenticationScheme||we.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:pn.HOME_ACCOUNT_ID}};try{return await O(this.acquireToken.bind(this),T.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(h,r)}catch(d){if(d instanceof Xt&&d.subError===Tc){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const g=this.cacheManager.generateCredentialKey(c);this.cacheManager.removeRefreshToken(g,n.correlationId)}throw d}}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),c=Te.appendQueryString(a.tokenEndpoint,r),h=await O(this.createTokenRequestBody.bind(this),T.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n),d=this.createTokenRequestHeaders(n.ccsCredential),g=yc(this.config.authOptions.clientId,n);return O(this.executePostToTokenEndpoint.bind(this),T.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(c,h,d,g,n.correlationId,T.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(Bh(a,n.embeddedClientId||n.tokenBodyParameters?.[$i]||this.config.authOptions.clientId),n.redirectUri&&Kh(a,n.redirectUri),xh(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),AC(a,wy.REFRESH_TOKEN_GRANT),Fh(a),jh(a,this.config.libraryInfo),Yh(a,this.config.telemetry.application),bC(a),this.serverTelemetryManager&&!fC(this.config)&&_C(a,this.serverTelemetryManager),qE(a,n.refreshToken),this.config.clientCredentials.clientSecret&&CC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;TC(a,await MC(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),vC(a,r.assertionType)}if(n.authenticationScheme===we.POP){const r=new $a(this.cryptoUtils,this.performanceClient);let c;n.popKid?c=this.cryptoUtils.encodeKid(n.popKid):c=(await O(r.generateCnf.bind(r),T.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Vh(a,c)}else if(n.authenticationScheme===we.SSH)if(n.sshJwk)EC(a,n.sshJwk);else throw Me(lc);if((!Ft.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Gh(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case pn.HOME_ACCOUNT_ID:try{const r=Ya(n.ccsCredential.credential);nr(a,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case pn.UPN:Ws(a,n.ccsCredential.credential);break}return n.embeddedClientId&&dc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&Ri(a,n.tokenBodyParameters),hc(a,n.correlationId,this.performanceClient),rr(a)}}class p_ extends Xh{constructor(n,a){super(n,a)}async acquireCachedToken(n){this.performanceClient?.addQueueMeasurement(T.SilentFlowClientAcquireCachedToken,n.correlationId);let a=Ji.NOT_APPLICABLE;if(n.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ft.isEmptyObj(n.claims))throw this.setCacheOutcome(Ji.FORCE_REFRESH_OR_CLAIMS,n.correlationId),z(wi);if(!n.account)throw z(_h);const r=n.account.tenantId||o_(n.authority),c=this.cacheManager.getTokenKeys(),h=this.cacheManager.getAccessToken(n.account,n,c,r);if(h){if($E(h.cachedAt)||ec(h.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ji.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),z(wi);h.refreshOn&&ec(h.refreshOn,0)&&(a=Ji.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ji.NO_CACHED_ACCESS_TOKEN,n.correlationId),z(wi);const d=n.authority||this.authority.getPreferredCache(),g={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:h,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,c,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(d)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await O(this.generateResultFromCacheRecord.bind(this),T.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,n.correlationId)(g,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==Ji.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${n}`)}async generateResultFromCacheRecord(n,a){this.performanceClient?.addQueueMeasurement(T.SilentFlowClientGenerateResultFromCacheRecord,a.correlationId);let r;if(n.idToken&&(r=_n(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const c=r?.auth_time;if(!c)throw z(Eh);sC(c,a.maxAge)}return Wi.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,r)}}const y_={sendGetRequestAsync:()=>Promise.reject(z(oe)),sendPostRequestAsync:()=>Promise.reject(z(oe))};function C_(u,n,a,r){const c=n.correlationId,h=new Map;Bh(h,n.embeddedClientId||n.extraQueryParameters?.[$i]||u.clientId);const d=[...n.scopes||[],...n.extraScopesToConsent||[]];if(xh(h,d,!0,u.authority.options.OIDCOptions?.defaultScopes),Kh(h,n.redirectUri),qh(h,c),HE(h,n.responseMode),Fh(h),n.prompt&&(BE(h,n.prompt),r?.addFields({prompt:n.prompt},c)),n.domainHint&&(xE(h,n.domainHint),r?.addFields({domainHintFromRequest:!0},c)),n.prompt!==ht.SELECT_ACCOUNT)if(n.sid&&n.prompt===ht.NONE)a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Zp(h,n.sid),r?.addFields({sidFromRequest:!0},c);else if(n.account){const g=A_(n.account);let m=S_(n.account);if(m&&n.domainHint&&(a.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),m=null),m){a.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ds(h,m),r?.addFields({loginHintFromClaim:!0},c);try{const y=Ya(n.account.homeAccountId);nr(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(g&&n.prompt===ht.NONE){a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Zp(h,g),r?.addFields({sidFromClaim:!0},c);try{const y=Ya(n.account.homeAccountId);nr(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(n.loginHint)a.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ds(h,n.loginHint),Ws(h,n.loginHint),r?.addFields({loginHintFromRequest:!0},c);else if(n.account.username){a.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ds(h,n.account.username),r?.addFields({loginHintFromUpn:!0},c);try{const y=Ya(n.account.homeAccountId);nr(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else n.loginHint&&(a.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ds(h,n.loginHint),Ws(h,n.loginHint),r?.addFields({loginHintFromRequest:!0},c));else a.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return n.nonce&&KE(h,n.nonce),n.state&&yC(h,n.state),(n.claims||u.clientCapabilities&&u.clientCapabilities.length>0)&&Gh(h,n.claims,u.clientCapabilities),n.embeddedClientId&&dc(h,u.clientId,u.redirectUri),u.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(hh))&&SC(h),h}function Wh(u,n,a,r){const c=rr(n,a,r);return Te.appendQueryString(u.authorizationEndpoint,c)}function T_(u,n){if(DC(u,n),!u.code)throw z(Gy);return u}function DC(u,n){if(!u.state||!n)throw u.state?z(oh,"Cached State"):z(oh,"Server State");let a,r;try{a=decodeURIComponent(u.state)}catch{throw z(Za,u.state)}try{r=decodeURIComponent(n)}catch{throw z(Za,u.state)}if(a!==r)throw z(Dy);if(u.error||u.error_description||u.suberror){const c=v_(u);throw OC(u.error,u.error_description,u.suberror)?new Xt(u.error||"",u.error_description,u.suberror,u.timestamp||"",u.trace_id||"",u.correlation_id||"",u.claims||"",c):new ia(u.error||"",u.error_description,u.suberror,c)}}function v_(u){const n="code=",a=u.error_uri?.lastIndexOf(n);return a&&a>=0?u.error_uri?.substring(a+n.length):void 0}function A_(u){return u.idTokenClaims?.sid||null}function S_(u){return u.loginHint||u.idTokenClaims?.login_hint||null}const oy=",",UC="|";function E_(u){const{skus:n,libraryName:a,libraryVersion:r,extensionName:c,extensionVersion:h}=u,d=new Map([[0,[a,r]],[2,[c,h]]]);let g=[];if(n?.length){if(g=n.split(oy),g.length<4)return n}else g=Array.from({length:4},()=>UC);return d.forEach((m,y)=>{m.length===2&&m[0]?.length&&m[1]?.length&&__({skuArr:g,index:y,skuName:m[0],skuVersion:m[1]})}),g.join(oy)}function __(u){const{skuArr:n,index:a,skuName:r,skuVersion:c}=u;a>=n.length||(n[a]=[r,c].join(UC))}class sr{constructor(n,a){this.cacheOutcome=Ji.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||H.EMPTY_STRING,this.wrapperVer=n.wrapperVer||H.EMPTY_STRING,this.telemetryCacheKey=lt.CACHE_KEY+or.CACHE_KEY_SEPARATOR+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${lt.VALUE_SEPARATOR}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&a.push(`broker_error=${r}`);const c=a.join(lt.VALUE_SEPARATOR),h=this.getRegionDiscoveryFields(),d=[n,h].join(lt.VALUE_SEPARATOR);return[lt.SCHEMA_VERSION,d,c].join(lt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=sr.maxErrorsToSend(n),r=n.failedRequests.slice(0,2*a).join(lt.VALUE_SEPARATOR),c=n.errors.slice(0,a).join(lt.VALUE_SEPARATOR),h=n.errors.length,d=a<h?lt.OVERFLOW_TRUE:lt.OVERFLOW_FALSE,g=[h,d].join(lt.VALUE_SEPARATOR);return[lt.SCHEMA_VERSION,n.cacheHits,r,c,g].join(lt.CATEGORY_SEPARATOR)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=lt.MAX_CACHED_ERRORS&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof Ne?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(lt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=sr.maxErrorsToSend(n),r=n.errors.length;if(a===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const c={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,c,this.correlationId)}}static maxErrorsToSend(n){let a,r=0,c=0;const h=n.errors.length;for(a=0;a<h;a++){const d=n.failedRequests[2*a]||H.EMPTY_STRING,g=n.failedRequests[2*a+1]||H.EMPTY_STRING,m=n.errors[a]||H.EMPTY_STRING;if(c+=d.toString().length+g.toString().length+m.length+3,c<lt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||H.EMPTY_STRING),n.push(this.regionSource||H.EMPTY_STRING),n.push(this.regionOutcome||H.EMPTY_STRING),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return E_(n)}}const HC="missing_kid_error",LC="missing_alg_error";const b_={[HC]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[LC]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class ed extends Ne{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,ed.prototype)}}function ry(u){return new ed(u,b_[u])}class td{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw ry(HC);if(!n.alg)throw ry(LC);const a=new td({typ:n.typ||CS.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}const nd="pkce_not_created",id="ear_jwk_empty",zC="ear_jwe_empty",dh="crypto_nonexistent",vc="empty_navigate_uri",PC="hash_empty_error",ad="no_state_in_hash",xC="hash_does_not_contain_known_properties",BC="unable_to_parse_state",KC="state_interaction_type_mismatch",GC="interaction_in_progress",qC="popup_window_error",jC="empty_window_error",cr="user_cancelled",w_="monitor_popup_timeout",YC="monitor_window_timeout",QC="redirect_in_iframe",FC="block_iframe_reload",VC="block_nested_popups",R_="iframe_closed_prematurely",Ac="silent_logout_unsupported",XC="no_account_error",I_="silent_prompt_value_error",JC="no_token_request_cache_error",ZC="unable_to_parse_token_request_cache_error",k_="auth_request_not_set_error",O_="invalid_cache_type",Sc="non_browser_environment",qa="database_not_open",ic="no_network_connectivity",$C="post_request_failed",WC="get_request_failed",fh="failed_to_parse_response",eT="unable_to_load_token",od="crypto_key_not_found",tT="auth_code_required",nT="auth_code_or_nativeAccountId_required",iT="spa_code_and_nativeAccountId_present",rd="database_unavailable",aT="unable_to_acquire_token_from_native_platform",oT="native_handshake_timeout",rT="native_extension_not_installed",sd="native_connection_not_established",ir="uninitialized_public_client_application",sT="native_prompt_not_supported",cT="invalid_base64_string",lT="invalid_pop_token_request",uT="failed_to_build_headers",hT="failed_to_parse_headers",Ps="failed_to_decrypt_ear_response",ac="timed_out";const Yn="For more visit: aka.ms/msaljs/browser-errors",M_={[nd]:"The PKCE code challenge and verifier could not be generated.",[id]:"No EAR encryption key provided. This is unexpected.",[zC]:"Server response does not contain ear_jwe property. This is unexpected.",[dh]:"The crypto object or function is not available.",[vc]:"Navigation URI is empty. Please check stack trace for more info.",[PC]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Yn}`,[ad]:"Hash does not contain state. Please verify that the request originated from msal.",[xC]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Yn}`,[BC]:"Unable to parse state. Please verify that the request originated from msal.",[KC]:"Hash contains state but the interaction type does not match the caller.",[GC]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Yn}`,[qC]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[jC]:"window.open returned null or undefined window object.",[cr]:"User cancelled the flow.",[w_]:`Token acquisition in popup failed due to timeout.  ${Yn}`,[YC]:`Token acquisition in iframe failed due to timeout.  ${Yn}`,[QC]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[FC]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Yn}`,[VC]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[R_]:"The iframe being monitored was closed prematurely.",[Ac]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[XC]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[I_]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[JC]:"No token request found in cache.",[ZC]:"The cached token request could not be parsed.",[k_]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[O_]:"Invalid cache type",[Sc]:"Login and token requests are not supported in non-browser environments.",[qa]:"Database is not open!",[ic]:"No network connectivity. Check your internet connection.",[$C]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[WC]:"Network request failed. Please check the network trace to determine root cause.",[fh]:"Failed to parse network response. Check network trace.",[eT]:"Error loading token to cache.",[od]:"Cryptographic Key or Keypair not found in browser storage.",[tT]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[nT]:"An authorization code or nativeAccountId must be provided to this flow.",[iT]:"Request cannot contain both spa code and native account id.",[rd]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[aT]:`Unable to acquire token from native platform.  ${Yn}`,[oT]:"Timed out while attempting to establish connection to browser extension",[rT]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[sd]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Yn}`,[ir]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Yn}`,[sT]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[cT]:"Invalid base64 encoded string.",[lT]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[uT]:"Failed to build request headers object.",[hT]:"Failed to parse response headers",[Ps]:"Failed to decrypt ear response",[ac]:"The request timed out."};class hr extends Ne{constructor(n,a){super(n,M_[n],a),Object.setPrototypeOf(this,hr.prototype),this.name="BrowserAuthError"}}function G(u,n){return new hr(u,n)}const Nt={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},ln={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},$o={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},dt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},sy={GET:"GET",POST:"POST"},Si={SIGNIN:"signin",SIGNOUT:"signout"},Je={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Hs={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ge={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},cy={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},N_=u=>typeof u=="number"&&u in cy?cy[u]:"unknown";var $;(function(u){u.Redirect="redirect",u.Popup="popup",u.Silent="silent",u.None="none"})($||($={}));const ly={scopes:Wa},dT="jwk",gh="msal.db",D_=1,U_=`${gh}.keys`,At={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},H_=[At.Default,At.Skip,At.RefreshTokenAndNetwork];function Ls(u){return encodeURIComponent(lr(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Oi(u){return fT(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lr(u){return fT(new TextEncoder().encode(u))}function fT(u){const n=Array.from(u,a=>String.fromCodePoint(a)).join("");return btoa(n)}function Et(u){return new TextDecoder().decode(Ii(u))}function Ii(u){let n=u.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw G(cT)}const a=atob(n);return Uint8Array.from(a,r=>r.codePointAt(0)||0)}const L_="RSASSA-PKCS1-v1_5",to="AES-GCM",gT="HKDF",cd="SHA-256",z_=2048,P_=new Uint8Array([1,0,1]),uy="0123456789abcdef",hy=new Uint32Array(1),ld="raw",mT="encrypt",ud="decrypt",x_="deriveKey",B_="crypto_subtle_undefined",hd={name:L_,hash:cd,modulusLength:z_,publicExponent:P_};function K_(u){if(!window)throw G(Sc);if(!window.crypto)throw G(dh);if(!u&&!window.crypto.subtle)throw G(dh,B_)}async function pT(u,n,a){n?.addQueueMeasurement(T.Sha256Digest,a);const c=new TextEncoder().encode(u);return window.crypto.subtle.digest(cd,c)}function G_(u){return window.crypto.getRandomValues(u)}function eh(){return window.crypto.getRandomValues(hy),hy[0]}function yn(){const u=Date.now(),n=eh()*1024+(eh()&1023),a=new Uint8Array(16),r=Math.trunc(n/2**30),c=n&2**30-1,h=eh();a[0]=u/2**40,a[1]=u/2**32,a[2]=u/2**24,a[3]=u/2**16,a[4]=u/2**8,a[5]=u,a[6]=112|r>>>8,a[7]=r,a[8]=128|c>>>24,a[9]=c>>>16,a[10]=c>>>8,a[11]=c,a[12]=h>>>24,a[13]=h>>>16,a[14]=h>>>8,a[15]=h;let d="";for(let g=0;g<a.length;g++)d+=uy.charAt(a[g]>>>4),d+=uy.charAt(a[g]&15),(g===3||g===5||g===7||g===9)&&(d+="-");return d}async function q_(u,n){return window.crypto.subtle.generateKey(hd,u,n)}async function th(u){return window.crypto.subtle.exportKey(dT,u)}async function j_(u,n,a){return window.crypto.subtle.importKey(dT,u,hd,n,a)}async function Y_(u,n){return window.crypto.subtle.sign(hd,u,n)}async function dd(){const u=await yT(),a={alg:"dir",kty:"oct",k:Oi(new Uint8Array(u))};return lr(JSON.stringify(a))}async function Q_(u){const n=Et(u),r=JSON.parse(n).k,c=Ii(r);return window.crypto.subtle.importKey(ld,c,to,!1,[ud])}async function F_(u,n){const a=n.split(".");if(a.length!==5)throw G(Ps,"jwe_length");const r=await Q_(u).catch(()=>{throw G(Ps,"import_key")});try{const c=new TextEncoder().encode(a[0]),h=Ii(a[2]),d=Ii(a[3]),g=Ii(a[4]),m=g.byteLength*8,y=new Uint8Array(d.length+g.length);y.set(d),y.set(g,d.length);const S=await window.crypto.subtle.decrypt({name:to,iv:h,tagLength:m,additionalData:c},r,y);return new TextDecoder().decode(S)}catch{throw G(Ps,"decrypt")}}async function yT(){const u=await window.crypto.subtle.generateKey({name:to,length:256},!0,[mT,ud]);return window.crypto.subtle.exportKey(ld,u)}async function dy(u){return window.crypto.subtle.importKey(ld,u,gT,!1,[x_])}async function CT(u,n,a){return window.crypto.subtle.deriveKey({name:gT,salt:n,hash:cd,info:new TextEncoder().encode(a)},u,{name:to,length:256},!1,[mT,ud])}async function V_(u,n,a){const r=new TextEncoder().encode(n),c=window.crypto.getRandomValues(new Uint8Array(16)),h=await CT(u,c,a),d=await window.crypto.subtle.encrypt({name:to,iv:new Uint8Array(12)},h,r);return{data:Oi(new Uint8Array(d)),nonce:Oi(c)}}async function fy(u,n,a,r){const c=Ii(r),h=await CT(u,Ii(n),a),d=await window.crypto.subtle.decrypt({name:to,iv:new Uint8Array(12)},h,c);return new TextDecoder().decode(d)}async function TT(u){const n=await pT(u),a=new Uint8Array(n);return Oi(a)}const Ec="storage_not_supported",vT="stubbed_public_client_application_called",fd="in_mem_redirect_unavailable";const xs={[Ec]:"Given storage configuration option was not supported.",[vT]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[fd]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};xs[Ec],xs[vT],xs[fd];class gd extends Ne{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,gd.prototype)}}function md(u){return new gd(u,xs[u])}function AT(u){u.location.hash="",typeof u.history.replaceState=="function"&&u.history.replaceState(null,"",`${u.location.origin}${u.location.pathname}${u.location.search}`)}function X_(u){const n=u.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function pd(){return window.parent!==window}function J_(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Nt.POPUP_NAME_PREFIX}.`)===0}function Fn(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Z_(){const n=new Te(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function $_(){if(Te.hashContainsKnownProperties(window.location.hash)&&pd())throw G(FC)}function W_(u){if(pd()&&!u)throw G(QC)}function eb(){if(J_())throw G(VC)}function ST(){if(typeof window>"u")throw G(Sc)}function ET(u){if(!u)throw G(ir)}function yd(u){ST(),$_(),eb(),ET(u)}function gy(u,n){if(yd(u),W_(n.system.allowRedirectInIframe),n.cache.cacheLocation===dt.MemoryStorage&&!n.cache.storeAuthStateInCookie)throw md(fd)}function _T(u){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(u).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function tb(){return yn()}class oc{navigateInternal(n,a){return oc.defaultNavigateWindow(n,a)}navigateExternal(n,a){return oc.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((r,c)=>{setTimeout(()=>{c(G(ac,"failed_to_redirect"))},a.timeout)})}}class nb{async sendGetRequestAsync(n,a){let r,c={},h=0;const d=my(a);try{r=await fetch(n,{method:sy.GET,headers:d})}catch(g){throw er(G(window.navigator.onLine?WC:ic),void 0,void 0,g)}c=py(r.headers);try{return h=r.status,{headers:c,body:await r.json(),status:h}}catch(g){throw er(G(fh),h,c,g)}}async sendPostRequestAsync(n,a){const r=a&&a.body||"",c=my(a);let h,d=0,g={};try{h=await fetch(n,{method:sy.POST,headers:c,body:r})}catch(m){throw er(G(window.navigator.onLine?$C:ic),void 0,void 0,m)}g=py(h.headers);try{return d=h.status,{headers:g,body:await h.json(),status:d}}catch(m){throw er(G(fh),d,g,m)}}}function my(u){try{const n=new Headers;if(!(u&&u.headers))return n;const a=u.headers;return Object.entries(a).forEach(([r,c])=>{n.append(r,c)}),n}catch(n){throw er(G(uT),void 0,void 0,n)}}function py(u){try{const n={};return u.forEach((a,r)=>{n[r]=a}),n}catch{throw G(hT)}}const ib=6e4,mh=1e4,ab=3e4,bT=2e3;function ob({auth:u,cache:n,system:a,telemetry:r},c){const h={clientId:H.EMPTY_STRING,authority:`${H.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:H.EMPTY_STRING,authorityMetadata:H.EMPTY_STRING,redirectUri:typeof window<"u"?Fn():"",postLogoutRedirectUri:H.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Dt.AAD,OIDCOptions:{serverResponseType:cc.FRAGMENT,defaultScopes:[H.OPENID_SCOPE,H.PROFILE_SCOPE,H.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:kh.None,tenant:H.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},d={cacheLocation:dt.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(n&&n.cacheLocation===dt.LocalStorage),claimsBasedCachingEnabled:!1},g={loggerCallback:()=>{},logLevel:Pe.Info,piiLoggingEnabled:!1},y={...{...dC,loggerOptions:g,networkClient:c?new nb:y_,navigationClient:new oc,loadFrameTimeout:0,windowHashTimeout:a?.loadFrameTimeout||ib,iframeHashTimeout:a?.loadFrameTimeout||mh,navigateFrameWait:0,redirectNavigationTimeout:ab,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,allowPlatformBrokerWithDOM:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||bT,pollIntervalMilliseconds:Nt.DEFAULT_POLL_INTERVAL_MS},...a,loggerOptions:a?.loggerOptions||g},S={application:{appName:H.EMPTY_STRING,appVersion:H.EMPTY_STRING},client:new hC};if(u?.protocolMode!==Dt.OIDC&&u?.OIDCOptions&&new ki(y.loggerOptions).warning(JSON.stringify(Me(tC))),u?.protocolMode&&u.protocolMode===Dt.OIDC&&y?.allowPlatformBroker)throw Me(nC);return{auth:{...h,...u,OIDCOptions:{...h.OIDCOptions,...u?.OIDCOptions}},cache:{...d,...n},system:y,telemetry:{...S,...r}}}const rb="@azure/msal-browser",ea="4.28.0";const Ct="msal",wT="browser",yy="|",pt=2,Bs=2,sb=`${Ct}.${wT}.log.level`,cb=`${Ct}.${wT}.log.pii`,Cy=`${Ct}.version`,Ty="account.keys",vy="token.keys";function Va(u=Bs){return u<1?`${Ct}.${Ty}`:`${Ct}.${u}.${Ty}`}function Xa(u,n=pt){return n<1?`${Ct}.${vy}.${u}`:`${Ct}.${n}.${vy}.${u}`}class Cd{static loggerCallback(n,a){switch(n){case Pe.Error:console.error(a);return;case Pe.Info:console.info(a);return;case Pe.Verbose:console.debug(a);return;case Pe.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=ob(n,this.browserEnvironment);let a;try{a=window[dt.SessionStorage]}catch{}const r=a?.getItem(sb),c=a?.getItem(cb)?.toLowerCase(),h=c==="true"?!0:c==="false"?!1:void 0,d={...this.config.system.loggerOptions},g=r&&Object.keys(Pe).includes(r)?Pe[r]:void 0;g&&(d.loggerCallback=Cd.loggerCallback,d.logLevel=g),h!==void 0&&(d.piiLoggingEnabled=h),this.logger=new ki(d,rb,ea),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class ta extends Cd{getModuleName(){return ta.MODULE_NAME}getId(){return ta.ID}async initialize(){return this.available=typeof window<"u",this.available}}ta.MODULE_NAME="";ta.ID="StandardOperatingContext";class lb{constructor(){this.dbName=gh,this.version=D_,this.tableName=U_,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",c=>{c.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",c=>{const h=c;this.db=h.target.result,this.dbOpen=!0,n()}),r.addEventListener("error",()=>a(G(rd)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(qa));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);d.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result)}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((r,c)=>{if(!this.db)return c(G(qa));const g=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);g.addEventListener("success",()=>{this.closeConnection(),r()}),g.addEventListener("error",m=>{this.closeConnection(),c(m)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(qa));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);d.addEventListener("success",()=>{this.closeConnection(),a()}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(G(qa));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();h.addEventListener("success",d=>{const g=d;this.closeConnection(),n(g.target.result)}),h.addEventListener("error",d=>{this.closeConnection(),a(d)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(qa));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);d.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result===1)}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const r=window.indexedDB.deleteDatabase(gh),c=setTimeout(()=>a(!1),200);r.addEventListener("success",()=>(clearTimeout(c),n(!0))),r.addEventListener("blocked",()=>(clearTimeout(c),n(!0))),r.addEventListener("error",()=>(clearTimeout(c),a(!1)))})}}class _c{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,r)=>{n.push(r)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class ub{constructor(n){this.inMemoryCache=new _c,this.indexedDBCache=new lb,this.logger=n}handleDatabaseAccessError(n){if(n instanceof hr&&n.errorCode===rd)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw n}async getItem(n){const a=this.inMemoryCache.getItem(n);if(!a)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r)}return a}async setItem(n,a){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(n){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(a){this.handleDatabaseAccessError(a)}}async getKeys(){const n=this.inMemoryCache.getKeys();if(n.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(a){this.handleDatabaseAccessError(a)}return n}async containsKey(n){const a=this.inMemoryCache.containsKey(n);if(!a)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r)}return a}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const n=await this.indexedDBCache.deleteDatabase();return n&&this.logger.verbose("Persistent keystore deleted"),n}catch(n){return this.handleDatabaseAccessError(n),!1}}}class Vn{constructor(n,a,r){this.logger=n,K_(r??!1),this.cache=new ub(this.logger),this.performanceClient=a}createNewGuid(){return yn()}base64Encode(n){return lr(n)}base64Decode(n){return Et(n)}base64UrlEncode(n){return Ls(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(T.CryptoOptsGetPublicKeyThumbprint,n.correlationId),r=await q_(Vn.EXTRACTABLE,Vn.POP_KEY_USAGES),c=await th(r.publicKey),h={e:c.e,kty:c.kty,n:c.n},d=Ay(h),g=await this.hashString(d),m=await th(r.privateKey),y=await j_(m,!1,["sign"]);return await this.cache.setItem(g,{privateKey:y,publicKey:r.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri}),a&&a.end({success:!0}),g}async removeTokenBindingKey(n){if(await this.cache.removeItem(n),await this.cache.containsKey(n))throw z(qy)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(n){return n instanceof Error?this.logger.error(`Clearing keystore failed with error: ${n.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(n,a,r,c){const h=this.performanceClient?.startMeasurement(T.CryptoOptsSignJwt,c),d=await this.cache.getItem(a);if(!d)throw G(od);const g=await th(d.publicKey),m=Ay(g),y=Ls(JSON.stringify({kid:a})),S=td.getShrHeaderString({...r?.header,alg:g.alg,kid:y}),_=Ls(S);n.cnf={jwk:JSON.parse(m)};const k=Ls(JSON.stringify(n)),B=`${_}.${k}`,F=new TextEncoder().encode(B),Ae=await Y_(d.privateKey,F),Re=Oi(new Uint8Array(Ae)),le=`${B}.${Re}`;return h&&h.end({success:!0}),le}async hashString(n){return TT(n)}}Vn.POP_KEY_USAGES=["sign","verify"];Vn.EXTRACTABLE=!0;function Ay(u){return JSON.stringify(u,Object.keys(u).sort())}const hb=1440*60*1e3,ph={Lax:"Lax",None:"None"};class RT{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,r=document.cookie.split(";");for(let c=0;c<r.length;c++){const h=r[c],[d,...g]=decodeURIComponent(h).trim().split("="),m=g.join("=");if(d===a)return m}return""}getUserData(){throw z(oe)}setItem(n,a,r,c=!0,h=ph.Lax){let d=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${h};`;if(r){const g=db(r);d+=`expires=${g};`}(c||h===ph.None)&&(d+="Secure;"),document.cookie=d}async setUserData(){return Promise.reject(z(oe))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(r=>{const c=decodeURIComponent(r).trim().split("=");a.push(c[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function db(u){const n=new Date;return new Date(n.getTime()+u*hb).toUTCString()}function Ai(u,n){const a=u.getItem(Va(n));return a?JSON.parse(a):[]}function gn(u,n,a){const r=n.getItem(Xa(u,a));if(r){const c=JSON.parse(r);if(c&&c.hasOwnProperty("idToken")&&c.hasOwnProperty("accessToken")&&c.hasOwnProperty("refreshToken"))return c}return{idToken:[],accessToken:[],refreshToken:[]}}function Ks(u){return u.hasOwnProperty("id")&&u.hasOwnProperty("nonce")&&u.hasOwnProperty("data")}const Sy="msal.cache.encryption",fb="msal.broadcast.cache";class gb{constructor(n,a,r){if(!window.localStorage)throw md(Ec);this.memoryStorage=new _c,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=r,this.broadcast=new BroadcastChannel(fb)}async initialize(n){const a=new RT,r=a.getItem(Sy);let c={key:"",id:""};if(r)try{c=JSON.parse(r)}catch{}if(c.key&&c.id){const h=Vt(Ii,T.Base64Decode,this.logger,this.performanceClient,n)(c.key);this.encryptionCookie={id:c.id,key:await O(dy,T.GenerateHKDF,this.logger,this.performanceClient,n)(h)}}else{const h=yn(),d=await O(yT,T.GenerateBaseKey,this.logger,this.performanceClient,n)(),g=Vt(Oi,T.UrlEncodeArr,this.logger,this.performanceClient,n)(new Uint8Array(d));this.encryptionCookie={id:h,key:await O(dy,T.GenerateHKDF,this.logger,this.performanceClient,n)(d)};const m={id:h,key:g};a.setItem(Sy,JSON.stringify(m),0,!0,ph.None)}await O(this.importExistingCache.bind(this),T.ImportExistingCache,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw G(ir);return this.memoryStorage.getItem(n)}async decryptData(n,a,r){if(!this.initialized||!this.encryptionCookie)throw G(ir);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const c=await O(fy,T.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!c)return null;try{return{...JSON.parse(c),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,r,c,h){if(!this.initialized||!this.encryptionCookie)throw G(ir);if(h)this.setItem(n,a);else{const{data:d,nonce:g}=await O(V_,T.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a,this.getContext(n)),m={id:this.encryptionCookie.id,nonce:g,data:d,lastUpdatedAt:c};this.setItem(n,JSON.stringify(m))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),Ai(this).forEach(r=>this.removeItem(r));const a=gn(this.clientId,this);a.idToken.forEach(r=>this.removeItem(r)),a.accessToken.forEach(r=>this.removeItem(r)),a.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Ct)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=Ai(this);a=await this.importArray(a,n),a.length?this.setItem(Va(),JSON.stringify(a)):this.removeItem(Va());const r=gn(this.clientId,this);r.idToken=await this.importArray(r.idToken,n),r.accessToken=await this.importArray(r.accessToken,n),r.refreshToken=await this.importArray(r.refreshToken,n),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Xa(this.clientId),JSON.stringify(r)):this.removeItem(Xa(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const r=this.getItem(n);if(!r)return null;let c;try{c=JSON.parse(r)}catch{return null}return Ks(c)?c.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),O(fy,T.Decrypt,this.logger,this.performanceClient,a)(this.encryptionCookie.key,c.nonce,this.getContext(n),c.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),r)}async importArray(n,a){const r=[],c=[];return n.forEach(h=>{const d=this.getItemFromEncryptedCache(h,a).then(g=>{g?(this.memoryStorage.setItem(h,g),r.push(h)):this.removeItem(h)});c.push(d)}),await Promise.all(c),r}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n){this.logger.trace("Updating internal cache from broadcast event");const a=this.performanceClient.startMeasurement(T.LocalStorageUpdated);a.add({isBackground:!0});const{key:r,value:c,context:h}=n.data;if(!r){this.logger.error("Broadcast event missing key"),a.end({success:!1,errorCode:"noKey"});return}if(h&&h!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${h}`),a.end({success:!1,errorCode:"contextMismatch"});return}c?(this.memoryStorage.setItem(r,c),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),a.end({success:!0})}}class mb{constructor(){if(!window.sessionStorage)throw md(Ec)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const J={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function vi(u,n){const a=u.indexOf(n);a>-1&&u.splice(a,1)}class yh extends uh{constructor(n,a,r,c,h,d,g){super(n,r,c,h,g),this.cacheConfig=a,this.logger=c,this.internalStorage=new _c,this.browserStorage=Ey(n,a.cacheLocation,c,h),this.temporaryCacheStorage=Ey(n,a.temporaryCacheLocation,c,h),this.cookieStorage=new RT,this.eventHandler=d}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=Ai(this.browserStorage),r=gn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},n);for(let h=0;h<Bs;h++){const d=h;await this.removeStaleAccounts(h,d,n)}for(let h=0;h<pt;h++){const d=h;await this.migrateIdTokens(h,d,n)}const c=this.getKMSIValues();for(let h=0;h<pt;h++)await this.migrateAccessTokens(h,c,n),await this.migrateRefreshTokens(h,c,n);a=Ai(this.browserStorage),r=gn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},n)}async updateOldEntry(n,a){const r=this.browserStorage.getItem(n),c=this.validateAndParseJson(r||"");if(!c)return this.browserStorage.removeItem(n),null;if(!c.lastUpdatedAt)c.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(c),a);else if(Wp(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const h=Ks(c)?await this.browserStorage.decryptData(n,c,a):c;return!h||!pc(h)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):(ey(h)||ty(h))&&h.expiresOn&&ec(h.expiresOn,Ry)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):h}async removeStaleAccounts(n,a,r){const c=Ai(this.browserStorage,n);if(c.length!==0){for(const h of[...c]){this.performanceClient.incrementFields({oldAcntCount:1},r);const d=this.browserStorage.getItem(h),g=this.validateAndParseJson(d||"");if(!g){vi(c,h);continue}if(g.lastUpdatedAt)Wp(g.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(h,g,a,r),vi(c,h));else{g.lastUpdatedAt=Date.now().toString(),this.setItem(h,JSON.stringify(g),r);continue}}this.setAccountKeys(c,r,n)}}async removeAccountOldSchema(n,a,r,c){const d=(Ks(a)?await this.browserStorage.decryptData(n,a,c):a)?.homeAccountId;if(d){const g=this.getTokenKeys(r);[...g.idToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),vi(g.idToken,m)}),[...g.accessToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),vi(g.accessToken,m)}),[...g.refreshToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),vi(g.refreshToken,m)}),this.setTokenKeys(g,c,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},c),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const r of a){const c=this.browserStorage.getUserData(r);if(c){const h=JSON.parse(c),d=_n(h.secret,Et);d&&(n[h.homeAccountId]=bn(d))}}return n}async migrateIdTokens(n,a,r){const c=gn(this.clientId,this.browserStorage,n);if(c.idToken.length===0)return;const h=gn(this.clientId,this.browserStorage,pt),d=Ai(this.browserStorage),g=Ai(this.browserStorage,a);for(const m of[...c.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const y=await this.updateOldEntry(m,r);if(!y){vi(c.idToken,m);continue}const S=d.find(le=>le.includes(y.homeAccountId)),_=g.find(le=>le.includes(y.homeAccountId));let k=null;if(S)k=this.getAccount(S,r);else if(_){const le=this.browserStorage.getItem(_),de=this.validateAndParseJson(le||"");k=de&&Ks(de)?await this.browserStorage.decryptData(_,de,r):de}if(!k){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const B=_n(y.secret,Et),W=this.generateCredentialKey(y),F=this.getIdTokenCredential(W,r),Ae=Object.keys(B).includes("signin_state"),Re=F&&Object.keys(_n(F.secret,Et)||{}).includes("signin_state");if(!F||y.lastUpdatedAt>F.lastUpdatedAt&&(Ae||!Re)){const le=k.tenantProfiles||[],de=Hh(B)||k.realm;if(de&&!le.find(Ye=>Ye.tenantId===de)){const Ye=uc(k.homeAccountId,k.localAccountId,de,B);le.push(Ye)}k.tenantProfiles=le;const Le=this.generateAccountKey(Ke.getAccountInfo(k)),Ge=bn(B);await this.setUserData(Le,JSON.stringify(k),r,k.lastUpdatedAt,Ge),d.includes(Le)||d.push(Le),await this.setUserData(W,JSON.stringify(y),r,y.lastUpdatedAt,Ge),this.performanceClient.incrementFields({migratedITCount:1},r),h.idToken.push(W)}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r),this.setAccountKeys(d,r)}async migrateAccessTokens(n,a,r){const c=gn(this.clientId,this.browserStorage,n);if(c.accessToken.length===0)return;const h=gn(this.clientId,this.browserStorage,pt);for(const d of[...c.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const g=await this.updateOldEntry(d,r);if(!g){vi(c.accessToken,d);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!h.accessToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r),h.accessToken.push(m);else{const S=this.getAccessTokenCredential(m,r);(!S||g.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r)}async migrateRefreshTokens(n,a,r){const c=gn(this.clientId,this.browserStorage,n);if(c.refreshToken.length===0)return;const h=gn(this.clientId,this.browserStorage,pt);for(const d of[...c.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const g=await this.updateOldEntry(d,r);if(!g){vi(c.refreshToken,d);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!h.refreshToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r),h.refreshToken.push(m);else{const S=this.getRefreshTokenCredential(m,r);(!S||g.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r)}trackVersionChanges(n){const a=this.browserStorage.getItem(Cy);a&&(this.logger.info(`MSAL.js was last initialized by version: ${a}`),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==ea&&this.setItem(Cy,ea,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,r){const c=new Array(pt+1).fill(0),h=[],d=20;for(let g=0;g<=d;g++)try{if(this.browserStorage.setItem(n,a),g>0)for(let m=0;m<=pt;m++){const y=c.slice(0,m).reduce((_,k)=>_+k,0);if(y>=g)break;const S=g>y+c[m]?y+c[m]:g;g>y&&c[m]>0&&this.removeAccessTokenKeys(h.slice(y,S),r,m)}break}catch(m){const y=lh(m);if(y.errorCode===Js&&g<d){if(!h.length)for(let S=0;S<=pt;S++)if(n===Xa(this.clientId,S)){const _=JSON.parse(a).accessToken;h.push(..._),c[S]=_.length}else{const _=this.getTokenKeys(S).accessToken;h.push(..._),c[S]=_.length}if(h.length<=g)throw y;this.removeAccessToken(h[g],r,!1)}else throw y}}async setUserData(n,a,r,c,h){const d=new Array(pt+1).fill(0),g=[],m=20;for(let y=0;y<=m;y++)try{if(await O(this.browserStorage.setUserData.bind(this.browserStorage),T.SetUserData,this.logger,this.performanceClient)(n,a,r,c,h),y>0)for(let S=0;S<=pt;S++){const _=d.slice(0,S).reduce((B,W)=>B+W,0);if(_>=y)break;const k=y>_+d[S]?_+d[S]:y;y>_&&d[S]>0&&this.removeAccessTokenKeys(g.slice(_,k),r,S)}break}catch(S){const _=lh(S);if(_.errorCode===Js&&y<m){if(!g.length)for(let k=0;k<=pt;k++){const B=this.getTokenKeys(k).accessToken;g.push(...B),d[k]=B.length}if(g.length<=y)throw _;this.removeAccessToken(g[y],r,!1)}else throw _}}getAccount(n,a){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(n);if(!r)return this.removeAccountKeyFromMap(n,a),null;const c=this.validateAndParseJson(r);return!c||!Ke.isAccountEntity(c)?null:(this.performanceClient.addFields({accountCachedBy:N_(c.cachedByApiId)},a),uh.toObject(new Ke,c))}async setAccount(n,a,r,c){this.logger.trace("BrowserCacheManager.setAccount called");const h=this.generateAccountKey(Ke.getAccountInfo(n)),d=Date.now().toString();n.lastUpdatedAt=d,n.cachedByApiId=c,await this.setUserData(h,JSON.stringify(n),a,d,r);const g=this.addAccountKeyToMap(h,a);this.performanceClient.addFields({kmsi:r},a),this.cacheConfig.cacheLocation===dt.LocalStorage&&g&&this.eventHandler.emitEvent(J.ACCOUNT_ADDED,void 0,Ke.getAccountInfo(n))}getAccountKeys(){return Ai(this.browserStorage)}setAccountKeys(n,a,r=Bs){n.length===0?this.removeItem(Va(r)):this.setItem(Va(r),JSON.stringify(n),a)}addAccountKeyToMap(n,a){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${n}`);const r=this.getAccountKeys();return r.indexOf(n)===-1?(r.push(n),this.setItem(Va(),JSON.stringify(r),a),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${n}`);const r=this.getAccountKeys(),c=r.indexOf(n);c>-1?(r.splice(c,1),this.setAccountKeys(r,a),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(n,a){const r=this.getActiveAccount(a);r?.homeAccountId===n.homeAccountId&&r?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(c=>{c.includes(n.homeAccountId)&&c.includes(n.environment)&&this.browserStorage.removeItem(c)}),this.cacheConfig.cacheLocation===dt.LocalStorage&&this.eventHandler.emitEvent(J.ACCOUNT_REMOVED,void 0,n)}removeIdToken(n,a){super.removeIdToken(n,a);const r=this.getTokenKeys(),c=r.idToken.indexOf(n);c>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(c,1),this.setTokenKeys(r,a))}removeAccessToken(n,a,r=!0){super.removeAccessToken(n,a),r&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,r=pt){this.logger.trace("removeAccessTokenKey called");const c=this.getTokenKeys(r);let h=0;if(n.forEach(d=>{const g=c.accessToken.indexOf(d);g>-1&&(c.accessToken.splice(g,1),h++)}),h>0){this.logger.info(`removed ${h} accessToken keys from tokenKeys map`),this.setTokenKeys(c,a,r);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const r=this.getTokenKeys(),c=r.refreshToken.indexOf(n);c>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(c,1),this.setTokenKeys(r,a))}getTokenKeys(n=pt){return gn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,r=pt){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(Xa(this.clientId,r));return}else this.setItem(Xa(this.clientId,r),JSON.stringify(n),a)}getIdTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(n,a),null;const c=this.validateAndParseJson(r);return!c||!WE(c)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),c)}async setIdTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys();d.idToken.indexOf(c)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),d.idToken.push(c),this.setTokenKeys(d,a))}getAccessTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([n],a),null;const c=this.validateAndParseJson(r);return!c||!ey(c)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),c)}async setAccessTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys(),g=d.accessToken.indexOf(c);g!==-1&&d.accessToken.splice(g,1),this.logger.trace(`access token ${g===-1?"added to":"updated in"} map`),d.accessToken.push(c),this.setTokenKeys(d,a)}getRefreshTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(n,a),null;const c=this.validateAndParseJson(r);return!c||!ty(c)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),c)}async setRefreshTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys();d.refreshToken.indexOf(c)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),d.refreshToken.push(c),this.setTokenKeys(d,a))}getAppMetadata(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!i_(n,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(n,a){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=n_(n);this.setItem(r,JSON.stringify(n),a)}getServerTelemetry(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!e_(n,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(n,a,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(n,JSON.stringify(a),r)}getAuthorityMetadata(n){const a=this.internalStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return r&&a_(n,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(Hs.WRAPPER_SKU,n),this.internalStorage.setItem(Hs.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(Hs.WRAPPER_SKU)||H.EMPTY_STRING,a=this.internalStorage.getItem(Hs.WRAPPER_VER)||H.EMPTY_STRING;return[n,a]}setAuthorityMetadata(n,a){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(Bp.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(a);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const c=this.validateAndParseJson(r);return c?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:c.homeAccountId,localAccountId:c.localAccountId,tenantId:c.tenantId},n)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(n,a){const r=this.generateCacheKey(Bp.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("setActiveAccount: Active account set");const c={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId,lastUpdatedAt:Ut().toString()};this.setItem(r,JSON.stringify(c),a)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(J.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!t_(n,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(n,a,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(n,JSON.stringify(a),r)}getTemporaryCache(n,a){const r=a?this.generateCacheKey(n):n;if(this.cacheConfig.storeAuthStateInCookie){const h=this.cookieStorage.getItem(r);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),h}const c=this.temporaryCacheStorage.getItem(r);if(!c){if(this.cacheConfig.cacheLocation===dt.LocalStorage){const h=this.browserStorage.getItem(r);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),h}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),c}setTemporaryCache(n,a,r){const c=r?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(c,a),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(c,a,void 0,this.cacheConfig.secureCookies))}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(n))}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(Ct)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(Ct)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(n){this.performanceClient.addQueueMeasurement(T.ClearTokensAndKeysWithClaims,n);const a=this.getTokenKeys();let r=0;a.accessToken.forEach(c=>{const h=this.getAccessTokenCredential(c,n);h?.requestedClaimsHash&&c.includes(h.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(c,n),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(n){return Ft.startsWith(n,Ct)?n:`${Ct}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===ut.REFRESH_TOKEN&&n.familyId||n.clientId,r=n.tokenType&&n.tokenType.toLowerCase()!==we.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${Ct}.${pt}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",n.requestedClaimsHash||"",r].join(yy).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${Ct}.${Bs}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(yy).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Je.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Je.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Je.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Je.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Je.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(n,a){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=lr(JSON.stringify(n));if(this.setTemporaryCache(Je.REQUEST_PARAMS,r,!0),a){const c=lr(a);this.setTemporaryCache(Je.VERIFIER,c,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(Je.REQUEST_PARAMS,!0);if(!n)throw G(JC);const a=this.getTemporaryCache(Je.VERIFIER,!0);let r,c="";try{r=JSON.parse(Et(n)),a&&(c=Et(a))}catch(h){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${h}`),G(ZC)}return[r,c]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const n=this.getTemporaryCache(Je.NATIVE_REQUEST,!0);if(!n)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${Ct}.${Je.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(n),this.resetRequestCache(),AT(window),null}}setInteractionInProgress(n,a=Si.SIGNIN){const r=`${Ct}.${Je.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())throw G(GC);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(n,a){const r=gc(n.account?.homeAccountId,n.account?.environment,n.idToken,this.clientId,n.tenantId);let c;a.claims&&(c=await this.cryptoImpl.hashString(a.claims));const h=mc(n.account?.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?$p(n.expiresOn):0,n.extExpiresOn?$p(n.extExpiresOn):0,Et,void 0,n.tokenType,void 0,a.sshKid,a.claims,c),d={idToken:r,accessToken:h};return this.saveCacheRecord(d,n.correlationId,bn(_n(n.idToken,Et)),ge.hydrateCache)}async saveCacheRecord(n,a,r,c,h){try{await super.saveCacheRecord(n,a,r,c,h)}catch(d){if(d instanceof Qa&&this.performanceClient&&a)try{const g=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:g.refreshToken.length,cacheIdCount:g.idToken.length,cacheAtCount:g.accessToken.length},a)}catch{}throw d}}}function Ey(u,n,a,r){try{switch(n){case dt.LocalStorage:return new gb(u,a,r);case dt.SessionStorage:return new mb;case dt.MemoryStorage:default:break}}catch(c){a.error(c)}return new _c}const pb=(u,n,a,r)=>{const c={cacheLocation:dt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new yh(u,c,Qs,n,a,r)};function yb(u,n,a,r,c){return u.verbose("getAllAccounts called"),a?n.getAllAccounts(c||{},r):[]}function Cb(u,n,a,r){const c=a.getAccountInfoFilteredBy(u,r);return c?(n.verbose("getAccount: Account matching provided filter found, returning"),c):(n.verbose("getAccount: No matching account found, returning null"),null)}function Tb(u,n,a,r){if(n.trace("getAccountByUsername called"),!u)return n.warning("getAccountByUsername: No username provided"),null;const c=a.getAccountInfoFilteredBy({username:u},r);return c?(n.verbose("getAccountByUsername: Account matching username found, returning"),n.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${u}`),c):(n.verbose("getAccountByUsername: No matching account found, returning null"),null)}function vb(u,n,a,r){if(n.trace("getAccountByHomeId called"),!u)return n.warning("getAccountByHomeId: No homeAccountId provided"),null;const c=a.getAccountInfoFilteredBy({homeAccountId:u},r);return c?(n.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),n.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${u}`),c):(n.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function Ab(u,n,a,r){if(n.trace("getAccountByLocalId called"),!u)return n.warning("getAccountByLocalId: No localAccountId provided"),null;const c=a.getAccountInfoFilteredBy({localAccountId:u},r);return c?(n.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),n.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${u}`),c):(n.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Sb(u,n,a){n.setActiveAccount(u,a)}function Eb(u,n){return u.getActiveAccount(n)}const _b="msal.broadcast.event";class bb{constructor(n){this.eventCallbacks=new Map,this.logger=n||new ki({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(_b)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,r){if(typeof window<"u"){const c=r||tb();return this.eventCallbacks.has(c)?(this.logger.error(`Event callback with id: ${c} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(c,[n,a||[]]),this.logger.verbose(`Event callback registered with id: ${c}`),c)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose(`Event callback ${n} removed.`)}emitEvent(n,a,r,c){const h={eventType:n,interactionType:a||null,payload:r||null,error:c||null,timestamp:Date.now()};switch(n){case J.ACCOUNT_ADDED:case J.ACCOUNT_REMOVED:case J.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(h);break;default:this.invokeCallbacks(h);break}}invokeCallbacks(n){this.eventCallbacks.forEach(([a,r],c)=>{(r.length===0||r.includes(n.eventType))&&(this.logger.verbose(`Emitting event to callback ${c}: ${n.eventType}`),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class IT{constructor(n,a,r,c,h,d,g,m,y){this.config=n,this.browserStorage=a,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=h,this.navigationClient=d,this.platformAuthProvider=m,this.correlationId=y||yn(),this.logger=c.clone(Nt.MSAL_SKU,ea,this.correlationId),this.performanceClient=g}async clearCacheOnLogout(n,a){if(a)try{this.browserStorage.removeAccount(a,n),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(n),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(n){this.logger.verbose("getRedirectUri called");const a=n||this.config.auth.redirectUri;return Te.getAbsoluteUrl(a,Fn())}initializeServerTelemetryManager(n,a){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:n,forceRefresh:a||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new sr(r,this.browserStorage)}async getDiscoveredAuthority(n){const{account:a}=n,r=n.requestExtraQueryParameters&&n.requestExtraQueryParameters.hasOwnProperty("instance_aware")?n.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(T.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const c={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},h=n.requestAuthority||this.config.auth.authority,d=r?.length?r==="true":this.config.auth.instanceAware,g=a&&d?this.config.auth.authority.replace(Te.getDomainFromUrl(h),a.environment):h,m=yt.generateAuthority(g,n.requestAzureCloudOptions||this.config.auth.azureCloudOptions),y=await O(IC,T.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(m,this.config.system.networkClient,this.browserStorage,c,this.logger,this.correlationId,this.performanceClient);if(a&&!y.isAlias(a.environment))throw Me(iC);return y}}async function Td(u,n,a,r){a.addQueueMeasurement(T.InitializeBaseRequest,u.correlationId);const c=u.authority||n.auth.authority,h=[...u&&u.scopes||[]],d={...u,correlationId:u.correlationId,authority:c,scopes:h};if(!d.authenticationScheme)d.authenticationScheme=we.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(d.authenticationScheme===we.SSH){if(!u.sshJwk)throw Me(lc);if(!u.sshKid)throw Me(eC)}r.verbose(`Authentication Scheme set to "${d.authenticationScheme}" as configured in Auth request`)}return n.cache.claimsBasedCachingEnabled&&u.claims&&!Ft.isEmptyObj(u.claims)&&(d.requestedClaimsHash=await TT(u.claims)),d}async function wb(u,n,a,r,c){r.addQueueMeasurement(T.InitializeSilentRequest,u.correlationId);const h=await O(Td,T.InitializeBaseRequest,c,r,u.correlationId)(u,a,r,c);return{...u,...h,account:n,forceRefresh:u.forceRefresh||!1}}function kT(u,n){let a;const r=u.httpMethod;if(n===Dt.EAR){if(a=r||Zi.POST,a!==Zi.POST)throw Me(aC)}else a=r||Zi.GET;if(u.authorizePostBodyParameters&&a!==Zi.POST)throw Me(oC);return a}class no extends IT{initializeLogoutRequest(n){this.logger.verbose("initializeLogoutRequest called",n?.correlationId);const a={correlationId:this.correlationId||yn(),...n};if(n)if(n.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(n.account){const r=this.getLogoutHintFromIdTokenClaims(n.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),a.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",a.correlationId),a.postLogoutRedirectUri=Te.getAbsoluteUrl(n.postLogoutRedirectUri,Fn())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",a.correlationId),a.postLogoutRedirectUri=Te.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Fn())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",a.correlationId),a.postLogoutRedirectUri=Te.getAbsoluteUrl(Fn(),Fn())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(n){this.performanceClient.addQueueMeasurement(T.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await O(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(n);return new NC(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:r,requestAzureCloudOptions:c,requestExtraQueryParameters:h,account:d}=n;this.performanceClient.addQueueMeasurement(T.StandardInteractionClientGetClientConfiguration,this.correlationId);const g=n.authority||await O(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:c,requestExtraQueryParameters:h,account:d}),m=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:g,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:m.loggerCallback,piiLoggingEnabled:m.piiLoggingEnabled,logLevel:m.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:Nt.MSAL_SKU,version:ea,cpu:H.EMPTY_STRING,os:H.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(n,a){this.performanceClient.addQueueMeasurement(T.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(n.redirectUri),c={interactionType:a},h=eo.setRequestState(this.browserCrypto,n&&n.state||H.EMPTY_STRING,c),g={...await O(Td,T.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...n,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:h,nonce:n.nonce||yn(),responseMode:this.config.auth.OIDCOptions.serverResponseType},m={...g,httpMethod:kT(g,this.config.auth.protocolMode)};if(n.loginHint||n.sid)return m;const y=n.account||this.browserStorage.getActiveAccount(this.correlationId);return y&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${y.homeAccountId}`,this.correlationId),m.account=y),m}}function Rb(u,n){if(!n)return null;try{return eo.parseRequestState(u,n).libraryState.meta}catch{throw z(Za)}}function ar(u,n,a){const r=Vs(u);if(!r)throw cC(u)?(a.error(`A ${n} is present in the iframe but it does not contain known properties. It's likely that the ${n} has been replaced by code running on the redirectUri page.`),a.errorPii(`The ${n} detected is: ${u}`),G(xC)):(a.error(`The request has returned to the redirectUri but a ${n} is not present. It's likely that the ${n} has been removed or the page has been redirected by code running on the redirectUri page.`),G(PC));return r}function Ib(u,n,a){if(!u.state)throw G(ad);const r=Rb(n,u.state);if(!r)throw G(BC);if(r.interactionType!==a)throw G(KC)}class OT{constructor(n,a,r,c,h){this.authModule=n,this.browserStorage=a,this.authCodeRequest=r,this.logger=c,this.performanceClient=h}async handleCodeResponse(n,a,r){this.performanceClient.addQueueMeasurement(T.HandleCodeResponse,a.correlationId);let c;try{c=T_(n,a.state)}catch(h){throw h instanceof ia&&h.subError===cr?G(cr):h}return O(this.handleCodeResponseFromServer.bind(this),T.HandleCodeResponseFromServer,this.logger,this.performanceClient,a.correlationId)(c,a,r)}async handleCodeResponseFromServer(n,a,r,c=!0){if(this.performanceClient.addQueueMeasurement(T.HandleCodeResponseFromServer,a.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=n.code,n.cloud_instance_host_name&&await O(this.authModule.updateAuthority.bind(this.authModule),T.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,a.correlationId)(n.cloud_instance_host_name,a.correlationId),c&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const d=this.createCcsCredentials(a);d&&(this.authCodeRequest.ccsCredential=d)}return await O(this.authModule.acquireToken.bind(this.authModule),T.AuthClientAcquireToken,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,r,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:pn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:pn.UPN}:null}}const kb="ContentError",Ob="PageException",MT="user_switch";const Mb="USER_INTERACTION_REQUIRED",Nb="USER_CANCEL",Db="NO_NETWORK",Ub="DISABLED",Hb="ACCOUNT_UNAVAILABLE",Lb="UX_NOT_ALLOWED";const zb=-2147186943,Pb={[MT]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class En extends Ne{constructor(n,a,r){super(n,a),Object.setPrototypeOf(this,En.prototype),this.name="NativeAuthError",this.ext=r}}function ja(u){if(u.ext&&u.ext.status&&u.ext.status===Ub||u.ext&&u.ext.error&&u.ext.error===zb)return!0;switch(u.errorCode){case kb:case Ob:return!0;default:return!1}}function rc(u,n,a){if(a&&a.status)switch(a.status){case Hb:return nc(kC);case Mb:return new Xt(u,n);case Nb:return G(cr);case Db:return G(ic);case Lb:return nc(Zh)}return new En(u,Pb[u]||n,a)}class NT extends no{async acquireToken(n){this.performanceClient.addQueueMeasurement(T.SilentCacheClientAcquireToken,n.correlationId);const a=this.initializeServerTelemetryManager(ge.acquireTokenSilent_silentFlow),r=await O(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),c=new p_(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const d=(await O(c.acquireCachedToken.bind(c),T.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),d}catch(h){throw h instanceof hr&&h.errorCode===od&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),h}}logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n);return this.clearCacheOnLogout(a.correlationId,a?.account)}}class Gs extends IT{constructor(n,a,r,c,h,d,g,m,y,S,_,k){super(n,a,r,c,h,d,m,y,k),this.apiId=g,this.accountId=S,this.platformAuthProvider=y,this.nativeStorageManager=_,this.silentCacheClient=new NT(n,this.nativeStorageManager,r,c,h,d,m,y,k);const B=this.platformAuthProvider.getExtensionName();this.skus=sr.makeExtraSkuString({libraryName:Nt.MSAL_SKU,libraryVersion:ea,extensionName:B,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[NE]:this.skus}}async acquireToken(n,a){this.performanceClient.addQueueMeasurement(T.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(T.NativeInteractionClientAcquireToken,this.correlationId),c=Ut(),h=this.initializeServerTelemetryManager(this.apiId);try{const d=await this.initializeNativeRequest(n);try{const m=await this.acquireTokensFromCache(this.accountId,d);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),m}catch(m){if(a===At.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),m;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const g=await this.platformAuthProvider.sendMessage(d);return await this.handleNativeResponse(g,d,c).then(m=>(r.end({success:!0,isNativeBroker:!0,requestId:m.requestId}),h.clearNativeBrokerErrorCode(),m)).catch(m=>{throw r.end({success:!1,errorCode:m.errorCode,subErrorCode:m.subError}),m})}catch(d){throw d instanceof En&&h.setNativeBrokerErrorCode(d.errorCode),r.end({success:!1}),d}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:We.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),z(sh);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},this.correlationId);if(!r)throw z(sh);try{const c=this.createSilentCacheRequest(a,r),h=await this.silentCacheClient.acquireToken(c),d={...r,idTokenClaims:h?.idTokenClaims,idToken:h?.idToken};return{...h,account:d}}catch(c){throw c}}async acquireTokenRedirect(n,a){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=n;delete r.onRedirectNavigate;const c=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(c)}catch(g){if(g instanceof En&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(g.errorCode),ja(g)))throw g}this.browserStorage.setTemporaryCache(Je.NATIVE_REQUEST,JSON.stringify(c),!0);const h={apiId:ge.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(n.redirectUri);a.end({success:!0}),await this.navigationClient.navigateExternal(d,h)}async handleRedirectPromise(n,a){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:c,...h}=r;c&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.NATIVE_REQUEST));const d=Ut();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const g=await this.platformAuthProvider.sendMessage(h),m=await this.handleNativeResponse(g,h,d);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),m}catch(g){throw g}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const c=_n(n.id_token,Et),h=this.createHomeAccountIdentifier(n,c),d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(h!==d&&n.account.id!==a.accountId)throw rc(MT);const g=await this.getDiscoveredAuthority({requestAuthority:a.authority}),m=$h(this.browserStorage,g,h,Et,this.correlationId,c,n.client_info,void 0,c.tid,void 0,n.account.id,this.logger);n.expires_in=Number(n.expires_in);const y=await this.generateAuthenticationResult(n,a,c,m,g.canonicalAuthority,r);return await this.cacheAccount(m,this.correlationId,bn(c)),await this.cacheNativeTokens(n,a,h,c,n.access_token,y.tenantId,r),y}createHomeAccountIdentifier(n,a){return Ke.generateHomeAccountId(n.client_info||H.EMPTY_STRING,mn.Default,this.logger,this.browserCrypto,a)}generateScopes(n,a){return a?We.fromString(a):We.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===we.POP&&a.signPopToken){if(n.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),n.shr;const r=new $a(this.browserCrypto),c={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce};if(!a.keyId)throw z(wh);return r.signPopToken(n.access_token,a.keyId,c)}else return n.access_token}async generateAuthenticationResult(n,a,r,c,h,d){const g=this.addTelemetryFromNativeResponse(n.properties.MATS),m=this.generateScopes(a.scope,n.scope),y=n.account.properties||{},S=y.UID||r.oid||r.sub||H.EMPTY_STRING,_=y.TenantId||r.tid||H.EMPTY_STRING,k=Uh(Ke.getAccountInfo(c),void 0,r,n.id_token);k.nativeAccountId!==n.account.id&&(k.nativeAccountId=n.account.id);const B=await this.generatePopAccessToken(n,a),W=a.tokenType===we.POP?we.POP:we.BEARER;return{authority:h,uniqueId:S,tenantId:_,scopes:m.asArray(),account:k,idToken:n.id_token,idTokenClaims:r,accessToken:B,fromCache:g?this.isResponseFromCache(g):!1,expiresOn:Fa(d+n.expires_in),tokenType:W,correlationId:this.correlationId,state:n.state,fromNativeBroker:!0}}async cacheAccount(n,a,r){await this.browserStorage.setAccount(n,this.correlationId,r,this.apiId),this.browserStorage.removeAccountContext(Ke.getAccountInfo(n),a)}cacheNativeTokens(n,a,r,c,h,d,g){const m=gc(r,a.authority,n.id_token||"",a.clientId,c.tid||""),y=a.tokenType===we.POP?H.SHR_NONCE_VALIDITY:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,S=g+y,_=this.generateScopes(n.scope,a.scope),k=mc(r,a.authority,h,a.clientId,c.tid||d,_.printScopes(),S,0,Et,void 0,a.tokenType,void 0,a.keyId),B={idToken:m,accessToken:k};return this.nativeStorageManager.saveCacheRecord(B,this.correlationId,bn(c),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===we.POP?H.SHR_NONCE_VALIDITY:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const a=await this.getCanonicalAuthority(n),{scopes:r,...c}=n,h=new We(r||[]);h.appendScopes(Wa);const d={...c,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:h.printScopes(),redirectUri:this.getRedirectUri(n.redirectUri),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraQueryParameters,...n.tokenQueryParameters},extendedExpiryToken:!1,keyId:n.popKid};if(d.signPopToken&&n.popKid)throw G(lT);if(this.handleExtraBrokerParams(d),d.extraParameters=d.extraParameters||{},d.extraParameters.telemetry=ln.MATS_TELEMETRY,n.authenticationScheme===we.POP){const g={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce},m=new $a(this.browserCrypto);let y;if(d.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:d.keyId})),d.signPopToken=!1;else{const S=await O(m.generateCnf.bind(m),T.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(g,this.logger);y=S.reqCnfString,d.keyId=S.kid,d.signPopToken=!0}d.reqCnf=y}return this.addRequestSKUs(d),d}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority;n.account&&await this.getDiscoveredAuthority({requestAuthority:a,requestAzureCloudOptions:n.azureCloudOptions,account:n.account});const r=new Te(a);return r.validateAsUri(),r}getPrompt(n){switch(this.apiId){case ge.ssoSilent:case ge.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),ht.NONE}if(!n){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(n){case ht.NONE:case ht.CONSENT:case ht.LOGIN:case ht.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),n;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${n} is not compatible with native flow`),G(sT)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty(Zs)&&n.extraParameters.hasOwnProperty($s)&&n.extraParameters.hasOwnProperty($i);if(!n.embeddedClientId&&!a)return;let r="";const c=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,r=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[$s],r=n.extraParameters[$i]),n.extraParameters={child_client_id:r,child_redirect_uri:c},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:c},this.correlationId)}}async function vd(u,n,a,r,c){const h=C_({...u.auth,authority:n},a,r,c);if(jh(h,{sku:Nt.MSAL_SKU,version:ea,os:"",cpu:""}),u.auth.protocolMode!==Dt.OIDC&&Yh(h,u.telemetry.application),a.platformBroker&&(LE(h),c.addFields({isPlatformAuthorizeRequest:!0},a.correlationId),a.authenticationScheme===we.POP)){const d=new Vn(r,c),g=new $a(d);let m;a.popKid?m=d.encodeKid(a.popKid):m=(await O(g.generateCnf.bind(g),T.PopTokenGenerateCnf,r,c,a.correlationId)(a,r)).reqCnfString,Vh(h,m)}return hc(h,a.correlationId,c),h}async function Ad(u,n,a,r,c){if(!a.codeChallenge)throw Me(Mh);const h=await O(vd,T.GetStandardParams,r,c,a.correlationId)(u,n,a,r,c);return Ph(h,Th.CODE),Qh(h,a.codeChallenge,H.S256_CODE_CHALLENGE_METHOD),Ri(h,a.extraQueryParameters||{}),Wh(n,h,u.auth.encodeExtraQueryParams,a.extraQueryParameters)}async function Sd(u,n,a,r,c,h){if(!r.earJwk)throw G(id);const d=await vd(n,a,r,c,h);Ph(d,Th.IDTOKEN_TOKEN_REFRESHTOKEN),FE(d,r.earJwk),Qh(d,r.codeChallenge,H.S256_CODE_CHALLENGE_METHOD);const g=new Map;Ri(g,r.extraQueryParameters||{});const m=Wh(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return DT(u,m,d)}async function Ed(u,n,a,r,c,h){const d=await vd(n,a,r,c,h);Ph(d,Th.CODE),Qh(d,r.codeChallenge,r.codeChallengeMethod||H.S256_CODE_CHALLENGE_METHOD),VE(d,r.authorizePostBodyParameters||{});const g=new Map;Ri(g,r.extraQueryParameters||{});const m=Wh(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return DT(u,m,d)}function DT(u,n,a){const r=u.createElement("form");return r.method="post",r.action=n,a.forEach((c,h)=>{const d=u.createElement("input");d.hidden=!0,d.name=h,d.value=c,r.appendChild(d)}),u.body.appendChild(r),r}async function UT(u,n,a,r,c,h,d,g,m,y){if(g.verbose("Account id found, calling WAM for token"),!y)throw G(sd);const S=new Vn(g,m),_=new Gs(r,c,S,g,d,r.system.navigationClient,a,m,y,n,h,u.correlationId),{userRequestState:k}=eo.parseRequestState(S,u.state);return O(_.acquireToken.bind(_),T.NativeInteractionClientAcquireToken,g,m,u.correlationId)({...u,state:k,prompt:void 0})}async function Ja(u,n,a,r,c,h,d,g,m,y,S,_){if(Sn.removeThrottle(d,c.auth.clientId,u),n.accountId)return O(UT,T.HandleResponsePlatformBroker,y,S,u.correlationId)(u,n.accountId,r,c,d,g,m,y,S,_);const k={...u,code:n.code||"",codeVerifier:a},B=new OT(h,d,k,y,S);return await O(B.handleCodeResponse.bind(B),T.HandleCodeResponse,y,S,u.correlationId)(n,u,r)}async function _d(u,n,a,r,c,h,d,g,m,y,S){if(Sn.removeThrottle(h,r.auth.clientId,u),DC(n,u.state),!n.ear_jwe)throw G(zC);if(!u.earJwk)throw G(id);const _=JSON.parse(await O(F_,T.DecryptEarResponse,m,y,u.correlationId)(u.earJwk,n.ear_jwe));if(_.accountId)return O(UT,T.HandleResponsePlatformBroker,m,y,u.correlationId)(u,_.accountId,a,r,h,d,g,m,y,S);const k=new Wi(r.auth.clientId,h,new Vn(m,y),m,null,null,y);k.validateTokenResponse(_);const B={code:"",state:u.state,nonce:u.nonce,client_info:_.client_info,cloud_graph_host_name:_.cloud_graph_host_name,cloud_instance_host_name:_.cloud_instance_host_name,cloud_instance_name:_.cloud_instance_name,msgraph_host:_.msgraph_host};return await O(k.handleServerTokenResponse.bind(k),T.HandleServerTokenResponse,m,y,u.correlationId)(_,c,Ut(),u,a,B,void 0,void 0,void 0,void 0)}const xb=32;async function na(u,n,a){u.addQueueMeasurement(T.GeneratePkceCodes,a);const r=Vt(Bb,T.GenerateCodeVerifier,n,u,a)(u,n,a),c=await O(Kb,T.GenerateCodeChallengeFromVerifier,n,u,a)(r,u,n,a);return{verifier:r,challenge:c}}function Bb(u,n,a){try{const r=new Uint8Array(xb);return Vt(G_,T.GetRandomValues,n,u,a)(r),Oi(r)}catch{throw G(nd)}}async function Kb(u,n,a,r){n.addQueueMeasurement(T.GenerateCodeChallengeFromVerifier,r);try{const c=await O(pT,T.Sha256Digest,a,n,r)(u,n,r);return Oi(new Uint8Array(c))}catch{throw G(nd)}}class sc{constructor(n,a,r,c){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=c,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(T.NativeMessageHandlerHandshake),this.platformAuthType=ln.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace(this.platformAuthType+" - sendMessage called.");const a={method:$o.GetToken,request:n},r={channel:ln.CHANNEL_ID,extensionId:this.extensionId,responseId:yn(),body:a};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const c=await new Promise((d,g)=>{this.resolvers.set(r.responseId,{resolve:d,reject:g})});return this.validatePlatformBrokerResponse(c)}static async createProvider(n,a,r){n.trace("PlatformAuthExtensionHandler - createProvider called.");try{const c=new sc(n,a,r,ln.PREFERRED_EXTENSION_ID);return await c.sendHandshakeRequest(),c}catch{const h=new sc(n,a,r);return await h.sendHandshakeRequest(),h}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const n={channel:ln.CHANNEL_ID,extensionId:this.extensionId,responseId:yn(),body:{method:$o.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=a=>{this.onChannelMessage(a)},window.postMessage(n,window.origin,[this.messageChannel.port2]),new Promise((a,r)=>{this.handshakeResolvers.set(n.responseId,{resolve:a,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(G(oT)),this.handshakeResolvers.delete(n.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),n.source!==window)return;const a=n.data;if(!(!a.channel||a.channel!==ln.CHANNEL_ID)&&!(a.extensionId&&a.extensionId!==this.extensionId)&&a.body.method===$o.HandshakeRequest){const r=this.handshakeResolvers.get(a.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${a.responseId}`);return}this.logger.verbose(a.extensionId?`Extension with id: ${a.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(G(rT))}}onChannelMessage(n){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const a=n.data,r=this.resolvers.get(a.responseId),c=this.handshakeResolvers.get(a.responseId);try{const h=a.body.method;if(h===$o.Response){if(!r)return;const d=a.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(d)}`),d.status!=="Success")r.reject(rc(d.code,d.description,d.ext));else if(d.result)d.result.code&&d.result.description?r.reject(rc(d.result.code,d.result.description,d.result.ext)):r.resolve(d.result);else throw ah(Ys,"Event does not contain result.");this.resolvers.delete(a.responseId)}else if(h===$o.HandshakeResponse){if(!c){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${a.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=a.extensionId,this.extensionVersion=a.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),c.resolve(),this.handshakeResolvers.delete(a.responseId)}}catch(h){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${h}`),this.logger.errorPii(`Unable to parse ${n}`),r?r.reject(h):c&&c.reject(h)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw ah(Ys,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===ln.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class bd{constructor(n,a,r){this.logger=n,this.performanceClient=a,this.correlationId=r,this.platformAuthType=ln.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,r){if(n.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(ln.MICROSOFT_ENTRA_BROKERID))?.includes(ln.PLATFORM_DOM_APIS))return n.trace("Platform auth api available in DOM"),new bd(n,a,r)}getExtensionId(){return ln.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return ln.DOM_API_NAME}async sendMessage(n){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const a=this.initializePlatformDOMRequest(n),r=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(r)}catch(a){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),a}}initializePlatformDOMRequest(n){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:a,clientId:r,authority:c,scope:h,redirectUri:d,correlationId:g,state:m,storeInCache:y,embeddedClientId:S,extraParameters:_,...k}=n,B=this.getDOMExtraParams(k);return{accountId:a,brokerId:this.getExtensionId(),authority:c,clientId:r,correlationId:g||this.correlationId,extraParameters:{..._,...B},isSecurityTokenService:!1,redirectUri:d,scope:h,state:m,storeInCache:y,embeddedClientId:S}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(n);if(n.hasOwnProperty("error")){const a=n;if(a.isSuccess===!1&&a.error&&a.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),rc(a.error.code,a.error.description,{error:parseInt(a.error.errorCode),protocol_error:a.error.protocolError,status:a.error.status,properties:a.error.properties})}}throw ah(Ys,"Response missing expected properties.")}convertToPlatformBrokerResponse(n){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((c,[h,d])=>(c[h]=String(d),c),{})}}}async function Gb(u,n,a,r,c){u.trace("getPlatformAuthProvider called",a),u.trace("Has client allowed platform auth via DOM API: "+c);let h;try{c&&(h=await bd.createProvider(u,n,a)),h||(u.trace("Platform auth via DOM API not available, checking for extension"),h=await sc.createProvider(u,r||bT,n))}catch(d){u.trace("Platform auth not available",d)}return h}function ur(u,n,a,r){if(n.trace("isPlatformAuthAllowed called"),!u.system.allowPlatformBroker&&u.system.allowPlatformBrokerWithDOM)throw Me(rC);if(!u.system.allowPlatformBroker)return n.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!a)return n.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case we.BEARER:case we.POP:return n.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return n.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class qb extends no{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,g,y,S),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=m,this.eventHandler=h}acquireToken(n,a){let r;try{if(r={popupName:this.generatePopupName(n.scopes||Wa,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(n,r,a);{const h={...n,httpMethod:kT(n,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(h,r,a)}}catch(c){return Promise.reject(c)}}logout(n){try{this.logger.verbose("logoutPopup called");const a=this.initializeLogoutRequest(n),r={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},c=n&&n.authority,h=n&&n.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(a,r,c,h)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(a,r,c,h))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,r){this.logger.verbose("acquireTokenPopupAsync called");const c=await O(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,$.Popup);a.popup&&_T(c.authority);const h=ur(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);return c.platformBroker=h,this.config.auth.protocolMode===Dt.EAR?this.executeEarFlow(c,a,r):this.executeCodeFlow(c,a,r)}async executeCodeFlow(n,a,r){const c=n.correlationId,h=this.initializeServerTelemetryManager(ge.acquireTokenPopup),d=r||await O(na,T.GeneratePkceCodes,this.logger,this.performanceClient,c)(this.performanceClient,this.logger,c),g={...n,codeChallenge:d.challenge};try{const m=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,c)({serverTelemetryManager:h,requestAuthority:g.authority,requestAzureCloudOptions:g.azureCloudOptions,requestExtraQueryParameters:g.extraQueryParameters,account:g.account});if(g.httpMethod===Zi.POST)return await this.executeCodeFlowWithPost(g,a,m,d.verifier);{const y=await O(Ad,T.GetAuthCodeUrl,this.logger,this.performanceClient,c)(this.config,m.authority,g,this.logger,this.performanceClient),S=this.initiateAuthRequest(y,a);this.eventHandler.emitEvent(J.POPUP_OPENED,$.Popup,{popupWindow:S},null);const _=await this.monitorPopupForHash(S,a.popupWindowParent),k=Vt(ar,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await O(Ja,T.HandleResponseCode,this.logger,this.performanceClient,c)(n,k,d.verifier,ge.acquireTokenPopup,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(m){throw a.popup?.close(),m instanceof Ne&&(m.setCorrelationId(this.correlationId),h.cacheFailedRequest(m)),m}}async executeEarFlow(n,a,r){const c=n.correlationId,h=await O(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,c)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),d=await O(dd,T.GenerateEarKey,this.logger,this.performanceClient,c)(),g=r||await O(na,T.GeneratePkceCodes,this.logger,this.performanceClient,c)(this.performanceClient,this.logger,c),m={...n,earJwk:d,codeChallenge:g.challenge},y=a.popup||this.openPopup("about:blank",a);(await Sd(y.document,this.config,h,m,this.logger,this.performanceClient)).submit();const _=await O(this.monitorPopupForHash.bind(this),T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,c)(y,a.popupWindowParent),k=Vt(ar,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!k.ear_jwe&&k.code){const B=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,c)({serverTelemetryManager:this.initializeServerTelemetryManager(ge.acquireTokenPopup),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:h});return O(Ja,T.HandleResponseCode,this.logger,this.performanceClient,c)(m,k,g.verifier,ge.acquireTokenPopup,this.config,B,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return O(_d,T.HandleResponseEar,this.logger,this.performanceClient,c)(m,k,ge.acquireTokenPopup,this.config,h,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,r,c){const h=n.correlationId,d=await O(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,h)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),g=a.popup||this.openPopup("about:blank",a);(await Ed(g.document,this.config,d,n,this.logger,this.performanceClient)).submit();const y=await O(this.monitorPopupForHash.bind(this),T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,h)(g,a.popupWindowParent),S=Vt(ar,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return O(Ja,T.HandleResponseCode,this.logger,this.performanceClient,h)(n,S,c,ge.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,r,c){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(J.LOGOUT_START,$.Popup,n);const h=this.initializeServerTelemetryManager(ge.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,n.account);const d=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:h,requestAuthority:r,account:n.account||void 0});try{d.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&d.authority.protocolMode===Dt.OIDC){if(this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,$.Popup,n),c){const y={apiId:ge.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Te.getAbsoluteUrl(c,Fn());await this.navigationClient.navigateInternal(S,y)}a.popup?.close();return}}const g=d.getLogoutUri(n);this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,$.Popup,n);const m=this.openPopup(g,a);if(this.eventHandler.emitEvent(J.POPUP_OPENED,$.Popup,{popupWindow:m},null),await this.monitorPopupForHash(m,a.popupWindowParent).catch(()=>{}),c){const y={apiId:ge.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Te.getAbsoluteUrl(c,Fn());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${S}`),await this.navigationClient.navigateInternal(S,y)}else this.logger.verbose("No main window navigation requested")}catch(d){throw a.popup?.close(),d instanceof Ne&&(d.setCorrelationId(this.correlationId),h.cacheFailedRequest(d)),this.eventHandler.emitEvent(J.LOGOUT_FAILURE,$.Popup,null,d),this.eventHandler.emitEvent(J.LOGOUT_END,$.Popup),d}this.eventHandler.emitEvent(J.LOGOUT_END,$.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii(`Navigate to: ${n}`),this.openPopup(n,a);throw this.logger.error("Navigate url is empty"),G(vc)}monitorPopupForHash(n,a){return new Promise((r,c)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const h=setInterval(()=>{if(n.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(h),c(G(cr));return}let d="";try{d=n.location.href}catch{}if(!d||d==="about:blank")return;clearInterval(h);let g="";const m=this.config.auth.OIDCOptions.serverResponseType;n&&(m===cc.QUERY?g=n.location.search:g=n.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(g)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(n,a)})}openPopup(n,a){try{let r;if(a.popup?(r=a.popup,this.logger.verbosePii(`Navigating popup window to: ${n}`),r.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${n}`),r=this.openSizedPopup(n,a)),!r)throw G(jC);return r.focus&&r.focus(),this.currentWindow=r,a.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),G(qC)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:r,popupWindowParent:c}){const h=c.screenLeft?c.screenLeft:c.screenX,d=c.screenTop?c.screenTop:c.screenY,g=c.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=c.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let y=r.popupSize?.width,S=r.popupSize?.height,_=r.popupPosition?.top,k=r.popupPosition?.left;return(!y||y<0||y>g)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),y=Nt.POPUP_WIDTH),(!S||S<0||S>m)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),S=Nt.POPUP_HEIGHT),(!_||_<0||_>m)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),_=Math.max(0,m/2-Nt.POPUP_HEIGHT/2+d)),(!k||k<0||k>g)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),k=Math.max(0,g/2-Nt.POPUP_WIDTH/2+h)),c.open(n,a,`width=${y}, height=${S}, top=${_}, left=${k}, scrollbars=yes`)}unloadWindow(n){this.currentWindow&&this.currentWindow.close(),n.preventDefault()}cleanPopup(n,a){n.close(),a.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(n,a){return`${Nt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${Nt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function jb(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const u=window.performance.getEntriesByType("navigation");return(u.length?u[0]:void 0)?.type}class Yb extends no{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,g,y,S),this.nativeStorage=m}async acquireToken(n){const a=await O(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,$.Redirect);a.platformBroker=ur(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);const r=h=>{h.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(J.RESTORE_FROM_BFCACHE,$.Redirect))},c=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${c}`),this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,c,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===Dt.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a,n.onRedirectNavigate)}catch(h){throw h instanceof Ne&&h.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),h}}async executeCodeFlow(n,a){const r=n.correlationId,c=this.initializeServerTelemetryManager(ge.acquireTokenRedirect),h=await O(na,T.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),d={...n,codeChallenge:h.challenge};this.browserStorage.cacheAuthorizeRequest(d,h.verifier);try{if(d.httpMethod===Zi.POST)return await this.executeCodeFlowWithPost(d);{const g=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),m=await O(Ad,T.GetAuthCodeUrl,this.logger,this.performanceClient,n.correlationId)(this.config,g.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(m,a)}}catch(g){throw g instanceof Ne&&(g.setCorrelationId(this.correlationId),c.cacheFailedRequest(g)),g}}async executeEarFlow(n){const a=n.correlationId,r=await O(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),c=await O(dd,T.GenerateEarKey,this.logger,this.performanceClient,a)(),h=await O(na,T.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,earJwk:c,codeChallenge:h.challenge};return this.browserStorage.cacheAuthorizeRequest(d,h.verifier),(await Sd(document,this.config,r,d,this.logger,this.performanceClient)).submit(),new Promise((m,y)=>{setTimeout(()=>{y(G(ac,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,r=await O(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return this.browserStorage.cacheAuthorizeRequest(n),(await Ed(document,this.config,r,n,this.logger,this.performanceClient)).submit(),new Promise((h,d)=>{setTimeout(()=>{d(G(ac,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n="",a,r,c){const h=this.initializeServerTelemetryManager(ge.handleRedirectPromise);try{const[d,g]=this.getRedirectResponse(n||"");if(!d)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),jb()!=="back_forward"?c.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const m=this.browserStorage.getTemporaryCache(Je.ORIGIN_URI,!0)||H.EMPTY_STRING,y=Qp(m),S=Qp(window.location.href);if(y===S&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),m.indexOf("#")>-1&&X_(m),await this.handleResponse(d,a,r,h);if(this.config.auth.navigateToLoginRequestUrl){if(!pd()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Je.URL_HASH,g,!0);const _={apiId:ge.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let k=!0;if(!m||m==="null"){const B=Z_();this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,B,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),k=await this.navigationClient.navigateInternal(B,_)}else this.logger.verbose(`Navigating to loginRequestUrl: ${m}`),k=await this.navigationClient.navigateInternal(m,_);if(!k)return await this.handleResponse(d,a,r,h)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(d,a,r,h);return null}catch(d){throw d instanceof Ne&&(d.setCorrelationId(this.correlationId),h.cacheFailedRequest(d)),d}}getRedirectResponse(n){this.logger.verbose("getRedirectResponseHash called");let a=n;a||(this.config.auth.OIDCOptions.serverResponseType===cc.QUERY?a=window.location.search:a=window.location.hash);let r=Vs(a);if(r){try{Ib(r,this.browserCrypto,$.Redirect)}catch(h){return h instanceof Ne&&this.logger.error(`Interaction type validation failed due to ${h.errorCode}: ${h.errorMessage}`),[null,""]}return AT(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,a]}const c=this.browserStorage.getTemporaryCache(Je.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.URL_HASH)),c&&(r=Vs(c),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,c]):[null,""]}async handleResponse(n,a,r,c){if(!n.state)throw G(ad);if(n.ear_jwe){const g=await O(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a.correlationId)({requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});return O(_d,T.HandleResponseEar,this.logger,this.performanceClient,a.correlationId)(a,n,ge.acquireTokenRedirect,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const d=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:a.authority});return O(Ja,T.HandleResponseCode,this.logger,this.performanceClient,a.correlationId)(a,n,r,ge.acquireTokenRedirect,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n,a){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),n){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${n}`);const r={apiId:ge.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=a||this.config.auth.onRedirectNavigate;if(typeof c=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),c(n)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(n,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(n,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),G(vc)}async logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n),r=this.initializeServerTelemetryManager(ge.logout);try{this.eventHandler.emitEvent(J.LOGOUT_START,$.Redirect,n),await this.clearCacheOnLogout(this.correlationId,a.account);const c={apiId:ge.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(h.authority.protocolMode===Dt.OIDC)try{h.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,$.Redirect,a);return}}const d=h.getLogoutUri(a);if(this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,$.Redirect,a),n&&typeof n.onRedirectNavigate=="function")if(n.onRedirectNavigate(d)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Si.SIGNOUT),await this.navigationClient.navigateExternal(d,c);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Si.SIGNOUT),await this.navigationClient.navigateExternal(d,c);return}}catch(c){throw c instanceof Ne&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),this.eventHandler.emitEvent(J.LOGOUT_FAILURE,$.Redirect,null,c),this.eventHandler.emitEvent(J.LOGOUT_END,$.Redirect),c}this.eventHandler.emitEvent(J.LOGOUT_END,$.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return Te.getAbsoluteUrl(a,Fn())}}async function Qb(u,n,a,r,c){if(n.addQueueMeasurement(T.SilentHandlerInitiateAuthRequest,r),!u)throw a.info("Navigate url is empty"),G(vc);return c?O(Xb,T.SilentHandlerLoadFrame,a,n,r)(u,c,n,r):Vt(Jb,T.SilentHandlerLoadFrameSync,a,n,r)(u)}async function Fb(u,n,a,r,c){const h=bc();if(!h.contentDocument)throw"No document associated with iframe!";return(await Ed(h.contentDocument,u,n,a,r,c)).submit(),h}async function Vb(u,n,a,r,c){const h=bc();if(!h.contentDocument)throw"No document associated with iframe!";return(await Sd(h.contentDocument,u,n,a,r,c)).submit(),h}async function _y(u,n,a,r,c,h,d){return r.addQueueMeasurement(T.SilentHandlerMonitorIframeForHash,h),new Promise((g,m)=>{n<mh&&c.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${n}ms) than the default (${mh}ms). This may result in timeouts.`);const y=window.setTimeout(()=>{window.clearInterval(S),m(G(YC))},n),S=window.setInterval(()=>{let _="";const k=u.contentWindow;try{_=k?k.location.href:""}catch{}if(!_||_==="about:blank")return;let B="";k&&(d===cc.QUERY?B=k.location.search:B=k.location.hash),window.clearTimeout(y),window.clearInterval(S),g(B)},a)}).finally(()=>{Vt(Zb,T.RemoveHiddenIframe,c,r,h)(u)})}function Xb(u,n,a,r){return a.addQueueMeasurement(T.SilentHandlerLoadFrame,r),new Promise((c,h)=>{const d=bc();window.setTimeout(()=>{if(!d){h("Unable to load iframe");return}d.src=u,c(d)},n)})}function Jb(u){const n=bc();return n.src=u,n}function bc(){const u=document.createElement("iframe");return u.className="msalSilentIframe",u.style.visibility="hidden",u.style.position="absolute",u.style.width=u.style.height="0",u.style.border="0",u.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),u.setAttribute("allow","local-network-access *"),document.body.appendChild(u),u}function Zb(u){document.body===u.parentNode&&document.body.removeChild(u)}class $b extends no{constructor(n,a,r,c,h,d,g,m,y,S,_){super(n,a,r,c,h,d,m,S,_),this.apiId=g,this.nativeStorage=y}async acquireToken(n){this.performanceClient.addQueueMeasurement(T.SilentIframeClientAcquireToken,n.correlationId),!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const a={...n};a.prompt?a.prompt!==ht.NONE&&a.prompt!==ht.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${a.prompt} with ${ht.NONE}`),a.prompt=ht.NONE):a.prompt=ht.NONE;const r=await O(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(a,$.Silent);return r.platformBroker=ur(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),_T(r.authority),this.config.auth.protocolMode===Dt.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(n){let a;const r=this.initializeServerTelemetryManager(this.apiId);try{return a=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await O(this.silentTokenHelper.bind(this),T.SilentIframeClientTokenHelper,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(c){if(c instanceof Ne&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),!a||!(c instanceof Ne)||c.errorCode!==Nt.INVALID_GRANT_ERROR)throw c;return this.performanceClient.addFields({retryError:c.errorCode},this.correlationId),await O(this.silentTokenHelper.bind(this),T.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const a=n.correlationId,r=await O(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),c=await O(dd,T.GenerateEarKey,this.logger,this.performanceClient,a)(),h=await O(na,T.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,earJwk:c,codeChallenge:h.challenge},g=await O(Vb,T.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,a)(this.config,r,d,this.logger,this.performanceClient),m=this.config.auth.OIDCOptions.serverResponseType,y=await O(_y,T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(g,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,a,m),S=Vt(ar,T.DeserializeResponse,this.logger,this.performanceClient,a)(y,m,this.logger);if(!S.ear_jwe&&S.code){const _=await O(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:r});return O(Ja,T.HandleResponseCode,this.logger,this.performanceClient,a)(d,S,h.verifier,this.apiId,this.config,_,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return O(_d,T.HandleResponseEar,this.logger,this.performanceClient,a)(d,S,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(G(Ac))}async silentTokenHelper(n,a){const r=a.correlationId;this.performanceClient.addQueueMeasurement(T.SilentIframeClientTokenHelper,r);const c=await O(na,T.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),h={...a,codeChallenge:c.challenge};let d;if(a.httpMethod===Zi.POST)d=await O(Fb,T.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,n.authority,h,this.logger,this.performanceClient);else{const S=await O(Ad,T.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,n.authority,h,this.logger,this.performanceClient);d=await O(Qb,T.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(S,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const g=this.config.auth.OIDCOptions.serverResponseType,m=await O(_y,T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,g),y=Vt(ar,T.DeserializeResponse,this.logger,this.performanceClient,r)(m,g,this.logger);return O(Ja,T.HandleResponseCode,this.logger,this.performanceClient,r)(a,y,c.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class Wb extends no{async acquireToken(n){this.performanceClient.addQueueMeasurement(T.SilentRefreshClientAcquireToken,n.correlationId);const a=await O(Td,T.InitializeBaseRequest,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger),r={...n,...a};n.redirectUri&&(r.redirectUri=this.getRedirectUri(n.redirectUri));const c=this.initializeServerTelemetryManager(ge.acquireTokenSilent_silentFlow),h=await this.createRefreshTokenClient({serverTelemetryManager:c,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return O(h.acquireTokenByRefreshToken.bind(h),T.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(r,ge.acquireTokenSilent_silentFlow).catch(d=>{throw d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d),d})}logout(){return Promise.reject(G(Ac))}async createRefreshTokenClient(n){const a=await O(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new m_(a,this.performanceClient)}}class ew{constructor(n,a,r,c,h){this.isBrowserEnvironment=typeof window<"u",this.config=n,this.storage=a,this.logger=r,this.cryptoObj=c,this.performanceClient=h}async loadExternalTokens(n,a,r){if(!this.isBrowserEnvironment)throw G(Sc);const c=n.correlationId||yn(),h=this.performanceClient.startMeasurement(T.LoadExternalTokens,c);try{const d=a.id_token?_n(a.id_token,Et):void 0,g=bn(d||{}),m={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},y=n.authority?new yt(yt.generateAuthority(n.authority,n.azureCloudOptions),this.config.system.networkClient,this.storage,m,this.logger,n.correlationId||yn()):void 0,S=await O(this.loadAccount.bind(this),T.LoadAccount,this.logger,this.performanceClient,c)(n,r.clientInfo||a.client_info||"",c,d,y),_=await O(this.loadIdToken.bind(this),T.LoadIdToken,this.logger,this.performanceClient,c)(a,S.homeAccountId,S.environment,S.realm,c,g),k=await O(this.loadAccessToken.bind(this),T.LoadAccessToken,this.logger,this.performanceClient,c)(n,a,S.homeAccountId,S.environment,S.realm,r,c,g),B=await O(this.loadRefreshToken.bind(this),T.LoadRefreshToken,this.logger,this.performanceClient,c)(a,S.homeAccountId,S.environment,c,g);return h.end({success:!0},void 0,Ke.getAccountInfo(S)),this.generateAuthenticationResult(n,{account:S,idToken:_,accessToken:k,refreshToken:B},d,y)}catch(d){throw h.end({success:!1},d),d}}async loadAccount(n,a,r,c,h){if(this.logger.verbose("TokenCache - loading account"),n.account){const y=Ke.createFromAccountInfo(n.account);return await this.storage.setAccount(y,r,bn(c||{}),ge.loadExternalTokens),y}else if(!h||!a&&!c)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),G(eT);const d=Ke.generateHomeAccountId(a,h.authorityType,this.logger,this.cryptoObj,c),g=c?.tid,m=$h(this.storage,h,d,Et,r,c,a,h.hostnameAndPort,g,void 0,void 0,this.logger);return await this.storage.setAccount(m,r,bn(c||{}),ge.loadExternalTokens),m}async loadIdToken(n,a,r,c,h,d){if(!n.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const g=gc(a,r,n.id_token,this.config.auth.clientId,c);return await this.storage.setIdTokenCredential(g,h,d),g}async loadAccessToken(n,a,r,c,h,d,g,m){if(a.access_token)if(a.expires_in){if(!a.scope&&(!n.scopes||!n.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const y=a.scope?We.fromString(a.scope):new We(n.scopes),S=d.expiresOn||a.expires_in+Ut(),_=d.extendedExpiresOn||(a.ext_expires_in||a.expires_in)+Ut(),k=mc(r,c,a.access_token,this.config.auth.clientId,h,y.printScopes(),S,_,Et);return await this.storage.setAccessTokenCredential(k,g,m),k}async loadRefreshToken(n,a,r,c,h){if(!n.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const d=wC(a,r,n.refresh_token,this.config.auth.clientId,n.foci,void 0,n.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(d,c,h),d}generateAuthenticationResult(n,a,r,c){let h="",d=[],g=null,m;a?.accessToken&&(h=a.accessToken.secret,d=We.fromString(a.accessToken.target).asArray(),g=Fa(a.accessToken.expiresOn),m=Fa(a.accessToken.extendedExpiresOn));const y=a.account;return{authority:c?c.canonicalAuthority:"",uniqueId:a.account.localAccountId,tenantId:a.account.realm,scopes:d,account:Ke.getAccountInfo(y),idToken:a.idToken?.secret||"",idTokenClaims:r||{},accessToken:h,fromCache:!0,expiresOn:g,correlationId:n.correlationId||"",requestId:"",extExpiresOn:m,familyId:a.refreshToken?.familyId||"",tokenType:a?.accessToken?.tokenType||"",state:n.state||"",cloudGraphHostName:y.cloudGraphHostName||"",msGraphHost:y.msGraphHost||"",fromNativeBroker:!1}}}class tw extends NC{constructor(n){super(n),this.includeRedirectUri=!1}}class nw extends no{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,m,y,S),this.apiId=g}async acquireToken(n){if(!n.code)throw G(tT);const a=await O(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(n,$.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const c={...a,code:n.code},h=await O(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),d=new tw(h);this.logger.verbose("Auth code client created");const g=new OT(d,this.browserStorage,c,this.logger,this.performanceClient);return await O(g.handleCodeResponseFromServer.bind(g),T.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(c){throw c instanceof Ne&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),c}}logout(){return Promise.reject(G(Ac))}}function iw(u,n,a){const r=window.msal?.clientIds||[],c=r.length,h=r.filter(d=>d===u).length;h>1&&a.warning("There is already an instance of MSAL.js in the window with the same client id."),n.add({msalInstanceCount:c,sameClientIdInstanceCount:h})}function zs(u,n,a){try{yd(u)}catch(r){throw n.end({success:!1},r,a),r}}class wc{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Vn(this.logger,this.performanceClient):Qs,this.eventHandler=new bb(this.logger),this.browserStorage=this.isBrowserEnvironment?new yh(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,r_(this.config.auth)):pb(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:dt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new yh(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new ew(this.config,this.browserStorage,this.logger,this.browserCrypto,this.performanceClient),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const r=new wc(n);return await r.initialize(a),r}trackPageVisibility(n){n&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n,a){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(J.INITIALIZE_END);return}const r=n?.correlationId||this.getRequestCorrelationId(),c=this.config.system.allowPlatformBroker,h=this.performanceClient.startMeasurement(T.InitializeClientApplication,r);if(this.eventHandler.emitEvent(J.INITIALIZE_START),!a)try{this.logMultipleInstances(h)}catch{}if(await O(this.browserStorage.initialize.bind(this.browserStorage),T.InitializeCache,this.logger,this.performanceClient,r)(r),c)try{this.platformAuthProvider=await Gb(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout,this.config.system.allowPlatformBrokerWithDOM)}catch(d){this.logger.verbose(d)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Vt(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),T.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(J.INITIALIZE_END),h.end({allowPlatformBroker:c,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("handleRedirectPromise called"),ET(this.initialized),this.isBrowserEnvironment){const a=n||"";let r=this.redirectResponse.get(a);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===Si.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),c=this.browserStorage.getCachedNativeRequest(),h=c&&this.platformAuthProvider&&!n;let d;this.eventHandler.emitEvent(J.HANDLE_REDIRECT_START,$.Redirect);let g;try{if(h&&this.platformAuthProvider){d=this.performanceClient.startMeasurement(T.AcquireTokenRedirect,c?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),d.add({isPlatformBrokerRequest:!0});const m=new Gs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ge.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,c.accountId,this.nativeInternalStorage,c.correlationId);g=O(m.handleRedirectPromise.bind(m),T.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(this.performanceClient,d.event.correlationId)}else{const[m,y]=this.browserStorage.getCachedRequest(),S=m.correlationId;d=this.performanceClient.startMeasurement(T.AcquireTokenRedirect,S),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const _=this.createRedirectClient(S);g=O(_.handleRedirectPromise.bind(_),T.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(n,m,y,d)}}catch(m){throw this.browserStorage.resetRequestCache(),m}return g.then(m=>(m?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(J.LOGIN_SUCCESS,$.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_SUCCESS,$.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),d.end({success:!0},void 0,m.account)):d.event.errorCode?d.end({success:!1},void 0):d.discard(),this.eventHandler.emitEvent(J.HANDLE_REDIRECT_END,$.Redirect),m)).catch(m=>{this.browserStorage.resetRequestCache();const y=m;throw r.length>0?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,$.Redirect,null,y):this.eventHandler.emitEvent(J.LOGIN_FAILURE,$.Redirect,null,y),this.eventHandler.emitEvent(J.HANDLE_REDIRECT_END,$.Redirect),d.end({success:!1},y),m})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("acquireTokenRedirect called",a);const r=this.performanceClient.startMeasurement(T.AcquireTokenPreRedirect,a);r.add({scenarioId:n.scenarioId});const c=n.onRedirectNavigate;if(c)n.onRedirectNavigate=d=>{const g=typeof c=="function"?c(d):void 0;return r.add({navigateCallbackResult:g!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,g};else{const d=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=g=>{const m=typeof d=="function"?d(g):void 0;return r.add({navigateCallbackResult:m!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,m}}const h=this.getAllAccounts().length>0;try{gy(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Si.SIGNIN),h?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_START,$.Redirect,n):this.eventHandler.emitEvent(J.LOGIN_START,$.Redirect,n);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?d=new Gs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ge.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,r).catch(m=>{if(r.add({brokerErrorName:m.name,brokerErrorCode:m.errorCode}),m instanceof En&&ja(m))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(m instanceof Xt)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(a).acquireToken(n);throw m}):d=this.createRedirectClient(a).acquireToken(n),await d}catch(d){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(T.AcquireTokenRedirect,a).end({success:!1},d,n.account):r.end({success:!1},d,n.account),h?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,$.Redirect,null,d):this.eventHandler.emitEvent(J.LOGIN_FAILURE,$.Redirect,null,d),d}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(T.AcquireTokenPopup,a);r.add({scenarioId:n.scenarioId});try{this.logger.verbose("acquireTokenPopup called",a),zs(this.initialized,r,n.account),this.browserStorage.setInteractionInProgress(!0,Si.SIGNIN)}catch(g){return Promise.reject(g)}const c=this.getAllAccounts();c.length>0?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_START,$.Popup,n):this.eventHandler.emitEvent(J.LOGIN_START,$.Popup,n);let h;const d=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?(r.add({isPlatformBrokerRequest:!0}),h=this.acquireTokenNative({...n,correlationId:a},ge.acquireTokenPopup).then(g=>(r.end({success:!0},void 0,g.account),g)).catch(g=>{if(r.add({brokerErrorName:g.name,brokerErrorCode:g.errorCode}),g instanceof En&&ja(g))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,d);if(g instanceof Xt)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(a).acquireToken(n,d);throw g})):h=this.createPopupClient(a).acquireToken(n,d),h.then(g=>(c.length<this.getAllAccounts().length?this.eventHandler.emitEvent(J.LOGIN_SUCCESS,$.Popup,g):this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_SUCCESS,$.Popup,g),r.end({success:!0,accessTokenSize:g.accessToken.length,idTokenSize:g.idToken.length},void 0,g.account),g)).catch(g=>(c.length>0?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,$.Popup,null,g):this.eventHandler.emitEvent(J.LOGIN_FAILURE,$.Popup,null,g),r.end({success:!1},g,n.account),Promise.reject(g))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&(this.logger.info("Perf: Visibility change detected in ",n.event.name),n.increment({visibilityChangeCount:1}))}async ssoSilent(n){const a=this.getRequestCorrelationId(n),r={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(T.SsoSilent,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),zs(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",a),this.eventHandler.emitEvent(J.SSO_SILENT_START,$.Silent,r);let c;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),c=this.acquireTokenNative(r,ge.ssoSilent).catch(h=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:h.name,brokerErrorCode:h.errorCode}),h instanceof En&&ja(h))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw h})):c=this.createSilentIframeClient(r.correlationId).acquireToken(r),c.then(h=>(this.eventHandler.emitEvent(J.SSO_SILENT_SUCCESS,$.Silent,h),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.eventHandler.emitEvent(J.SSO_SILENT_FAILURE,$.Silent,null,h),this.ssoSilentMeasurement?.end({success:!1},h,n.account),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("acquireTokenByCode called",a);const r=this.performanceClient.startMeasurement(T.AcquireTokenByCode,a);zs(this.initialized,r),this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_START,$.Silent,n),r.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw G(iT);if(n.code){const c=n.code;let h=this.hybridAuthCodeResponses.get(c);return h?(this.logger.verbose("Existing acquireTokenByCode request found",a),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",a),h=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(d=>(this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_SUCCESS,$.Silent,d),this.hybridAuthCodeResponses.delete(c),r.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),d)).catch(d=>{throw this.hybridAuthCodeResponses.delete(c),this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_FAILURE,$.Silent,null,d),r.end({success:!1},d),d}),this.hybridAuthCodeResponses.set(c,h)),await h}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const c=await this.acquireTokenNative({...n,correlationId:a},ge.acquireTokenByCode,n.nativeAccountId).catch(h=>{throw h instanceof En&&ja(h)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:h.name,brokerErrorCode:h.errorCode}),h});return r.end({success:!0},void 0,c.account),c}else throw G(aT);else throw G(nT)}catch(c){throw this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_FAILURE,$.Silent,null,c),r.end({success:!1},c),c}}async acquireTokenByCodeAsync(n){return this.logger.trace("acquireTokenByCodeAsync called",n.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(T.AcquireTokenByCodeAsync,n.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(n.correlationId).acquireToken(n).then(c=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:c.fromCache}),c)).catch(c=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},c),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(this.performanceClient.addQueueMeasurement(T.AcquireTokenFromCache,n.correlationId),a){case At.Default:case At.AccessToken:case At.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(n.correlationId);return O(r.acquireToken.bind(r),T.SilentCacheClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw z(wi)}}async acquireTokenByRefreshToken(n,a){switch(this.performanceClient.addQueueMeasurement(T.AcquireTokenByRefreshToken,n.correlationId),a){case At.Default:case At.AccessTokenAndRefreshToken:case At.RefreshToken:case At.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(n.correlationId);return O(r.acquireToken.bind(r),T.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw z(wi)}}async acquireTokenBySilentIframe(n){this.performanceClient.addQueueMeasurement(T.AcquireTokenBySilentIframe,n.correlationId);const a=this.createSilentIframeClient(n.correlationId);return O(a.acquireToken.bind(a),T.SilentIframeClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n)}async logout(n){const a=this.getRequestCorrelationId(n);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",a),this.logoutRedirect({correlationId:a,...n})}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return gy(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Si.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return yd(this.initialized),this.browserStorage.setInteractionInProgress(!0,Si.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){const a=this.getRequestCorrelationId();return yb(this.logger,this.browserStorage,this.isBrowserEnvironment,a,n)}getAccount(n){const a=this.getRequestCorrelationId();return Cb(n,this.logger,this.browserStorage,a)}getAccountByUsername(n){const a=this.getRequestCorrelationId();return Tb(n,this.logger,this.browserStorage,a)}getAccountByHomeId(n){const a=this.getRequestCorrelationId();return vb(n,this.logger,this.browserStorage,a)}getAccountByLocalId(n){const a=this.getRequestCorrelationId();return Ab(n,this.logger,this.browserStorage,a)}setActiveAccount(n){const a=this.getRequestCorrelationId();Sb(n,this.browserStorage,a)}getActiveAccount(){const n=this.getRequestCorrelationId();return Eb(this.browserStorage,n)}async hydrateCache(n,a){this.logger.verbose("hydrateCache called");const r=Ke.createFromAccountInfo(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(r,n.correlationId,bn(n.idTokenClaims),ge.hydrateCache),n.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,r,c){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw G(sd);return new Gs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(n),this.nativeInternalStorage,n.correlationId).acquireToken(n,c)}canUsePlatformBroker(n,a){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!ur(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(n.prompt)switch(n.prompt){case ht.NONE:case ht.CONSENT:case ht.LOGIN:case ht.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${n.prompt} is not compatible with platform broker flow, returning false`),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new qb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createRedirectClient(n){return new Yb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentIframeClient(n){return new $b(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ge.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentCacheClient(n){return new NT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentRefreshClient(n){return new Wb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentAuthCodeClient(n){return new nw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ge.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,n)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return ST(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==dt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==dt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?yn():H.EMPTY_STRING}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginRedirect called",a),this.acquireTokenRedirect({correlationId:a,...n||ly})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginPopup called",a),this.acquireTokenPopup({correlationId:a,...n||ly})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(T.AcquireTokenSilent,a);r.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),zs(this.initialized,r,n.account),this.logger.verbose("acquireTokenSilent called",a);const c=n.account||this.getActiveAccount();if(!c)throw G(XC);return this.acquireTokenSilentDeduped(n,c,a).then(h=>(r.end({success:!0,fromCache:h.fromCache,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),{...h,state:n.state,correlationId:a})).catch(h=>{throw h instanceof Ne&&h.setCorrelationId(a),r.end({success:!1},h,c),h})}async acquireTokenSilentDeduped(n,a,r){const c=yc(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),h=JSON.stringify(c),d=this.activeSilentTokenRequests.get(h);if(typeof d>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const g=O(this.acquireTokenSilentAsync.bind(this),T.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...n,correlationId:r},a);return this.activeSilentTokenRequests.set(h,g),g.finally(()=>{this.activeSilentTokenRequests.delete(h)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),d}async acquireTokenSilentAsync(n,a){const r=()=>this.trackPageVisibility(n.correlationId);this.performanceClient.addQueueMeasurement(T.AcquireTokenSilentAsync,n.correlationId),this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_START,$.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",r);const c=await O(wb,T.InitializeSilentRequest,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),h=n.cacheLookupPolicy||At.Default;return this.acquireTokenSilentNoIframe(c,h).catch(async g=>{if(aw(g,h))if(this.activeIframeRequest)if(h!==At.Skip){const[y,S]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${S}`,c.correlationId);const _=this.performanceClient.startMeasurement(T.AwaitConcurrentIframe,c.correlationId);_.add({awaitIframeCorrelationId:S});const k=await y;if(_.end({success:k}),k)return this.logger.verbose(`Parallel iframe request with correlationId: ${S} succeeded. Retrying cache and/or RT redemption`,c.correlationId),this.acquireTokenSilentNoIframe(c,h);throw this.logger.info(`Iframe request with correlationId: ${S} failed. Interaction is required.`),g}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",c.correlationId),O(this.acquireTokenBySilentIframe.bind(this),T.AcquireTokenBySilentIframe,this.logger,this.performanceClient,c.correlationId)(c);else{let y;return this.activeIframeRequest=[new Promise(S=>{y=S}),c.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",c.correlationId),O(this.acquireTokenBySilentIframe.bind(this),T.AcquireTokenBySilentIframe,this.logger,this.performanceClient,c.correlationId)(c).then(S=>(y(!0),S)).catch(S=>{throw y(!1),S}).finally(()=>{this.activeIframeRequest=void 0})}else throw g}).then(g=>(this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_SUCCESS,$.Silent,g),this.performanceClient.addFields({fromCache:g.fromCache},n.correlationId),g)).catch(g=>{throw this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,$.Silent,null,g),g}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(n,a){return ur(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},n.correlationId),this.acquireTokenNative(n,ge.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},n.correlationId),r instanceof En&&ja(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,z(wi)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),a===At.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),O(this.acquireTokenFromCache.bind(this),T.AcquireTokenFromCache,this.logger,this.performanceClient,n.correlationId)(n,a).catch(r=>{if(a===At.AccessToken)throw r;return this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_NETWORK_START,$.Silent,n),O(this.acquireTokenByRefreshToken.bind(this),T.AcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await O(na,T.GeneratePkceCodes,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${a?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n){const a=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(a),iw(a,n,this.logger)}}function aw(u,n){const a=!(u instanceof Xt&&u.subError!==Tc),r=u.errorCode===Nt.INVALID_GRANT_ERROR||u.errorCode===wi,c=a&&r||u.errorCode===tc||u.errorCode===Jh,h=H_.includes(n);return c&&h}async function ow(u,n){const a=new ta(u);return await a.initialize(),wc.createController(a,n)}class wd{static async createPublicClientApplication(n){const a=await ow(n);return new wd(n,a)}constructor(n,a){this.isBroker=!1,this.controller=a||new wc(new ta(n))}async initialize(n){return this.controller.initialize(n,this.isBroker)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(n){return this.controller.getAccount(n)}getAccountByHomeId(n){return this.controller.getAccountByHomeId(n)}getAccountByLocalId(n){return this.controller.getAccountByLocalId(n)}getAccountByUsername(n){return this.controller.getAccountByUsername(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logout(n){return this.controller.logout(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const rw="81dcae7c-55a9-4e4e-86e1-e364b25fc990",sw="https://login.microsoftonline.com/common",cw="https://localhost:8443/",_i=["User.Read","Mail.Read"],_t=new wd({auth:{clientId:rw,authority:sw,redirectUri:cw},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}});let nh=null;function dr(){return nh||(nh=_t.initialize()),nh}async function lw(){await dr();const u=_t.getAllAccounts();if(!u.length){const a=await _t.loginPopup({scopes:_i});return(await _t.acquireTokenSilent({account:a.account,scopes:_i})).accessToken}const n=u[0];try{return(await _t.acquireTokenSilent({account:n,scopes:_i})).accessToken}catch(a){if(a instanceof Xt)return(await _t.acquireTokenPopup({account:n,scopes:_i})).accessToken;throw a}}async function uw(){await dr();const u=_t.getAllAccounts();if(!u.length)return null;try{return(await _t.acquireTokenSilent({account:u[0],scopes:_i})).accessToken}catch(n){if(n instanceof Xt)return null;throw n}}async function ih(){await dr();const u=_t.getAllAccounts();if(!u.length)return null;const n=u[0];return{username:n.username,name:n.name}}async function hw(){await dr();const u=_t.getAllAccounts();u.length&&await _t.logoutPopup({account:u[0]})}async function dw(){await dr();const u=_t.getAllAccounts();if(!u.length){const a=await _t.loginPopup({scopes:_i,prompt:"select_account"});return(await _t.acquireTokenSilent({account:a.account,scopes:_i})).accessToken}return(await _t.acquireTokenPopup({account:u[0],scopes:_i,prompt:"select_account"})).accessToken}const fw="",gw=fw.replace(/\/+$/,"");async function fr(u,n,a={}){const r=`${gw}${u}`,c=await fetch(r,{...a,headers:{...a.headers||{},Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!c.ok){const h=await c.text();throw new Error(`backend ${c.status}: ${h}`)}return c.json()}function mw(u){return fr("/graph/folders",u)}function pw(u,n,a=25){const r=new URLSearchParams({folder_id:n,top:String(a)}).toString();return fr(`/graph/messages?${r}`,u)}function yw(u,n,a,r){return fr("/ingest",u,{method:"POST",body:JSON.stringify({passphrase:n,folder_id:a,message_ids:r})})}function Cw(u,n,a,r=4){return fr("/query",u,{method:"POST",body:JSON.stringify({question:n,passphrase:a,n_results:r})})}function Tw(u){return fr("/clear",u,{method:"POST",body:JSON.stringify({})})}function vw(u,n){return u?u.length<=n?u:u.slice(0,n)+"":""}function Aw(){const[u,n]=$e.useState("checking session..."),[a,r]=$e.useState(""),[c,h]=$e.useState(!1),[d,g]=$e.useState(""),[m,y]=$e.useState(""),[S,_]=$e.useState(""),k=S.length>=8,[B,W]=$e.useState([]),[F,Ae]=$e.useState(""),[Re,le]=$e.useState([]),[de,Le]=$e.useState(new Set),Ge=de.size,[Ye,ie]=$e.useState(!1),[nt,Tt]=$e.useState(!1),[wn,Ht]=$e.useState(""),[ft,Jt]=$e.useState(""),[Zt,gt]=$e.useState([]),[N,x]=$e.useState("");async function X(P){x("loading folders...");const me=await mw(P);W(me.folders||[]),x("")}async function Se(){r(""),n("checking session...");try{const P=await uw();if(!P){h(!1),g(""),y(""),n("not signed in");return}h(!0),g(P);const me=await ih();y(me?.username||me?.name||""),n("signed in"),await X(P),n("ready")}catch(P){h(!1),g(""),y(""),n("error"),r(String(P?.message||P))}}async function Ee(){r(""),x("signing in...");try{const P=await lw();h(!0),g(P);const me=await ih();y(me?.username||me?.name||""),n("signed in"),await X(P),n("ready")}catch(P){h(!1),g(""),y(""),n("error"),r(String(P?.message||P))}finally{x("")}}async function A(){r(""),x("switching account...");try{const P=await dw();h(!0),g(P);const me=await ih();y(me?.username||me?.name||""),n("signed in"),await X(P),n("ready")}catch(P){h(!1),g(""),y(""),n("error"),r(String(P?.message||P))}finally{x("")}}async function L(){r(""),x("signing out...");try{await hw(),h(!1),g(""),y(""),W([]),Ae(""),le([]),Le(new Set),ie(!1),Tt(!1),Ht(""),Jt(""),gt([]),n("not signed in")}catch(P){n("error"),r(String(P?.message||P))}finally{x("")}}$e.useEffect(()=>{Se().catch(()=>{})},[]);async function K(P){if(Ae(P),le([]),Le(new Set),ie(!1),Tt(!1),!!P&&!(!c||!d)){x("loading messages...");try{const me=await pw(d,P,25);le(me.value||[])}catch(me){r(String(me?.message||me))}finally{x("")}}}function j(P){Le(me=>{const un=new Set(me);return un.has(P)?un.delete(P):un.add(P),un})}const ee=$e.useMemo(()=>["You are about to store selected email content locally on this device.","The application encrypts the stored email text at rest using a passphrase you provide.","Embeddings (numeric vectors) are stored locally for semantic search.","No email content is uploaded to a remote server by this tool.","You can clear the local index at any time."].join(" "),[]);async function re(){if(!c||!d){alert("Please sign in first.");return}if(!k){alert("Passphrase must be at least 8 characters.");return}if(!F){alert("Select a folder first.");return}if(!de.size){alert("Select at least one email.");return}x("ingesting (encrypting + indexing locally)..."),r("");try{await yw(d,S,F,Array.from(de)),Jt("Ingestion complete. You can now ask questions."),gt([]),ie(!1),Tt(!1)}catch(P){r(String(P?.message||P))}finally{x("")}}async function pe(){if(!c||!d){alert("Please sign in first.");return}if(!k){alert("Passphrase must be at least 8 characters.");return}const P=wn.trim();if(P){x("querying local index..."),r("");try{const me=await Cw(d,P,S,4);Jt(me.answer||""),gt(me.sources||[])}catch(me){r(String(me?.message||me))}finally{x("")}}}async function it(){if(!c||!d){alert("Please sign in first.");return}x("clearing local index..."),r("");try{await Tw(d),Jt("Local index cleared."),gt([])}catch(P){r(String(P?.message||P))}finally{x("")}}return Y.jsxs("div",{style:{fontFamily:"Segoe UI, Arial",padding:12,lineHeight:1.35},children:[Y.jsx("h2",{style:{marginTop:0},children:"Outlook Privacy Assistant"}),Y.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:10},children:[Y.jsx("strong",{children:"Status:"})," ",u," ",N?` ${N}`:"",c&&m?Y.jsxs("span",{children:["  ",Y.jsx("strong",{children:"Signed in:"})," ",m]}):null]}),Y.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:c?Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{onClick:()=>A(),children:"Switch account"}),Y.jsx("button",{onClick:()=>L(),children:"Sign out"})]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{onClick:()=>Ee(),children:"Sign in"}),Y.jsx("button",{onClick:()=>A(),children:"Switch account"})]})}),a&&Y.jsx("pre",{style:{whiteSpace:"pre-wrap",border:"1px solid #ccc",padding:8,marginTop:10},children:a}),Y.jsx("hr",{}),Y.jsx("h3",{children:"Local encryption passphrase"}),Y.jsx("input",{type:"password",value:S,onChange:P=>_(P.target.value),placeholder:"min 8 characters",style:{width:"100%"}}),Y.jsx("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:"Required to encrypt/decrypt your local email index."}),Y.jsx("hr",{}),Y.jsx("h3",{children:"Ingest emails"}),Y.jsxs("div",{style:{marginBottom:6},children:[Y.jsx("label",{style:{display:"block",fontSize:12,opacity:.85},children:"Select folder"}),Y.jsxs("select",{style:{width:"100%"},value:F,onChange:P=>K(P.target.value),disabled:!c,children:[Y.jsx("option",{value:"",children:"Select"}),B.map(P=>Y.jsxs("option",{value:P.id,children:[P.displayName," ",typeof P.totalItemCount=="number"?`(${P.totalItemCount})`:""]},P.id))]})]}),Y.jsx("div",{style:{fontSize:12,opacity:.8},children:"Select individual emails to ingest. The selected emails will be encrypted and stored locally."}),Y.jsx("div",{style:{maxHeight:220,overflow:"auto",border:"1px solid #ddd",marginTop:8,padding:6},children:Re.length?Re.map(P=>{const me=P.from?.emailAddress?.address||"",un=de.has(P.id);return Y.jsxs("label",{style:{display:"block",padding:"6px 4px",borderBottom:"1px solid #eee"},children:[Y.jsx("input",{type:"checkbox",checked:un,onChange:()=>j(P.id)})," ",Y.jsx("strong",{children:P.subject||"(no subject)"}),Y.jsxs("div",{style:{fontSize:12,opacity:.85},children:[me,"  ",P.receivedDateTime||""]}),Y.jsx("div",{style:{fontSize:12},children:vw(P.bodyPreview||"",180)})]},P.id)}):Y.jsx("div",{style:{fontSize:12,opacity:.8,padding:6},children:F?"No messages loaded yet (or folder is empty).":"Select a folder to view messages."})}),Y.jsxs("button",{style:{marginTop:10},disabled:!c||!F||Ge===0,onClick:()=>ie(!0),children:["ingest selected (",Ge,")"]}),Ye&&Y.jsxs("div",{style:{border:"1px solid #c00",padding:10,marginTop:10,background:"#fff5f5"},children:[Y.jsx("strong",{children:"Consent required"}),Y.jsx("p",{style:{marginTop:8,fontSize:12},children:ee}),Y.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:12},children:[Y.jsx("input",{type:"checkbox",checked:nt,onChange:P=>Tt(P.target.checked)})," ","I understand and consent to local encrypted storage."]}),Y.jsx("button",{disabled:!nt||!k,onClick:()=>re(),children:"confirm ingestion"})," ",Y.jsx("button",{onClick:()=>ie(!1),children:"cancel"}),!k&&Y.jsx("div",{style:{marginTop:8,fontSize:12,color:"#900"},children:"Passphrase must be at least 8 characters before ingestion."})]}),Y.jsx("hr",{}),Y.jsx("h3",{children:"Ask a question"}),Y.jsx("textarea",{value:wn,onChange:P=>Ht(P.target.value),rows:3,style:{width:"100%"},placeholder:"Ask a question about your indexed emails..."}),Y.jsxs("div",{style:{marginTop:8},children:[Y.jsx("button",{onClick:()=>pe(),disabled:!c||!k,children:"ask"})," ",Y.jsx("button",{onClick:()=>it(),disabled:!c,children:"clear local index"})]}),Y.jsx("h3",{style:{marginTop:14},children:"Answer"}),Y.jsx("div",{style:{whiteSpace:"pre-wrap",border:"1px solid #ddd",padding:8,minHeight:70},children:ft||"No answer yet."}),Y.jsx("h3",{style:{marginTop:14},children:"Citations"}),Zt.length?Zt.map((P,me)=>Y.jsxs("div",{style:{border:"1px solid #eee",padding:8,marginBottom:8},children:[Y.jsx("div",{children:Y.jsxs("strong",{children:["[",me+1,"] ",P.subject||"(no subject)"]})}),Y.jsxs("div",{style:{fontSize:12,opacity:.8},children:[P.sender,"  ",P.received_dt," ",typeof P.score=="number"?` score: ${P.score.toFixed(4)}`:""]}),Y.jsx("div",{style:{fontSize:12,marginTop:6},children:P.snippet}),Y.jsx("button",{style:{marginTop:6},onClick:()=>window.open(P.weblink,"_blank","noopener,noreferrer"),children:"open email"})]},P.message_id)):Y.jsx("div",{style:{fontSize:12,opacity:.8},children:"No citations."})]})}mS.createRoot(document.getElementById("root")).render(Y.jsx(sS.StrictMode,{children:Y.jsx(Aw,{})}));
