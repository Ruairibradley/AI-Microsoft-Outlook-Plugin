(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(c){if(c.ep)return;c.ep=!0;const h=a(c);fetch(c.href,h)}})();function Iy(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var ju={exports:{}},Vo={};var Op;function cS(){if(Op)return Vo;Op=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(r,c,h){var d=null;if(h!==void 0&&(d=""+h),c.key!==void 0&&(d=""+c.key),"key"in c){h={};for(var g in c)g!=="key"&&(h[g]=c[g])}else h=c;return c=h.ref,{$$typeof:u,type:r,key:d,ref:c!==void 0?c:null,props:h}}return Vo.Fragment=n,Vo.jsx=a,Vo.jsxs=a,Vo}var Mp;function lS(){return Mp||(Mp=1,ju.exports=cS()),ju.exports}var Z=lS(),Yu={exports:{}},te={};var Np;function uS(){if(Np)return te;Np=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),k=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=k&&A[k]||A["@@iterator"],typeof A=="function"?A:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,ge={};function Ae(A,L,K){this.props=A,this.context=L,this.refs=ge,this.updater=K||ee}Ae.prototype.isReactComponent={},Ae.prototype.setState=function(A,L){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,L,"setState")},Ae.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function he(){}he.prototype=Ae.prototype;function me(A,L,K){this.props=A,this.context=L,this.refs=ge,this.updater=K||ee}var Ne=me.prototype=new he;Ne.constructor=me,F(Ne,Ae.prototype),Ne.isPureReactComponent=!0;var Ge=Array.isArray;function Pe(){}var oe={H:null,A:null,T:null,S:null},it=Object.prototype.hasOwnProperty;function Ft(A,L,K){var j=K.ref;return{$$typeof:u,type:A,key:L,ref:j!==void 0?j:null,props:K}}function cn(A,L){return Ft(A.type,L,A.props)}function Dt(A){return typeof A=="object"&&A!==null&&A.$$typeof===u}function Ze(A){var L={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(K){return L[K]})}var pn=/\/+/g;function He(A,L){return typeof A=="object"&&A!==null&&A.key!=null?Ze(""+A.key):L.toString(36)}function St(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Pe,Pe):(A.status="pending",A.then(function(L){A.status==="pending"&&(A.status="fulfilled",A.value=L)},function(L){A.status==="pending"&&(A.status="rejected",A.reason=L)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function N(A,L,K,j,z){var Y=typeof A;(Y==="undefined"||Y==="boolean")&&(A=null);var re=!1;if(A===null)re=!0;else switch(Y){case"bigint":case"string":case"number":re=!0;break;case"object":switch(A.$$typeof){case u:case n:re=!0;break;case S:return re=A._init,N(re(A._payload),L,K,j,z)}}if(re)return z=z(A),re=j===""?"."+He(A,0):j,Ge(z)?(K="",re!=null&&(K=re.replace(pn,"$&/")+"/"),N(z,L,K,"",function(eo){return eo})):z!=null&&(Dt(z)&&(z=cn(z,K+(z.key==null||A&&A.key===z.key?"":(""+z.key).replace(pn,"$&/")+"/")+re)),L.push(z)),1;re=0;var yt=j===""?".":j+":";if(Ge(A))for(var qe=0;qe<A.length;qe++)j=A[qe],Y=yt+He(j,qe),re+=N(j,L,K,Y,z);else if(qe=x(A),typeof qe=="function")for(A=qe.call(A),qe=0;!(j=A.next()).done;)j=j.value,Y=yt+He(j,qe++),re+=N(j,L,K,Y,z);else if(Y==="object"){if(typeof A.then=="function")return N(St(A),L,K,j,z);throw L=String(A),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return re}function B(A,L,K){if(A==null)return A;var j=[],z=0;return N(A,j,"","",function(Y){return L.call(K,Y,z++)}),j}function $(A){if(A._status===-1){var L=A._result;L=L(),L.then(function(K){(A._status===0||A._status===-1)&&(A._status=1,A._result=K)},function(K){(A._status===0||A._status===-1)&&(A._status=2,A._result=K)}),A._status===-1&&(A._status=0,A._result=L)}if(A._status===1)return A._result.default;throw A._result}var Te=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Se={map:B,forEach:function(A,L,K){B(A,function(){L.apply(this,arguments)},K)},count:function(A){var L=0;return B(A,function(){L++}),L},toArray:function(A){return B(A,function(L){return L})||[]},only:function(A){if(!Dt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return te.Activity=_,te.Children=Se,te.Component=Ae,te.Fragment=a,te.Profiler=c,te.PureComponent=me,te.StrictMode=r,te.Suspense=m,te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,te.__COMPILER_RUNTIME={__proto__:null,c:function(A){return oe.H.useMemoCache(A)}},te.cache=function(A){return function(){return A.apply(null,arguments)}},te.cacheSignal=function(){return null},te.cloneElement=function(A,L,K){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var j=F({},A.props),z=A.key;if(L!=null)for(Y in L.key!==void 0&&(z=""+L.key),L)!it.call(L,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&L.ref===void 0||(j[Y]=L[Y]);var Y=arguments.length-2;if(Y===1)j.children=K;else if(1<Y){for(var re=Array(Y),yt=0;yt<Y;yt++)re[yt]=arguments[yt+2];j.children=re}return Ft(A.type,z,j)},te.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:h,_context:A},A},te.createElement=function(A,L,K){var j,z={},Y=null;if(L!=null)for(j in L.key!==void 0&&(Y=""+L.key),L)it.call(L,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(z[j]=L[j]);var re=arguments.length-2;if(re===1)z.children=K;else if(1<re){for(var yt=Array(re),qe=0;qe<re;qe++)yt[qe]=arguments[qe+2];z.children=yt}if(A&&A.defaultProps)for(j in re=A.defaultProps,re)z[j]===void 0&&(z[j]=re[j]);return Ft(A,Y,z)},te.createRef=function(){return{current:null}},te.forwardRef=function(A){return{$$typeof:g,render:A}},te.isValidElement=Dt,te.lazy=function(A){return{$$typeof:S,_payload:{_status:-1,_result:A},_init:$}},te.memo=function(A,L){return{$$typeof:y,type:A,compare:L===void 0?null:L}},te.startTransition=function(A){var L=oe.T,K={};oe.T=K;try{var j=A(),z=oe.S;z!==null&&z(K,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(Pe,Te)}catch(Y){Te(Y)}finally{L!==null&&K.types!==null&&(L.types=K.types),oe.T=L}},te.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},te.use=function(A){return oe.H.use(A)},te.useActionState=function(A,L,K){return oe.H.useActionState(A,L,K)},te.useCallback=function(A,L){return oe.H.useCallback(A,L)},te.useContext=function(A){return oe.H.useContext(A)},te.useDebugValue=function(){},te.useDeferredValue=function(A,L){return oe.H.useDeferredValue(A,L)},te.useEffect=function(A,L){return oe.H.useEffect(A,L)},te.useEffectEvent=function(A){return oe.H.useEffectEvent(A)},te.useId=function(){return oe.H.useId()},te.useImperativeHandle=function(A,L,K){return oe.H.useImperativeHandle(A,L,K)},te.useInsertionEffect=function(A,L){return oe.H.useInsertionEffect(A,L)},te.useLayoutEffect=function(A,L){return oe.H.useLayoutEffect(A,L)},te.useMemo=function(A,L){return oe.H.useMemo(A,L)},te.useOptimistic=function(A,L){return oe.H.useOptimistic(A,L)},te.useReducer=function(A,L,K){return oe.H.useReducer(A,L,K)},te.useRef=function(A){return oe.H.useRef(A)},te.useState=function(A){return oe.H.useState(A)},te.useSyncExternalStore=function(A,L,K){return oe.H.useSyncExternalStore(A,L,K)},te.useTransition=function(){return oe.H.useTransition()},te.version="19.2.3",te}var Dp;function yh(){return Dp||(Dp=1,Yu.exports=uS()),Yu.exports}var nt=yh();const hS=Iy(nt);var Qu={exports:{}},Xo={},Fu={exports:{}},Vu={};var Up;function dS(){return Up||(Up=1,(function(u){function n(N,B){var $=N.length;N.push(B);e:for(;0<$;){var Te=$-1>>>1,Se=N[Te];if(0<c(Se,B))N[Te]=B,N[$]=Se,$=Te;else break e}}function a(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var B=N[0],$=N.pop();if($!==B){N[0]=$;e:for(var Te=0,Se=N.length,A=Se>>>1;Te<A;){var L=2*(Te+1)-1,K=N[L],j=L+1,z=N[j];if(0>c(K,$))j<Se&&0>c(z,K)?(N[Te]=z,N[j]=$,Te=j):(N[Te]=K,N[L]=$,Te=L);else if(j<Se&&0>c(z,$))N[Te]=z,N[j]=$,Te=j;else break e}}return B}function c(N,B){var $=N.sortIndex-B.sortIndex;return $!==0?$:N.id-B.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;u.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();u.unstable_now=function(){return d.now()-g}}var m=[],y=[],S=1,_=null,k=3,x=!1,ee=!1,F=!1,ge=!1,Ae=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function Ne(N){for(var B=a(y);B!==null;){if(B.callback===null)r(y);else if(B.startTime<=N)r(y),B.sortIndex=B.expirationTime,n(m,B);else break;B=a(y)}}function Ge(N){if(F=!1,Ne(N),!ee)if(a(m)!==null)ee=!0,Pe||(Pe=!0,Ze());else{var B=a(y);B!==null&&St(Ge,B.startTime-N)}}var Pe=!1,oe=-1,it=5,Ft=-1;function cn(){return ge?!0:!(u.unstable_now()-Ft<it)}function Dt(){if(ge=!1,Pe){var N=u.unstable_now();Ft=N;var B=!0;try{e:{ee=!1,F&&(F=!1,he(oe),oe=-1),x=!0;var $=k;try{t:{for(Ne(N),_=a(m);_!==null&&!(_.expirationTime>N&&cn());){var Te=_.callback;if(typeof Te=="function"){_.callback=null,k=_.priorityLevel;var Se=Te(_.expirationTime<=N);if(N=u.unstable_now(),typeof Se=="function"){_.callback=Se,Ne(N),B=!0;break t}_===a(m)&&r(m),Ne(N)}else r(m);_=a(m)}if(_!==null)B=!0;else{var A=a(y);A!==null&&St(Ge,A.startTime-N),B=!1}}break e}finally{_=null,k=$,x=!1}B=void 0}}finally{B?Ze():Pe=!1}}}var Ze;if(typeof me=="function")Ze=function(){me(Dt)};else if(typeof MessageChannel<"u"){var pn=new MessageChannel,He=pn.port2;pn.port1.onmessage=Dt,Ze=function(){He.postMessage(null)}}else Ze=function(){Ae(Dt,0)};function St(N,B){oe=Ae(function(){N(u.unstable_now())},B)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(N){N.callback=null},u.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<N?Math.floor(1e3/N):5},u.unstable_getCurrentPriorityLevel=function(){return k},u.unstable_next=function(N){switch(k){case 1:case 2:case 3:var B=3;break;default:B=k}var $=k;k=B;try{return N()}finally{k=$}},u.unstable_requestPaint=function(){ge=!0},u.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=k;k=N;try{return B()}finally{k=$}},u.unstable_scheduleCallback=function(N,B,$){var Te=u.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Te+$:Te):$=Te,N){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=$+Se,N={id:S++,callback:B,priorityLevel:N,startTime:$,expirationTime:Se,sortIndex:-1},$>Te?(N.sortIndex=$,n(y,N),a(m)===null&&N===a(y)&&(F?(he(oe),oe=-1):F=!0,St(Ge,$-Te))):(N.sortIndex=Se,n(m,N),ee||x||(ee=!0,Pe||(Pe=!0,Ze()))),N},u.unstable_shouldYield=cn,u.unstable_wrapCallback=function(N){var B=k;return function(){var $=k;k=B;try{return N.apply(this,arguments)}finally{k=$}}}})(Vu)),Vu}var Hp;function fS(){return Hp||(Hp=1,Fu.exports=dS()),Fu.exports}var Xu={exports:{}},ft={};var Lp;function gS(){if(Lp)return ft;Lp=1;var u=yh();function n(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(m,y,S){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:_==null?null:""+_,children:m,containerInfo:y,implementation:S}}var d=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ft.createPortal=function(m,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return h(m,y,null,S)},ft.flushSync=function(m){var y=d.T,S=r.p;try{if(d.T=null,r.p=2,m)return m()}finally{d.T=y,r.p=S,r.d.f()}},ft.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(m,y))},ft.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ft.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var S=y.as,_=g(S,y.crossOrigin),k=typeof y.integrity=="string"?y.integrity:void 0,x=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?r.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:k,fetchPriority:x}):S==="script"&&r.d.X(m,{crossOrigin:_,integrity:k,fetchPriority:x,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},ft.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=g(y.as,y.crossOrigin);r.d.M(m,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(m)},ft.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,_=g(S,y.crossOrigin);r.d.L(m,S,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},ft.preloadModule=function(m,y){if(typeof m=="string")if(y){var S=g(y.as,y.crossOrigin);r.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(m)},ft.requestFormReset=function(m){r.d.r(m)},ft.unstable_batchedUpdates=function(m,y){return m(y)},ft.useFormState=function(m,y,S){return d.H.useFormState(m,y,S)},ft.useFormStatus=function(){return d.H.useHostTransitionStatus()},ft.version="19.2.3",ft}var zp;function mS(){if(zp)return Xu.exports;zp=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Xu.exports=gS(),Xu.exports}var Pp;function pS(){if(Pp)return Xo;Pp=1;var u=fS(),n=yh(),a=mS();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(h(e)!==e)throw Error(r(188))}function y(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,o=t;;){var s=i.return;if(s===null)break;var l=s.alternate;if(l===null){if(o=s.return,o!==null){i=o;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===i)return m(s),e;if(l===o)return m(s),t;l=l.sibling}throw Error(r(188))}if(i.return!==o.return)i=s,o=l;else{for(var f=!1,p=s.child;p;){if(p===i){f=!0,i=s,o=l;break}if(p===o){f=!0,o=s,i=l;break}p=p.sibling}if(!f){for(p=l.child;p;){if(p===i){f=!0,i=l,o=s;break}if(p===o){f=!0,o=l,i=s;break}p=p.sibling}if(!f)throw Error(r(189))}}if(i.alternate!==o)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,k=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),me=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Ge=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),Ft=Symbol.for("react.activity"),cn=Symbol.for("react.memo_cache_sentinel"),Dt=Symbol.iterator;function Ze(e){return e===null||typeof e!="object"?null:(e=Dt&&e[Dt]||e["@@iterator"],typeof e=="function"?e:null)}var pn=Symbol.for("react.client.reference");function He(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===pn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Ae:return"Profiler";case ge:return"StrictMode";case Ge:return"Suspense";case Pe:return"SuspenseList";case Ft:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ee:return"Portal";case me:return e.displayName||"Context";case he:return(e._context.displayName||"Context")+".Consumer";case Ne:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return t=e.displayName||null,t!==null?t:He(e.type)||"Memo";case it:t=e._payload,e=e._init;try{return He(e(t))}catch{}}return null}var St=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},Te=[],Se=-1;function A(e){return{current:e}}function L(e){0>Se||(e.current=Te[Se],Te[Se]=null,Se--)}function K(e,t){Se++,Te[Se]=e.current,e.current=t}var j=A(null),z=A(null),Y=A(null),re=A(null);function yt(e,t){switch(K(Y,t),K(z,e),K(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wm(t),e=ep(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(j),K(j,e)}function qe(){L(j),L(z),L(Y)}function eo(e){e.memoizedState!==null&&K(re,e);var t=j.current,i=ep(t,e.type);t!==i&&(K(z,e),K(j,i))}function hr(e){z.current===e&&(L(j),L(z)),re.current===e&&(L(re),jo._currentValue=$)}var wc,Id;function Ii(e){if(wc===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);wc=t&&t[1]||"",Id=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wc+e+Id}var Rc=!1;function Ic(e,t){if(!e||Rc)return"";Rc=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(I){var R=I}Reflect.construct(e,[],U)}else{try{U.call()}catch(I){R=I}e.call(U.prototype)}}else{try{throw Error()}catch(I){R=I}(U=e())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(I){if(I&&R&&typeof I.stack=="string")return[I.stack,R.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=o.DetermineComponentFrameRoot(),f=l[0],p=l[1];if(f&&p){var C=f.split(`
`),w=p.split(`
`);for(s=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;s<w.length&&!w[s].includes("DetermineComponentFrameRoot");)s++;if(o===C.length||s===w.length)for(o=C.length-1,s=w.length-1;1<=o&&0<=s&&C[o]!==w[s];)s--;for(;1<=o&&0<=s;o--,s--)if(C[o]!==w[s]){if(o!==1||s!==1)do if(o--,s--,0>s||C[o]!==w[s]){var M=`
`+C[o].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),M}while(1<=o&&0<=s);break}}}finally{Rc=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ii(i):""}function xv(e,t){switch(e.tag){case 26:case 27:case 5:return Ii(e.type);case 16:return Ii("Lazy");case 13:return e.child!==t&&t!==null?Ii("Suspense Fallback"):Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return Ic(e.type,!1);case 11:return Ic(e.type.render,!1);case 1:return Ic(e.type,!0);case 31:return Ii("Activity");default:return""}}function kd(e){try{var t="",i=null;do t+=xv(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var kc=Object.prototype.hasOwnProperty,Oc=u.unstable_scheduleCallback,Mc=u.unstable_cancelCallback,Bv=u.unstable_shouldYield,Kv=u.unstable_requestPaint,Ut=u.unstable_now,Gv=u.unstable_getCurrentPriorityLevel,Od=u.unstable_ImmediatePriority,Md=u.unstable_UserBlockingPriority,dr=u.unstable_NormalPriority,qv=u.unstable_LowPriority,Nd=u.unstable_IdlePriority,jv=u.log,Yv=u.unstable_setDisableYieldValue,to=null,Ht=null;function Fn(e){if(typeof jv=="function"&&Yv(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(to,e)}catch{}}var Lt=Math.clz32?Math.clz32:Vv,Qv=Math.log,Fv=Math.LN2;function Vv(e){return e>>>=0,e===0?32:31-(Qv(e)/Fv|0)|0}var fr=256,gr=262144,mr=4194304;function ki(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pr(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var s=0,l=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var p=o&134217727;return p!==0?(o=p&~l,o!==0?s=ki(o):(f&=p,f!==0?s=ki(f):i||(i=p&~e,i!==0&&(s=ki(i))))):(p=o&~l,p!==0?s=ki(p):f!==0?s=ki(f):i||(i=o&~e,i!==0&&(s=ki(i)))),s===0?0:t!==0&&t!==s&&(t&l)===0&&(l=s&-s,i=t&-t,l>=i||l===32&&(i&4194048)!==0)?t:s}function no(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xv(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dd(){var e=mr;return mr<<=1,(mr&62914560)===0&&(mr=4194304),e}function Nc(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function io(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jv(e,t,i,o,s,l){var f=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var p=e.entanglements,C=e.expirationTimes,w=e.hiddenUpdates;for(i=f&~i;0<i;){var M=31-Lt(i),U=1<<M;p[M]=0,C[M]=-1;var R=w[M];if(R!==null)for(w[M]=null,M=0;M<R.length;M++){var I=R[M];I!==null&&(I.lane&=-536870913)}i&=~U}o!==0&&Ud(e,o,0),l!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=l&~(f&~t))}function Ud(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-Lt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Hd(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-Lt(i),s=1<<o;s&t|e[o]&t&&(e[o]|=t),i&=~s}}function Ld(e,t){var i=t&-t;return i=(i&42)!==0?1:Dc(i),(i&(e.suspendedLanes|t))!==0?0:i}function Dc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Uc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function zd(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:Ep(e.type))}function Pd(e,t){var i=B.p;try{return B.p=e,t()}finally{B.p=i}}var Vn=Math.random().toString(36).slice(2),at="__reactFiber$"+Vn,Et="__reactProps$"+Vn,ta="__reactContainer$"+Vn,Hc="__reactEvents$"+Vn,Zv="__reactListeners$"+Vn,$v="__reactHandles$"+Vn,xd="__reactResources$"+Vn,ao="__reactMarker$"+Vn;function Lc(e){delete e[at],delete e[Et],delete e[Hc],delete e[Zv],delete e[$v]}function na(e){var t=e[at];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ta]||i[at]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=sp(e);e!==null;){if(i=e[at])return i;e=sp(e)}return t}e=i,i=e.parentNode}return null}function ia(e){if(e=e[at]||e[ta]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function oo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function aa(e){var t=e[xd];return t||(t=e[xd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[ao]=!0}var Bd=new Set,Kd={};function Oi(e,t){oa(e,t),oa(e+"Capture",t)}function oa(e,t){for(Kd[e]=t,e=0;e<t.length;e++)Bd.add(t[e])}var Wv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gd={},qd={};function eT(e){return kc.call(qd,e)?!0:kc.call(Gd,e)?!1:Wv.test(e)?qd[e]=!0:(Gd[e]=!0,!1)}function yr(e,t,i){if(eT(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Cr(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function bn(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tT(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var s=o.get,l=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zc(e){if(!e._valueTracker){var t=jd(e)?"checked":"value";e._valueTracker=tT(e,t,""+e[t])}}function Yd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=jd(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nT=/[\n"\\]/g;function Xt(e){return e.replace(nT,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Pc(e,t,i,o,s,l,f,p){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?xc(e,f,Vt(t)):i!=null?xc(e,f,Vt(i)):o!=null&&e.removeAttribute("value"),s==null&&l!=null&&(e.defaultChecked=!!l),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+Vt(p):e.removeAttribute("name")}function Qd(e,t,i,o,s,l,f,p){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||i!=null){if(!(l!=="submit"&&l!=="reset"||t!=null)){zc(e);return}i=i!=null?""+Vt(i):"",t=t!=null?""+Vt(t):i,p||t===e.value||(e.value=t),e.defaultValue=t}o=o??s,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=p?e.checked:!!o,e.defaultChecked=!!o,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),zc(e)}function xc(e,t,i){t==="number"&&vr(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ra(e,t,i,o){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Vt(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,o&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Fd(e,t,i){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Vt(i):""}function Vd(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(r(92));if(St(o)){if(1<o.length)throw Error(r(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=Vt(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),zc(e)}function sa(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var iT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xd(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||iT.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Jd(e,t,i){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var s in t)o=t[s],t.hasOwnProperty(s)&&i[s]!==o&&Xd(e,s,o)}else for(var l in t)t.hasOwnProperty(l)&&Xd(e,l,t[l])}function Bc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tr(e){return oT.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wn(){}var Kc=null;function Gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ca=null,la=null;function Zd(e){var t=ia(e);if(t&&(e=t.stateNode)){var i=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(Pc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Xt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var s=o[Et]||null;if(!s)throw Error(r(90));Pc(o,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&Yd(o)}break e;case"textarea":Fd(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ra(e,!!i.multiple,t,!1)}}}var qc=!1;function $d(e,t,i){if(qc)return e(t,i);qc=!0;try{var o=e(t);return o}finally{if(qc=!1,(ca!==null||la!==null)&&(ss(),ca&&(t=ca,e=la,la=ca=null,Zd(t),e)))for(t=0;t<e.length;t++)Zd(e[t])}}function ro(e,t){var i=e.stateNode;if(i===null)return null;var o=i[Et]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=!1;if(Rn)try{var so={};Object.defineProperty(so,"passive",{get:function(){jc=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{jc=!1}var Xn=null,Yc=null,Ar=null;function Wd(){if(Ar)return Ar;var e,t=Yc,i=t.length,o,s="value"in Xn?Xn.value:Xn.textContent,l=s.length;for(e=0;e<i&&t[e]===s[e];e++);var f=i-e;for(o=1;o<=f&&t[i-o]===s[l-o];o++);return Ar=s.slice(e,1<o?1-o:void 0)}function Sr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Er(){return!0}function ef(){return!1}function _t(e){function t(i,o,s,l,f){this._reactName=i,this._targetInst=s,this.type=o,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Er:ef,this.isPropagationStopped=ef,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),t}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_r=_t(Mi),co=_({},Mi,{view:0,detail:0}),rT=_t(co),Qc,Fc,lo,br=_({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lo&&(lo&&e.type==="mousemove"?(Qc=e.screenX-lo.screenX,Fc=e.screenY-lo.screenY):Fc=Qc=0,lo=e),Qc)},movementY:function(e){return"movementY"in e?e.movementY:Fc}}),tf=_t(br),sT=_({},br,{dataTransfer:0}),cT=_t(sT),lT=_({},co,{relatedTarget:0}),Vc=_t(lT),uT=_({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),hT=_t(uT),dT=_({},Mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fT=_t(dT),gT=_({},Mi,{data:0}),nf=_t(gT),mT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yT[e])?!!t[e]:!1}function Xc(){return CT}var vT=_({},co,{key:function(e){if(e.key){var t=mT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(e){return e.type==="keypress"?Sr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),TT=_t(vT),AT=_({},br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),af=_t(AT),ST=_({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),ET=_t(ST),_T=_({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bT=_t(_T),wT=_({},br,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),RT=_t(wT),IT=_({},Mi,{newState:0,oldState:0}),kT=_t(IT),OT=[9,13,27,32],Jc=Rn&&"CompositionEvent"in window,uo=null;Rn&&"documentMode"in document&&(uo=document.documentMode);var MT=Rn&&"TextEvent"in window&&!uo,of=Rn&&(!Jc||uo&&8<uo&&11>=uo),rf=" ",sf=!1;function cf(e,t){switch(e){case"keyup":return OT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ua=!1;function NT(e,t){switch(e){case"compositionend":return lf(t);case"keypress":return t.which!==32?null:(sf=!0,rf);case"textInput":return e=t.data,e===rf&&sf?null:e;default:return null}}function DT(e,t){if(ua)return e==="compositionend"||!Jc&&cf(e,t)?(e=Wd(),Ar=Yc=Xn=null,ua=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return of&&t.locale!=="ko"?null:t.data;default:return null}}var UT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UT[e.type]:t==="textarea"}function hf(e,t,i,o){ca?la?la.push(o):la=[o]:ca=o,t=gs(t,"onChange"),0<t.length&&(i=new _r("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var ho=null,fo=null;function HT(e){Fm(e,0)}function wr(e){var t=oo(e);if(Yd(t))return e}function df(e,t){if(e==="change")return t}var ff=!1;if(Rn){var Zc;if(Rn){var $c="oninput"in document;if(!$c){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),$c=typeof gf.oninput=="function"}Zc=$c}else Zc=!1;ff=Zc&&(!document.documentMode||9<document.documentMode)}function mf(){ho&&(ho.detachEvent("onpropertychange",pf),fo=ho=null)}function pf(e){if(e.propertyName==="value"&&wr(fo)){var t=[];hf(t,fo,e,Gc(e)),$d(HT,t)}}function LT(e,t,i){e==="focusin"?(mf(),ho=t,fo=i,ho.attachEvent("onpropertychange",pf)):e==="focusout"&&mf()}function zT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wr(fo)}function PT(e,t){if(e==="click")return wr(t)}function xT(e,t){if(e==="input"||e==="change")return wr(t)}function BT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:BT;function go(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var s=i[o];if(!kc.call(t,s)||!zt(e[s],t[s]))return!1}return!0}function yf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cf(e,t){var i=yf(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yf(i)}}function vf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=vr(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=vr(e.document)}return t}function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var KT=Rn&&"documentMode"in document&&11>=document.documentMode,ha=null,el=null,mo=null,tl=!1;function Af(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;tl||ha==null||ha!==vr(o)||(o=ha,"selectionStart"in o&&Wc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),mo&&go(mo,o)||(mo=o,o=gs(el,"onSelect"),0<o.length&&(t=new _r("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=ha)))}function Ni(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var da={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionrun:Ni("Transition","TransitionRun"),transitionstart:Ni("Transition","TransitionStart"),transitioncancel:Ni("Transition","TransitionCancel"),transitionend:Ni("Transition","TransitionEnd")},nl={},Sf={};Rn&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Di(e){if(nl[e])return nl[e];if(!da[e])return e;var t=da[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Sf)return nl[e]=t[i];return e}var Ef=Di("animationend"),_f=Di("animationiteration"),bf=Di("animationstart"),GT=Di("transitionrun"),qT=Di("transitionstart"),jT=Di("transitioncancel"),wf=Di("transitionend"),Rf=new Map,il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");il.push("scrollEnd");function ln(e,t){Rf.set(e,t),Oi(t,[e])}var Rr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Jt=[],fa=0,al=0;function Ir(){for(var e=fa,t=al=fa=0;t<e;){var i=Jt[t];Jt[t++]=null;var o=Jt[t];Jt[t++]=null;var s=Jt[t];Jt[t++]=null;var l=Jt[t];if(Jt[t++]=null,o!==null&&s!==null){var f=o.pending;f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s}l!==0&&If(i,s,l)}}function kr(e,t,i,o){Jt[fa++]=e,Jt[fa++]=t,Jt[fa++]=i,Jt[fa++]=o,al|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function ol(e,t,i,o){return kr(e,t,i,o),Or(e)}function Ui(e,t){return kr(e,null,null,t),Or(e)}function If(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var s=!1,l=e.return;l!==null;)l.childLanes|=i,o=l.alternate,o!==null&&(o.childLanes|=i),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(s=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,s&&t!==null&&(s=31-Lt(i),e=l.hiddenUpdates,o=e[s],o===null?e[s]=[t]:o.push(t),t.lane=i|536870912),l):null}function Or(e){if(50<zo)throw zo=0,gu=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ga={};function YT(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,i,o){return new YT(e,t,i,o)}function rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function In(e,t){var i=e.alternate;return i===null?(i=Pt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function kf(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Mr(e,t,i,o,s,l){var f=0;if(o=e,typeof e=="function")rl(e)&&(f=1);else if(typeof e=="string")f=JA(e,i,j.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ft:return e=Pt(31,i,t,s),e.elementType=Ft,e.lanes=l,e;case F:return Hi(i.children,s,l,t);case ge:f=8,s|=24;break;case Ae:return e=Pt(12,i,t,s|2),e.elementType=Ae,e.lanes=l,e;case Ge:return e=Pt(13,i,t,s),e.elementType=Ge,e.lanes=l,e;case Pe:return e=Pt(19,i,t,s),e.elementType=Pe,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case me:f=10;break e;case he:f=9;break e;case Ne:f=11;break e;case oe:f=14;break e;case it:f=16,o=null;break e}f=29,i=Error(r(130,e===null?"null":typeof e,"")),o=null}return t=Pt(f,i,t,s),t.elementType=e,t.type=o,t.lanes=l,t}function Hi(e,t,i,o){return e=Pt(7,e,o,t),e.lanes=i,e}function sl(e,t,i){return e=Pt(6,e,null,t),e.lanes=i,e}function Of(e){var t=Pt(18,null,null,0);return t.stateNode=e,t}function cl(e,t,i){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Mf=new WeakMap;function Zt(e,t){if(typeof e=="object"&&e!==null){var i=Mf.get(e);return i!==void 0?i:(t={value:e,source:t,stack:kd(t)},Mf.set(e,t),t)}return{value:e,source:t,stack:kd(t)}}var ma=[],pa=0,Nr=null,po=0,$t=[],Wt=0,Jn=null,yn=1,Cn="";function kn(e,t){ma[pa++]=po,ma[pa++]=Nr,Nr=e,po=t}function Nf(e,t,i){$t[Wt++]=yn,$t[Wt++]=Cn,$t[Wt++]=Jn,Jn=e;var o=yn;e=Cn;var s=32-Lt(o)-1;o&=~(1<<s),i+=1;var l=32-Lt(t)+s;if(30<l){var f=s-s%5;l=(o&(1<<f)-1).toString(32),o>>=f,s-=f,yn=1<<32-Lt(t)+s|i<<s|o,Cn=l+e}else yn=1<<l|i<<s|o,Cn=e}function ll(e){e.return!==null&&(kn(e,1),Nf(e,1,0))}function ul(e){for(;e===Nr;)Nr=ma[--pa],ma[pa]=null,po=ma[--pa],ma[pa]=null;for(;e===Jn;)Jn=$t[--Wt],$t[Wt]=null,Cn=$t[--Wt],$t[Wt]=null,yn=$t[--Wt],$t[Wt]=null}function Df(e,t){$t[Wt++]=yn,$t[Wt++]=Cn,$t[Wt++]=Jn,yn=t.id,Cn=t.overflow,Jn=e}var ot=null,De=null,de=!1,Zn=null,en=!1,hl=Error(r(519));function $n(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo(Zt(t,e)),hl}function Uf(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[at]=e,t[Et]=o,i){case"dialog":ce("cancel",t),ce("close",t);break;case"iframe":case"object":case"embed":ce("load",t);break;case"video":case"audio":for(i=0;i<xo.length;i++)ce(xo[i],t);break;case"source":ce("error",t);break;case"img":case"image":case"link":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"input":ce("invalid",t),Qd(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ce("invalid",t);break;case"textarea":ce("invalid",t),Vd(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||Zm(t.textContent,i)?(o.popover!=null&&(ce("beforetoggle",t),ce("toggle",t)),o.onScroll!=null&&ce("scroll",t),o.onScrollEnd!=null&&ce("scrollend",t),o.onClick!=null&&(t.onclick=wn),t=!0):t=!1,t||$n(e,!0)}function Hf(e){for(ot=e.return;ot;)switch(ot.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:ot=ot.return}}function ya(e){if(e!==ot)return!1;if(!de)return Hf(e),de=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||ku(e.type,e.memoizedProps)),i=!i),i&&De&&$n(e),Hf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));De=rp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));De=rp(e)}else t===27?(t=De,di(e.type)?(e=Uu,Uu=null,De=e):De=t):De=ot?nn(e.stateNode.nextSibling):null;return!0}function Li(){De=ot=null,de=!1}function dl(){var e=Zn;return e!==null&&(It===null?It=e:It.push.apply(It,e),Zn=null),e}function yo(e){Zn===null?Zn=[e]:Zn.push(e)}var fl=A(null),zi=null,On=null;function Wn(e,t,i){K(fl,t._currentValue),t._currentValue=i}function Mn(e){e._currentValue=fl.current,L(fl)}function gl(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function ml(e,t,i,o){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){var f=s.child;l=l.firstContext;e:for(;l!==null;){var p=l;l=s;for(var C=0;C<t.length;C++)if(p.context===t[C]){l.lanes|=i,p=l.alternate,p!==null&&(p.lanes|=i),gl(l.return,i,e),o||(f=null);break e}l=p.next}}else if(s.tag===18){if(f=s.return,f===null)throw Error(r(341));f.lanes|=i,l=f.alternate,l!==null&&(l.lanes|=i),gl(f,i,e),f=null}else f=s.child;if(f!==null)f.return=s;else for(f=s;f!==null;){if(f===e){f=null;break}if(s=f.sibling,s!==null){s.return=f.return,f=s;break}f=f.return}s=f}}function Ca(e,t,i,o){e=null;for(var s=t,l=!1;s!==null;){if(!l){if((s.flags&524288)!==0)l=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var f=s.alternate;if(f===null)throw Error(r(387));if(f=f.memoizedProps,f!==null){var p=s.type;zt(s.pendingProps.value,f.value)||(e!==null?e.push(p):e=[p])}}else if(s===re.current){if(f=s.alternate,f===null)throw Error(r(387));f.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(jo):e=[jo])}s=s.return}e!==null&&ml(t,e,i,o),t.flags|=262144}function Dr(e){for(e=e.firstContext;e!==null;){if(!zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){zi=e,On=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return Lf(zi,e)}function Ur(e,t){return zi===null&&Pi(e),Lf(e,t)}function Lf(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},On===null){if(e===null)throw Error(r(308));On=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else On=On.next=t;return i}var QT=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},FT=u.unstable_scheduleCallback,VT=u.unstable_NormalPriority,Qe={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pl(){return{controller:new QT,data:new Map,refCount:0}}function Co(e){e.refCount--,e.refCount===0&&FT(VT,function(){e.controller.abort()})}var vo=null,yl=0,va=0,Ta=null;function XT(e,t){if(vo===null){var i=vo=[];yl=0,va=Tu(),Ta={status:"pending",value:void 0,then:function(o){i.push(o)}}}return yl++,t.then(zf,zf),t}function zf(){if(--yl===0&&vo!==null){Ta!==null&&(Ta.status="fulfilled");var e=vo;vo=null,va=0,Ta=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function JT(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(o.status="rejected",o.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),o}var Pf=N.S;N.S=function(e,t){Am=Ut(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&XT(e,t),Pf!==null&&Pf(e,t)};var xi=A(null);function Cl(){var e=xi.current;return e!==null?e:Me.pooledCache}function Hr(e,t){t===null?K(xi,xi.current):K(xi,t.pool)}function xf(){var e=Cl();return e===null?null:{parent:Qe._currentValue,pool:e}}var Aa=Error(r(460)),vl=Error(r(474)),Lr=Error(r(542)),zr={then:function(){}};function Bf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kf(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(wn,wn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qf(e),e;default:if(typeof t.status=="string")t.then(wn,wn);else{if(e=Me,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=o}},function(o){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qf(e),e}throw Ki=t,Aa}}function Bi(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ki=i,Aa):i}}var Ki=null;function Gf(){if(Ki===null)throw Error(r(459));var e=Ki;return Ki=null,e}function qf(e){if(e===Aa||e===Lr)throw Error(r(483))}var Sa=null,To=0;function Pr(e){var t=To;return To+=1,Sa===null&&(Sa=[]),Kf(Sa,e,t)}function Ao(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xr(e,t){throw t.$$typeof===k?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function jf(e){function t(E,T){if(e){var b=E.deletions;b===null?(E.deletions=[T],E.flags|=16):b.push(T)}}function i(E,T){if(!e)return null;for(;T!==null;)t(E,T),T=T.sibling;return null}function o(E){for(var T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function s(E,T){return E=In(E,T),E.index=0,E.sibling=null,E}function l(E,T,b){return E.index=b,e?(b=E.alternate,b!==null?(b=b.index,b<T?(E.flags|=67108866,T):b):(E.flags|=67108866,T)):(E.flags|=1048576,T)}function f(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function p(E,T,b,D){return T===null||T.tag!==6?(T=sl(b,E.mode,D),T.return=E,T):(T=s(T,b),T.return=E,T)}function C(E,T,b,D){var V=b.type;return V===F?M(E,T,b.props.children,D,b.key):T!==null&&(T.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===it&&Bi(V)===T.type)?(T=s(T,b.props),Ao(T,b),T.return=E,T):(T=Mr(b.type,b.key,b.props,null,E.mode,D),Ao(T,b),T.return=E,T)}function w(E,T,b,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==b.containerInfo||T.stateNode.implementation!==b.implementation?(T=cl(b,E.mode,D),T.return=E,T):(T=s(T,b.children||[]),T.return=E,T)}function M(E,T,b,D,V){return T===null||T.tag!==7?(T=Hi(b,E.mode,D,V),T.return=E,T):(T=s(T,b),T.return=E,T)}function U(E,T,b){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=sl(""+T,E.mode,b),T.return=E,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case x:return b=Mr(T.type,T.key,T.props,null,E.mode,b),Ao(b,T),b.return=E,b;case ee:return T=cl(T,E.mode,b),T.return=E,T;case it:return T=Bi(T),U(E,T,b)}if(St(T)||Ze(T))return T=Hi(T,E.mode,b,null),T.return=E,T;if(typeof T.then=="function")return U(E,Pr(T),b);if(T.$$typeof===me)return U(E,Ur(E,T),b);xr(E,T)}return null}function R(E,T,b,D){var V=T!==null?T.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return V!==null?null:p(E,T,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case x:return b.key===V?C(E,T,b,D):null;case ee:return b.key===V?w(E,T,b,D):null;case it:return b=Bi(b),R(E,T,b,D)}if(St(b)||Ze(b))return V!==null?null:M(E,T,b,D,null);if(typeof b.then=="function")return R(E,T,Pr(b),D);if(b.$$typeof===me)return R(E,T,Ur(E,b),D);xr(E,b)}return null}function I(E,T,b,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return E=E.get(b)||null,p(T,E,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case x:return E=E.get(D.key===null?b:D.key)||null,C(T,E,D,V);case ee:return E=E.get(D.key===null?b:D.key)||null,w(T,E,D,V);case it:return D=Bi(D),I(E,T,b,D,V)}if(St(D)||Ze(D))return E=E.get(b)||null,M(T,E,D,V,null);if(typeof D.then=="function")return I(E,T,b,Pr(D),V);if(D.$$typeof===me)return I(E,T,b,Ur(T,D),V);xr(T,D)}return null}function q(E,T,b,D){for(var V=null,pe=null,Q=T,ie=T=0,ue=null;Q!==null&&ie<b.length;ie++){Q.index>ie?(ue=Q,Q=null):ue=Q.sibling;var ye=R(E,Q,b[ie],D);if(ye===null){Q===null&&(Q=ue);break}e&&Q&&ye.alternate===null&&t(E,Q),T=l(ye,T,ie),pe===null?V=ye:pe.sibling=ye,pe=ye,Q=ue}if(ie===b.length)return i(E,Q),de&&kn(E,ie),V;if(Q===null){for(;ie<b.length;ie++)Q=U(E,b[ie],D),Q!==null&&(T=l(Q,T,ie),pe===null?V=Q:pe.sibling=Q,pe=Q);return de&&kn(E,ie),V}for(Q=o(Q);ie<b.length;ie++)ue=I(Q,E,ie,b[ie],D),ue!==null&&(e&&ue.alternate!==null&&Q.delete(ue.key===null?ie:ue.key),T=l(ue,T,ie),pe===null?V=ue:pe.sibling=ue,pe=ue);return e&&Q.forEach(function(yi){return t(E,yi)}),de&&kn(E,ie),V}function J(E,T,b,D){if(b==null)throw Error(r(151));for(var V=null,pe=null,Q=T,ie=T=0,ue=null,ye=b.next();Q!==null&&!ye.done;ie++,ye=b.next()){Q.index>ie?(ue=Q,Q=null):ue=Q.sibling;var yi=R(E,Q,ye.value,D);if(yi===null){Q===null&&(Q=ue);break}e&&Q&&yi.alternate===null&&t(E,Q),T=l(yi,T,ie),pe===null?V=yi:pe.sibling=yi,pe=yi,Q=ue}if(ye.done)return i(E,Q),de&&kn(E,ie),V;if(Q===null){for(;!ye.done;ie++,ye=b.next())ye=U(E,ye.value,D),ye!==null&&(T=l(ye,T,ie),pe===null?V=ye:pe.sibling=ye,pe=ye);return de&&kn(E,ie),V}for(Q=o(Q);!ye.done;ie++,ye=b.next())ye=I(Q,E,ie,ye.value,D),ye!==null&&(e&&ye.alternate!==null&&Q.delete(ye.key===null?ie:ye.key),T=l(ye,T,ie),pe===null?V=ye:pe.sibling=ye,pe=ye);return e&&Q.forEach(function(sS){return t(E,sS)}),de&&kn(E,ie),V}function Ie(E,T,b,D){if(typeof b=="object"&&b!==null&&b.type===F&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case x:e:{for(var V=b.key;T!==null;){if(T.key===V){if(V=b.type,V===F){if(T.tag===7){i(E,T.sibling),D=s(T,b.props.children),D.return=E,E=D;break e}}else if(T.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===it&&Bi(V)===T.type){i(E,T.sibling),D=s(T,b.props),Ao(D,b),D.return=E,E=D;break e}i(E,T);break}else t(E,T);T=T.sibling}b.type===F?(D=Hi(b.props.children,E.mode,D,b.key),D.return=E,E=D):(D=Mr(b.type,b.key,b.props,null,E.mode,D),Ao(D,b),D.return=E,E=D)}return f(E);case ee:e:{for(V=b.key;T!==null;){if(T.key===V)if(T.tag===4&&T.stateNode.containerInfo===b.containerInfo&&T.stateNode.implementation===b.implementation){i(E,T.sibling),D=s(T,b.children||[]),D.return=E,E=D;break e}else{i(E,T);break}else t(E,T);T=T.sibling}D=cl(b,E.mode,D),D.return=E,E=D}return f(E);case it:return b=Bi(b),Ie(E,T,b,D)}if(St(b))return q(E,T,b,D);if(Ze(b)){if(V=Ze(b),typeof V!="function")throw Error(r(150));return b=V.call(b),J(E,T,b,D)}if(typeof b.then=="function")return Ie(E,T,Pr(b),D);if(b.$$typeof===me)return Ie(E,T,Ur(E,b),D);xr(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,T!==null&&T.tag===6?(i(E,T.sibling),D=s(T,b),D.return=E,E=D):(i(E,T),D=sl(b,E.mode,D),D.return=E,E=D),f(E)):i(E,T)}return function(E,T,b,D){try{To=0;var V=Ie(E,T,b,D);return Sa=null,V}catch(Q){if(Q===Aa||Q===Lr)throw Q;var pe=Pt(29,Q,null,E.mode);return pe.lanes=D,pe.return=E,pe}}}var Gi=jf(!0),Yf=jf(!1),ei=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Al(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ti(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ni(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ve&2)!==0){var s=o.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),o.pending=t,t=Or(e),If(e,null,i),t}return kr(e,o,t,i),Or(e)}function So(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Hd(e,i)}}function Sl(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var s=null,l=null;if(i=i.firstBaseUpdate,i!==null){do{var f={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};l===null?s=l=f:l=l.next=f,i=i.next}while(i!==null);l===null?s=l=t:l=l.next=t}else s=l=t;i={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var El=!1;function Eo(){if(El){var e=Ta;if(e!==null)throw e}}function _o(e,t,i,o){El=!1;var s=e.updateQueue;ei=!1;var l=s.firstBaseUpdate,f=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var C=p,w=C.next;C.next=null,f===null?l=w:f.next=w,f=C;var M=e.alternate;M!==null&&(M=M.updateQueue,p=M.lastBaseUpdate,p!==f&&(p===null?M.firstBaseUpdate=w:p.next=w,M.lastBaseUpdate=C))}if(l!==null){var U=s.baseState;f=0,M=w=C=null,p=l;do{var R=p.lane&-536870913,I=R!==p.lane;if(I?(le&R)===R:(o&R)===R){R!==0&&R===va&&(El=!0),M!==null&&(M=M.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var q=e,J=p;R=t;var Ie=i;switch(J.tag){case 1:if(q=J.payload,typeof q=="function"){U=q.call(Ie,U,R);break e}U=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=J.payload,R=typeof q=="function"?q.call(Ie,U,R):q,R==null)break e;U=_({},U,R);break e;case 2:ei=!0}}R=p.callback,R!==null&&(e.flags|=64,I&&(e.flags|=8192),I=s.callbacks,I===null?s.callbacks=[R]:I.push(R))}else I={lane:R,tag:p.tag,payload:p.payload,callback:p.callback,next:null},M===null?(w=M=I,C=U):M=M.next=I,f|=R;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;I=p,p=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);M===null&&(C=U),s.baseState=C,s.firstBaseUpdate=w,s.lastBaseUpdate=M,l===null&&(s.shared.lanes=0),si|=f,e.lanes=f,e.memoizedState=U}}function Qf(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Ff(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Qf(i[e],t)}var Ea=A(null),Br=A(0);function Vf(e,t){e=Bn,K(Br,e),K(Ea,t),Bn=e|t.baseLanes}function _l(){K(Br,Bn),K(Ea,Ea.current)}function bl(){Bn=Br.current,L(Ea),L(Br)}var xt=A(null),tn=null;function ii(e){var t=e.alternate;K(je,je.current&1),K(xt,e),tn===null&&(t===null||Ea.current!==null||t.memoizedState!==null)&&(tn=e)}function wl(e){K(je,je.current),K(xt,e),tn===null&&(tn=e)}function Xf(e){e.tag===22?(K(je,je.current),K(xt,e),tn===null&&(tn=e)):ai()}function ai(){K(je,je.current),K(xt,xt.current)}function Bt(e){L(xt),tn===e&&(tn=null),L(je)}var je=A(0);function Kr(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Nu(i)||Du(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nn=0,ne=null,we=null,Fe=null,Gr=!1,_a=!1,qi=!1,qr=0,bo=0,ba=null,ZT=0;function xe(){throw Error(r(321))}function Rl(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!zt(e[i],t[i]))return!1;return!0}function Il(e,t,i,o,s,l){return Nn=l,ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Ng:ql,qi=!1,l=i(o,s),qi=!1,_a&&(l=Zf(t,i,o,s)),Jf(e),l}function Jf(e){N.H=Io;var t=we!==null&&we.next!==null;if(Nn=0,Fe=we=ne=null,Gr=!1,bo=0,ba=null,t)throw Error(r(300));e===null||Ve||(e=e.dependencies,e!==null&&Dr(e)&&(Ve=!0))}function Zf(e,t,i,o){ne=e;var s=0;do{if(_a&&(ba=null),bo=0,_a=!1,25<=s)throw Error(r(301));if(s+=1,Fe=we=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}N.H=Dg,l=t(i,o)}while(_a);return l}function $T(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?wo(t):t,e=e.useState()[0],(we!==null?we.memoizedState:null)!==e&&(ne.flags|=1024),t}function kl(){var e=qr!==0;return qr=0,e}function Ol(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ml(e){if(Gr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Gr=!1}Nn=0,Fe=we=ne=null,_a=!1,bo=qr=0,ba=null}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ne.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Ye(){if(we===null){var e=ne.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Fe===null?ne.memoizedState:Fe.next;if(t!==null)Fe=t,we=e;else{if(e===null)throw ne.alternate===null?Error(r(467)):Error(r(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Fe===null?ne.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function jr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wo(e){var t=bo;return bo+=1,ba===null&&(ba=[]),e=Kf(ba,e,t),t=ne,(Fe===null?t.memoizedState:Fe.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Ng:ql),e}function Yr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return wo(e);if(e.$$typeof===me)return rt(e)}throw Error(r(438,String(e)))}function Nl(e){var t=null,i=ne.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=jr(),ne.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=cn;return t.index++,i}function Dn(e,t){return typeof t=="function"?t(e):t}function Qr(e){var t=Ye();return Dl(t,we,e)}function Dl(e,t,i){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var s=e.baseQueue,l=o.pending;if(l!==null){if(s!==null){var f=s.next;s.next=l.next,l.next=f}t.baseQueue=s=l,o.pending=null}if(l=e.baseState,s===null)e.memoizedState=l;else{t=s.next;var p=f=null,C=null,w=t,M=!1;do{var U=w.lane&-536870913;if(U!==w.lane?(le&U)===U:(Nn&U)===U){var R=w.revertLane;if(R===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),U===va&&(M=!0);else if((Nn&R)===R){w=w.next,R===va&&(M=!0);continue}else U={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},C===null?(p=C=U,f=l):C=C.next=U,ne.lanes|=R,si|=R;U=w.action,qi&&i(l,U),l=w.hasEagerState?w.eagerState:i(l,U)}else R={lane:U,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},C===null?(p=C=R,f=l):C=C.next=R,ne.lanes|=U,si|=U;w=w.next}while(w!==null&&w!==t);if(C===null?f=l:C.next=p,!zt(l,e.memoizedState)&&(Ve=!0,M&&(i=Ta,i!==null)))throw i;e.memoizedState=l,e.baseState=f,e.baseQueue=C,o.lastRenderedState=l}return s===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Ul(e){var t=Ye(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var o=i.dispatch,s=i.pending,l=t.memoizedState;if(s!==null){i.pending=null;var f=s=s.next;do l=e(l,f.action),f=f.next;while(f!==s);zt(l,t.memoizedState)||(Ve=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),i.lastRenderedState=l}return[l,o]}function $f(e,t,i){var o=ne,s=Ye(),l=de;if(l){if(i===void 0)throw Error(r(407));i=i()}else i=t();var f=!zt((we||s).memoizedState,i);if(f&&(s.memoizedState=i,Ve=!0),s=s.queue,zl(tg.bind(null,o,s,e),[e]),s.getSnapshot!==t||f||Fe!==null&&Fe.memoizedState.tag&1){if(o.flags|=2048,wa(9,{destroy:void 0},eg.bind(null,o,s,i,t),null),Me===null)throw Error(r(349));l||(Nn&127)!==0||Wf(o,t,i)}return i}function Wf(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=ne.updateQueue,t===null?(t=jr(),ne.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function eg(e,t,i,o){t.value=i,t.getSnapshot=o,ng(t)&&ig(e)}function tg(e,t,i){return i(function(){ng(t)&&ig(e)})}function ng(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!zt(e,i)}catch{return!0}}function ig(e){var t=Ui(e,2);t!==null&&kt(t,e,2)}function Hl(e){var t=Ct();if(typeof e=="function"){var i=e;if(e=i(),qi){Fn(!0);try{i()}finally{Fn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:e},t}function ag(e,t,i,o){return e.baseState=i,Dl(e,we,typeof o=="function"?o:Dn)}function WT(e,t,i,o,s){if(Xr(e))throw Error(r(485));if(e=t.action,e!==null){var l={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){l.listeners.push(f)}};N.T!==null?i(!0):l.isTransition=!1,o(l),i=t.pending,i===null?(l.next=t.pending=l,og(t,l)):(l.next=i.next,t.pending=i.next=l)}}function og(e,t){var i=t.action,o=t.payload,s=e.state;if(t.isTransition){var l=N.T,f={};N.T=f;try{var p=i(s,o),C=N.S;C!==null&&C(f,p),rg(e,t,p)}catch(w){Ll(e,t,w)}finally{l!==null&&f.types!==null&&(l.types=f.types),N.T=l}}else try{l=i(s,o),rg(e,t,l)}catch(w){Ll(e,t,w)}}function rg(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){sg(e,t,o)},function(o){return Ll(e,t,o)}):sg(e,t,i)}function sg(e,t,i){t.status="fulfilled",t.value=i,cg(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,og(e,i)))}function Ll(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,cg(t),t=t.next;while(t!==o)}e.action=null}function cg(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lg(e,t){return t}function ug(e,t){if(de){var i=Me.formState;if(i!==null){e:{var o=ne;if(de){if(De){t:{for(var s=De,l=en;s.nodeType!==8;){if(!l){s=null;break t}if(s=nn(s.nextSibling),s===null){s=null;break t}}l=s.data,s=l==="F!"||l==="F"?s:null}if(s){De=nn(s.nextSibling),o=s.data==="F!";break e}}$n(o)}o=!1}o&&(t=i[0])}}return i=Ct(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lg,lastRenderedState:t},i.queue=o,i=kg.bind(null,ne,o),o.dispatch=i,o=Hl(!1),l=Gl.bind(null,ne,!1,o.queue),o=Ct(),s={state:t,dispatch:null,action:e,pending:null},o.queue=s,i=WT.bind(null,ne,s,l,i),s.dispatch=i,o.memoizedState=e,[t,i,!1]}function hg(e){var t=Ye();return dg(t,we,e)}function dg(e,t,i){if(t=Dl(e,t,lg)[0],e=Qr(Dn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=wo(t)}catch(f){throw f===Aa?Lr:f}else o=t;t=Ye();var s=t.queue,l=s.dispatch;return i!==t.memoizedState&&(ne.flags|=2048,wa(9,{destroy:void 0},eA.bind(null,s,i),null)),[o,l,e]}function eA(e,t){e.action=t}function fg(e){var t=Ye(),i=we;if(i!==null)return dg(t,i,e);Ye(),t=t.memoizedState,i=Ye();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function wa(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=ne.updateQueue,t===null&&(t=jr(),ne.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function gg(){return Ye().memoizedState}function Fr(e,t,i,o){var s=Ct();ne.flags|=e,s.memoizedState=wa(1|t,{destroy:void 0},i,o===void 0?null:o)}function Vr(e,t,i,o){var s=Ye();o=o===void 0?null:o;var l=s.memoizedState.inst;we!==null&&o!==null&&Rl(o,we.memoizedState.deps)?s.memoizedState=wa(t,l,i,o):(ne.flags|=e,s.memoizedState=wa(1|t,l,i,o))}function mg(e,t){Fr(8390656,8,e,t)}function zl(e,t){Vr(2048,8,e,t)}function tA(e){ne.flags|=4;var t=ne.updateQueue;if(t===null)t=jr(),ne.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function pg(e){var t=Ye().memoizedState;return tA({ref:t,nextImpl:e}),function(){if((ve&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function yg(e,t){return Vr(4,2,e,t)}function Cg(e,t){return Vr(4,4,e,t)}function vg(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tg(e,t,i){i=i!=null?i.concat([e]):null,Vr(4,4,vg.bind(null,t,e),i)}function Pl(){}function Ag(e,t){var i=Ye();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Rl(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Sg(e,t){var i=Ye();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Rl(t,o[1]))return o[0];if(o=e(),qi){Fn(!0);try{e()}finally{Fn(!1)}}return i.memoizedState=[o,t],o}function xl(e,t,i){return i===void 0||(Nn&1073741824)!==0&&(le&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Em(),ne.lanes|=e,si|=e,i)}function Eg(e,t,i,o){return zt(i,t)?i:Ea.current!==null?(e=xl(e,i,o),zt(e,t)||(Ve=!0),e):(Nn&42)===0||(Nn&1073741824)!==0&&(le&261930)===0?(Ve=!0,e.memoizedState=i):(e=Em(),ne.lanes|=e,si|=e,t)}function _g(e,t,i,o,s){var l=B.p;B.p=l!==0&&8>l?l:8;var f=N.T,p={};N.T=p,Gl(e,!1,t,i);try{var C=s(),w=N.S;if(w!==null&&w(p,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var M=JT(C,o);Ro(e,t,M,qt(e))}else Ro(e,t,o,qt(e))}catch(U){Ro(e,t,{then:function(){},status:"rejected",reason:U},qt())}finally{B.p=l,f!==null&&p.types!==null&&(f.types=p.types),N.T=f}}function nA(){}function Bl(e,t,i,o){if(e.tag!==5)throw Error(r(476));var s=bg(e).queue;_g(e,s,t,$,i===null?nA:function(){return wg(e),i(o)})}function bg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:$},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function wg(e){var t=bg(e);t.next===null&&(t=e.alternate.memoizedState),Ro(e,t.next.queue,{},qt())}function Kl(){return rt(jo)}function Rg(){return Ye().memoizedState}function Ig(){return Ye().memoizedState}function iA(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=qt();e=ti(i);var o=ni(t,e,i);o!==null&&(kt(o,t,i),So(o,t,i)),t={cache:pl()},e.payload=t;return}t=t.return}}function aA(e,t,i){var o=qt();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Xr(e)?Og(t,i):(i=ol(e,t,i,o),i!==null&&(kt(i,e,o),Mg(i,t,o)))}function kg(e,t,i){var o=qt();Ro(e,t,i,o)}function Ro(e,t,i,o){var s={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xr(e))Og(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,p=l(f,i);if(s.hasEagerState=!0,s.eagerState=p,zt(p,f))return kr(e,t,s,0),Me===null&&Ir(),!1}catch{}if(i=ol(e,t,s,o),i!==null)return kt(i,e,o),Mg(i,t,o),!0}return!1}function Gl(e,t,i,o){if(o={lane:2,revertLane:Tu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xr(e)){if(t)throw Error(r(479))}else t=ol(e,i,o,2),t!==null&&kt(t,e,2)}function Xr(e){var t=e.alternate;return e===ne||t!==null&&t===ne}function Og(e,t){_a=Gr=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Mg(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Hd(e,i)}}var Io={readContext:rt,use:Yr,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe};Io.useEffectEvent=xe;var Ng={readContext:rt,use:Yr,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:mg,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Fr(4194308,4,vg.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Fr(4194308,4,e,t)},useInsertionEffect:function(e,t){Fr(4,2,e,t)},useMemo:function(e,t){var i=Ct();t=t===void 0?null:t;var o=e();if(qi){Fn(!0);try{e()}finally{Fn(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=Ct();if(i!==void 0){var s=i(t);if(qi){Fn(!0);try{i(t)}finally{Fn(!1)}}}else s=t;return o.memoizedState=o.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},o.queue=e,e=e.dispatch=aA.bind(null,ne,e),[o.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:function(e){e=Hl(e);var t=e.queue,i=kg.bind(null,ne,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Pl,useDeferredValue:function(e,t){var i=Ct();return xl(i,e,t)},useTransition:function(){var e=Hl(!1);return e=_g.bind(null,ne,e.queue,!0,!1),Ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=ne,s=Ct();if(de){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),Me===null)throw Error(r(349));(le&127)!==0||Wf(o,t,i)}s.memoizedState=i;var l={value:i,getSnapshot:t};return s.queue=l,mg(tg.bind(null,o,l,e),[e]),o.flags|=2048,wa(9,{destroy:void 0},eg.bind(null,o,l,i,t),null),i},useId:function(){var e=Ct(),t=Me.identifierPrefix;if(de){var i=Cn,o=yn;i=(o&~(1<<32-Lt(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=qr++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=ZT++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Kl,useFormState:ug,useActionState:ug,useOptimistic:function(e){var t=Ct();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Gl.bind(null,ne,!0,i),i.dispatch=t,[e,t]},useMemoCache:Nl,useCacheRefresh:function(){return Ct().memoizedState=iA.bind(null,ne)},useEffectEvent:function(e){var t=Ct(),i={impl:e};return t.memoizedState=i,function(){if((ve&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},ql={readContext:rt,use:Yr,useCallback:Ag,useContext:rt,useEffect:zl,useImperativeHandle:Tg,useInsertionEffect:yg,useLayoutEffect:Cg,useMemo:Sg,useReducer:Qr,useRef:gg,useState:function(){return Qr(Dn)},useDebugValue:Pl,useDeferredValue:function(e,t){var i=Ye();return Eg(i,we.memoizedState,e,t)},useTransition:function(){var e=Qr(Dn)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:wo(e),t]},useSyncExternalStore:$f,useId:Rg,useHostTransitionStatus:Kl,useFormState:hg,useActionState:hg,useOptimistic:function(e,t){var i=Ye();return ag(i,we,e,t)},useMemoCache:Nl,useCacheRefresh:Ig};ql.useEffectEvent=pg;var Dg={readContext:rt,use:Yr,useCallback:Ag,useContext:rt,useEffect:zl,useImperativeHandle:Tg,useInsertionEffect:yg,useLayoutEffect:Cg,useMemo:Sg,useReducer:Ul,useRef:gg,useState:function(){return Ul(Dn)},useDebugValue:Pl,useDeferredValue:function(e,t){var i=Ye();return we===null?xl(i,e,t):Eg(i,we.memoizedState,e,t)},useTransition:function(){var e=Ul(Dn)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:wo(e),t]},useSyncExternalStore:$f,useId:Rg,useHostTransitionStatus:Kl,useFormState:fg,useActionState:fg,useOptimistic:function(e,t){var i=Ye();return we!==null?ag(i,we,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Nl,useCacheRefresh:Ig};Dg.useEffectEvent=pg;function jl(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:_({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Yl={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=qt(),s=ti(o);s.payload=t,i!=null&&(s.callback=i),t=ni(e,s,o),t!==null&&(kt(t,e,o),So(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=qt(),s=ti(o);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=ni(e,s,o),t!==null&&(kt(t,e,o),So(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=qt(),o=ti(i);o.tag=2,t!=null&&(o.callback=t),t=ni(e,o,i),t!==null&&(kt(t,e,i),So(t,e,i))}};function Ug(e,t,i,o,s,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,l,f):t.prototype&&t.prototype.isPureReactComponent?!go(i,o)||!go(s,l):!0}function Hg(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Yl.enqueueReplaceState(t,t.state,null)}function ji(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=_({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}function Lg(e){Rr(e)}function zg(e){console.error(e)}function Pg(e){Rr(e)}function Jr(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function xg(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Ql(e,t,i){return i=ti(i),i.tag=3,i.payload={element:null},i.callback=function(){Jr(e,t)},i}function Bg(e){return e=ti(e),e.tag=3,e}function Kg(e,t,i,o){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var l=o.value;e.payload=function(){return s(l)},e.callback=function(){xg(t,i,o)}}var f=i.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){xg(t,i,o),typeof s!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var p=o.stack;this.componentDidCatch(o.value,{componentStack:p!==null?p:""})})}function oA(e,t,i,o,s){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Ca(t,i,s,!0),i=xt.current,i!==null){switch(i.tag){case 31:case 13:return tn===null?cs():i.alternate===null&&Be===0&&(Be=3),i.flags&=-257,i.flags|=65536,i.lanes=s,o===zr?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),yu(e,o,s)),!1;case 22:return i.flags|=65536,o===zr?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),yu(e,o,s)),!1}throw Error(r(435,i.tag))}return yu(e,o,s),cs(),!1}if(de)return t=xt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,o!==hl&&(e=Error(r(422),{cause:o}),yo(Zt(e,i)))):(o!==hl&&(t=Error(r(423),{cause:o}),yo(Zt(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,o=Zt(o,i),s=Ql(e.stateNode,o,s),Sl(e,s),Be!==4&&(Be=2)),!1;var l=Error(r(520),{cause:o});if(l=Zt(l,i),Lo===null?Lo=[l]:Lo.push(l),Be!==4&&(Be=2),t===null)return!0;o=Zt(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=Ql(i.stateNode,o,e),Sl(i,e),!1;case 1:if(t=i.type,l=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(ci===null||!ci.has(l))))return i.flags|=65536,s&=-s,i.lanes|=s,s=Bg(s),Kg(s,e,i,o),Sl(i,s),!1}i=i.return}while(i!==null);return!1}var Fl=Error(r(461)),Ve=!1;function st(e,t,i,o){t.child=e===null?Yf(t,null,i,o):Gi(t,e.child,i,o)}function Gg(e,t,i,o,s){i=i.render;var l=t.ref;if("ref"in o){var f={};for(var p in o)p!=="ref"&&(f[p]=o[p])}else f=o;return Pi(t),o=Il(e,t,i,f,l,s),p=kl(),e!==null&&!Ve?(Ol(e,t,s),Un(e,t,s)):(de&&p&&ll(t),t.flags|=1,st(e,t,o,s),t.child)}function qg(e,t,i,o,s){if(e===null){var l=i.type;return typeof l=="function"&&!rl(l)&&l.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=l,jg(e,t,l,o,s)):(e=Mr(i.type,null,o,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!tu(e,s)){var f=l.memoizedProps;if(i=i.compare,i=i!==null?i:go,i(f,o)&&e.ref===t.ref)return Un(e,t,s)}return t.flags|=1,e=In(l,o),e.ref=t.ref,e.return=t,t.child=e}function jg(e,t,i,o,s){if(e!==null){var l=e.memoizedProps;if(go(l,o)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=o=l,tu(e,s))(e.flags&131072)!==0&&(Ve=!0);else return t.lanes=e.lanes,Un(e,t,s)}return Vl(e,t,i,o,s)}function Yg(e,t,i,o){var s=o.children,l=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(l=l!==null?l.baseLanes|i:i,e!==null){for(o=t.child=e.child,s=0;o!==null;)s=s|o.lanes|o.childLanes,o=o.sibling;o=s&~l}else o=0,t.child=null;return Qg(e,t,l,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hr(t,l!==null?l.cachePool:null),l!==null?Vf(t,l):_l(),Xf(t);else return o=t.lanes=536870912,Qg(e,t,l!==null?l.baseLanes|i:i,i,o)}else l!==null?(Hr(t,l.cachePool),Vf(t,l),ai(),t.memoizedState=null):(e!==null&&Hr(t,null),_l(),ai());return st(e,t,s,i),t.child}function ko(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Qg(e,t,i,o,s){var l=Cl();return l=l===null?null:{parent:Qe._currentValue,pool:l},t.memoizedState={baseLanes:i,cachePool:l},e!==null&&Hr(t,null),_l(),Xf(t),e!==null&&Ca(e,t,o,!0),t.childLanes=s,null}function Zr(e,t){return t=Wr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Fg(e,t,i){return Gi(t,e.child,null,i),e=Zr(t,t.pendingProps),e.flags|=2,Bt(t),t.memoizedState=null,e}function rA(e,t,i){var o=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(de){if(o.mode==="hidden")return e=Zr(t,o),t.lanes=536870912,ko(null,e);if(wl(t),(e=De)?(e=op(e,en),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:yn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},i=Of(e),i.return=t,t.child=i,ot=t,De=null)):e=null,e===null)throw $n(t);return t.lanes=536870912,null}return Zr(t,o)}var l=e.memoizedState;if(l!==null){var f=l.dehydrated;if(wl(t),s)if(t.flags&256)t.flags&=-257,t=Fg(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(Ve||Ca(e,t,i,!1),s=(i&e.childLanes)!==0,Ve||s){if(o=Me,o!==null&&(f=Ld(o,i),f!==0&&f!==l.retryLane))throw l.retryLane=f,Ui(e,f),kt(o,e,f),Fl;cs(),t=Fg(e,t,i)}else e=l.treeContext,De=nn(f.nextSibling),ot=t,de=!0,Zn=null,en=!1,e!==null&&Df(t,e),t=Zr(t,o),t.flags|=4096;return t}return e=In(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function $r(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Vl(e,t,i,o,s){return Pi(t),i=Il(e,t,i,o,void 0,s),o=kl(),e!==null&&!Ve?(Ol(e,t,s),Un(e,t,s)):(de&&o&&ll(t),t.flags|=1,st(e,t,i,s),t.child)}function Vg(e,t,i,o,s,l){return Pi(t),t.updateQueue=null,i=Zf(t,o,i,s),Jf(e),o=kl(),e!==null&&!Ve?(Ol(e,t,l),Un(e,t,l)):(de&&o&&ll(t),t.flags|=1,st(e,t,i,l),t.child)}function Xg(e,t,i,o,s){if(Pi(t),t.stateNode===null){var l=ga,f=i.contextType;typeof f=="object"&&f!==null&&(l=rt(f)),l=new i(o,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Yl,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=o,l.state=t.memoizedState,l.refs={},Tl(t),f=i.contextType,l.context=typeof f=="object"&&f!==null?rt(f):ga,l.state=t.memoizedState,f=i.getDerivedStateFromProps,typeof f=="function"&&(jl(t,i,f,o),l.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(f=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),f!==l.state&&Yl.enqueueReplaceState(l,l.state,null),_o(t,o,l,s),Eo(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){l=t.stateNode;var p=t.memoizedProps,C=ji(i,p);l.props=C;var w=l.context,M=i.contextType;f=ga,typeof M=="object"&&M!==null&&(f=rt(M));var U=i.getDerivedStateFromProps;M=typeof U=="function"||typeof l.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,M||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p||w!==f)&&Hg(t,l,o,f),ei=!1;var R=t.memoizedState;l.state=R,_o(t,o,l,s),Eo(),w=t.memoizedState,p||R!==w||ei?(typeof U=="function"&&(jl(t,i,U,o),w=t.memoizedState),(C=ei||Ug(t,i,C,o,R,w,f))?(M||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=w),l.props=o,l.state=w,l.context=f,o=C):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{l=t.stateNode,Al(e,t),f=t.memoizedProps,M=ji(i,f),l.props=M,U=t.pendingProps,R=l.context,w=i.contextType,C=ga,typeof w=="object"&&w!==null&&(C=rt(w)),p=i.getDerivedStateFromProps,(w=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==U||R!==C)&&Hg(t,l,o,C),ei=!1,R=t.memoizedState,l.state=R,_o(t,o,l,s),Eo();var I=t.memoizedState;f!==U||R!==I||ei||e!==null&&e.dependencies!==null&&Dr(e.dependencies)?(typeof p=="function"&&(jl(t,i,p,o),I=t.memoizedState),(M=ei||Ug(t,i,M,o,R,I,C)||e!==null&&e.dependencies!==null&&Dr(e.dependencies))?(w||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,I,C),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,I,C)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=I),l.props=o,l.state=I,l.context=C,o=M):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),o=!1)}return l=o,$r(e,t),o=(t.flags&128)!==0,l||o?(l=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&o?(t.child=Gi(t,e.child,null,s),t.child=Gi(t,null,i,s)):st(e,t,i,s),t.memoizedState=l.state,e=t.child):e=Un(e,t,s),e}function Jg(e,t,i,o){return Li(),t.flags|=256,st(e,t,i,o),t.child}var Xl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jl(e){return{baseLanes:e,cachePool:xf()}}function Zl(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Gt),e}function Zg(e,t,i){var o=t.pendingProps,s=!1,l=(t.flags&128)!==0,f;if((f=l)||(f=e!==null&&e.memoizedState===null?!1:(je.current&2)!==0),f&&(s=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(de){if(s?ii(t):ai(),(e=De)?(e=op(e,en),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:yn,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},i=Of(e),i.return=t,t.child=i,ot=t,De=null)):e=null,e===null)throw $n(t);return Du(e)?t.lanes=32:t.lanes=536870912,null}var p=o.children;return o=o.fallback,s?(ai(),s=t.mode,p=Wr({mode:"hidden",children:p},s),o=Hi(o,s,i,null),p.return=t,o.return=t,p.sibling=o,t.child=p,o=t.child,o.memoizedState=Jl(i),o.childLanes=Zl(e,f,i),t.memoizedState=Xl,ko(null,o)):(ii(t),$l(t,p))}var C=e.memoizedState;if(C!==null&&(p=C.dehydrated,p!==null)){if(l)t.flags&256?(ii(t),t.flags&=-257,t=Wl(e,t,i)):t.memoizedState!==null?(ai(),t.child=e.child,t.flags|=128,t=null):(ai(),p=o.fallback,s=t.mode,o=Wr({mode:"visible",children:o.children},s),p=Hi(p,s,i,null),p.flags|=2,o.return=t,p.return=t,o.sibling=p,t.child=o,Gi(t,e.child,null,i),o=t.child,o.memoizedState=Jl(i),o.childLanes=Zl(e,f,i),t.memoizedState=Xl,t=ko(null,o));else if(ii(t),Du(p)){if(f=p.nextSibling&&p.nextSibling.dataset,f)var w=f.dgst;f=w,o=Error(r(419)),o.stack="",o.digest=f,yo({value:o,source:null,stack:null}),t=Wl(e,t,i)}else if(Ve||Ca(e,t,i,!1),f=(i&e.childLanes)!==0,Ve||f){if(f=Me,f!==null&&(o=Ld(f,i),o!==0&&o!==C.retryLane))throw C.retryLane=o,Ui(e,o),kt(f,e,o),Fl;Nu(p)||cs(),t=Wl(e,t,i)}else Nu(p)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,De=nn(p.nextSibling),ot=t,de=!0,Zn=null,en=!1,e!==null&&Df(t,e),t=$l(t,o.children),t.flags|=4096);return t}return s?(ai(),p=o.fallback,s=t.mode,C=e.child,w=C.sibling,o=In(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,w!==null?p=In(w,p):(p=Hi(p,s,i,null),p.flags|=2),p.return=t,o.return=t,o.sibling=p,t.child=o,ko(null,o),o=t.child,p=e.child.memoizedState,p===null?p=Jl(i):(s=p.cachePool,s!==null?(C=Qe._currentValue,s=s.parent!==C?{parent:C,pool:C}:s):s=xf(),p={baseLanes:p.baseLanes|i,cachePool:s}),o.memoizedState=p,o.childLanes=Zl(e,f,i),t.memoizedState=Xl,ko(e.child,o)):(ii(t),i=e.child,e=i.sibling,i=In(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=i,t.memoizedState=null,i)}function $l(e,t){return t=Wr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Wr(e,t){return e=Pt(22,e,null,t),e.lanes=0,e}function Wl(e,t,i){return Gi(t,e.child,null,i),e=$l(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $g(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),gl(e.return,t,i)}function eu(e,t,i,o,s,l){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:s,treeForkCount:l}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=i,f.tailMode=s,f.treeForkCount=l)}function Wg(e,t,i){var o=t.pendingProps,s=o.revealOrder,l=o.tail;o=o.children;var f=je.current,p=(f&2)!==0;if(p?(f=f&1|2,t.flags|=128):f&=1,K(je,f),st(e,t,o,i),o=de?po:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$g(e,i,t);else if(e.tag===19)$g(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&Kr(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),eu(t,!1,s,i,l,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Kr(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}eu(t,!0,i,null,l,o);break;case"together":eu(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Un(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),si|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ca(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=In(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=In(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function tu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Dr(e)))}function sA(e,t,i){switch(t.tag){case 3:yt(t,t.stateNode.containerInfo),Wn(t,Qe,e.memoizedState.cache),Li();break;case 27:case 5:eo(t);break;case 4:yt(t,t.stateNode.containerInfo);break;case 10:Wn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,wl(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(ii(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Zg(e,t,i):(ii(t),e=Un(e,t,i),e!==null?e.sibling:null);ii(t);break;case 19:var s=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Ca(e,t,i,!1),o=(i&t.childLanes)!==0),s){if(o)return Wg(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(je,je.current),o)break;return null;case 22:return t.lanes=0,Yg(e,t,i,t.pendingProps);case 24:Wn(t,Qe,e.memoizedState.cache)}return Un(e,t,i)}function em(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ve=!0;else{if(!tu(e,i)&&(t.flags&128)===0)return Ve=!1,sA(e,t,i);Ve=(e.flags&131072)!==0}else Ve=!1,de&&(t.flags&1048576)!==0&&Nf(t,po,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=Bi(t.elementType),t.type=e,typeof e=="function")rl(e)?(o=ji(e,o),t.tag=1,t=Xg(null,t,e,o,i)):(t.tag=0,t=Vl(null,t,e,o,i));else{if(e!=null){var s=e.$$typeof;if(s===Ne){t.tag=11,t=Gg(null,t,e,o,i);break e}else if(s===oe){t.tag=14,t=qg(null,t,e,o,i);break e}}throw t=He(e)||e,Error(r(306,t,""))}}return t;case 0:return Vl(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,s=ji(o,t.pendingProps),Xg(e,t,o,s,i);case 3:e:{if(yt(t,t.stateNode.containerInfo),e===null)throw Error(r(387));o=t.pendingProps;var l=t.memoizedState;s=l.element,Al(e,t),_o(t,o,null,i);var f=t.memoizedState;if(o=f.cache,Wn(t,Qe,o),o!==l.cache&&ml(t,[Qe],i,!0),Eo(),o=f.element,l.isDehydrated)if(l={element:o,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Jg(e,t,o,i);break e}else if(o!==s){s=Zt(Error(r(424)),t),yo(s),t=Jg(e,t,o,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,De=nn(e.firstChild),ot=t,de=!0,Zn=null,en=!0,i=Yf(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Li(),o===s){t=Un(e,t,i);break e}st(e,t,o,i)}t=t.child}return t;case 26:return $r(e,t),e===null?(i=hp(t.type,null,t.pendingProps,null))?t.memoizedState=i:de||(i=t.type,e=t.pendingProps,o=ms(Y.current).createElement(i),o[at]=t,o[Et]=e,ct(o,i,e),et(o),t.stateNode=o):t.memoizedState=hp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return eo(t),e===null&&de&&(o=t.stateNode=cp(t.type,t.pendingProps,Y.current),ot=t,en=!0,s=De,di(t.type)?(Uu=s,De=nn(o.firstChild)):De=s),st(e,t,t.pendingProps.children,i),$r(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&de&&((s=o=De)&&(o=zA(o,t.type,t.pendingProps,en),o!==null?(t.stateNode=o,ot=t,De=nn(o.firstChild),en=!1,s=!0):s=!1),s||$n(t)),eo(t),s=t.type,l=t.pendingProps,f=e!==null?e.memoizedProps:null,o=l.children,ku(s,l)?o=null:f!==null&&ku(s,f)&&(t.flags|=32),t.memoizedState!==null&&(s=Il(e,t,$T,null,null,i),jo._currentValue=s),$r(e,t),st(e,t,o,i),t.child;case 6:return e===null&&de&&((e=i=De)&&(i=PA(i,t.pendingProps,en),i!==null?(t.stateNode=i,ot=t,De=null,e=!0):e=!1),e||$n(t)),null;case 13:return Zg(e,t,i);case 4:return yt(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Gi(t,null,o,i):st(e,t,o,i),t.child;case 11:return Gg(e,t,t.type,t.pendingProps,i);case 7:return st(e,t,t.pendingProps,i),t.child;case 8:return st(e,t,t.pendingProps.children,i),t.child;case 12:return st(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,Wn(t,t.type,o.value),st(e,t,o.children,i),t.child;case 9:return s=t.type._context,o=t.pendingProps.children,Pi(t),s=rt(s),o=o(s),t.flags|=1,st(e,t,o,i),t.child;case 14:return qg(e,t,t.type,t.pendingProps,i);case 15:return jg(e,t,t.type,t.pendingProps,i);case 19:return Wg(e,t,i);case 31:return rA(e,t,i);case 22:return Yg(e,t,i,t.pendingProps);case 24:return Pi(t),o=rt(Qe),e===null?(s=Cl(),s===null&&(s=Me,l=pl(),s.pooledCache=l,l.refCount++,l!==null&&(s.pooledCacheLanes|=i),s=l),t.memoizedState={parent:o,cache:s},Tl(t),Wn(t,Qe,s)):((e.lanes&i)!==0&&(Al(e,t),_o(t,null,null,i),Eo()),s=e.memoizedState,l=t.memoizedState,s.parent!==o?(s={parent:o,cache:o},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Wn(t,Qe,o)):(o=l.cache,Wn(t,Qe,o),o!==s.cache&&ml(t,[Qe],i,!0))),st(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Hn(e){e.flags|=4}function nu(e,t,i,o,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(Rm())e.flags|=8192;else throw Ki=zr,vl}else e.flags&=-16777217}function tm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!pp(t))if(Rm())e.flags|=8192;else throw Ki=zr,vl}function es(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Dd():536870912,e.lanes|=t,Oa|=t)}function Oo(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags&65011712,o|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function cA(e,t,i){var o=t.pendingProps;switch(ul(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return Ue(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Mn(Qe),qe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ya(t)?Hn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,dl())),Ue(t),null;case 26:var s=t.type,l=t.memoizedState;return e===null?(Hn(t),l!==null?(Ue(t),tm(t,l)):(Ue(t),nu(t,s,null,o,i))):l?l!==e.memoizedState?(Hn(t),Ue(t),tm(t,l)):(Ue(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Hn(t),Ue(t),nu(t,s,e,o,i)),null;case 27:if(hr(t),i=Y.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Hn(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return Ue(t),null}e=j.current,ya(t)?Uf(t):(e=cp(s,o,i),t.stateNode=e,Hn(t))}return Ue(t),null;case 5:if(hr(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Hn(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return Ue(t),null}if(l=j.current,ya(t))Uf(t);else{var f=ms(Y.current);switch(l){case 1:l=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:l=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":l=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":l=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":l=f.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof o.is=="string"?f.createElement("select",{is:o.is}):f.createElement("select"),o.multiple?l.multiple=!0:o.size&&(l.size=o.size);break;default:l=typeof o.is=="string"?f.createElement(s,{is:o.is}):f.createElement(s)}}l[at]=t,l[Et]=o;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=l;e:switch(ct(l,s,o),s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Hn(t)}}return Ue(t),nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Hn(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(r(166));if(e=Y.current,ya(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,s=ot,s!==null)switch(s.tag){case 27:case 5:o=s.memoizedProps}e[at]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Zm(e.nodeValue,i)),e||$n(t,!0)}else e=ms(e).createTextNode(o),e[at]=t,t.stateNode=e}return Ue(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=ya(t),i!==null){if(e===null){if(!o)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[at]=t}else Li(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),e=!1}else i=dl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Bt(t),t):(Bt(t),null);if((t.flags&128)!==0)throw Error(r(558))}return Ue(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=ya(t),o!==null&&o.dehydrated!==null){if(e===null){if(!s)throw Error(r(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));s[at]=t}else Li(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),s=!1}else s=dl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Bt(t),t):(Bt(t),null)}return Bt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,s=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(s=o.alternate.memoizedState.cachePool.pool),l=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),l!==s&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),es(t,t.updateQueue),Ue(t),null);case 4:return qe(),e===null&&_u(t.stateNode.containerInfo),Ue(t),null;case 10:return Mn(t.type),Ue(t),null;case 19:if(L(je),o=t.memoizedState,o===null)return Ue(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)Oo(o,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(l=Kr(e),l!==null){for(t.flags|=128,Oo(o,!1),e=l.updateQueue,t.updateQueue=e,es(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)kf(i,e),i=i.sibling;return K(je,je.current&1|2),de&&kn(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&Ut()>os&&(t.flags|=128,s=!0,Oo(o,!1),t.lanes=4194304)}else{if(!s)if(e=Kr(l),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,es(t,e),Oo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!de)return Ue(t),null}else 2*Ut()-o.renderingStartTime>os&&i!==536870912&&(t.flags|=128,s=!0,Oo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ut(),e.sibling=null,i=je.current,K(je,s?i&1|2:i&1),de&&kn(t,o.treeForkCount),e):(Ue(t),null);case 22:case 23:return Bt(t),bl(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),i=t.updateQueue,i!==null&&es(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&L(xi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Mn(Qe),Ue(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function lA(e,t){switch(ul(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mn(Qe),qe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return hr(t),null;case 31:if(t.memoizedState!==null){if(Bt(t),t.alternate===null)throw Error(r(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Bt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(je),null;case 4:return qe(),null;case 10:return Mn(t.type),null;case 22:case 23:return Bt(t),bl(),e!==null&&L(xi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Mn(Qe),null;case 25:return null;default:return null}}function nm(e,t){switch(ul(t),t.tag){case 3:Mn(Qe),qe();break;case 26:case 27:case 5:hr(t);break;case 4:qe();break;case 31:t.memoizedState!==null&&Bt(t);break;case 13:Bt(t);break;case 19:L(je);break;case 10:Mn(t.type);break;case 22:case 23:Bt(t),bl(),e!==null&&L(xi);break;case 24:Mn(Qe)}}function Mo(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&e)===e){o=void 0;var l=i.create,f=i.inst;o=l(),f.destroy=o}i=i.next}while(i!==s)}}catch(p){_e(t,t.return,p)}}function oi(e,t,i){try{var o=t.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var l=s.next;o=l;do{if((o.tag&e)===e){var f=o.inst,p=f.destroy;if(p!==void 0){f.destroy=void 0,s=t;var C=i,w=p;try{w()}catch(M){_e(s,C,M)}}}o=o.next}while(o!==l)}}catch(M){_e(t,t.return,M)}}function im(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Ff(t,i)}catch(o){_e(e,e.return,o)}}}function am(e,t,i){i.props=ji(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){_e(e,t,o)}}function No(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(s){_e(e,t,s)}}function vn(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(s){_e(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){_e(e,t,s)}else i.current=null}function om(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(s){_e(e,e.return,s)}}function iu(e,t,i){try{var o=e.stateNode;MA(o,e.type,i,t),o[Et]=t}catch(s){_e(e,e.return,s)}}function rm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&di(e.type)||e.tag===4}function au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&di(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ou(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=wn));else if(o!==4&&(o===27&&di(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(ou(e,t,i),e=e.sibling;e!==null;)ou(e,t,i),e=e.sibling}function ts(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&di(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(ts(e,t,i),e=e.sibling;e!==null;)ts(e,t,i),e=e.sibling}function sm(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ct(t,o,i),t[at]=e,t[Et]=i}catch(l){_e(e,e.return,l)}}var Ln=!1,Xe=!1,ru=!1,cm=typeof WeakSet=="function"?WeakSet:Set,tt=null;function uA(e,t){if(e=e.containerInfo,Ru=Ss,e=Tf(e),Wc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var s=o.anchorOffset,l=o.focusNode;o=o.focusOffset;try{i.nodeType,l.nodeType}catch{i=null;break e}var f=0,p=-1,C=-1,w=0,M=0,U=e,R=null;t:for(;;){for(var I;U!==i||s!==0&&U.nodeType!==3||(p=f+s),U!==l||o!==0&&U.nodeType!==3||(C=f+o),U.nodeType===3&&(f+=U.nodeValue.length),(I=U.firstChild)!==null;)R=U,U=I;for(;;){if(U===e)break t;if(R===i&&++w===s&&(p=f),R===l&&++M===o&&(C=f),(I=U.nextSibling)!==null)break;U=R,R=U.parentNode}U=I}i=p===-1||C===-1?null:{start:p,end:C}}else i=null}i=i||{start:0,end:0}}else i=null;for(Iu={focusedElem:e,selectionRange:i},Ss=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){switch(t=tt,l=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)s=e[i],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&l!==null){e=void 0,i=t,s=l.memoizedProps,l=l.memoizedState,o=i.stateNode;try{var q=ji(i.type,s);e=o.getSnapshotBeforeUpdate(q,l),o.__reactInternalSnapshotBeforeUpdate=e}catch(J){_e(i,i.return,J)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Mu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}}function lm(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Pn(e,i),o&4&&Mo(5,i);break;case 1:if(Pn(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(f){_e(i,i.return,f)}else{var s=ji(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){_e(i,i.return,f)}}o&64&&im(i),o&512&&No(i,i.return);break;case 3:if(Pn(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Ff(e,t)}catch(f){_e(i,i.return,f)}}break;case 27:t===null&&o&4&&sm(i);case 26:case 5:Pn(e,i),t===null&&o&4&&om(i),o&512&&No(i,i.return);break;case 12:Pn(e,i);break;case 31:Pn(e,i),o&4&&dm(e,i);break;case 13:Pn(e,i),o&4&&fm(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=vA.bind(null,i),xA(e,i))));break;case 22:if(o=i.memoizedState!==null||Ln,!o){t=t!==null&&t.memoizedState!==null||Xe,s=Ln;var l=Xe;Ln=o,(Xe=t)&&!l?xn(e,i,(i.subtreeFlags&8772)!==0):Pn(e,i),Ln=s,Xe=l}break;case 30:break;default:Pn(e,i)}}function um(e){var t=e.alternate;t!==null&&(e.alternate=null,um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Lc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Le=null,bt=!1;function zn(e,t,i){for(i=i.child;i!==null;)hm(e,t,i),i=i.sibling}function hm(e,t,i){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(to,i)}catch{}switch(i.tag){case 26:Xe||vn(i,t),zn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Xe||vn(i,t);var o=Le,s=bt;di(i.type)&&(Le=i.stateNode,bt=!1),zn(e,t,i),Ko(i.stateNode),Le=o,bt=s;break;case 5:Xe||vn(i,t);case 6:if(o=Le,s=bt,Le=null,zn(e,t,i),Le=o,bt=s,Le!==null)if(bt)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(i.stateNode)}catch(l){_e(i,t,l)}else try{Le.removeChild(i.stateNode)}catch(l){_e(i,t,l)}break;case 18:Le!==null&&(bt?(e=Le,ip(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Pa(e)):ip(Le,i.stateNode));break;case 4:o=Le,s=bt,Le=i.stateNode.containerInfo,bt=!0,zn(e,t,i),Le=o,bt=s;break;case 0:case 11:case 14:case 15:oi(2,i,t),Xe||oi(4,i,t),zn(e,t,i);break;case 1:Xe||(vn(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&am(i,t,o)),zn(e,t,i);break;case 21:zn(e,t,i);break;case 22:Xe=(o=Xe)||i.memoizedState!==null,zn(e,t,i),Xe=o;break;default:zn(e,t,i)}}function dm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pa(e)}catch(i){_e(t,t.return,i)}}}function fm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pa(e)}catch(i){_e(t,t.return,i)}}function hA(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new cm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new cm),t;default:throw Error(r(435,e.tag))}}function ns(e,t){var i=hA(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var s=TA.bind(null,e,o);o.then(s,s)}})}function wt(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var s=i[o],l=e,f=t,p=f;e:for(;p!==null;){switch(p.tag){case 27:if(di(p.type)){Le=p.stateNode,bt=!1;break e}break;case 5:Le=p.stateNode,bt=!1;break e;case 3:case 4:Le=p.stateNode.containerInfo,bt=!0;break e}p=p.return}if(Le===null)throw Error(r(160));hm(l,f,s),Le=null,bt=!1,l=s.alternate,l!==null&&(l.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)gm(t,e),t=t.sibling}var un=null;function gm(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wt(t,e),Rt(e),o&4&&(oi(3,e,e.return),Mo(3,e),oi(5,e,e.return));break;case 1:wt(t,e),Rt(e),o&512&&(Xe||i===null||vn(i,i.return)),o&64&&Ln&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var s=un;if(wt(t,e),Rt(e),o&512&&(Xe||i===null||vn(i,i.return)),o&4){var l=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(o){case"title":l=s.getElementsByTagName("title")[0],(!l||l[ao]||l[at]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=s.createElement(o),s.head.insertBefore(l,s.querySelector("head > title"))),ct(l,o,i),l[at]=e,et(l),o=l;break e;case"link":var f=gp("link","href",s).get(o+(i.href||""));if(f){for(var p=0;p<f.length;p++)if(l=f[p],l.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&l.getAttribute("rel")===(i.rel==null?null:i.rel)&&l.getAttribute("title")===(i.title==null?null:i.title)&&l.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){f.splice(p,1);break t}}l=s.createElement(o),ct(l,o,i),s.head.appendChild(l);break;case"meta":if(f=gp("meta","content",s).get(o+(i.content||""))){for(p=0;p<f.length;p++)if(l=f[p],l.getAttribute("content")===(i.content==null?null:""+i.content)&&l.getAttribute("name")===(i.name==null?null:i.name)&&l.getAttribute("property")===(i.property==null?null:i.property)&&l.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&l.getAttribute("charset")===(i.charSet==null?null:i.charSet)){f.splice(p,1);break t}}l=s.createElement(o),ct(l,o,i),s.head.appendChild(l);break;default:throw Error(r(468,o))}l[at]=e,et(l),o=l}e.stateNode=o}else mp(s,e.type,e.stateNode);else e.stateNode=fp(s,o,e.memoizedProps);else l!==o?(l===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):l.count--,o===null?mp(s,e.type,e.stateNode):fp(s,o,e.memoizedProps)):o===null&&e.stateNode!==null&&iu(e,e.memoizedProps,i.memoizedProps)}break;case 27:wt(t,e),Rt(e),o&512&&(Xe||i===null||vn(i,i.return)),i!==null&&o&4&&iu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(wt(t,e),Rt(e),o&512&&(Xe||i===null||vn(i,i.return)),e.flags&32){s=e.stateNode;try{sa(s,"")}catch(q){_e(e,e.return,q)}}o&4&&e.stateNode!=null&&(s=e.memoizedProps,iu(e,s,i!==null?i.memoizedProps:s)),o&1024&&(ru=!0);break;case 6:if(wt(t,e),Rt(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(q){_e(e,e.return,q)}}break;case 3:if(Cs=null,s=un,un=ps(t.containerInfo),wt(t,e),un=s,Rt(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Pa(t.containerInfo)}catch(q){_e(e,e.return,q)}ru&&(ru=!1,mm(e));break;case 4:o=un,un=ps(e.stateNode.containerInfo),wt(t,e),Rt(e),un=o;break;case 12:wt(t,e),Rt(e);break;case 31:wt(t,e),Rt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ns(e,o)));break;case 13:wt(t,e),Rt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(as=Ut()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ns(e,o)));break;case 22:s=e.memoizedState!==null;var C=i!==null&&i.memoizedState!==null,w=Ln,M=Xe;if(Ln=w||s,Xe=M||C,wt(t,e),Xe=M,Ln=w,Rt(e),o&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||C||Ln||Xe||Yi(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){C=i=t;try{if(l=C.stateNode,s)f=l.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{p=C.stateNode;var U=C.memoizedProps.style,R=U!=null&&U.hasOwnProperty("display")?U.display:null;p.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(q){_e(C,C.return,q)}}}else if(t.tag===6){if(i===null){C=t;try{C.stateNode.nodeValue=s?"":C.memoizedProps}catch(q){_e(C,C.return,q)}}}else if(t.tag===18){if(i===null){C=t;try{var I=C.stateNode;s?ap(I,!0):ap(C.stateNode,!1)}catch(q){_e(C,C.return,q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,ns(e,i))));break;case 19:wt(t,e),Rt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ns(e,o)));break;case 30:break;case 21:break;default:wt(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(rm(o)){i=o;break}o=o.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var s=i.stateNode,l=au(e);ts(e,l,s);break;case 5:var f=i.stateNode;i.flags&32&&(sa(f,""),i.flags&=-33);var p=au(e);ts(e,p,f);break;case 3:case 4:var C=i.stateNode.containerInfo,w=au(e);ou(e,w,C);break;default:throw Error(r(161))}}catch(M){_e(e,e.return,M)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;mm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lm(e,t.alternate,t),t=t.sibling}function Yi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:oi(4,t,t.return),Yi(t);break;case 1:vn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&am(t,t.return,i),Yi(t);break;case 27:Ko(t.stateNode);case 26:case 5:vn(t,t.return),Yi(t);break;case 22:t.memoizedState===null&&Yi(t);break;case 30:Yi(t);break;default:Yi(t)}e=e.sibling}}function xn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,s=e,l=t,f=l.flags;switch(l.tag){case 0:case 11:case 15:xn(s,l,i),Mo(4,l);break;case 1:if(xn(s,l,i),o=l,s=o.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(w){_e(o,o.return,w)}if(o=l,s=o.updateQueue,s!==null){var p=o.stateNode;try{var C=s.shared.hiddenCallbacks;if(C!==null)for(s.shared.hiddenCallbacks=null,s=0;s<C.length;s++)Qf(C[s],p)}catch(w){_e(o,o.return,w)}}i&&f&64&&im(l),No(l,l.return);break;case 27:sm(l);case 26:case 5:xn(s,l,i),i&&o===null&&f&4&&om(l),No(l,l.return);break;case 12:xn(s,l,i);break;case 31:xn(s,l,i),i&&f&4&&dm(s,l);break;case 13:xn(s,l,i),i&&f&4&&fm(s,l);break;case 22:l.memoizedState===null&&xn(s,l,i),No(l,l.return);break;case 30:break;default:xn(s,l,i)}t=t.sibling}}function su(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Co(i))}function cu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Co(e))}function hn(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)pm(e,t,i,o),t=t.sibling}function pm(e,t,i,o){var s=t.flags;switch(t.tag){case 0:case 11:case 15:hn(e,t,i,o),s&2048&&Mo(9,t);break;case 1:hn(e,t,i,o);break;case 3:hn(e,t,i,o),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Co(e)));break;case 12:if(s&2048){hn(e,t,i,o),e=t.stateNode;try{var l=t.memoizedProps,f=l.id,p=l.onPostCommit;typeof p=="function"&&p(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){_e(t,t.return,C)}}else hn(e,t,i,o);break;case 31:hn(e,t,i,o);break;case 13:hn(e,t,i,o);break;case 23:break;case 22:l=t.stateNode,f=t.alternate,t.memoizedState!==null?l._visibility&2?hn(e,t,i,o):Do(e,t):l._visibility&2?hn(e,t,i,o):(l._visibility|=2,Ra(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),s&2048&&su(f,t);break;case 24:hn(e,t,i,o),s&2048&&cu(t.alternate,t);break;default:hn(e,t,i,o)}}function Ra(e,t,i,o,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var l=e,f=t,p=i,C=o,w=f.flags;switch(f.tag){case 0:case 11:case 15:Ra(l,f,p,C,s),Mo(8,f);break;case 23:break;case 22:var M=f.stateNode;f.memoizedState!==null?M._visibility&2?Ra(l,f,p,C,s):Do(l,f):(M._visibility|=2,Ra(l,f,p,C,s)),s&&w&2048&&su(f.alternate,f);break;case 24:Ra(l,f,p,C,s),s&&w&2048&&cu(f.alternate,f);break;default:Ra(l,f,p,C,s)}t=t.sibling}}function Do(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,s=o.flags;switch(o.tag){case 22:Do(i,o),s&2048&&su(o.alternate,o);break;case 24:Do(i,o),s&2048&&cu(o.alternate,o);break;default:Do(i,o)}t=t.sibling}}var Uo=8192;function Ia(e,t,i){if(e.subtreeFlags&Uo)for(e=e.child;e!==null;)ym(e,t,i),e=e.sibling}function ym(e,t,i){switch(e.tag){case 26:Ia(e,t,i),e.flags&Uo&&e.memoizedState!==null&&ZA(i,un,e.memoizedState,e.memoizedProps);break;case 5:Ia(e,t,i);break;case 3:case 4:var o=un;un=ps(e.stateNode.containerInfo),Ia(e,t,i),un=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Uo,Uo=16777216,Ia(e,t,i),Uo=o):Ia(e,t,i));break;default:Ia(e,t,i)}}function Cm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ho(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];tt=o,Tm(o,e)}Cm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vm(e),e=e.sibling}function vm(e){switch(e.tag){case 0:case 11:case 15:Ho(e),e.flags&2048&&oi(9,e,e.return);break;case 3:Ho(e);break;case 12:Ho(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,is(e)):Ho(e);break;default:Ho(e)}}function is(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];tt=o,Tm(o,e)}Cm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:oi(8,t,t.return),is(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,is(t));break;default:is(t)}e=e.sibling}}function Tm(e,t){for(;tt!==null;){var i=tt;switch(i.tag){case 0:case 11:case 15:oi(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Co(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,tt=o;else e:for(i=e;tt!==null;){o=tt;var s=o.sibling,l=o.return;if(um(o),o===i){tt=null;break e}if(s!==null){s.return=l,tt=s;break e}tt=l}}}var dA={getCacheForType:function(e){var t=rt(Qe),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return rt(Qe).controller.signal}},fA=typeof WeakMap=="function"?WeakMap:Map,ve=0,Me=null,se=null,le=0,Ee=0,Kt=null,ri=!1,ka=!1,lu=!1,Bn=0,Be=0,si=0,Qi=0,uu=0,Gt=0,Oa=0,Lo=null,It=null,hu=!1,as=0,Am=0,os=1/0,rs=null,ci=null,$e=0,li=null,Ma=null,Kn=0,du=0,fu=null,Sm=null,zo=0,gu=null;function qt(){return(ve&2)!==0&&le!==0?le&-le:N.T!==null?Tu():zd()}function Em(){if(Gt===0)if((le&536870912)===0||de){var e=gr;gr<<=1,(gr&3932160)===0&&(gr=262144),Gt=e}else Gt=536870912;return e=xt.current,e!==null&&(e.flags|=32),Gt}function kt(e,t,i){(e===Me&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)&&(Na(e,0),ui(e,le,Gt,!1)),io(e,i),((ve&2)===0||e!==Me)&&(e===Me&&((ve&2)===0&&(Qi|=i),Be===4&&ui(e,le,Gt,!1)),Tn(e))}function _m(e,t,i){if((ve&6)!==0)throw Error(r(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||no(e,t),s=o?pA(e,t):pu(e,t,!0),l=o;do{if(s===0){ka&&!o&&ui(e,t,0,!1);break}else{if(i=e.current.alternate,l&&!gA(i)){s=pu(e,t,!1),l=!1;continue}if(s===2){if(l=t,e.errorRecoveryDisabledLanes&l)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var p=e;s=Lo;var C=p.current.memoizedState.isDehydrated;if(C&&(Na(p,f).flags|=256),f=pu(p,f,!1),f!==2){if(lu&&!C){p.errorRecoveryDisabledLanes|=l,Qi|=l,s=4;break e}l=It,It=s,l!==null&&(It===null?It=l:It.push.apply(It,l))}s=f}if(l=!1,s!==2)continue}}if(s===1){Na(e,0),ui(e,t,0,!0);break}e:{switch(o=e,l=s,l){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:ui(o,t,Gt,!ri);break e;case 2:It=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(s=as+300-Ut(),10<s)){if(ui(o,t,Gt,!ri),pr(o,0,!0)!==0)break e;Kn=t,o.timeoutHandle=tp(bm.bind(null,o,i,It,rs,hu,t,Gt,Qi,Oa,ri,l,"Throttled",-0,0),s);break e}bm(o,i,It,rs,hu,t,Gt,Qi,Oa,ri,l,null,-0,0)}}break}while(!0);Tn(e)}function bm(e,t,i,o,s,l,f,p,C,w,M,U,R,I){if(e.timeoutHandle=-1,U=t.subtreeFlags,U&8192||(U&16785408)===16785408){U={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},ym(t,l,U);var q=(l&62914560)===l?as-Ut():(l&4194048)===l?Am-Ut():0;if(q=$A(U,q),q!==null){Kn=l,e.cancelPendingCommit=q(Dm.bind(null,e,t,l,i,o,s,f,p,C,M,U,null,R,I)),ui(e,l,f,!w);return}}Dm(e,t,l,i,o,s,f,p,C)}function gA(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var s=i[o],l=s.getSnapshot;s=s.value;try{if(!zt(l(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ui(e,t,i,o){t&=~uu,t&=~Qi,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var s=t;0<s;){var l=31-Lt(s),f=1<<l;o[l]=-1,s&=~f}i!==0&&Ud(e,i,t)}function ss(){return(ve&6)===0?(Po(0),!1):!0}function mu(){if(se!==null){if(Ee===0)var e=se.return;else e=se,On=zi=null,Ml(e),Sa=null,To=0,e=se;for(;e!==null;)nm(e.alternate,e),e=e.return;se=null}}function Na(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,UA(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Kn=0,mu(),Me=e,se=i=In(e.current,null),le=t,Ee=0,Kt=null,ri=!1,ka=no(e,t),lu=!1,Oa=Gt=uu=Qi=si=Be=0,It=Lo=null,hu=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var s=31-Lt(o),l=1<<s;t|=e[s],o&=~l}return Bn=t,Ir(),i}function wm(e,t){ne=null,N.H=Io,t===Aa||t===Lr?(t=Gf(),Ee=3):t===vl?(t=Gf(),Ee=4):Ee=t===Fl?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Kt=t,se===null&&(Be=1,Jr(e,Zt(t,e.current)))}function Rm(){var e=xt.current;return e===null?!0:(le&4194048)===le?tn===null:(le&62914560)===le||(le&536870912)!==0?e===tn:!1}function Im(){var e=N.H;return N.H=Io,e===null?Io:e}function km(){var e=N.A;return N.A=dA,e}function cs(){Be=4,ri||(le&4194048)!==le&&xt.current!==null||(ka=!0),(si&134217727)===0&&(Qi&134217727)===0||Me===null||ui(Me,le,Gt,!1)}function pu(e,t,i){var o=ve;ve|=2;var s=Im(),l=km();(Me!==e||le!==t)&&(rs=null,Na(e,t)),t=!1;var f=Be;e:do try{if(Ee!==0&&se!==null){var p=se,C=Kt;switch(Ee){case 8:mu(),f=6;break e;case 3:case 2:case 9:case 6:xt.current===null&&(t=!0);var w=Ee;if(Ee=0,Kt=null,Da(e,p,C,w),i&&ka){f=0;break e}break;default:w=Ee,Ee=0,Kt=null,Da(e,p,C,w)}}mA(),f=Be;break}catch(M){wm(e,M)}while(!0);return t&&e.shellSuspendCounter++,On=zi=null,ve=o,N.H=s,N.A=l,se===null&&(Me=null,le=0,Ir()),f}function mA(){for(;se!==null;)Om(se)}function pA(e,t){var i=ve;ve|=2;var o=Im(),s=km();Me!==e||le!==t?(rs=null,os=Ut()+500,Na(e,t)):ka=no(e,t);e:do try{if(Ee!==0&&se!==null){t=se;var l=Kt;t:switch(Ee){case 1:Ee=0,Kt=null,Da(e,t,l,1);break;case 2:case 9:if(Bf(l)){Ee=0,Kt=null,Mm(t);break}t=function(){Ee!==2&&Ee!==9||Me!==e||(Ee=7),Tn(e)},l.then(t,t);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:Bf(l)?(Ee=0,Kt=null,Mm(t)):(Ee=0,Kt=null,Da(e,t,l,7));break;case 5:var f=null;switch(se.tag){case 26:f=se.memoizedState;case 5:case 27:var p=se;if(f?pp(f):p.stateNode.complete){Ee=0,Kt=null;var C=p.sibling;if(C!==null)se=C;else{var w=p.return;w!==null?(se=w,ls(w)):se=null}break t}}Ee=0,Kt=null,Da(e,t,l,5);break;case 6:Ee=0,Kt=null,Da(e,t,l,6);break;case 8:mu(),Be=6;break e;default:throw Error(r(462))}}yA();break}catch(M){wm(e,M)}while(!0);return On=zi=null,N.H=o,N.A=s,ve=i,se!==null?0:(Me=null,le=0,Ir(),Be)}function yA(){for(;se!==null&&!Bv();)Om(se)}function Om(e){var t=em(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?ls(e):se=t}function Mm(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Vg(i,t,t.pendingProps,t.type,void 0,le);break;case 11:t=Vg(i,t,t.pendingProps,t.type.render,t.ref,le);break;case 5:Ml(t);default:nm(i,t),t=se=kf(t,Bn),t=em(i,t,Bn)}e.memoizedProps=e.pendingProps,t===null?ls(e):se=t}function Da(e,t,i,o){On=zi=null,Ml(t),Sa=null,To=0;var s=t.return;try{if(oA(e,s,t,i,le)){Be=1,Jr(e,Zt(i,e.current)),se=null;return}}catch(l){if(s!==null)throw se=s,l;Be=1,Jr(e,Zt(i,e.current)),se=null;return}t.flags&32768?(de||o===1?e=!0:ka||(le&536870912)!==0?e=!1:(ri=e=!0,(o===2||o===9||o===3||o===6)&&(o=xt.current,o!==null&&o.tag===13&&(o.flags|=16384))),Nm(t,e)):ls(t)}function ls(e){var t=e;do{if((t.flags&32768)!==0){Nm(t,ri);return}e=t.return;var i=cA(t.alternate,t,Bn);if(i!==null){se=i;return}if(t=t.sibling,t!==null){se=t;return}se=t=e}while(t!==null);Be===0&&(Be=5)}function Nm(e,t){do{var i=lA(e.alternate,e);if(i!==null){i.flags&=32767,se=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){se=e;return}se=e=i}while(e!==null);Be=6,se=null}function Dm(e,t,i,o,s,l,f,p,C){e.cancelPendingCommit=null;do us();while($e!==0);if((ve&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(l=t.lanes|t.childLanes,l|=al,Jv(e,i,l,f,p,C),e===Me&&(se=Me=null,le=0),Ma=t,li=e,Kn=i,du=l,fu=s,Sm=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,AA(dr,function(){return Pm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,s=B.p,B.p=2,f=ve,ve|=4;try{uA(e,t,i)}finally{ve=f,B.p=s,N.T=o}}$e=1,Um(),Hm(),Lm()}}function Um(){if($e===1){$e=0;var e=li,t=Ma,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var o=B.p;B.p=2;var s=ve;ve|=4;try{gm(t,e);var l=Iu,f=Tf(e.containerInfo),p=l.focusedElem,C=l.selectionRange;if(f!==p&&p&&p.ownerDocument&&vf(p.ownerDocument.documentElement,p)){if(C!==null&&Wc(p)){var w=C.start,M=C.end;if(M===void 0&&(M=w),"selectionStart"in p)p.selectionStart=w,p.selectionEnd=Math.min(M,p.value.length);else{var U=p.ownerDocument||document,R=U&&U.defaultView||window;if(R.getSelection){var I=R.getSelection(),q=p.textContent.length,J=Math.min(C.start,q),Ie=C.end===void 0?J:Math.min(C.end,q);!I.extend&&J>Ie&&(f=Ie,Ie=J,J=f);var E=Cf(p,J),T=Cf(p,Ie);if(E&&T&&(I.rangeCount!==1||I.anchorNode!==E.node||I.anchorOffset!==E.offset||I.focusNode!==T.node||I.focusOffset!==T.offset)){var b=U.createRange();b.setStart(E.node,E.offset),I.removeAllRanges(),J>Ie?(I.addRange(b),I.extend(T.node,T.offset)):(b.setEnd(T.node,T.offset),I.addRange(b))}}}}for(U=[],I=p;I=I.parentNode;)I.nodeType===1&&U.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<U.length;p++){var D=U[p];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Ss=!!Ru,Iu=Ru=null}finally{ve=s,B.p=o,N.T=i}}e.current=t,$e=2}}function Hm(){if($e===2){$e=0;var e=li,t=Ma,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var o=B.p;B.p=2;var s=ve;ve|=4;try{lm(e,t.alternate,t)}finally{ve=s,B.p=o,N.T=i}}$e=3}}function Lm(){if($e===4||$e===3){$e=0,Kv();var e=li,t=Ma,i=Kn,o=Sm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?$e=5:($e=0,Ma=li=null,zm(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(ci=null),Uc(i),t=t.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(to,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=N.T,s=B.p,B.p=2,N.T=null;try{for(var l=e.onRecoverableError,f=0;f<o.length;f++){var p=o[f];l(p.value,{componentStack:p.stack})}}finally{N.T=t,B.p=s}}(Kn&3)!==0&&us(),Tn(e),s=e.pendingLanes,(i&261930)!==0&&(s&42)!==0?e===gu?zo++:(zo=0,gu=e):zo=0,Po(0)}}function zm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Co(t)))}function us(){return Um(),Hm(),Lm(),Pm()}function Pm(){if($e!==5)return!1;var e=li,t=du;du=0;var i=Uc(Kn),o=N.T,s=B.p;try{B.p=32>i?32:i,N.T=null,i=fu,fu=null;var l=li,f=Kn;if($e=0,Ma=li=null,Kn=0,(ve&6)!==0)throw Error(r(331));var p=ve;if(ve|=4,vm(l.current),pm(l,l.current,f,i),ve=p,Po(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(to,l)}catch{}return!0}finally{B.p=s,N.T=o,zm(e,t)}}function xm(e,t,i){t=Zt(i,t),t=Ql(e.stateNode,t,2),e=ni(e,t,2),e!==null&&(io(e,2),Tn(e))}function _e(e,t,i){if(e.tag===3)xm(e,e,i);else for(;t!==null;){if(t.tag===3){xm(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ci===null||!ci.has(o))){e=Zt(i,e),i=Bg(2),o=ni(t,i,2),o!==null&&(Kg(i,o,t,e),io(o,2),Tn(o));break}}t=t.return}}function yu(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new fA;var s=new Set;o.set(t,s)}else s=o.get(t),s===void 0&&(s=new Set,o.set(t,s));s.has(i)||(lu=!0,s.add(i),e=CA.bind(null,e,t,i),t.then(e,e))}function CA(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Me===e&&(le&i)===i&&(Be===4||Be===3&&(le&62914560)===le&&300>Ut()-as?(ve&2)===0&&Na(e,0):uu|=i,Oa===le&&(Oa=0)),Tn(e)}function Bm(e,t){t===0&&(t=Dd()),e=Ui(e,t),e!==null&&(io(e,t),Tn(e))}function vA(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Bm(e,i)}function TA(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(t),Bm(e,i)}function AA(e,t){return Oc(e,t)}var hs=null,Ua=null,Cu=!1,ds=!1,vu=!1,hi=0;function Tn(e){e!==Ua&&e.next===null&&(Ua===null?hs=Ua=e:Ua=Ua.next=e),ds=!0,Cu||(Cu=!0,EA())}function Po(e,t){if(!vu&&ds){vu=!0;do for(var i=!1,o=hs;o!==null;){if(e!==0){var s=o.pendingLanes;if(s===0)var l=0;else{var f=o.suspendedLanes,p=o.pingedLanes;l=(1<<31-Lt(42|e)+1)-1,l&=s&~(f&~p),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(i=!0,jm(o,l))}else l=le,l=pr(o,o===Me?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(l&3)===0||no(o,l)||(i=!0,jm(o,l));o=o.next}while(i);vu=!1}}function SA(){Km()}function Km(){ds=Cu=!1;var e=0;hi!==0&&DA()&&(e=hi);for(var t=Ut(),i=null,o=hs;o!==null;){var s=o.next,l=Gm(o,t);l===0?(o.next=null,i===null?hs=s:i.next=s,s===null&&(Ua=i)):(i=o,(e!==0||(l&3)!==0)&&(ds=!0)),o=s}$e!==0&&$e!==5||Po(e),hi!==0&&(hi=0)}function Gm(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var f=31-Lt(l),p=1<<f,C=s[f];C===-1?((p&i)===0||(p&o)!==0)&&(s[f]=Xv(p,t)):C<=t&&(e.expiredLanes|=p),l&=~p}if(t=Me,i=le,i=pr(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Mc(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||no(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&Mc(o),Uc(i)){case 2:case 8:i=Md;break;case 32:i=dr;break;case 268435456:i=Nd;break;default:i=dr}return o=qm.bind(null,e),i=Oc(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&Mc(o),e.callbackPriority=2,e.callbackNode=null,2}function qm(e,t){if($e!==0&&$e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(us()&&e.callbackNode!==i)return null;var o=le;return o=pr(e,e===Me?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(_m(e,o,t),Gm(e,Ut()),e.callbackNode!=null&&e.callbackNode===i?qm.bind(null,e):null)}function jm(e,t){if(us())return null;_m(e,t,!0)}function EA(){HA(function(){(ve&6)!==0?Oc(Od,SA):Km()})}function Tu(){if(hi===0){var e=va;e===0&&(e=fr,fr<<=1,(fr&261888)===0&&(fr=256)),hi=e}return hi}function Ym(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Tr(""+e)}function Qm(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function _A(e,t,i,o,s){if(t==="submit"&&i&&i.stateNode===s){var l=Ym((s[Et]||null).action),f=o.submitter;f&&(t=(t=f[Et]||null)?Ym(t.formAction):f.getAttribute("formAction"),t!==null&&(l=t,f=null));var p=new _r("action","action",null,o,s);e.push({event:p,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(hi!==0){var C=f?Qm(s,f):new FormData(s);Bl(i,{pending:!0,data:C,method:s.method,action:l},null,C)}}else typeof l=="function"&&(p.preventDefault(),C=f?Qm(s,f):new FormData(s),Bl(i,{pending:!0,data:C,method:s.method,action:l},l,C))},currentTarget:s}]})}}for(var Au=0;Au<il.length;Au++){var Su=il[Au],bA=Su.toLowerCase(),wA=Su[0].toUpperCase()+Su.slice(1);ln(bA,"on"+wA)}ln(Ef,"onAnimationEnd"),ln(_f,"onAnimationIteration"),ln(bf,"onAnimationStart"),ln("dblclick","onDoubleClick"),ln("focusin","onFocus"),ln("focusout","onBlur"),ln(GT,"onTransitionRun"),ln(qT,"onTransitionStart"),ln(jT,"onTransitionCancel"),ln(wf,"onTransitionEnd"),oa("onMouseEnter",["mouseout","mouseover"]),oa("onMouseLeave",["mouseout","mouseover"]),oa("onPointerEnter",["pointerout","pointerover"]),oa("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xo));function Fm(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],s=o.event;o=o.listeners;e:{var l=void 0;if(t)for(var f=o.length-1;0<=f;f--){var p=o[f],C=p.instance,w=p.currentTarget;if(p=p.listener,C!==l&&s.isPropagationStopped())break e;l=p,s.currentTarget=w;try{l(s)}catch(M){Rr(M)}s.currentTarget=null,l=C}else for(f=0;f<o.length;f++){if(p=o[f],C=p.instance,w=p.currentTarget,p=p.listener,C!==l&&s.isPropagationStopped())break e;l=p,s.currentTarget=w;try{l(s)}catch(M){Rr(M)}s.currentTarget=null,l=C}}}}function ce(e,t){var i=t[Hc];i===void 0&&(i=t[Hc]=new Set);var o=e+"__bubble";i.has(o)||(Vm(t,e,2,!1),i.add(o))}function Eu(e,t,i){var o=0;t&&(o|=4),Vm(i,e,o,t)}var fs="_reactListening"+Math.random().toString(36).slice(2);function _u(e){if(!e[fs]){e[fs]=!0,Bd.forEach(function(i){i!=="selectionchange"&&(RA.has(i)||Eu(i,!1,e),Eu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fs]||(t[fs]=!0,Eu("selectionchange",!1,t))}}function Vm(e,t,i,o){switch(Ep(t)){case 2:var s=tS;break;case 8:s=nS;break;default:s=xu}i=s.bind(null,t,i,e),s=void 0,!jc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),o?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function bu(e,t,i,o,s){var l=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var p=o.stateNode.containerInfo;if(p===s)break;if(f===4)for(f=o.return;f!==null;){var C=f.tag;if((C===3||C===4)&&f.stateNode.containerInfo===s)return;f=f.return}for(;p!==null;){if(f=na(p),f===null)return;if(C=f.tag,C===5||C===6||C===26||C===27){o=l=f;continue e}p=p.parentNode}}o=o.return}$d(function(){var w=l,M=Gc(i),U=[];e:{var R=Rf.get(e);if(R!==void 0){var I=_r,q=e;switch(e){case"keypress":if(Sr(i)===0)break e;case"keydown":case"keyup":I=TT;break;case"focusin":q="focus",I=Vc;break;case"focusout":q="blur",I=Vc;break;case"beforeblur":case"afterblur":I=Vc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=cT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=ET;break;case Ef:case _f:case bf:I=hT;break;case wf:I=bT;break;case"scroll":case"scrollend":I=rT;break;case"wheel":I=RT;break;case"copy":case"cut":case"paste":I=fT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=af;break;case"toggle":case"beforetoggle":I=kT}var J=(t&4)!==0,Ie=!J&&(e==="scroll"||e==="scrollend"),E=J?R!==null?R+"Capture":null:R;J=[];for(var T=w,b;T!==null;){var D=T;if(b=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||b===null||E===null||(D=ro(T,E),D!=null&&J.push(Bo(T,D,b))),Ie)break;T=T.return}0<J.length&&(R=new I(R,q,null,i,M),U.push({event:R,listeners:J}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",R&&i!==Kc&&(q=i.relatedTarget||i.fromElement)&&(na(q)||q[ta]))break e;if((I||R)&&(R=M.window===M?M:(R=M.ownerDocument)?R.defaultView||R.parentWindow:window,I?(q=i.relatedTarget||i.toElement,I=w,q=q?na(q):null,q!==null&&(Ie=h(q),J=q.tag,q!==Ie||J!==5&&J!==27&&J!==6)&&(q=null)):(I=null,q=w),I!==q)){if(J=tf,D="onMouseLeave",E="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(J=af,D="onPointerLeave",E="onPointerEnter",T="pointer"),Ie=I==null?R:oo(I),b=q==null?R:oo(q),R=new J(D,T+"leave",I,i,M),R.target=Ie,R.relatedTarget=b,D=null,na(M)===w&&(J=new J(E,T+"enter",q,i,M),J.target=b,J.relatedTarget=Ie,D=J),Ie=D,I&&q)t:{for(J=IA,E=I,T=q,b=0,D=E;D;D=J(D))b++;D=0;for(var V=T;V;V=J(V))D++;for(;0<b-D;)E=J(E),b--;for(;0<D-b;)T=J(T),D--;for(;b--;){if(E===T||T!==null&&E===T.alternate){J=E;break t}E=J(E),T=J(T)}J=null}else J=null;I!==null&&Xm(U,R,I,J,!1),q!==null&&Ie!==null&&Xm(U,Ie,q,J,!0)}}e:{if(R=w?oo(w):window,I=R.nodeName&&R.nodeName.toLowerCase(),I==="select"||I==="input"&&R.type==="file")var pe=df;else if(uf(R))if(ff)pe=xT;else{pe=zT;var Q=LT}else I=R.nodeName,!I||I.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?w&&Bc(w.elementType)&&(pe=df):pe=PT;if(pe&&(pe=pe(e,w))){hf(U,pe,i,M);break e}Q&&Q(e,R,w),e==="focusout"&&w&&R.type==="number"&&w.memoizedProps.value!=null&&xc(R,"number",R.value)}switch(Q=w?oo(w):window,e){case"focusin":(uf(Q)||Q.contentEditable==="true")&&(ha=Q,el=w,mo=null);break;case"focusout":mo=el=ha=null;break;case"mousedown":tl=!0;break;case"contextmenu":case"mouseup":case"dragend":tl=!1,Af(U,i,M);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":Af(U,i,M)}var ie;if(Jc)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else ua?cf(e,i)&&(ue="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ue="onCompositionStart");ue&&(of&&i.locale!=="ko"&&(ua||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&ua&&(ie=Wd()):(Xn=M,Yc="value"in Xn?Xn.value:Xn.textContent,ua=!0)),Q=gs(w,ue),0<Q.length&&(ue=new nf(ue,e,null,i,M),U.push({event:ue,listeners:Q}),ie?ue.data=ie:(ie=lf(i),ie!==null&&(ue.data=ie)))),(ie=MT?NT(e,i):DT(e,i))&&(ue=gs(w,"onBeforeInput"),0<ue.length&&(Q=new nf("onBeforeInput","beforeinput",null,i,M),U.push({event:Q,listeners:ue}),Q.data=ie)),_A(U,e,w,i,M)}Fm(U,t)})}function Bo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function gs(e,t){for(var i=t+"Capture",o=[];e!==null;){var s=e,l=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||l===null||(s=ro(e,i),s!=null&&o.unshift(Bo(e,s,l)),s=ro(e,t),s!=null&&o.push(Bo(e,s,l))),e.tag===3)return o;e=e.return}return[]}function IA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xm(e,t,i,o,s){for(var l=t._reactName,f=[];i!==null&&i!==o;){var p=i,C=p.alternate,w=p.stateNode;if(p=p.tag,C!==null&&C===o)break;p!==5&&p!==26&&p!==27||w===null||(C=w,s?(w=ro(i,l),w!=null&&f.unshift(Bo(i,w,C))):s||(w=ro(i,l),w!=null&&f.push(Bo(i,w,C)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var kA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function Jm(e){return(typeof e=="string"?e:""+e).replace(kA,`
`).replace(OA,"")}function Zm(e,t){return t=Jm(t),Jm(e)===t}function Re(e,t,i,o,s,l){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||sa(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&sa(e,""+o);break;case"className":Cr(e,"class",o);break;case"tabIndex":Cr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Cr(e,i,o);break;case"style":Jd(e,o,l);break;case"data":if(t!=="object"){Cr(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Tr(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(i==="formAction"?(t!=="input"&&Re(e,t,"name",s.name,s,null),Re(e,t,"formEncType",s.formEncType,s,null),Re(e,t,"formMethod",s.formMethod,s,null),Re(e,t,"formTarget",s.formTarget,s,null)):(Re(e,t,"encType",s.encType,s,null),Re(e,t,"method",s.method,s,null),Re(e,t,"target",s.target,s,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Tr(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=wn);break;case"onScroll":o!=null&&ce("scroll",e);break;case"onScrollEnd":o!=null&&ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Tr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ce("beforetoggle",e),ce("toggle",e),yr(e,"popover",o);break;case"xlinkActuate":bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":bn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":bn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":bn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":bn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":yr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=aT.get(i)||i,yr(e,i,o))}}function wu(e,t,i,o,s,l){switch(i){case"style":Jd(e,o,l);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof o=="string"?sa(e,o):(typeof o=="number"||typeof o=="bigint")&&sa(e,""+o);break;case"onScroll":o!=null&&ce("scroll",e);break;case"onScrollEnd":o!=null&&ce("scrollend",e);break;case"onClick":o!=null&&(e.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),l=e[Et]||null,l=l!=null?l[i]:null,typeof l=="function"&&e.removeEventListener(t,l,s),typeof o=="function")){typeof l!="function"&&l!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,s);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):yr(e,i,o)}}}function ct(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",e),ce("load",e);var o=!1,s=!1,l;for(l in i)if(i.hasOwnProperty(l)){var f=i[l];if(f!=null)switch(l){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Re(e,t,l,f,i,null)}}s&&Re(e,t,"srcSet",i.srcSet,i,null),o&&Re(e,t,"src",i.src,i,null);return;case"input":ce("invalid",e);var p=l=f=s=null,C=null,w=null;for(o in i)if(i.hasOwnProperty(o)){var M=i[o];if(M!=null)switch(o){case"name":s=M;break;case"type":f=M;break;case"checked":C=M;break;case"defaultChecked":w=M;break;case"value":l=M;break;case"defaultValue":p=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,t));break;default:Re(e,t,o,M,i,null)}}Qd(e,l,p,C,w,f,s,!1);return;case"select":ce("invalid",e),o=f=l=null;for(s in i)if(i.hasOwnProperty(s)&&(p=i[s],p!=null))switch(s){case"value":l=p;break;case"defaultValue":f=p;break;case"multiple":o=p;default:Re(e,t,s,p,i,null)}t=l,i=f,e.multiple=!!o,t!=null?ra(e,!!o,t,!1):i!=null&&ra(e,!!o,i,!0);return;case"textarea":ce("invalid",e),l=s=o=null;for(f in i)if(i.hasOwnProperty(f)&&(p=i[f],p!=null))switch(f){case"value":o=p;break;case"defaultValue":s=p;break;case"children":l=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:Re(e,t,f,p,i,null)}Vd(e,o,s,l);return;case"option":for(C in i)i.hasOwnProperty(C)&&(o=i[C],o!=null)&&(C==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Re(e,t,C,o,i,null));return;case"dialog":ce("beforetoggle",e),ce("toggle",e),ce("cancel",e),ce("close",e);break;case"iframe":case"object":ce("load",e);break;case"video":case"audio":for(o=0;o<xo.length;o++)ce(xo[o],e);break;case"image":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"embed":case"source":case"link":ce("error",e),ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in i)if(i.hasOwnProperty(w)&&(o=i[w],o!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Re(e,t,w,o,i,null)}return;default:if(Bc(t)){for(M in i)i.hasOwnProperty(M)&&(o=i[M],o!==void 0&&wu(e,t,M,o,i,void 0));return}}for(p in i)i.hasOwnProperty(p)&&(o=i[p],o!=null&&Re(e,t,p,o,i,null))}function MA(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,l=null,f=null,p=null,C=null,w=null,M=null;for(I in i){var U=i[I];if(i.hasOwnProperty(I)&&U!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":C=U;default:o.hasOwnProperty(I)||Re(e,t,I,null,o,U)}}for(var R in o){var I=o[R];if(U=i[R],o.hasOwnProperty(R)&&(I!=null||U!=null))switch(R){case"type":l=I;break;case"name":s=I;break;case"checked":w=I;break;case"defaultChecked":M=I;break;case"value":f=I;break;case"defaultValue":p=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,t));break;default:I!==U&&Re(e,t,R,I,o,U)}}Pc(e,f,p,C,w,M,l,s);return;case"select":I=f=p=R=null;for(l in i)if(C=i[l],i.hasOwnProperty(l)&&C!=null)switch(l){case"value":break;case"multiple":I=C;default:o.hasOwnProperty(l)||Re(e,t,l,null,o,C)}for(s in o)if(l=o[s],C=i[s],o.hasOwnProperty(s)&&(l!=null||C!=null))switch(s){case"value":R=l;break;case"defaultValue":p=l;break;case"multiple":f=l;default:l!==C&&Re(e,t,s,l,o,C)}t=p,i=f,o=I,R!=null?ra(e,!!i,R,!1):!!o!=!!i&&(t!=null?ra(e,!!i,t,!0):ra(e,!!i,i?[]:"",!1));return;case"textarea":I=R=null;for(p in i)if(s=i[p],i.hasOwnProperty(p)&&s!=null&&!o.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Re(e,t,p,null,o,s)}for(f in o)if(s=o[f],l=i[f],o.hasOwnProperty(f)&&(s!=null||l!=null))switch(f){case"value":R=s;break;case"defaultValue":I=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(r(91));break;default:s!==l&&Re(e,t,f,s,o,l)}Fd(e,R,I);return;case"option":for(var q in i)R=i[q],i.hasOwnProperty(q)&&R!=null&&!o.hasOwnProperty(q)&&(q==="selected"?e.selected=!1:Re(e,t,q,null,o,R));for(C in o)R=o[C],I=i[C],o.hasOwnProperty(C)&&R!==I&&(R!=null||I!=null)&&(C==="selected"?e.selected=R&&typeof R!="function"&&typeof R!="symbol":Re(e,t,C,R,o,I));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var J in i)R=i[J],i.hasOwnProperty(J)&&R!=null&&!o.hasOwnProperty(J)&&Re(e,t,J,null,o,R);for(w in o)if(R=o[w],I=i[w],o.hasOwnProperty(w)&&R!==I&&(R!=null||I!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(137,t));break;default:Re(e,t,w,R,o,I)}return;default:if(Bc(t)){for(var Ie in i)R=i[Ie],i.hasOwnProperty(Ie)&&R!==void 0&&!o.hasOwnProperty(Ie)&&wu(e,t,Ie,void 0,o,R);for(M in o)R=o[M],I=i[M],!o.hasOwnProperty(M)||R===I||R===void 0&&I===void 0||wu(e,t,M,R,o,I);return}}for(var E in i)R=i[E],i.hasOwnProperty(E)&&R!=null&&!o.hasOwnProperty(E)&&Re(e,t,E,null,o,R);for(U in o)R=o[U],I=i[U],!o.hasOwnProperty(U)||R===I||R==null&&I==null||Re(e,t,U,R,o,I)}function $m(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var s=i[o],l=s.transferSize,f=s.initiatorType,p=s.duration;if(l&&p&&$m(f)){for(f=0,p=s.responseEnd,o+=1;o<i.length;o++){var C=i[o],w=C.startTime;if(w>p)break;var M=C.transferSize,U=C.initiatorType;M&&$m(U)&&(C=C.responseEnd,f+=M*(C<p?1:(p-w)/(C-w)))}if(--o,t+=8*(l+f)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ru=null,Iu=null;function ms(e){return e.nodeType===9?e:e.ownerDocument}function Wm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ep(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ou=null;function DA(){var e=window.event;return e&&e.type==="popstate"?e===Ou?!1:(Ou=e,!0):(Ou=null,!1)}var tp=typeof setTimeout=="function"?setTimeout:void 0,UA=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,HA=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(e){return np.resolve(null).then(e).catch(LA)}:tp;function LA(e){setTimeout(function(){throw e})}function di(e){return e==="head"}function ip(e,t){var i=t,o=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(s),Pa(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")Ko(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Ko(i);for(var l=i.firstChild;l;){var f=l.nextSibling,p=l.nodeName;l[ao]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&l.rel.toLowerCase()==="stylesheet"||i.removeChild(l),l=f}}else i==="body"&&Ko(e.ownerDocument.body);i=s}while(i);Pa(t)}function ap(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Mu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Mu(i),Lc(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function zA(e,t,i,o){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ao])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=nn(e.nextSibling),e===null)break}return null}function PA(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=nn(e.nextSibling),e===null))return null;return e}function op(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=nn(e.nextSibling),e===null))return null;return e}function Nu(e){return e.data==="$?"||e.data==="$~"}function Du(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xA(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Uu=null;function rp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return nn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function sp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function cp(e,t,i){switch(t=ms(i),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ko(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Lc(e)}var an=new Map,lp=new Set;function ps(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gn=B.d;B.d={f:BA,r:KA,D:GA,C:qA,L:jA,m:YA,X:FA,S:QA,M:VA};function BA(){var e=Gn.f(),t=ss();return e||t}function KA(e){var t=ia(e);t!==null&&t.tag===5&&t.type==="form"?wg(t):Gn.r(e)}var Ha=typeof document>"u"?null:document;function up(e,t,i){var o=Ha;if(o&&typeof t=="string"&&t){var s=Xt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),lp.has(s)||(lp.add(s),e={rel:e,crossOrigin:i,href:t},o.querySelector(s)===null&&(t=o.createElement("link"),ct(t,"link",e),et(t),o.head.appendChild(t)))}}function GA(e){Gn.D(e),up("dns-prefetch",e,null)}function qA(e,t){Gn.C(e,t),up("preconnect",e,t)}function jA(e,t,i){Gn.L(e,t,i);var o=Ha;if(o&&e&&t){var s='link[rel="preload"][as="'+Xt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+Xt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+Xt(i.imageSizes)+'"]')):s+='[href="'+Xt(e)+'"]';var l=s;switch(t){case"style":l=La(e);break;case"script":l=za(e)}an.has(l)||(e=_({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),an.set(l,e),o.querySelector(s)!==null||t==="style"&&o.querySelector(Go(l))||t==="script"&&o.querySelector(qo(l))||(t=o.createElement("link"),ct(t,"link",e),et(t),o.head.appendChild(t)))}}function YA(e,t){Gn.m(e,t);var i=Ha;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Xt(o)+'"][href="'+Xt(e)+'"]',l=s;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=za(e)}if(!an.has(l)&&(e=_({rel:"modulepreload",href:e},t),an.set(l,e),i.querySelector(s)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(qo(l)))return}o=i.createElement("link"),ct(o,"link",e),et(o),i.head.appendChild(o)}}}function QA(e,t,i){Gn.S(e,t,i);var o=Ha;if(o&&e){var s=aa(o).hoistableStyles,l=La(e);t=t||"default";var f=s.get(l);if(!f){var p={loading:0,preload:null};if(f=o.querySelector(Go(l)))p.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},i),(i=an.get(l))&&Hu(e,i);var C=f=o.createElement("link");et(C),ct(C,"link",e),C._p=new Promise(function(w,M){C.onload=w,C.onerror=M}),C.addEventListener("load",function(){p.loading|=1}),C.addEventListener("error",function(){p.loading|=2}),p.loading|=4,ys(f,t,o)}f={type:"stylesheet",instance:f,count:1,state:p},s.set(l,f)}}}function FA(e,t){Gn.X(e,t);var i=Ha;if(i&&e){var o=aa(i).hoistableScripts,s=za(e),l=o.get(s);l||(l=i.querySelector(qo(s)),l||(e=_({src:e,async:!0},t),(t=an.get(s))&&Lu(e,t),l=i.createElement("script"),et(l),ct(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},o.set(s,l))}}function VA(e,t){Gn.M(e,t);var i=Ha;if(i&&e){var o=aa(i).hoistableScripts,s=za(e),l=o.get(s);l||(l=i.querySelector(qo(s)),l||(e=_({src:e,async:!0,type:"module"},t),(t=an.get(s))&&Lu(e,t),l=i.createElement("script"),et(l),ct(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},o.set(s,l))}}function hp(e,t,i,o){var s=(s=Y.current)?ps(s):null;if(!s)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=La(i.href),i=aa(s).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=La(i.href);var l=aa(s).hoistableStyles,f=l.get(e);if(f||(s=s.ownerDocument||s,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,f),(l=s.querySelector(Go(e)))&&!l._p&&(f.instance=l,f.state.loading=5),an.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},an.set(e,i),l||XA(s,e,i,f.state))),t&&o===null)throw Error(r(528,""));return f}if(t&&o!==null)throw Error(r(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=za(i),i=aa(s).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function La(e){return'href="'+Xt(e)+'"'}function Go(e){return'link[rel="stylesheet"]['+e+"]"}function dp(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function XA(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),ct(t,"link",i),et(t),e.head.appendChild(t))}function za(e){return'[src="'+Xt(e)+'"]'}function qo(e){return"script[async]"+e}function fp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Xt(i.href)+'"]');if(o)return t.instance=o,et(o),o;var s=_({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),et(o),ct(o,"style",s),ys(o,i.precedence,e),t.instance=o;case"stylesheet":s=La(i.href);var l=e.querySelector(Go(s));if(l)return t.state.loading|=4,t.instance=l,et(l),l;o=dp(i),(s=an.get(s))&&Hu(o,s),l=(e.ownerDocument||e).createElement("link"),et(l);var f=l;return f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),ct(l,"link",o),t.state.loading|=4,ys(l,i.precedence,e),t.instance=l;case"script":return l=za(i.src),(s=e.querySelector(qo(l)))?(t.instance=s,et(s),s):(o=i,(s=an.get(l))&&(o=_({},i),Lu(o,s)),e=e.ownerDocument||e,s=e.createElement("script"),et(s),ct(s,"link",o),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,ys(o,i.precedence,e));return t.instance}function ys(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=o.length?o[o.length-1]:null,l=s,f=0;f<o.length;f++){var p=o[f];if(p.dataset.precedence===t)l=p;else if(l!==s)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Cs=null;function gp(e,t,i){if(Cs===null){var o=new Map,s=Cs=new Map;s.set(i,o)}else s=Cs,o=s.get(i),o||(o=new Map,s.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var l=i[s];if(!(l[ao]||l[at]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var f=l.getAttribute(t)||"";f=e+f;var p=o.get(f);p?p.push(l):o.set(f,[l])}}return o}function mp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function JA(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function pp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ZA(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var s=La(o.href),l=t.querySelector(Go(s));if(l){t=l._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=vs.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=l,et(l);return}l=t.ownerDocument||t,o=dp(o),(s=an.get(s))&&Hu(o,s),l=l.createElement("link"),et(l);var f=l;f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),ct(l,"link",o),i.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=vs.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var zu=0;function $A(e,t){return e.stylesheets&&e.count===0&&As(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&As(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+t);0<e.imgBytes&&zu===0&&(zu=62500*NA());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&As(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>zu?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(s)}}:null}function vs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)As(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ts=null;function As(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ts=new Map,t.forEach(WA,e),Ts=null,vs.call(e))}function WA(e,t){if(!(t.state.loading&4)){var i=Ts.get(e);if(i)var o=i.get(null);else{i=new Map,Ts.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<s.length;l++){var f=s[l];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(i.set(f.dataset.precedence,f),o=f)}o&&i.set(null,o)}s=t.instance,f=s.getAttribute("data-precedence"),l=i.get(f)||o,l===o&&i.set(null,s),i.set(f,s),this.count++,o=vs.bind(this),s.addEventListener("load",o),s.addEventListener("error",o),l?l.parentNode.insertBefore(s,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var jo={$$typeof:me,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function eS(e,t,i,o,s,l,f,p,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nc(0),this.hiddenUpdates=Nc(null),this.identifierPrefix=o,this.onUncaughtError=s,this.onCaughtError=l,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function yp(e,t,i,o,s,l,f,p,C,w,M,U){return e=new eS(e,t,i,f,C,w,M,U,p),t=1,l===!0&&(t|=24),l=Pt(3,null,null,t),e.current=l,l.stateNode=e,t=pl(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:o,isDehydrated:i,cache:t},Tl(l),e}function Cp(e){return e?(e=ga,e):ga}function vp(e,t,i,o,s,l){s=Cp(s),o.context===null?o.context=s:o.pendingContext=s,o=ti(t),o.payload={element:i},l=l===void 0?null:l,l!==null&&(o.callback=l),i=ni(e,o,t),i!==null&&(kt(i,e,t),So(i,e,t))}function Tp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Pu(e,t){Tp(e,t),(e=e.alternate)&&Tp(e,t)}function Ap(e){if(e.tag===13||e.tag===31){var t=Ui(e,67108864);t!==null&&kt(t,e,67108864),Pu(e,67108864)}}function Sp(e){if(e.tag===13||e.tag===31){var t=qt();t=Dc(t);var i=Ui(e,t);i!==null&&kt(i,e,t),Pu(e,t)}}var Ss=!0;function tS(e,t,i,o){var s=N.T;N.T=null;var l=B.p;try{B.p=2,xu(e,t,i,o)}finally{B.p=l,N.T=s}}function nS(e,t,i,o){var s=N.T;N.T=null;var l=B.p;try{B.p=8,xu(e,t,i,o)}finally{B.p=l,N.T=s}}function xu(e,t,i,o){if(Ss){var s=Bu(o);if(s===null)bu(e,t,o,Es,i),_p(e,o);else if(aS(s,e,t,i,o))o.stopPropagation();else if(_p(e,o),t&4&&-1<iS.indexOf(e)){for(;s!==null;){var l=ia(s);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var f=ki(l.pendingLanes);if(f!==0){var p=l;for(p.pendingLanes|=2,p.entangledLanes|=2;f;){var C=1<<31-Lt(f);p.entanglements[1]|=C,f&=~C}Tn(l),(ve&6)===0&&(os=Ut()+500,Po(0))}}break;case 31:case 13:p=Ui(l,2),p!==null&&kt(p,l,2),ss(),Pu(l,2)}if(l=Bu(o),l===null&&bu(e,t,o,Es,i),l===s)break;s=l}s!==null&&o.stopPropagation()}else bu(e,t,o,null,i)}}function Bu(e){return e=Gc(e),Ku(e)}var Es=null;function Ku(e){if(Es=null,e=na(e),e!==null){var t=h(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=g(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Es=e,null}function Ep(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gv()){case Od:return 2;case Md:return 8;case dr:case qv:return 32;case Nd:return 268435456;default:return 32}default:return 32}}var Gu=!1,fi=null,gi=null,mi=null,Yo=new Map,Qo=new Map,pi=[],iS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _p(e,t){switch(e){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":Yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(t.pointerId)}}function Fo(e,t,i,o,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:l,targetContainers:[s]},t!==null&&(t=ia(t),t!==null&&Ap(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function aS(e,t,i,o,s){switch(t){case"focusin":return fi=Fo(fi,e,t,i,o,s),!0;case"dragenter":return gi=Fo(gi,e,t,i,o,s),!0;case"mouseover":return mi=Fo(mi,e,t,i,o,s),!0;case"pointerover":var l=s.pointerId;return Yo.set(l,Fo(Yo.get(l)||null,e,t,i,o,s)),!0;case"gotpointercapture":return l=s.pointerId,Qo.set(l,Fo(Qo.get(l)||null,e,t,i,o,s)),!0}return!1}function bp(e){var t=na(e.target);if(t!==null){var i=h(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,Pd(e.priority,function(){Sp(i)});return}}else if(t===31){if(t=g(i),t!==null){e.blockedOn=t,Pd(e.priority,function(){Sp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _s(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Bu(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Kc=o,i.target.dispatchEvent(o),Kc=null}else return t=ia(i),t!==null&&Ap(t),e.blockedOn=i,!1;t.shift()}return!0}function wp(e,t,i){_s(e)&&i.delete(t)}function oS(){Gu=!1,fi!==null&&_s(fi)&&(fi=null),gi!==null&&_s(gi)&&(gi=null),mi!==null&&_s(mi)&&(mi=null),Yo.forEach(wp),Qo.forEach(wp)}function bs(e,t){e.blockedOn===t&&(e.blockedOn=null,Gu||(Gu=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,oS)))}var ws=null;function Rp(e){ws!==e&&(ws=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){ws===e&&(ws=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],s=e[t+2];if(typeof o!="function"){if(Ku(o||i)===null)continue;break}var l=ia(i);l!==null&&(e.splice(t,3),t-=3,Bl(l,{pending:!0,data:s,method:i.method,action:o},o,s))}}))}function Pa(e){function t(C){return bs(C,e)}fi!==null&&bs(fi,e),gi!==null&&bs(gi,e),mi!==null&&bs(mi,e),Yo.forEach(t),Qo.forEach(t);for(var i=0;i<pi.length;i++){var o=pi[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<pi.length&&(i=pi[0],i.blockedOn===null);)bp(i),i.blockedOn===null&&pi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var s=i[o],l=i[o+1],f=s[Et]||null;if(typeof l=="function")f||Rp(i);else if(f){var p=null;if(l&&l.hasAttribute("formAction")){if(s=l,f=l[Et]||null)p=f.formAction;else if(Ku(s)!==null)continue}else p=f.action;typeof p=="function"?i[o+1]=p:(i.splice(o,3),o-=3),Rp(i)}}}function Ip(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(f){return s=f})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function qu(e){this._internalRoot=e}Rs.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var i=t.current,o=qt();vp(i,o,e,t,null,null)},Rs.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vp(e.current,2,null,e,null,null),ss(),t[ta]=null}};function Rs(e){this._internalRoot=e}Rs.prototype.unstable_scheduleHydration=function(e){if(e){var t=zd();e={blockedOn:null,target:e,priority:t};for(var i=0;i<pi.length&&t!==0&&t<pi[i].priority;i++);pi.splice(i,0,e),i===0&&bp(e)}};var kp=n.version;if(kp!=="19.2.3")throw Error(r(527,kp,"19.2.3"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var rS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{to=Is.inject(rS),Ht=Is}catch{}}return Xo.createRoot=function(e,t){if(!c(e))throw Error(r(299));var i=!1,o="",s=Lg,l=zg,f=Pg;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=yp(e,1,!1,null,null,i,o,null,s,l,f,Ip),e[ta]=t.current,_u(e),new qu(t)},Xo.hydrateRoot=function(e,t,i){if(!c(e))throw Error(r(299));var o=!1,s="",l=Lg,f=zg,p=Pg,C=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(l=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError),i.formState!==void 0&&(C=i.formState)),t=yp(e,1,!0,t,i??null,o,s,C,l,f,p,Ip),t.context=Cp(null),i=t.current,o=qt(),o=Dc(o),s=ti(o),s.callback=null,ni(i,s,o),i=o,t.current.lanes=i,io(t,i),Tn(t),e[ta]=t.current,_u(e),new Rs(t)},Xo.version="19.2.3",Xo}var xp;function yS(){if(xp)return Qu.exports;xp=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Qu.exports=pS(),Qu.exports}var CS=yS();const vS=Iy(CS);const H={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ai={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Vi={GET:"GET",POST:"POST"},Ja=[H.OPENID_SCOPE,H.PROFILE_SCOPE,H.OFFLINE_ACCESS_SCOPE],Bp=[...Ja,H.EMAIL_SCOPE],Tt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Kp={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Si={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ks={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},ht={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},Ch={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},rc={QUERY:"query",FRAGMENT:"fragment"},TS={QUERY:"query"},ky={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Os={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},ir={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ut={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},vh="appmetadata",AS="client_info",Ks="1",Gs={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},jt={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},lt={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},be={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Wo={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Gp={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},xa={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Ju={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Fi={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},SS={Pop:"pop"},Oy=300;const qs="unexpected_error",ES="post_request_failed";const qp={[qs]:"Unexpected error in authentication.",[ES]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Oe extends Error{constructor(n,a,r){const c=a?`${n}: ${a}`:n;super(c),Object.setPrototypeOf(this,Oe.prototype),this.errorCode=n||H.EMPTY_STRING,this.errorMessage=a||H.EMPTY_STRING,this.subError=r||H.EMPTY_STRING,this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function nh(u,n){return new Oe(u,n?`${qp[u]} ${n}`:qp[u])}const Th="client_info_decoding_error",My="client_info_empty_error",Ah="token_parsing_error",Ny="null_or_empty_token",jn="endpoints_resolution_error",Dy="network_error",Uy="openid_config_error",Hy="hash_not_deserialized",Va="invalid_state",Ly="state_mismatch",ih="state_not_found",zy="nonce_mismatch",Sh="auth_time_not_found",Py="max_age_transpired",_S="multiple_matching_tokens",bS="multiple_matching_accounts",xy="multiple_matching_appMetadata",By="request_cannot_be_made",Ky="cannot_remove_empty_scope",Gy="cannot_append_scopeset",ah="empty_input_scopeset",wS="device_code_polling_cancelled",RS="device_code_expired",IS="device_code_unknown_error",Eh="no_account_in_silent_request",qy="invalid_cache_record",_h="invalid_cache_environment",oh="no_account_found",rh="no_crypto_object",kS="unexpected_credential_type",OS="invalid_assertion",MS="invalid_client_credential",Ei="token_refresh_required",NS="user_timeout_reached",jy="token_claims_cnf_required_for_signedjwt",Yy="authorization_code_missing_from_server_response",Qy="binding_key_not_removed",Fy="end_session_endpoint_not_supported",bh="key_id_missing",DS="no_network_connectivity",US="user_canceled",HS="missing_tenant_id_error",ae="method_not_implemented",LS="nested_app_auth_bridge_disabled",zS="platform_broker_error";const jp={[Th]:"The client info could not be parsed/decoded correctly",[My]:"The client info was empty",[Ah]:"Token cannot be parsed",[Ny]:"The token is null or empty",[jn]:"Endpoints cannot be resolved",[Dy]:"Network request failed",[Uy]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Hy]:"The hash parameters could not be deserialized",[Va]:"State was not the expected format",[Ly]:"State mismatch error",[ih]:"State not found",[zy]:"Nonce mismatch error",[Sh]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Py]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[_S]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[bS]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[xy]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[By]:"Token request cannot be made without authorization code or refresh token.",[Ky]:"Cannot remove null or empty scope from ScopeSet",[Gy]:"Cannot append ScopeSet",[ah]:"Empty input ScopeSet cannot be processed",[wS]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[RS]:"Device code is expired.",[IS]:"Device code stopped polling for unknown reasons.",[Eh]:"Please pass an account object, silent flow is not supported without account information",[qy]:"Cache record object was null or undefined.",[_h]:"Invalid environment when attempting to create cache entry",[oh]:"No account found in cache for given key.",[rh]:"No crypto object detected.",[kS]:"Unexpected credential type.",[OS]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[MS]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ei]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[NS]:"User defined timeout for device code polling reached",[jy]:"Cannot generate a POP jwt if the token_claims are not populated",[Yy]:"Server response does not contain an authorization code to proceed",[Qy]:"Could not remove the credential's binding key from storage.",[Fy]:"The provided authority does not support logout",[bh]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[DS]:"No network connectivity. Check your internet connection.",[US]:"User cancelled the flow.",[HS]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ae]:"This method has not been implemented",[LS]:"The nested app auth bridge is disabled",[zS]:"An error occurred in the native broker. See the platformBrokerError property for details."};class wh extends Oe{constructor(n,a){super(n,a?`${jp[n]}: ${a}`:jp[n]),this.name="ClientAuthError",Object.setPrototypeOf(this,wh.prototype)}}function P(u,n){return new wh(u,n)}const js={createNewGuid:()=>{throw P(ae)},base64Decode:()=>{throw P(ae)},base64Encode:()=>{throw P(ae)},base64UrlEncode:()=>{throw P(ae)},encodeKid:()=>{throw P(ae)},async getPublicKeyThumbprint(){throw P(ae)},async removeTokenBindingKey(){throw P(ae)},async clearKeystore(){throw P(ae)},async signJwt(){throw P(ae)},async hashString(){throw P(ae)}};var ze;(function(u){u[u.Error=0]="Error",u[u.Warning=1]="Warning",u[u.Info=2]="Info",u[u.Verbose=3]="Verbose",u[u.Trace=4]="Trace"})(ze||(ze={}));class wi{constructor(n,a,r){this.level=ze.Info;const c=()=>{},h=n||wi.createDefaultLoggerOptions();this.localCallback=h.loggerCallback||c,this.piiLoggingEnabled=h.piiLoggingEnabled||!1,this.level=typeof h.logLevel=="number"?h.logLevel:ze.Info,this.correlationId=h.correlationId||H.EMPTY_STRING,this.packageName=a||H.EMPTY_STRING,this.packageVersion=r||H.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ze.Info}}clone(n,a,r){return new wi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},n,a)}logMessage(n,a){if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const h=`${`[${new Date().toUTCString()}] : [${a.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${ze[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,h,a.containsPii||!1)}executeCallback(n,a,r){this.localCallback&&this.localCallback(n,a,r)}error(n,a){this.logMessage(n,{logLevel:ze.Error,containsPii:!1,correlationId:a||H.EMPTY_STRING})}errorPii(n,a){this.logMessage(n,{logLevel:ze.Error,containsPii:!0,correlationId:a||H.EMPTY_STRING})}warning(n,a){this.logMessage(n,{logLevel:ze.Warning,containsPii:!1,correlationId:a||H.EMPTY_STRING})}warningPii(n,a){this.logMessage(n,{logLevel:ze.Warning,containsPii:!0,correlationId:a||H.EMPTY_STRING})}info(n,a){this.logMessage(n,{logLevel:ze.Info,containsPii:!1,correlationId:a||H.EMPTY_STRING})}infoPii(n,a){this.logMessage(n,{logLevel:ze.Info,containsPii:!0,correlationId:a||H.EMPTY_STRING})}verbose(n,a){this.logMessage(n,{logLevel:ze.Verbose,containsPii:!1,correlationId:a||H.EMPTY_STRING})}verbosePii(n,a){this.logMessage(n,{logLevel:ze.Verbose,containsPii:!0,correlationId:a||H.EMPTY_STRING})}trace(n,a){this.logMessage(n,{logLevel:ze.Trace,containsPii:!1,correlationId:a||H.EMPTY_STRING})}tracePii(n,a){this.logMessage(n,{logLevel:ze.Trace,containsPii:!0,correlationId:a||H.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Vy="@azure/msal-common",Rh="15.14.0";const Ih={None:"none"};const Xy="redirect_uri_empty",PS="claims_request_parsing_error",Jy="authority_uri_insecure",Zo="url_parse_error",Zy="empty_url_error",$y="empty_input_scopes_error",kh="invalid_claims",Wy="token_request_empty",eC="logout_request_empty",xS="invalid_code_challenge_method",Oh="pkce_params_missing",Mh="invalid_cloud_discovery_metadata",tC="invalid_authority_metadata",nC="untrusted_authority",sc="missing_ssh_jwk",iC="missing_ssh_kid",BS="missing_nonce_authentication_header",KS="invalid_authentication_header",aC="cannot_set_OIDCOptions",oC="cannot_allow_platform_broker",rC="authority_mismatch",sC="invalid_request_method_for_EAR",cC="invalid_authorize_post_body_parameters",lC="invalid_platform_broker_configuration";const GS={[Xy]:"A redirect URI is required for all calls, and none has been set.",[PS]:"Could not parse the given claims request object.",[Jy]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Zo]:"URL could not be parsed into appropriate segments.",[Zy]:"URL was empty or null.",[$y]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[kh]:"Given claims parameter must be a stringified JSON object.",[Wy]:"Token request was empty and not found in cache.",[eC]:"The logout request was null or undefined.",[xS]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Oh]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Mh]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[tC]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[nC]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[sc]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[iC]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[BS]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[KS]:"Invalid authentication header provided",[aC]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[oC]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[rC]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[cC]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[sC]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[lC]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."};class Nh extends Oe{constructor(n){super(n,GS[n]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Nh.prototype)}}function ke(u){return new Nh(u)}class Yt{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},r=n.split("&"),c=h=>decodeURIComponent(h.replace(/\+/g," "));return r.forEach(h=>{if(h.trim()){const[d,g]=h.split(/=(.+)/g,2);d&&g&&(a[c(d)]=c(g))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}static matchPattern(n,a){return new RegExp(n.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(a)}}class We{constructor(n){const a=n?Yt.trimArrayEntries([...n]):[],r=a?Yt.removeEmptyStringsFromArray(a):[];if(!r||!r.length)throw ke($y);this.scopes=new Set,r.forEach(c=>this.scopes.add(c))}static fromString(n){const r=(n||H.EMPTY_STRING).split(" ");return new We(r)}static createSearchScopes(n){const a=n&&n.length>0?n:[...Ja],r=new We(a);return r.containsOnlyOIDCScopes()?r.removeScope(H.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(n){const a=this.printScopesLowerCase().split(" "),r=new We(a);return n?r.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return Bp.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw P(Gy)}}removeScope(n){if(!n)throw P(Ky);this.scopes.delete(n.trim())}removeOIDCScopes(){Bp.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw P(ah);const a=new Set;return n.scopes.forEach(r=>a.add(r.toLowerCase())),this.scopes.forEach(r=>a.add(r.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw P(ah);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),r=n.getScopeCount(),c=this.getScopeCount();return a.size<c+r}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):H.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Ys(u,n){if(!u)throw P(My);try{const a=n(u);return JSON.parse(a)}catch{throw P(Th)}}function Ga(u){if(!u)throw P(Th);const n=u.split(ir.CLIENT_INFO_SEPARATOR,2);return{uid:n[0],utid:n.length<2?H.EMPTY_STRING:n[1]}}function Yp(u,n){return!!u&&!!n&&u===n.split(".")[1]}function cc(u,n,a,r){if(r){const{oid:c,sub:h,tid:d,name:g,tfp:m,acr:y,preferred_username:S,upn:_,login_hint:k}=r,x=d||m||y||"";return{tenantId:x,localAccountId:c||h||"",name:g,username:S||_||"",loginHint:k,isHomeTenant:Yp(x,u)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:Yp(a,u)}}function Dh(u,n,a,r){let c=u;if(n){const{isHomeTenant:h,...d}=n;c={...u,...d}}if(a){const{isHomeTenant:h,...d}=cc(u.homeAccountId,u.localAccountId,u.tenantId,a);return c={...c,...d,idTokenClaims:a,idToken:r},c}return c}const fn={Default:0,Adfs:1,Dsts:2,Ciam:3};function Uh(u){return u&&(u.tid||u.tfp||u.acr)||null}const Mt={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class Ke{static getAccountInfo(n){return{homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:n.username,localAccountId:n.localAccountId,loginHint:n.loginHint,name:n.name,nativeAccountId:n.nativeAccountId,authorityType:n.authorityType,tenantProfiles:new Map((n.tenantProfiles||[]).map(a=>[a.tenantId,a])),dataBoundary:n.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(n,a,r){const c=new Ke;a.authorityType===fn.Adfs?c.authorityType=Os.ADFS_ACCOUNT_TYPE:a.protocolMode===Mt.OIDC?c.authorityType=Os.GENERIC_ACCOUNT_TYPE:c.authorityType=Os.MSSTS_ACCOUNT_TYPE;let h;n.clientInfo&&r&&(h=Ys(n.clientInfo,r),h.xms_tdbr&&(c.dataBoundary=h.xms_tdbr==="EU"?"EU":"None")),c.clientInfo=n.clientInfo,c.homeAccountId=n.homeAccountId,c.nativeAccountId=n.nativeAccountId;const d=n.environment||a&&a.getPreferredCache();if(!d)throw P(_h);c.environment=d,c.realm=h?.utid||Uh(n.idTokenClaims)||"",c.localAccountId=h?.uid||n.idTokenClaims?.oid||n.idTokenClaims?.sub||"";const g=n.idTokenClaims?.preferred_username||n.idTokenClaims?.upn,m=n.idTokenClaims?.emails?n.idTokenClaims.emails[0]:null;if(c.username=g||m||"",c.loginHint=n.idTokenClaims?.login_hint,c.name=n.idTokenClaims?.name||"",c.cloudGraphHostName=n.cloudGraphHostName,c.msGraphHost=n.msGraphHost,n.tenantProfiles)c.tenantProfiles=n.tenantProfiles;else{const y=cc(n.homeAccountId,c.localAccountId,c.realm,n.idTokenClaims);c.tenantProfiles=[y]}return c}static createFromAccountInfo(n,a,r){const c=new Ke;return c.authorityType=n.authorityType||Os.GENERIC_ACCOUNT_TYPE,c.homeAccountId=n.homeAccountId,c.localAccountId=n.localAccountId,c.nativeAccountId=n.nativeAccountId,c.realm=n.tenantId,c.environment=n.environment,c.username=n.username,c.name=n.name,c.loginHint=n.loginHint,c.cloudGraphHostName=a,c.msGraphHost=r,c.tenantProfiles=Array.from(n.tenantProfiles?.values()||[]),c.dataBoundary=n.dataBoundary,c}static generateHomeAccountId(n,a,r,c,h){if(!(a===fn.Adfs||a===fn.Dsts)){if(n)try{const d=Ys(n,c.base64Decode);if(d.uid&&d.utid)return`${d.uid}.${d.utid}`}catch{}r.warning("No client info in response")}return h?.sub||""}static isAccountEntity(n){return n?n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("realm")&&n.hasOwnProperty("localAccountId")&&n.hasOwnProperty("username")&&n.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(n,a,r){if(!n||!a)return!1;let c=!0;if(r){const h=n.idTokenClaims||{},d=a.idTokenClaims||{};c=h.iat===d.iat&&h.nonce===d.nonce}return n.homeAccountId===a.homeAccountId&&n.localAccountId===a.localAccountId&&n.username===a.username&&n.tenantId===a.tenantId&&n.loginHint===a.loginHint&&n.environment===a.environment&&n.nativeAccountId===a.nativeAccountId&&c}}function En(u,n){const a=qS(u);try{const r=n(a);return JSON.parse(r)}catch{throw P(Ah)}}function _n(u){if(!u.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return u.signin_state.some(r=>n.includes(r.trim().toLowerCase()))}function qS(u){if(!u)throw P(Ny);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(u);if(!a||a.length<4)throw P(Ah);return a[2]}function uC(u,n){if(n===0||Date.now()-3e5>u+n)throw P(Py)}function Qp(u){if(!u)return u;let n=u.toLowerCase();return Yt.endsWith(n,"?")?n=n.slice(0,-1):Yt.endsWith(n,"?/")&&(n=n.slice(0,-2)),Yt.endsWith(n,"/")||(n+="/"),n}function hC(u){return u.startsWith("#/")?u.substring(2):u.startsWith("#")||u.startsWith("?")?u.substring(1):u}function Qs(u){if(!u||u.indexOf("=")<0)return null;try{const n=hC(u),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw P(Hy)}return null}function ar(u,n=!0,a){const r=new Array;return u.forEach((c,h)=>{!n&&a&&h in a?r.push(`${h}=${c}`):r.push(`${h}=${encodeURIComponent(c)}`)}),r.join("&")}function Fp(u){if(!u)return u;const n=u.split("#")[0];try{const a=new URL(n),r=a.origin+a.pathname+a.search;return Qp(r)}catch{return Qp(n)}}class Ce{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw ke(Zy);n.includes("#")||(this._urlString=Ce.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return Yt.endsWith(a,"?")?a=a.slice(0,-1):Yt.endsWith(a,"?/")&&(a=a.slice(0,-2)),Yt.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw ke(Zo)}if(!n.HostNameAndPort||!n.PathSegments)throw ke(Zo);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw ke(Jy)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return Ce.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),r=a.PathSegments;return n&&r.length!==0&&(r[0]===Si.COMMON||r[0]===Si.ORGANIZATIONS)&&(r[0]=n),Ce.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw ke(Zo);const r={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let c=r.AbsolutePath.split("/");return c=c.filter(h=>h&&h.length>0),r.PathSegments=c,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=n.match(a);if(!r)throw ke(Zo);return r[2]}static getAbsoluteUrl(n,a){if(n[0]===H.FORWARD_SLASH){const c=new Ce(a).getUrlComponents();return c.Protocol+"//"+c.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new Ce(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}static hashContainsKnownProperties(n){return!!Qs(n)}}const dC={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Vp=dC.endpointMetadata,Hh=dC.instanceDiscoveryMetadata,fC=new Set;Hh.metadata.forEach(u=>{u.aliases.forEach(n=>{fC.add(n)})});function jS(u,n){let a;const r=u.canonicalAuthority;if(r){const c=new Ce(r).getUrlComponents().HostNameAndPort;a=Xp(c,u.cloudDiscoveryMetadata?.metadata,jt.CONFIG,n)||Xp(c,Hh.metadata,jt.HARDCODED_VALUES,n)||u.knownAuthorities}return a||[]}function Xp(u,n,a,r){if(r?.trace(`getAliasesFromMetadata called with source: ${a}`),u&&n){const c=Fs(n,u);if(c)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${a}, returning aliases`),c.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${a}`)}return null}function YS(u){return Fs(Hh.metadata,u)}function Fs(u,n){for(let a=0;a<u.length;a++){const r=u[a];if(r.aliases.includes(n))return r}return null}const Vs="cache_quota_exceeded",Lh="cache_error_unknown";const Zu={[Vs]:"Exceeded cache storage capacity.",[Lh]:"Unexpected error occurred when using cache storage."};class qa extends Oe{constructor(n,a){const r=a||(Zu[n]?Zu[n]:Zu[Lh]);super(`${n}: ${r}`),Object.setPrototypeOf(this,qa.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=r}}function sh(u){return u instanceof Error?u.name==="QuotaExceededError"||u.name==="NS_ERROR_DOM_QUOTA_REACHED"||u.message.includes("exceeded the quota")?new qa(Vs):new qa(u.name,u.message):new qa(Lh)}class ch{constructor(n,a,r,c,h){this.clientId=n,this.cryptoImpl=a,this.commonLogger=r.clone(Vy,Rh),this.staticAuthorityOptions=h,this.performanceClient=c}getAllAccounts(n,a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){if(Object.keys(n).length===0||Object.values(n).every(c=>!c))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(n,a);return r.length>1?r.sort(h=>h.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(n,a){const r=this.getAccountsFilteredBy(n,a);return r.length>0?Ke.getAccountInfo(r[0]):null}buildTenantProfiles(n,a,r){return n.flatMap(c=>this.getTenantProfilesFromAccountEntity(c,a,r?.tenantId,r))}getTenantedAccountInfoByFilter(n,a,r,c,h){let d=null,g;if(h&&!this.tenantProfileMatchesFilter(r,h))return null;const m=this.getIdToken(n,c,a,r.tenantId);return m&&(g=En(m.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(g,h))?null:(d=Dh(n,r,g,m?.secret),d)}getTenantProfilesFromAccountEntity(n,a,r,c){const h=Ke.getAccountInfo(n);let d=h.tenantProfiles||new Map;const g=this.getTokenKeys();if(r){const y=d.get(r);if(y)d=new Map([[r,y]]);else return[]}const m=[];return d.forEach(y=>{const S=this.getTenantedAccountInfoByFilter(h,g,y,a,c);S&&m.push(S)}),m}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,r,c,h){if(!n)throw P(qy);try{n.account&&await this.setAccount(n.account,a,r,c),n.idToken&&h?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,r),n.accessToken&&h?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,r),n.refreshToken&&h?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,r),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(d){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),d instanceof Oe?d:sh(d)}}async saveAccessToken(n,a,r){const c={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType,requestedClaimsHash:n.requestedClaimsHash},h=this.getTokenKeys(),d=We.fromString(n.target);h.accessToken.forEach(g=>{if(!this.accessTokenKeyMatchesFilter(g,c,!1))return;const m=this.getAccessTokenCredential(g,a);m&&this.credentialMatchesFilter(m,c)&&We.fromString(m.target).intersectingScopeSets(d)&&this.removeAccessToken(g,a)}),await this.setAccessTokenCredential(n,a,r)}getAccountsFilteredBy(n,a){const r=this.getAccountKeys(),c=[];return r.forEach(h=>{const d=this.getAccount(h,a);if(!d||n.homeAccountId&&!this.matchHomeAccountId(d,n.homeAccountId)||n.username&&!this.matchUsername(d.username,n.username)||n.environment&&!this.matchEnvironment(d,n.environment)||n.realm&&!this.matchRealm(d,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(d,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(d,n.authorityType))return;const g={localAccountId:n?.localAccountId,name:n?.name},m=d.tenantProfiles?.filter(y=>this.tenantProfileMatchesFilter(y,g));m&&m.length===0||c.push(d)}),c}credentialMatchesFilter(n,a){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||(a.requestedClaimsHash||n.requestedClaimsHash)&&n.requestedClaimsHash!==a.requestedClaimsHash||n.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===be.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n){const a=this.getKeys(),r={};return a.forEach(c=>{if(!this.isAppMetadata(c))return;const h=this.getAppMetadata(c);h&&(n.environment&&!this.matchEnvironment(h,n.environment)||n.clientId&&!this.matchClientId(h,n.clientId)||(r[c]=h))}),r}getAuthorityMetadataByAlias(n){const a=this.getAuthorityMetadataKeys();let r=null;return a.forEach(c=>{if(!this.isAuthorityMetadata(c)||c.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(c);h&&h.aliases.indexOf(n)!==-1&&(r=h)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(r=>{this.removeAccount(r,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const r=this.getAccountKeys(),c=h=>h.includes(n.homeAccountId)&&h.includes(n.environment);r.filter(c).forEach(h=>{this.removeItem(h,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const r=this.getTokenKeys(),c=h=>h.includes(n.homeAccountId)&&h.includes(n.environment);r.idToken.filter(c).forEach(h=>{this.removeIdToken(h,a)}),r.accessToken.filter(c).forEach(h=>{this.removeAccessToken(h,a)}),r.refreshToken.filter(c).forEach(h=>{this.removeRefreshToken(h,a)})}removeAccessToken(n,a){const r=this.getAccessTokenCredential(n,a);if(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),!r||r.credentialType.toLowerCase()!==ut.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==be.POP)return;const c=r.keyId;c&&this.cryptoImpl.removeTokenBindingKey(c).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${c}`,a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}removeAppMetadata(n){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,n)}),!0}getIdToken(n,a,r,c,h){this.commonLogger.trace("CacheManager - getIdToken called");const d={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:ut.ID_TOKEN,clientId:this.clientId,realm:c},g=this.getIdTokensByFilter(d,a,r),m=g.size;if(m<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(m>1){let y=g;if(!c){const S=new Map;g.forEach((k,x)=>{k.realm===n.tenantId&&S.set(x,k)});const _=S.size;if(_<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),g.values().next().value;if(_===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),S.values().next().value;y=S}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),y.forEach((S,_)=>{this.removeIdToken(_,a)}),h&&a&&h.addFields({multiMatchedID:g.size},a),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),g.values().next().value}getIdTokensByFilter(n,a,r){const c=r&&r.idToken||this.getTokenKeys().idToken,h=new Map;return c.forEach(d=>{if(!this.idTokenKeyMatchesFilter(d,{clientId:this.clientId,...n}))return;const g=this.getIdTokenCredential(d,a);g&&this.credentialMatchesFilter(g,n)&&h.set(d,g)}),h}idTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,r,c){const h=a.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",h);const d=We.createSearchScopes(a.scopes),g=a.authenticationScheme||be.BEARER,m=g.toLowerCase()!==be.BEARER.toLowerCase()?ut.ACCESS_TOKEN_WITH_AUTH_SCHEME:ut.ACCESS_TOKEN,y={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:m,clientId:this.clientId,realm:c||n.tenantId,target:d,tokenType:g,keyId:a.sshKid,requestedClaimsHash:a.requestedClaimsHash},S=r&&r.accessToken||this.getTokenKeys().accessToken,_=[];S.forEach(x=>{if(this.accessTokenKeyMatchesFilter(x,y,!0)){const ee=this.getAccessTokenCredential(x,h);ee&&this.credentialMatchesFilter(ee,y)&&_.push(ee)}});const k=_.length;return k<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",h),null):k>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",h),_.forEach(x=>{this.removeAccessToken(this.generateCredentialKey(x),h)}),this.performanceClient.addFields({multiMatchedAT:_.length},h),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",h),_[0])}accessTokenKeyMatchesFilter(n,a,r){const c=n.toLowerCase();if(a.clientId&&c.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&c.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&c.indexOf(a.realm.toLowerCase())===-1||a.requestedClaimsHash&&c.indexOf(a.requestedClaimsHash.toLowerCase())===-1)return!1;if(a.target){const h=a.target.asArray();for(let d=0;d<h.length;d++){if(r&&!c.includes(h[d].toLowerCase()))return!1;if(!r&&c.includes(h[d].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const r=this.getTokenKeys(),c=[];return r.accessToken.forEach(h=>{if(!this.accessTokenKeyMatchesFilter(h,n,!0))return;const d=this.getAccessTokenCredential(h,a);d&&this.credentialMatchesFilter(d,n)&&c.push(d)}),c}getRefreshToken(n,a,r,c,h){this.commonLogger.trace("CacheManager - getRefreshToken called");const d=a?Ks:void 0,g={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:ut.REFRESH_TOKEN,clientId:this.clientId,familyId:d},m=c&&c.refreshToken||this.getTokenKeys().refreshToken,y=[];m.forEach(_=>{if(this.refreshTokenKeyMatchesFilter(_,g)){const k=this.getRefreshTokenCredential(_,r);k&&this.credentialMatchesFilter(k,g)&&y.push(k)}});const S=y.length;return S<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(S>1&&h&&r&&h.addFields({multiMatchedRT:S},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),y[0])}refreshTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.familyId&&r.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n){const a={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(a),c=Object.keys(r).map(d=>r[d]),h=c.length;if(h<1)return null;if(h>1)throw P(xy);return c[0]}isAppMetadataFOCI(n){const a=this.readAppMetadataFromCache(n);return!!(a&&a.familyId===Ks)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const r=n.oid||n.sub;return a===r}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a){if(this.staticAuthorityOptions){const c=jS(this.staticAuthorityOptions,this.commonLogger);if(c.includes(a)&&c.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==ut.ACCESS_TOKEN&&n.credentialType!==ut.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:We.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(vh)!==-1}isAuthorityMetadata(n){return n.indexOf(Gs.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(n){return`${Gs.CACHE_KEY}-${this.clientId}-${n}`}static toObject(n,a){for(const r in a)n[r]=a[r];return n}}class QS extends ch{async setAccount(){throw P(ae)}getAccount(){throw P(ae)}async setIdTokenCredential(){throw P(ae)}getIdTokenCredential(){throw P(ae)}async setAccessTokenCredential(){throw P(ae)}getAccessTokenCredential(){throw P(ae)}async setRefreshTokenCredential(){throw P(ae)}getRefreshTokenCredential(){throw P(ae)}setAppMetadata(){throw P(ae)}getAppMetadata(){throw P(ae)}setServerTelemetry(){throw P(ae)}getServerTelemetry(){throw P(ae)}setAuthorityMetadata(){throw P(ae)}getAuthorityMetadata(){throw P(ae)}getAuthorityMetadataKeys(){throw P(ae)}setThrottlingCache(){throw P(ae)}getThrottlingCache(){throw P(ae)}removeItem(){throw P(ae)}getKeys(){throw P(ae)}getAccountKeys(){throw P(ae)}getTokenKeys(){throw P(ae)}generateCredentialKey(){throw P(ae)}generateAccountKey(){throw P(ae)}}const v={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse",LoadExternalTokens:"LoadExternalTokens",LoadAccount:"loadAccount",LoadIdToken:"loadIdToken",LoadAccessToken:"loadAccessToken",LoadRefreshToken:"loadRefreshToken"},FS={InProgress:1};class Jp{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class gC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:FS.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""},measurement:new Jp}}startPerformanceMeasurement(){return new Jp}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const mC={tokenRenewalOffsetSeconds:Oy,preventCorsPreflight:!1},VS={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ze.Info,correlationId:H.EMPTY_STRING},XS={claimsBasedCachingEnabled:!1},JS={async sendGetRequestAsync(){throw P(ae)},async sendPostRequestAsync(){throw P(ae)}},ZS={sku:H.SKU,version:Rh,cpu:H.EMPTY_STRING,os:H.EMPTY_STRING},$S={clientSecret:H.EMPTY_STRING,clientAssertion:void 0},WS={azureCloudInstance:Ih.None,tenant:`${H.DEFAULT_COMMON_TENANT}`},eE={application:{appName:"",appVersion:""}};function tE({authOptions:u,systemOptions:n,loggerOptions:a,cacheOptions:r,storageInterface:c,networkInterface:h,cryptoInterface:d,clientCredentials:g,libraryInfo:m,telemetry:y,serverTelemetryManager:S,persistencePlugin:_,serializableCache:k}){const x={...VS,...a};return{authOptions:nE(u),systemOptions:{...mC,...n},loggerOptions:x,cacheOptions:{...XS,...r},storageInterface:c||new QS(u.clientId,js,new wi(x),new gC),networkInterface:h||JS,cryptoInterface:d||js,clientCredentials:g||$S,libraryInfo:{...ZS,...m},telemetry:{...eE,...y},serverTelemetryManager:S||null,persistencePlugin:_||null,serializableCache:k||null}}function nE(u){return{clientCapabilities:[],azureCloudOptions:WS,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...u}}function pC(u){return u.authOptions.authority.options.protocolMode===Mt.OIDC}const gn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};const Xi="client_id",yC="redirect_uri",iE="response_type",aE="response_mode",oE="grant_type",rE="claims",sE="scope",cE="refresh_token",lE="state",uE="nonce",hE="prompt",dE="code",fE="code_challenge",gE="code_challenge_method",mE="code_verifier",pE="client-request-id",yE="x-client-SKU",CE="x-client-VER",vE="x-client-OS",TE="x-client-CPU",AE="x-client-current-telemetry",SE="x-client-last-telemetry",EE="x-ms-lib-capability",_E="x-app-name",bE="x-app-ver",wE="post_logout_redirect_uri",RE="id_token_hint",IE="client_secret",kE="client_assertion",OE="client_assertion_type",CC="token_type",vC="req_cnf",Zp="return_spa_code",ME="nativebroker",NE="logout_hint",DE="sid",UE="login_hint",HE="domain_hint",LE="x-client-xtra-sku",Xs="brk_client_id",Js="brk_redirect_uri",lh="instance_aware",zE="ear_jwk",PE="ear_jwe_crypto";function lc(u,n,a){if(!n)return;const r=u.get(Xi);r&&u.has(Xs)&&a?.addFields({embeddedClientId:r,embeddedRedirectUri:u.get(yC)},n)}function zh(u,n){u.set(iE,n)}function xE(u,n){u.set(aE,n||TS.QUERY)}function BE(u){u.set(ME,"1")}function Ph(u,n,a=!0,r=Ja){a&&!r.includes("openid")&&!n.includes("openid")&&r.push("openid");const c=a?[...n||[],...r]:n||[],h=new We(c);u.set(sE,h.printScopes())}function xh(u,n){u.set(Xi,n)}function Bh(u,n){u.set(yC,n)}function KE(u,n){u.set(wE,n)}function GE(u,n){u.set(RE,n)}function qE(u,n){u.set(HE,n)}function Ms(u,n){u.set(UE,n)}function Zs(u,n){u.set(Tt.CCS_HEADER,`UPN:${n}`)}function er(u,n){u.set(Tt.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function $p(u,n){u.set(DE,n)}function Kh(u,n,a){const r=XE(n,a);try{JSON.parse(r)}catch{throw ke(kh)}u.set(rE,r)}function Gh(u,n){u.set(pE,n)}function qh(u,n){u.set(yE,n.sku),u.set(CE,n.version),n.os&&u.set(vE,n.os),n.cpu&&u.set(TE,n.cpu)}function jh(u,n){n?.appName&&u.set(_E,n.appName),n?.appVersion&&u.set(bE,n.appVersion)}function jE(u,n){u.set(hE,n)}function TC(u,n){n&&u.set(lE,n)}function YE(u,n){u.set(uE,n)}function Yh(u,n,a){if(n&&a)u.set(fE,n),u.set(gE,a);else throw ke(Oh)}function QE(u,n){u.set(dE,n)}function FE(u,n){u.set(cE,n)}function VE(u,n){u.set(mE,n)}function AC(u,n){u.set(IE,n)}function SC(u,n){n&&u.set(kE,n)}function EC(u,n){n&&u.set(OE,n)}function _C(u,n){u.set(oE,n)}function Qh(u){u.set(AS,"1")}function bC(u){u.has(lh)||u.set(lh,"true")}function _i(u,n){Object.entries(n).forEach(([a,r])=>{!u.has(a)&&r&&u.set(a,r)})}function XE(u,n){let a;if(!u)a={};else try{a=JSON.parse(u)}catch{throw ke(kh)}return n&&n.length>0&&(a.hasOwnProperty(ks.ACCESS_TOKEN)||(a[ks.ACCESS_TOKEN]={}),a[ks.ACCESS_TOKEN][ks.XMS_CC]={values:n}),JSON.stringify(a)}function Fh(u,n){n&&(u.set(CC,be.POP),u.set(vC,n))}function wC(u,n){n&&(u.set(CC,be.SSH),u.set(vC,n))}function RC(u,n){u.set(AE,n.generateCurrentRequestHeaderValue()),u.set(SE,n.generateLastRequestHeaderValue())}function IC(u){u.set(EE,Wo.X_MS_LIB_CAPABILITY_VALUE)}function JE(u,n){u.set(NE,n)}function uc(u,n,a){u.has(Xs)||u.set(Xs,n),u.has(Js)||u.set(Js,a)}function ZE(u,n){u.set(zE,encodeURIComponent(n)),u.set(PE,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function $E(u,n){Object.entries(n).forEach(([a,r])=>{r&&u.set(a,r)})}function WE(u){return u.hasOwnProperty("authorization_endpoint")&&u.hasOwnProperty("token_endpoint")&&u.hasOwnProperty("issuer")&&u.hasOwnProperty("jwks_uri")}function e_(u){return u.hasOwnProperty("tenant_discovery_endpoint")&&u.hasOwnProperty("metadata")}function t_(u){return u.hasOwnProperty("error")&&u.hasOwnProperty("error_description")}const Qt=(u,n,a,r,c)=>(...h)=>{a.trace(`Executing function ${n}`);const d=r?.startMeasurement(n,c);if(c){const g=n+"CallCount";r?.incrementFields({[g]:1},c)}try{const g=u(...h);return d?.end({success:!0}),a.trace(`Returning result from ${n}`),g}catch(g){a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw d?.end({success:!1},g),g}},O=(u,n,a,r,c)=>(...h)=>{a.trace(`Executing function ${n}`);const d=r?.startMeasurement(n,c);if(c){const g=n+"CallCount";r?.incrementFields({[g]:1},c)}return r?.setPreQueueTime(n,c),u(...h).then(g=>(a.trace(`Returning result from ${n}`),d?.end({success:!0}),g)).catch(g=>{a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw d?.end({success:!1},g),g})};class hc{constructor(n,a,r,c){this.networkInterface=n,this.logger=a,this.performanceClient=r,this.correlationId=c}async detectRegion(n,a){this.performanceClient?.addQueueMeasurement(v.RegionDiscoveryDetectRegion,this.correlationId);let r=n;if(r)a.region_source=xa.ENVIRONMENT_VARIABLE;else{const c=hc.IMDS_OPTIONS;try{const h=await O(this.getRegionFromIMDS.bind(this),v.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(H.IMDS_VERSION,c);if(h.status===Ai.SUCCESS&&(r=h.body,a.region_source=xa.IMDS),h.status===Ai.BAD_REQUEST){const d=await O(this.getCurrentVersion.bind(this),v.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(c);if(!d)return a.region_source=xa.FAILED_AUTO_DETECTION,null;const g=await O(this.getRegionFromIMDS.bind(this),v.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,c);g.status===Ai.SUCCESS&&(r=g.body,a.region_source=xa.IMDS)}}catch{return a.region_source=xa.FAILED_AUTO_DETECTION,null}}return r||(a.region_source=xa.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(n,a){return this.performanceClient?.addQueueMeasurement(v.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${H.IMDS_ENDPOINT}?api-version=${n}&format=text`,a,H.IMDS_TIMEOUT)}async getCurrentVersion(n){this.performanceClient?.addQueueMeasurement(v.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const a=await this.networkInterface.sendGetRequestAsync(`${H.IMDS_ENDPOINT}?format=json`,n);return a.status===Ai.BAD_REQUEST&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}hc.IMDS_OPTIONS={headers:{Metadata:"true"}};function Nt(){return Math.round(new Date().getTime()/1e3)}function Wp(u){return u.getTime()/1e3}function ja(u){return u?new Date(Number(u)*1e3):new Date}function $s(u,n){const a=Number(u)||0;return Nt()+n>a}function ey(u,n){const a=Number(u)+n*24*60*60*1e3;return Date.now()>a}function n_(u){return Number(u)>Nt()}function dc(u,n,a,r,c){return{credentialType:ut.ID_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,realm:c,lastUpdatedAt:Date.now().toString()}}function fc(u,n,a,r,c,h,d,g,m,y,S,_,k,x,ee){const F={homeAccountId:u,credentialType:ut.ACCESS_TOKEN,secret:a,cachedAt:Nt().toString(),expiresOn:d.toString(),extendedExpiresOn:g.toString(),environment:n,clientId:r,realm:c,target:h,tokenType:S||be.BEARER,lastUpdatedAt:Date.now().toString()};if(_&&(F.userAssertionHash=_),y&&(F.refreshOn=y.toString()),x&&(F.requestedClaims=x,F.requestedClaimsHash=ee),F.tokenType?.toLowerCase()!==be.BEARER.toLowerCase())switch(F.credentialType=ut.ACCESS_TOKEN_WITH_AUTH_SCHEME,F.tokenType){case be.POP:const ge=En(a,m);if(!ge?.cnf?.kid)throw P(jy);F.keyId=ge.cnf.kid;break;case be.SSH:F.keyId=k}return F}function kC(u,n,a,r,c,h,d){const g={credentialType:ut.REFRESH_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,lastUpdatedAt:Date.now().toString()};return h&&(g.userAssertionHash=h),c&&(g.familyId=c),d&&(g.expiresOn=d.toString()),g}function gc(u){return u.hasOwnProperty("homeAccountId")&&u.hasOwnProperty("environment")&&u.hasOwnProperty("credentialType")&&u.hasOwnProperty("clientId")&&u.hasOwnProperty("secret")}function ty(u){return u?gc(u)&&u.hasOwnProperty("realm")&&u.hasOwnProperty("target")&&(u.credentialType===ut.ACCESS_TOKEN||u.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function i_(u){return u?gc(u)&&u.hasOwnProperty("realm")&&u.credentialType===ut.ID_TOKEN:!1}function ny(u){return u?gc(u)&&u.credentialType===ut.REFRESH_TOKEN:!1}function a_(u,n){const a=u.indexOf(lt.CACHE_KEY)===0;let r=!0;return n&&(r=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&r}function o_(u,n){let a=!1;u&&(a=u.indexOf(Wo.THROTTLING_PREFIX)===0);let r=!0;return n&&(r=n.hasOwnProperty("throttleTime")),a&&r}function r_({environment:u,clientId:n}){return[vh,u,n].join(ir.CACHE_KEY_SEPARATOR).toLowerCase()}function s_(u,n){return n?u.indexOf(vh)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function c_(u,n){return n?u.indexOf(Gs.CACHE_KEY)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function iy(){return Nt()+Gs.REFRESH_TIME_SECONDS}function Ns(u,n,a){u.authorization_endpoint=n.authorization_endpoint,u.token_endpoint=n.token_endpoint,u.end_session_endpoint=n.end_session_endpoint,u.issuer=n.issuer,u.endpointsFromNetwork=a,u.jwks_uri=n.jwks_uri}function $u(u,n,a){u.aliases=n.aliases,u.preferred_cache=n.preferred_cache,u.preferred_network=n.preferred_network,u.aliasesFromNetwork=a}function ay(u){return u.expiresAt<=Nt()}class mt{constructor(n,a,r,c,h,d,g,m){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=r,this.authorityOptions=c,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=h,this.performanceClient=g,this.correlationId=d,this.managedIdentity=m||!1,this.regionDiscovery=new hc(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(H.CIAM_AUTH_URL))return fn.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case H.ADFS:return fn.Adfs;case H.DSTS:return fn.Dsts}return fn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new Ce(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw P(jn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw P(jn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw P(jn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw P(Fy);return this.replacePath(this.metadata.end_session_endpoint)}else throw P(jn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw P(jn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw P(jn)}canReplaceTenant(n){return n.PathSegments.length===1&&!mt.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===fn.Default&&this.protocolMode!==Mt.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const c=new Ce(this.metadata.canonical_authority).getUrlComponents(),h=c.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((g,m)=>{let y=h[m];if(m===0&&this.canReplaceTenant(c)){const S=new Ce(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];y!==S&&(this.logger.verbose(`Replacing tenant domain name ${y} with id ${S}`),y=S)}g!==y&&(a=a.replace(`/${y}/`,`/${g}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===fn.Adfs||this.protocolMode===Mt.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(v.AuthorityResolveEndpointsAsync,this.correlationId);const n=this.getCurrentMetadataEntity(),a=await O(this.updateCloudDiscoveryMetadata.bind(this),v.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const r=await O(this.updateEndpointMetadata.bind(this),v.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:iy(),jwks_uri:""}),n}updateCachedMetadata(n,a,r){a!==jt.CACHE&&r?.source!==jt.CACHE&&(n.expiresAt=iy(),n.canonical_authority=this.canonicalAuthority);const c=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache);this.cacheManager.setAuthorityMetadata(c,n),this.metadata=n}async updateEndpointMetadata(n){this.performanceClient?.addQueueMeasurement(v.AuthorityUpdateEndpointMetadata,this.correlationId);const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===jt.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const c=await O(this.updateMetadataWithRegionalInformation.bind(this),v.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(a.metadata);Ns(n,c,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let r=await O(this.getEndpointMetadataFromNetwork.bind(this),v.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await O(this.updateMetadataWithRegionalInformation.bind(this),v.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Ns(n,r,!0),jt.NETWORK;throw P(Uy,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ns(n,a,!1),{source:jt.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const c=this.getEndpointMetadataFromHardcodedValues();if(c)return Ns(n,c,!1),{source:jt.HARDCODED_VALUES,metadata:c};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=ay(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:jt.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(n){return new Ce(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ke(tC)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(v.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{const r=await this.networkInterface.sendGetRequestAsync(a,n);return WE(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Vp?Vp[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){this.performanceClient?.addQueueMeasurement(v.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==H.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Ju.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,mt.replaceWithRegionalInformation(n,a);const r=await O(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),v.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Ju.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,mt.replaceWithRegionalInformation(n,r);this.regionDiscoveryMetadata.region_outcome=Ju.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){this.performanceClient?.addQueueMeasurement(v.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const r=await O(this.getCloudDiscoveryMetadataFromNetwork.bind(this),v.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return $u(n,r,!0),jt.NETWORK;throw ke(nC)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||H.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||H.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${n.canonical_authority||H.NOT_APPLICABLE}`);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),$u(n,a,!1),jt.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const c=YS(this.hostnameAndPort);if(c)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),$u(n,c,!1),jt.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=ay(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),jt.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===fn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),mt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=Fs(n.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),a)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),a;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ke(Mh)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),mt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(v.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const n=`${H.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let r=null;try{const c=await this.networkInterface.sendGetRequestAsync(n,a);let h,d;if(e_(c.body))h=c.body,d=h.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${h.tenant_discovery_endpoint}`);else if(t_(c.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${c.status}`),h=c.body,h.error===H.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${h.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${h.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),d=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Fs(d,this.hostnameAndPort)}catch(c){if(c instanceof Oe)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${c.errorCode}
Error Description: ${c.errorMessage}`);else{const h=c;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${h.name}
Error Description: ${h.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=mt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&Ce.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let r;if(a&&a.azureCloudInstance!==Ih.None){const c=a.tenant?a.tenant:H.DEFAULT_COMMON_TENANT;r=`${a.azureCloudInstance}/${c}/`}return r||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return H.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw P(jn)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return fC.has(n)}static isPublicCloudAuthority(n){return H.KNOWN_PUBLIC_CLOUDS.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,r){const c=new Ce(n);c.validateAsUri();const h=c.getUrlComponents();let d=`${a}.${h.HostNameAndPort}`;this.isPublicCloudAuthority(h.HostNameAndPort)&&(d=`${a}.${H.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const g=Ce.constructAuthorityUriFromObject({...c.getUrlComponents(),HostNameAndPort:d}).urlString;return r?`${g}?${r}`:g}static replaceWithRegionalInformation(n,a){const r={...n};return r.authorization_endpoint=mt.buildRegionalAuthorityString(r.authorization_endpoint,a),r.token_endpoint=mt.buildRegionalAuthorityString(r.token_endpoint,a),r.end_session_endpoint&&(r.end_session_endpoint=mt.buildRegionalAuthorityString(r.end_session_endpoint,a)),r}static transformCIAMAuthority(n){let a=n;const c=new Ce(n).getUrlComponents();if(c.PathSegments.length===0&&c.HostNameAndPort.endsWith(H.CIAM_AUTH_URL)){const h=c.HostNameAndPort.split(".")[0];a=`${a}${h}${H.AAD_TENANT_DOMAIN_SUFFIX}`}return a}}mt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Si.COMMON,Si.CONSUMERS,Si.ORGANIZATIONS]);function l_(u){const r=new Ce(u).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case Si.COMMON:case Si.ORGANIZATIONS:case Si.CONSUMERS:return;default:return r}}function OC(u){return u.endsWith(H.FORWARD_SLASH)?u:`${u}${H.FORWARD_SLASH}`}function u_(u){const n=u.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw ke(Mh)}return{canonicalAuthority:u.authority?OC(u.authority):void 0,knownAuthorities:u.knownAuthorities,cloudDiscoveryMetadata:a}}async function MC(u,n,a,r,c,h,d){d?.addQueueMeasurement(v.AuthorityFactoryCreateDiscoveredInstance,h);const g=mt.transformCIAMAuthority(OC(u)),m=new mt(g,n,a,r,c,h,d);try{return await O(m.resolveEndpointsAsync.bind(m),v.AuthorityResolveEndpointsAsync,c,d,h)(),m}catch{throw P(jn)}}class ea extends Oe{constructor(n,a,r,c,h){super(n,a,r),this.name="ServerError",this.errorNo=c,this.status=h,Object.setPrototypeOf(this,ea.prototype)}}function mc(u,n,a){return{clientId:u,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.tokenBodyParameters?.clientId}}class An{static generateThrottlingStorageKey(n){return`${Wo.THROTTLING_PREFIX}.${JSON.stringify(n)}`}static preProcess(n,a,r){const c=An.generateThrottlingStorageKey(a),h=n.getThrottlingCache(c);if(h){if(h.throttleTime<Date.now()){n.removeItem(c,r);return}throw new ea(h.errorCodes?.join(" ")||H.EMPTY_STRING,h.errorMessage,h.subError)}}static postProcess(n,a,r,c){if(An.checkResponseStatus(r)||An.checkResponseForRetryAfter(r)){const h={throttleTime:An.calculateThrottleTime(parseInt(r.headers[Tt.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};n.setThrottlingCache(An.generateThrottlingStorageKey(a),h,c)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty(Tt.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,r=Date.now()/1e3;return Math.floor(Math.min(r+(a||Wo.DEFAULT_THROTTLE_TIME_SECONDS),r+Wo.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(n,a,r,c){const h=mc(a,r,c),d=this.generateThrottlingStorageKey(h);n.removeItem(d,r.correlationId)}}class pc extends Oe{constructor(n,a,r){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,pc.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=r}}function $o(u,n,a,r){return u.errorMessage=`${u.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new pc(u,n,a)}class Vh{constructor(n,a){this.config=tE(n),this.logger=new wi(this.config.loggerOptions,Vy,Rh),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}createTokenRequestHeaders(n){const a={};if(a[Tt.CONTENT_TYPE]=H.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case gn.HOME_ACCOUNT_ID:try{const r=Ga(n.credential);a[Tt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case gn.UPN:a[Tt.CCS_HEADER]=`UPN: ${n.credential}`;break}return a}async executePostToTokenEndpoint(n,a,r,c,h,d){d&&this.performanceClient?.addQueueMeasurement(d,h);const g=await this.sendPostRequest(c,n,{body:a,headers:r},h);return this.config.serverTelemetryManager&&g.status<500&&g.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),g}async sendPostRequest(n,a,r,c){An.preProcess(this.cacheManager,n,c);let h;try{h=await O(this.networkClient.sendPostRequestAsync.bind(this.networkClient),v.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,c)(a,r);const d=h.headers||{};this.performanceClient?.addFields({refreshTokenSize:h.body.refresh_token?.length||0,httpVerToken:d[Tt.X_MS_HTTP_VERSION]||"",requestId:d[Tt.X_MS_REQUEST_ID]||""},c)}catch(d){if(d instanceof pc){const g=d.responseHeaders;throw g&&this.performanceClient?.addFields({httpVerToken:g[Tt.X_MS_HTTP_VERSION]||"",requestId:g[Tt.X_MS_REQUEST_ID]||"",contentTypeHeader:g[Tt.CONTENT_TYPE]||void 0,contentLengthHeader:g[Tt.CONTENT_LENGTH]||void 0,httpStatus:d.httpStatus},c),d.error}throw d instanceof Oe?d:P(Dy)}return An.postProcess(this.cacheManager,n,h,c),h}async updateAuthority(n,a){this.performanceClient?.addQueueMeasurement(v.UpdateTokenEndpointAuthority,a);const r=`https://${n}/${this.authority.tenant}/`,c=await MC(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=c}createTokenQueryParameters(n){const a=new Map;return n.embeddedClientId&&uc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenQueryParameters&&_i(a,n.tokenQueryParameters),Gh(a,n.correlationId),lc(a,n.correlationId,this.performanceClient),ar(a)}}const Ws="no_tokens_found",NC="native_account_unavailable",Xh="refresh_token_expired",Jh="ux_not_allowed",h_="interaction_required",d_="consent_required",f_="login_required",yc="bad_token";const oy=[h_,d_,f_,yc,Jh],g_=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],m_={[Ws]:"No refresh token found in the cache. Please sign-in.",[NC]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Xh]:"Refresh token has expired.",[yc]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Jh]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class sn extends Oe{constructor(n,a,r,c,h,d,g,m){super(n,a,r),Object.setPrototypeOf(this,sn.prototype),this.timestamp=c||H.EMPTY_STRING,this.traceId=h||H.EMPTY_STRING,this.correlationId=d||H.EMPTY_STRING,this.claims=g||H.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=m}}function DC(u,n,a){const r=!!u&&oy.indexOf(u)>-1,c=!!a&&g_.indexOf(a)>-1,h=!!n&&oy.some(d=>n.indexOf(d)>-1);return r||h||c}function ec(u){return new sn(u,m_[u])}class Za{static setRequestState(n,a,r){const c=Za.generateLibraryState(n,r);return a?`${c}${H.RESOURCE_DELIM}${a}`:c}static generateLibraryState(n,a){if(!n)throw P(rh);const r={id:n.createNewGuid()};a&&(r.meta=a);const c=JSON.stringify(r);return n.base64Encode(c)}static parseRequestState(n,a){if(!n)throw P(rh);if(!a)throw P(Va);try{const r=a.split(H.RESOURCE_DELIM),c=r[0],h=r.length>1?r.slice(1).join(H.RESOURCE_DELIM):H.EMPTY_STRING,d=n.base64Decode(c),g=JSON.parse(d);return{userRequestState:h||H.EMPTY_STRING,libraryState:g}}catch{throw P(Va)}}}const p_={SW:"sw"};class Xa{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){this.performanceClient?.addQueueMeasurement(v.PopTokenGenerateCnf,n.correlationId);const r=await O(this.generateKid.bind(this),v.PopTokenGenerateCnf,a,this.performanceClient,n.correlationId)(n),c=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:c}}async generateKid(n){return this.performanceClient?.addQueueMeasurement(v.PopTokenGenerateKid,n.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:p_.SW}}async signPopToken(n,a,r){return this.signPayload(n,a,r)}async signPayload(n,a,r,c){const{resourceRequestMethod:h,resourceRequestUri:d,shrClaims:g,shrNonce:m,shrOptions:y}=r,_=(d?new Ce(d):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:Nt(),m:h?.toUpperCase(),u:_?.HostNameAndPort,nonce:m||this.cryptoUtils.createNewGuid(),p:_?.AbsolutePath,q:_?.QueryString?[[],_.QueryString]:void 0,client_claims:g||void 0,...c},a,y,r.correlationId)}}class y_{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Ji{constructor(n,a,r,c,h,d,g){this.clientId=n,this.cacheStorage=a,this.cryptoObj=r,this.logger=c,this.serializableCache=h,this.persistencePlugin=d,this.performanceClient=g}validateTokenResponse(n,a){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||H.NOT_AVAILABLE} - Timestamp: ${n.timestamp||H.NOT_AVAILABLE} - Description: ${n.error_description||H.NOT_AVAILABLE} - Correlation ID: ${n.correlation_id||H.NOT_AVAILABLE} - Trace ID: ${n.trace_id||H.NOT_AVAILABLE}`,c=n.error_codes?.length?n.error_codes[0]:void 0,h=new ea(n.error,r,n.suberror,c,n.status);if(a&&n.status&&n.status>=Ai.SERVER_ERROR_RANGE_START&&n.status<=Ai.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${h}`);return}else if(a&&n.status&&n.status>=Ai.CLIENT_ERROR_RANGE_START&&n.status<=Ai.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${h}`);return}throw DC(n.error,n.error_description,n.suberror)?new sn(n.error,n.error_description,n.suberror,n.timestamp||H.EMPTY_STRING,n.trace_id||H.EMPTY_STRING,n.correlation_id||H.EMPTY_STRING,n.claims||H.EMPTY_STRING,c):h}}async handleServerTokenResponse(n,a,r,c,h,d,g,m,y,S){this.performanceClient?.addQueueMeasurement(v.HandleServerTokenResponse,n.correlation_id);let _;if(n.id_token){if(_=En(n.id_token||H.EMPTY_STRING,this.cryptoObj.base64Decode),d&&d.nonce&&_.nonce!==d.nonce)throw P(zy);if(c.maxAge||c.maxAge===0){const F=_.auth_time;if(!F)throw P(Sh);uC(F,c.maxAge)}}this.homeAccountIdentifier=Ke.generateHomeAccountId(n.client_info||H.EMPTY_STRING,a.authorityType,this.logger,this.cryptoObj,_);let k;d&&d.state&&(k=Za.parseRequestState(this.cryptoObj,d.state)),n.key_id=n.key_id||c.sshKid||void 0;const x=this.generateCacheRecord(n,a,r,c,_,g,d);let ee;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),ee=new y_(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(ee)),m&&!y&&x.account){const F=this.cacheStorage.generateAccountKey(Ke.getAccountInfo(x.account));if(!this.cacheStorage.getAccount(F,c.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Ji.generateAuthenticationResult(this.cryptoObj,a,x,!1,c,_,k,void 0,S)}await this.cacheStorage.saveCacheRecord(x,c.correlationId,_n(_||{}),h,c.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&ee&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(ee))}return Ji.generateAuthenticationResult(this.cryptoObj,a,x,!1,c,_,k,n,S)}generateCacheRecord(n,a,r,c,h,d,g){const m=a.getPreferredCache();if(!m)throw P(_h);const y=Uh(h);let S,_;n.id_token&&h&&(S=dc(this.homeAccountIdentifier,m,n.id_token,this.clientId,y||""),_=Zh(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,c.correlationId,h,n.client_info,m,y,g,void 0,this.logger));let k=null;if(n.access_token){const F=n.scope?We.fromString(n.scope):new We(c.scopes||[]),ge=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,Ae=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,he=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,me=r+ge,Ne=me+Ae,Ge=he&&he>0?r+he:void 0;k=fc(this.homeAccountIdentifier,m,n.access_token,this.clientId,y||a.tenant||"",F.printScopes(),me,Ne,this.cryptoObj.base64Decode,Ge,n.token_type,d,n.key_id,c.claims,c.requestedClaimsHash)}let x=null;if(n.refresh_token){let F;if(n.refresh_token_expires_in){const ge=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;F=r+ge,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:F},c.correlationId)}x=kC(this.homeAccountIdentifier,m,n.refresh_token,this.clientId,n.foci,d,F)}let ee=null;return n.foci&&(ee={clientId:this.clientId,environment:m,familyId:n.foci}),{account:_,idToken:S,accessToken:k,refreshToken:x,appMetadata:ee}}static async generateAuthenticationResult(n,a,r,c,h,d,g,m,y){let S=H.EMPTY_STRING,_=[],k=null,x,ee,F=H.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===be.POP&&!h.popKid){const me=new Xa(n),{secret:Ne,keyId:Ge}=r.accessToken;if(!Ge)throw P(bh);S=await me.signPopToken(Ne,Ge,h)}else S=r.accessToken.secret;_=We.fromString(r.accessToken.target).asArray(),k=ja(r.accessToken.expiresOn),x=ja(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(ee=ja(r.accessToken.refreshOn))}r.appMetadata&&(F=r.appMetadata.familyId===Ks?Ks:"");const ge=d?.oid||d?.sub||"",Ae=d?.tid||"";m?.spa_accountid&&r.account&&(r.account.nativeAccountId=m?.spa_accountid);const he=r.account?Dh(Ke.getAccountInfo(r.account),void 0,d,r.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:ge,tenantId:Ae,scopes:_,account:he,idToken:r?.idToken?.secret||"",idTokenClaims:d||{},accessToken:S,fromCache:c,expiresOn:k,extExpiresOn:x,refreshOn:ee,correlationId:h.correlationId,requestId:y||H.EMPTY_STRING,familyId:F,tokenType:r.accessToken?.tokenType||H.EMPTY_STRING,state:g?g.userRequestState:H.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||H.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||H.EMPTY_STRING,code:m?.spa_code,fromNativeBroker:!1}}}function Zh(u,n,a,r,c,h,d,g,m,y,S,_){_?.verbose("setCachedAccount called");const x=u.getAccountKeys().find(he=>he.startsWith(a));let ee=null;x&&(ee=u.getAccount(x,c));const F=ee||Ke.createAccount({homeAccountId:a,idTokenClaims:h,clientInfo:d,environment:g,cloudGraphHostName:y?.cloud_graph_host_name,msGraphHost:y?.msgraph_host,nativeAccountId:S},n,r),ge=F.tenantProfiles||[],Ae=m||F.realm;if(Ae&&!ge.find(he=>he.tenantId===Ae)){const he=cc(a,F.localAccountId,Ae,h);ge.push(he)}return F.tenantProfiles=ge,F}async function UC(u,n,a){return typeof u=="string"?u:u({clientId:n,tokenEndpoint:a})}class HC extends Vh{constructor(n,a){super(n,a),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,r){if(this.performanceClient?.addQueueMeasurement(v.AuthClientAcquireToken,n.correlationId),!n.code)throw P(By);const c=Nt(),h=await O(this.executeTokenRequest.bind(this),v.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(this.authority,n),d=h.headers?.[Tt.X_MS_REQUEST_ID],g=new Ji(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return g.validateTokenResponse(h.body),O(g.handleServerTokenResponse.bind(g),v.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(h.body,this.authority,c,n,a,r,void 0,void 0,void 0,d)}getLogoutUri(n){if(!n)throw ke(eC);const a=this.createLogoutUrlQueryString(n);return Ce.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(v.AuthClientExecuteTokenRequest,a.correlationId);const r=this.createTokenQueryParameters(a),c=Ce.appendQueryString(n.tokenEndpoint,r),h=await O(this.createTokenRequestBody.bind(this),v.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,a.correlationId)(a);let d;if(a.clientInfo)try{const y=Ys(a.clientInfo,this.cryptoUtils.base64Decode);d={credential:`${y.uid}${ir.CLIENT_INFO_SEPARATOR}${y.utid}`,type:gn.HOME_ACCOUNT_ID}}catch(y){this.logger.verbose("Could not parse client info for CCS Header: "+y)}const g=this.createTokenRequestHeaders(d||a.ccsCredential),m=mc(this.config.authOptions.clientId,a);return O(this.executePostToTokenEndpoint.bind(this),v.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,a.correlationId)(c,h,g,m,a.correlationId,v.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(v.AuthClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(xh(a,n.embeddedClientId||n.tokenBodyParameters?.[Xi]||this.config.authOptions.clientId),this.includeRedirectUri)Bh(a,n.redirectUri);else if(!n.redirectUri)throw ke(Xy);if(Ph(a,n.scopes,!0,this.oidcDefaultScopes),QE(a,n.code),qh(a,this.config.libraryInfo),jh(a,this.config.telemetry.application),IC(a),this.serverTelemetryManager&&!pC(this.config)&&RC(a,this.serverTelemetryManager),n.codeVerifier&&VE(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&AC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;SC(a,await UC(c.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),EC(a,c.assertionType)}if(_C(a,ky.AUTHORIZATION_CODE_GRANT),Qh(a),n.authenticationScheme===be.POP){const c=new Xa(this.cryptoUtils,this.performanceClient);let h;n.popKid?h=this.cryptoUtils.encodeKid(n.popKid):h=(await O(c.generateCnf.bind(c),v.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Fh(a,h)}else if(n.authenticationScheme===be.SSH)if(n.sshJwk)wC(a,n.sshJwk);else throw ke(sc);(!Yt.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Kh(a,n.claims,this.config.authOptions.clientCapabilities);let r;if(n.clientInfo)try{const c=Ys(n.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${c.uid}${ir.CLIENT_INFO_SEPARATOR}${c.utid}`,type:gn.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}else r=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case gn.HOME_ACCOUNT_ID:try{const c=Ga(r.credential);er(a,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case gn.UPN:Zs(a,r.credential);break}return n.embeddedClientId&&uc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&_i(a,n.tokenBodyParameters),n.enableSpaAuthorizationCode&&(!n.tokenBodyParameters||!n.tokenBodyParameters[Zp])&&_i(a,{[Zp]:"1"}),lc(a,n.correlationId,this.performanceClient),ar(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&KE(a,n.postLogoutRedirectUri),n.correlationId&&Gh(a,n.correlationId),n.idTokenHint&&GE(a,n.idTokenHint),n.state&&TC(a,n.state),n.logoutHint&&JE(a,n.logoutHint),n.extraQueryParameters&&_i(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&bC(a),ar(a,this.config.authOptions.encodeExtraQueryParams,n.extraQueryParameters)}}const C_=300;class v_ extends Vh{constructor(n,a){super(n,a)}async acquireToken(n,a){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientAcquireToken,n.correlationId);const r=Nt(),c=await O(this.executeTokenRequest.bind(this),v.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(n,this.authority),h=c.headers?.[Tt.X_MS_REQUEST_ID],d=new Ji(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(c.body),O(d.handleServerTokenResponse.bind(d),v.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(c.body,this.authority,r,n,a,void 0,void 0,!0,n.forceCache,h)}async acquireTokenByRefreshToken(n,a){if(!n)throw ke(Wy);if(this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientAcquireTokenByRefreshToken,n.correlationId),!n.account)throw P(Eh);if(this.cacheManager.isAppMetadataFOCI(n.account.environment))try{return await O(this.acquireTokenWithCachedRefreshToken.bind(this),v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(c){const h=c instanceof sn&&c.errorCode===Ws,d=c instanceof ea&&c.errorCode===Gp.INVALID_GRANT_ERROR&&c.subError===Gp.CLIENT_MISMATCH_ERROR;if(h||d)return O(this.acquireTokenWithCachedRefreshToken.bind(this),v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw c}return O(this.acquireTokenWithCachedRefreshToken.bind(this),v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,r){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId);const c=Qt(this.cacheManager.getRefreshToken.bind(this.cacheManager),v.CacheManagerGetRefreshToken,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0,this.performanceClient);if(!c)throw ec(Ws);if(c.expiresOn){const d=n.refreshTokenExpirationOffsetSeconds||C_;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(c.expiresOn),rtOffsetSeconds:d},n.correlationId),$s(c.expiresOn,d))throw ec(Xh)}const h={...n,refreshToken:c.secret,authenticationScheme:n.authenticationScheme||be.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:gn.HOME_ACCOUNT_ID}};try{return await O(this.acquireToken.bind(this),v.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(h,r)}catch(d){if(d instanceof sn&&d.subError===yc){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const g=this.cacheManager.generateCredentialKey(c);this.cacheManager.removeRefreshToken(g,n.correlationId)}throw d}}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),c=Ce.appendQueryString(a.tokenEndpoint,r),h=await O(this.createTokenRequestBody.bind(this),v.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n),d=this.createTokenRequestHeaders(n.ccsCredential),g=mc(this.config.authOptions.clientId,n);return O(this.executePostToTokenEndpoint.bind(this),v.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(c,h,d,g,n.correlationId,v.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(xh(a,n.embeddedClientId||n.tokenBodyParameters?.[Xi]||this.config.authOptions.clientId),n.redirectUri&&Bh(a,n.redirectUri),Ph(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),_C(a,ky.REFRESH_TOKEN_GRANT),Qh(a),qh(a,this.config.libraryInfo),jh(a,this.config.telemetry.application),IC(a),this.serverTelemetryManager&&!pC(this.config)&&RC(a,this.serverTelemetryManager),FE(a,n.refreshToken),this.config.clientCredentials.clientSecret&&AC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;SC(a,await UC(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),EC(a,r.assertionType)}if(n.authenticationScheme===be.POP){const r=new Xa(this.cryptoUtils,this.performanceClient);let c;n.popKid?c=this.cryptoUtils.encodeKid(n.popKid):c=(await O(r.generateCnf.bind(r),v.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Fh(a,c)}else if(n.authenticationScheme===be.SSH)if(n.sshJwk)wC(a,n.sshJwk);else throw ke(sc);if((!Yt.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Kh(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case gn.HOME_ACCOUNT_ID:try{const r=Ga(n.ccsCredential.credential);er(a,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case gn.UPN:Zs(a,n.ccsCredential.credential);break}return n.embeddedClientId&&uc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&_i(a,n.tokenBodyParameters),lc(a,n.correlationId,this.performanceClient),ar(a)}}class T_ extends Vh{constructor(n,a){super(n,a)}async acquireCachedToken(n){this.performanceClient?.addQueueMeasurement(v.SilentFlowClientAcquireCachedToken,n.correlationId);let a=Fi.NOT_APPLICABLE;if(n.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Yt.isEmptyObj(n.claims))throw this.setCacheOutcome(Fi.FORCE_REFRESH_OR_CLAIMS,n.correlationId),P(Ei);if(!n.account)throw P(Eh);const r=n.account.tenantId||l_(n.authority),c=this.cacheManager.getTokenKeys(),h=this.cacheManager.getAccessToken(n.account,n,c,r);if(h){if(n_(h.cachedAt)||$s(h.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Fi.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),P(Ei);h.refreshOn&&$s(h.refreshOn,0)&&(a=Fi.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Fi.NO_CACHED_ACCESS_TOKEN,n.correlationId),P(Ei);const d=n.authority||this.authority.getPreferredCache(),g={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:h,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,c,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(d)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await O(this.generateResultFromCacheRecord.bind(this),v.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,n.correlationId)(g,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==Fi.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${n}`)}async generateResultFromCacheRecord(n,a){this.performanceClient?.addQueueMeasurement(v.SilentFlowClientGenerateResultFromCacheRecord,a.correlationId);let r;if(n.idToken&&(r=En(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const c=r?.auth_time;if(!c)throw P(Sh);uC(c,a.maxAge)}return Ji.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,r)}}const A_={sendGetRequestAsync:()=>Promise.reject(P(ae)),sendPostRequestAsync:()=>Promise.reject(P(ae))};function S_(u,n,a,r){const c=n.correlationId,h=new Map;xh(h,n.embeddedClientId||n.extraQueryParameters?.[Xi]||u.clientId);const d=[...n.scopes||[],...n.extraScopesToConsent||[]];if(Ph(h,d,!0,u.authority.options.OIDCOptions?.defaultScopes),Bh(h,n.redirectUri),Gh(h,c),xE(h,n.responseMode),Qh(h),n.prompt&&(jE(h,n.prompt),r?.addFields({prompt:n.prompt},c)),n.domainHint&&(qE(h,n.domainHint),r?.addFields({domainHintFromRequest:!0},c)),n.prompt!==ht.SELECT_ACCOUNT)if(n.sid&&n.prompt===ht.NONE)a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),$p(h,n.sid),r?.addFields({sidFromRequest:!0},c);else if(n.account){const g=b_(n.account);let m=w_(n.account);if(m&&n.domainHint&&(a.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),m=null),m){a.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ms(h,m),r?.addFields({loginHintFromClaim:!0},c);try{const y=Ga(n.account.homeAccountId);er(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(g&&n.prompt===ht.NONE){a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),$p(h,g),r?.addFields({sidFromClaim:!0},c);try{const y=Ga(n.account.homeAccountId);er(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(n.loginHint)a.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ms(h,n.loginHint),Zs(h,n.loginHint),r?.addFields({loginHintFromRequest:!0},c);else if(n.account.username){a.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ms(h,n.account.username),r?.addFields({loginHintFromUpn:!0},c);try{const y=Ga(n.account.homeAccountId);er(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else n.loginHint&&(a.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ms(h,n.loginHint),Zs(h,n.loginHint),r?.addFields({loginHintFromRequest:!0},c));else a.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return n.nonce&&YE(h,n.nonce),n.state&&TC(h,n.state),(n.claims||u.clientCapabilities&&u.clientCapabilities.length>0)&&Kh(h,n.claims,u.clientCapabilities),n.embeddedClientId&&uc(h,u.clientId,u.redirectUri),u.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(lh))&&bC(h),h}function $h(u,n,a,r){const c=ar(n,a,r);return Ce.appendQueryString(u.authorizationEndpoint,c)}function E_(u,n){if(LC(u,n),!u.code)throw P(Yy);return u}function LC(u,n){if(!u.state||!n)throw u.state?P(ih,"Cached State"):P(ih,"Server State");let a,r;try{a=decodeURIComponent(u.state)}catch{throw P(Va,u.state)}try{r=decodeURIComponent(n)}catch{throw P(Va,u.state)}if(a!==r)throw P(Ly);if(u.error||u.error_description||u.suberror){const c=__(u);throw DC(u.error,u.error_description,u.suberror)?new sn(u.error||"",u.error_description,u.suberror,u.timestamp||"",u.trace_id||"",u.correlation_id||"",u.claims||"",c):new ea(u.error||"",u.error_description,u.suberror,c)}}function __(u){const n="code=",a=u.error_uri?.lastIndexOf(n);return a&&a>=0?u.error_uri?.substring(a+n.length):void 0}function b_(u){return u.idTokenClaims?.sid||null}function w_(u){return u.loginHint||u.idTokenClaims?.login_hint||null}const ry=",",zC="|";function R_(u){const{skus:n,libraryName:a,libraryVersion:r,extensionName:c,extensionVersion:h}=u,d=new Map([[0,[a,r]],[2,[c,h]]]);let g=[];if(n?.length){if(g=n.split(ry),g.length<4)return n}else g=Array.from({length:4},()=>zC);return d.forEach((m,y)=>{m.length===2&&m[0]?.length&&m[1]?.length&&I_({skuArr:g,index:y,skuName:m[0],skuVersion:m[1]})}),g.join(ry)}function I_(u){const{skuArr:n,index:a,skuName:r,skuVersion:c}=u;a>=n.length||(n[a]=[r,c].join(zC))}class or{constructor(n,a){this.cacheOutcome=Fi.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||H.EMPTY_STRING,this.wrapperVer=n.wrapperVer||H.EMPTY_STRING,this.telemetryCacheKey=lt.CACHE_KEY+ir.CACHE_KEY_SEPARATOR+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${lt.VALUE_SEPARATOR}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&a.push(`broker_error=${r}`);const c=a.join(lt.VALUE_SEPARATOR),h=this.getRegionDiscoveryFields(),d=[n,h].join(lt.VALUE_SEPARATOR);return[lt.SCHEMA_VERSION,d,c].join(lt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=or.maxErrorsToSend(n),r=n.failedRequests.slice(0,2*a).join(lt.VALUE_SEPARATOR),c=n.errors.slice(0,a).join(lt.VALUE_SEPARATOR),h=n.errors.length,d=a<h?lt.OVERFLOW_TRUE:lt.OVERFLOW_FALSE,g=[h,d].join(lt.VALUE_SEPARATOR);return[lt.SCHEMA_VERSION,n.cacheHits,r,c,g].join(lt.CATEGORY_SEPARATOR)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=lt.MAX_CACHED_ERRORS&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof Oe?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(lt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=or.maxErrorsToSend(n),r=n.errors.length;if(a===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const c={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,c,this.correlationId)}}static maxErrorsToSend(n){let a,r=0,c=0;const h=n.errors.length;for(a=0;a<h;a++){const d=n.failedRequests[2*a]||H.EMPTY_STRING,g=n.failedRequests[2*a+1]||H.EMPTY_STRING,m=n.errors[a]||H.EMPTY_STRING;if(c+=d.toString().length+g.toString().length+m.length+3,c<lt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||H.EMPTY_STRING),n.push(this.regionSource||H.EMPTY_STRING),n.push(this.regionOutcome||H.EMPTY_STRING),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return R_(n)}}const PC="missing_kid_error",xC="missing_alg_error";const k_={[PC]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[xC]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Wh extends Oe{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,Wh.prototype)}}function sy(u){return new Wh(u,k_[u])}class ed{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw sy(PC);if(!n.alg)throw sy(xC);const a=new ed({typ:n.typ||SS.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}const td="pkce_not_created",nd="ear_jwk_empty",BC="ear_jwe_empty",uh="crypto_nonexistent",Cc="empty_navigate_uri",KC="hash_empty_error",id="no_state_in_hash",GC="hash_does_not_contain_known_properties",qC="unable_to_parse_state",jC="state_interaction_type_mismatch",YC="interaction_in_progress",QC="popup_window_error",FC="empty_window_error",rr="user_cancelled",O_="monitor_popup_timeout",VC="monitor_window_timeout",XC="redirect_in_iframe",JC="block_iframe_reload",ZC="block_nested_popups",M_="iframe_closed_prematurely",vc="silent_logout_unsupported",$C="no_account_error",N_="silent_prompt_value_error",WC="no_token_request_cache_error",ev="unable_to_parse_token_request_cache_error",D_="auth_request_not_set_error",U_="invalid_cache_type",Tc="non_browser_environment",Ba="database_not_open",tc="no_network_connectivity",tv="post_request_failed",nv="get_request_failed",hh="failed_to_parse_response",iv="unable_to_load_token",ad="crypto_key_not_found",av="auth_code_required",ov="auth_code_or_nativeAccountId_required",rv="spa_code_and_nativeAccountId_present",od="database_unavailable",sv="unable_to_acquire_token_from_native_platform",cv="native_handshake_timeout",lv="native_extension_not_installed",rd="native_connection_not_established",tr="uninitialized_public_client_application",uv="native_prompt_not_supported",hv="invalid_base64_string",dv="invalid_pop_token_request",fv="failed_to_build_headers",gv="failed_to_parse_headers",Ls="failed_to_decrypt_ear_response",nc="timed_out";const qn="For more visit: aka.ms/msaljs/browser-errors",H_={[td]:"The PKCE code challenge and verifier could not be generated.",[nd]:"No EAR encryption key provided. This is unexpected.",[BC]:"Server response does not contain ear_jwe property. This is unexpected.",[uh]:"The crypto object or function is not available.",[Cc]:"Navigation URI is empty. Please check stack trace for more info.",[KC]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${qn}`,[id]:"Hash does not contain state. Please verify that the request originated from msal.",[GC]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${qn}`,[qC]:"Unable to parse state. Please verify that the request originated from msal.",[jC]:"Hash contains state but the interaction type does not match the caller.",[YC]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${qn}`,[QC]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[FC]:"window.open returned null or undefined window object.",[rr]:"User cancelled the flow.",[O_]:`Token acquisition in popup failed due to timeout.  ${qn}`,[VC]:`Token acquisition in iframe failed due to timeout.  ${qn}`,[XC]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[JC]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${qn}`,[ZC]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[M_]:"The iframe being monitored was closed prematurely.",[vc]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[$C]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[N_]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[WC]:"No token request found in cache.",[ev]:"The cached token request could not be parsed.",[D_]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[U_]:"Invalid cache type",[Tc]:"Login and token requests are not supported in non-browser environments.",[Ba]:"Database is not open!",[tc]:"No network connectivity. Check your internet connection.",[tv]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[nv]:"Network request failed. Please check the network trace to determine root cause.",[hh]:"Failed to parse network response. Check network trace.",[iv]:"Error loading token to cache.",[ad]:"Cryptographic Key or Keypair not found in browser storage.",[av]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[ov]:"An authorization code or nativeAccountId must be provided to this flow.",[rv]:"Request cannot contain both spa code and native account id.",[od]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[sv]:`Unable to acquire token from native platform.  ${qn}`,[cv]:"Timed out while attempting to establish connection to browser extension",[lv]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[rd]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${qn}`,[tr]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${qn}`,[uv]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[hv]:"Invalid base64 encoded string.",[dv]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[fv]:"Failed to build request headers object.",[gv]:"Failed to parse response headers",[Ls]:"Failed to decrypt ear response",[nc]:"The request timed out."};class lr extends Oe{constructor(n,a){super(n,H_[n],a),Object.setPrototypeOf(this,lr.prototype),this.name="BrowserAuthError"}}function G(u,n){return new lr(u,n)}const Ot={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},on={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Jo={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},dt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},cy={GET:"GET",POST:"POST"},Ti={SIGNIN:"signin",SIGNOUT:"signout"},Je={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Ds={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},fe={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},ly={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},L_=u=>typeof u=="number"&&u in ly?ly[u]:"unknown";var W;(function(u){u.Redirect="redirect",u.Popup="popup",u.Silent="silent",u.None="none"})(W||(W={}));const uy={scopes:Ja},mv="jwk",dh="msal.db",z_=1,P_=`${dh}.keys`,vt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},x_=[vt.Default,vt.Skip,vt.RefreshTokenAndNetwork];function Us(u){return encodeURIComponent(sr(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Ri(u){return pv(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sr(u){return pv(new TextEncoder().encode(u))}function pv(u){const n=Array.from(u,a=>String.fromCodePoint(a)).join("");return btoa(n)}function At(u){return new TextDecoder().decode(bi(u))}function bi(u){let n=u.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw G(hv)}const a=atob(n);return Uint8Array.from(a,r=>r.codePointAt(0)||0)}const B_="RSASSA-PKCS1-v1_5",$a="AES-GCM",yv="HKDF",sd="SHA-256",K_=2048,G_=new Uint8Array([1,0,1]),hy="0123456789abcdef",dy=new Uint32Array(1),cd="raw",Cv="encrypt",ld="decrypt",q_="deriveKey",j_="crypto_subtle_undefined",ud={name:B_,hash:sd,modulusLength:K_,publicExponent:G_};function Y_(u){if(!window)throw G(Tc);if(!window.crypto)throw G(uh);if(!u&&!window.crypto.subtle)throw G(uh,j_)}async function vv(u,n,a){n?.addQueueMeasurement(v.Sha256Digest,a);const c=new TextEncoder().encode(u);return window.crypto.subtle.digest(sd,c)}function Q_(u){return window.crypto.getRandomValues(u)}function Wu(){return window.crypto.getRandomValues(dy),dy[0]}function mn(){const u=Date.now(),n=Wu()*1024+(Wu()&1023),a=new Uint8Array(16),r=Math.trunc(n/2**30),c=n&2**30-1,h=Wu();a[0]=u/2**40,a[1]=u/2**32,a[2]=u/2**24,a[3]=u/2**16,a[4]=u/2**8,a[5]=u,a[6]=112|r>>>8,a[7]=r,a[8]=128|c>>>24,a[9]=c>>>16,a[10]=c>>>8,a[11]=c,a[12]=h>>>24,a[13]=h>>>16,a[14]=h>>>8,a[15]=h;let d="";for(let g=0;g<a.length;g++)d+=hy.charAt(a[g]>>>4),d+=hy.charAt(a[g]&15),(g===3||g===5||g===7||g===9)&&(d+="-");return d}async function F_(u,n){return window.crypto.subtle.generateKey(ud,u,n)}async function eh(u){return window.crypto.subtle.exportKey(mv,u)}async function V_(u,n,a){return window.crypto.subtle.importKey(mv,u,ud,n,a)}async function X_(u,n){return window.crypto.subtle.sign(ud,u,n)}async function hd(){const u=await Tv(),a={alg:"dir",kty:"oct",k:Ri(new Uint8Array(u))};return sr(JSON.stringify(a))}async function J_(u){const n=At(u),r=JSON.parse(n).k,c=bi(r);return window.crypto.subtle.importKey(cd,c,$a,!1,[ld])}async function Z_(u,n){const a=n.split(".");if(a.length!==5)throw G(Ls,"jwe_length");const r=await J_(u).catch(()=>{throw G(Ls,"import_key")});try{const c=new TextEncoder().encode(a[0]),h=bi(a[2]),d=bi(a[3]),g=bi(a[4]),m=g.byteLength*8,y=new Uint8Array(d.length+g.length);y.set(d),y.set(g,d.length);const S=await window.crypto.subtle.decrypt({name:$a,iv:h,tagLength:m,additionalData:c},r,y);return new TextDecoder().decode(S)}catch{throw G(Ls,"decrypt")}}async function Tv(){const u=await window.crypto.subtle.generateKey({name:$a,length:256},!0,[Cv,ld]);return window.crypto.subtle.exportKey(cd,u)}async function fy(u){return window.crypto.subtle.importKey(cd,u,yv,!1,[q_])}async function Av(u,n,a){return window.crypto.subtle.deriveKey({name:yv,salt:n,hash:sd,info:new TextEncoder().encode(a)},u,{name:$a,length:256},!1,[Cv,ld])}async function $_(u,n,a){const r=new TextEncoder().encode(n),c=window.crypto.getRandomValues(new Uint8Array(16)),h=await Av(u,c,a),d=await window.crypto.subtle.encrypt({name:$a,iv:new Uint8Array(12)},h,r);return{data:Ri(new Uint8Array(d)),nonce:Ri(c)}}async function gy(u,n,a,r){const c=bi(r),h=await Av(u,bi(n),a),d=await window.crypto.subtle.decrypt({name:$a,iv:new Uint8Array(12)},h,c);return new TextDecoder().decode(d)}async function Sv(u){const n=await vv(u),a=new Uint8Array(n);return Ri(a)}const Ac="storage_not_supported",Ev="stubbed_public_client_application_called",dd="in_mem_redirect_unavailable";const zs={[Ac]:"Given storage configuration option was not supported.",[Ev]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[dd]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};zs[Ac],zs[Ev],zs[dd];class fd extends Oe{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,fd.prototype)}}function gd(u){return new fd(u,zs[u])}function _v(u){u.location.hash="",typeof u.history.replaceState=="function"&&u.history.replaceState(null,"",`${u.location.origin}${u.location.pathname}${u.location.search}`)}function W_(u){const n=u.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function md(){return window.parent!==window}function eb(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Ot.POPUP_NAME_PREFIX}.`)===0}function Yn(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function tb(){const n=new Ce(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function nb(){if(Ce.hashContainsKnownProperties(window.location.hash)&&md())throw G(JC)}function ib(u){if(md()&&!u)throw G(XC)}function ab(){if(eb())throw G(ZC)}function bv(){if(typeof window>"u")throw G(Tc)}function wv(u){if(!u)throw G(tr)}function pd(u){bv(),nb(),ab(),wv(u)}function my(u,n){if(pd(u),ib(n.system.allowRedirectInIframe),n.cache.cacheLocation===dt.MemoryStorage&&!n.cache.storeAuthStateInCookie)throw gd(dd)}function Rv(u){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(u).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function ob(){return mn()}class ic{navigateInternal(n,a){return ic.defaultNavigateWindow(n,a)}navigateExternal(n,a){return ic.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((r,c)=>{setTimeout(()=>{c(G(nc,"failed_to_redirect"))},a.timeout)})}}class rb{async sendGetRequestAsync(n,a){let r,c={},h=0;const d=py(a);try{r=await fetch(n,{method:cy.GET,headers:d})}catch(g){throw $o(G(window.navigator.onLine?nv:tc),void 0,void 0,g)}c=yy(r.headers);try{return h=r.status,{headers:c,body:await r.json(),status:h}}catch(g){throw $o(G(hh),h,c,g)}}async sendPostRequestAsync(n,a){const r=a&&a.body||"",c=py(a);let h,d=0,g={};try{h=await fetch(n,{method:cy.POST,headers:c,body:r})}catch(m){throw $o(G(window.navigator.onLine?tv:tc),void 0,void 0,m)}g=yy(h.headers);try{return d=h.status,{headers:g,body:await h.json(),status:d}}catch(m){throw $o(G(hh),d,g,m)}}}function py(u){try{const n=new Headers;if(!(u&&u.headers))return n;const a=u.headers;return Object.entries(a).forEach(([r,c])=>{n.append(r,c)}),n}catch(n){throw $o(G(fv),void 0,void 0,n)}}function yy(u){try{const n={};return u.forEach((a,r)=>{n[r]=a}),n}catch{throw G(gv)}}const sb=6e4,fh=1e4,cb=3e4,Iv=2e3;function lb({auth:u,cache:n,system:a,telemetry:r},c){const h={clientId:H.EMPTY_STRING,authority:`${H.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:H.EMPTY_STRING,authorityMetadata:H.EMPTY_STRING,redirectUri:typeof window<"u"?Yn():"",postLogoutRedirectUri:H.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Mt.AAD,OIDCOptions:{serverResponseType:rc.FRAGMENT,defaultScopes:[H.OPENID_SCOPE,H.PROFILE_SCOPE,H.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Ih.None,tenant:H.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},d={cacheLocation:dt.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(n&&n.cacheLocation===dt.LocalStorage),claimsBasedCachingEnabled:!1},g={loggerCallback:()=>{},logLevel:ze.Info,piiLoggingEnabled:!1},y={...{...mC,loggerOptions:g,networkClient:c?new rb:A_,navigationClient:new ic,loadFrameTimeout:0,windowHashTimeout:a?.loadFrameTimeout||sb,iframeHashTimeout:a?.loadFrameTimeout||fh,navigateFrameWait:0,redirectNavigationTimeout:cb,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,allowPlatformBrokerWithDOM:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||Iv,pollIntervalMilliseconds:Ot.DEFAULT_POLL_INTERVAL_MS},...a,loggerOptions:a?.loggerOptions||g},S={application:{appName:H.EMPTY_STRING,appVersion:H.EMPTY_STRING},client:new gC};if(u?.protocolMode!==Mt.OIDC&&u?.OIDCOptions&&new wi(y.loggerOptions).warning(JSON.stringify(ke(aC))),u?.protocolMode&&u.protocolMode===Mt.OIDC&&y?.allowPlatformBroker)throw ke(oC);return{auth:{...h,...u,OIDCOptions:{...h.OIDCOptions,...u?.OIDCOptions}},cache:{...d,...n},system:y,telemetry:{...S,...r}}}const ub="@azure/msal-browser",Zi="4.28.0";const pt="msal",kv="browser",Cy="|",gt=2,Ps=2,hb=`${pt}.${kv}.log.level`,db=`${pt}.${kv}.log.pii`,vy=`${pt}.version`,Ty="account.keys",Ay="token.keys";function Ya(u=Ps){return u<1?`${pt}.${Ty}`:`${pt}.${u}.${Ty}`}function Qa(u,n=gt){return n<1?`${pt}.${Ay}.${u}`:`${pt}.${n}.${Ay}.${u}`}class yd{static loggerCallback(n,a){switch(n){case ze.Error:console.error(a);return;case ze.Info:console.info(a);return;case ze.Verbose:console.debug(a);return;case ze.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=lb(n,this.browserEnvironment);let a;try{a=window[dt.SessionStorage]}catch{}const r=a?.getItem(hb),c=a?.getItem(db)?.toLowerCase(),h=c==="true"?!0:c==="false"?!1:void 0,d={...this.config.system.loggerOptions},g=r&&Object.keys(ze).includes(r)?ze[r]:void 0;g&&(d.loggerCallback=yd.loggerCallback,d.logLevel=g),h!==void 0&&(d.piiLoggingEnabled=h),this.logger=new wi(d,ub,Zi),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class $i extends yd{getModuleName(){return $i.MODULE_NAME}getId(){return $i.ID}async initialize(){return this.available=typeof window<"u",this.available}}$i.MODULE_NAME="";$i.ID="StandardOperatingContext";class fb{constructor(){this.dbName=dh,this.version=z_,this.tableName=P_,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",c=>{c.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",c=>{const h=c;this.db=h.target.result,this.dbOpen=!0,n()}),r.addEventListener("error",()=>a(G(od)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(Ba));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);d.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result)}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((r,c)=>{if(!this.db)return c(G(Ba));const g=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);g.addEventListener("success",()=>{this.closeConnection(),r()}),g.addEventListener("error",m=>{this.closeConnection(),c(m)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(Ba));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);d.addEventListener("success",()=>{this.closeConnection(),a()}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(G(Ba));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();h.addEventListener("success",d=>{const g=d;this.closeConnection(),n(g.target.result)}),h.addEventListener("error",d=>{this.closeConnection(),a(d)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(Ba));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);d.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result===1)}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const r=window.indexedDB.deleteDatabase(dh),c=setTimeout(()=>a(!1),200);r.addEventListener("success",()=>(clearTimeout(c),n(!0))),r.addEventListener("blocked",()=>(clearTimeout(c),n(!0))),r.addEventListener("error",()=>(clearTimeout(c),a(!1)))})}}class Sc{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,r)=>{n.push(r)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class gb{constructor(n){this.inMemoryCache=new Sc,this.indexedDBCache=new fb,this.logger=n}handleDatabaseAccessError(n){if(n instanceof lr&&n.errorCode===od)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw n}async getItem(n){const a=this.inMemoryCache.getItem(n);if(!a)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r)}return a}async setItem(n,a){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(n){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(a){this.handleDatabaseAccessError(a)}}async getKeys(){const n=this.inMemoryCache.getKeys();if(n.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(a){this.handleDatabaseAccessError(a)}return n}async containsKey(n){const a=this.inMemoryCache.containsKey(n);if(!a)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r)}return a}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const n=await this.indexedDBCache.deleteDatabase();return n&&this.logger.verbose("Persistent keystore deleted"),n}catch(n){return this.handleDatabaseAccessError(n),!1}}}class Qn{constructor(n,a,r){this.logger=n,Y_(r??!1),this.cache=new gb(this.logger),this.performanceClient=a}createNewGuid(){return mn()}base64Encode(n){return sr(n)}base64Decode(n){return At(n)}base64UrlEncode(n){return Us(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(v.CryptoOptsGetPublicKeyThumbprint,n.correlationId),r=await F_(Qn.EXTRACTABLE,Qn.POP_KEY_USAGES),c=await eh(r.publicKey),h={e:c.e,kty:c.kty,n:c.n},d=Sy(h),g=await this.hashString(d),m=await eh(r.privateKey),y=await V_(m,!1,["sign"]);return await this.cache.setItem(g,{privateKey:y,publicKey:r.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri}),a&&a.end({success:!0}),g}async removeTokenBindingKey(n){if(await this.cache.removeItem(n),await this.cache.containsKey(n))throw P(Qy)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(n){return n instanceof Error?this.logger.error(`Clearing keystore failed with error: ${n.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(n,a,r,c){const h=this.performanceClient?.startMeasurement(v.CryptoOptsSignJwt,c),d=await this.cache.getItem(a);if(!d)throw G(ad);const g=await eh(d.publicKey),m=Sy(g),y=Us(JSON.stringify({kid:a})),S=ed.getShrHeaderString({...r?.header,alg:g.alg,kid:y}),_=Us(S);n.cnf={jwk:JSON.parse(m)};const k=Us(JSON.stringify(n)),x=`${_}.${k}`,F=new TextEncoder().encode(x),ge=await X_(d.privateKey,F),Ae=Ri(new Uint8Array(ge)),he=`${x}.${Ae}`;return h&&h.end({success:!0}),he}async hashString(n){return Sv(n)}}Qn.POP_KEY_USAGES=["sign","verify"];Qn.EXTRACTABLE=!0;function Sy(u){return JSON.stringify(u,Object.keys(u).sort())}const mb=1440*60*1e3,gh={Lax:"Lax",None:"None"};class Ov{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,r=document.cookie.split(";");for(let c=0;c<r.length;c++){const h=r[c],[d,...g]=decodeURIComponent(h).trim().split("="),m=g.join("=");if(d===a)return m}return""}getUserData(){throw P(ae)}setItem(n,a,r,c=!0,h=gh.Lax){let d=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${h};`;if(r){const g=pb(r);d+=`expires=${g};`}(c||h===gh.None)&&(d+="Secure;"),document.cookie=d}async setUserData(){return Promise.reject(P(ae))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(r=>{const c=decodeURIComponent(r).trim().split("=");a.push(c[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function pb(u){const n=new Date;return new Date(n.getTime()+u*mb).toUTCString()}function vi(u,n){const a=u.getItem(Ya(n));return a?JSON.parse(a):[]}function dn(u,n,a){const r=n.getItem(Qa(u,a));if(r){const c=JSON.parse(r);if(c&&c.hasOwnProperty("idToken")&&c.hasOwnProperty("accessToken")&&c.hasOwnProperty("refreshToken"))return c}return{idToken:[],accessToken:[],refreshToken:[]}}function xs(u){return u.hasOwnProperty("id")&&u.hasOwnProperty("nonce")&&u.hasOwnProperty("data")}const Ey="msal.cache.encryption",yb="msal.broadcast.cache";class Cb{constructor(n,a,r){if(!window.localStorage)throw gd(Ac);this.memoryStorage=new Sc,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=r,this.broadcast=new BroadcastChannel(yb)}async initialize(n){const a=new Ov,r=a.getItem(Ey);let c={key:"",id:""};if(r)try{c=JSON.parse(r)}catch{}if(c.key&&c.id){const h=Qt(bi,v.Base64Decode,this.logger,this.performanceClient,n)(c.key);this.encryptionCookie={id:c.id,key:await O(fy,v.GenerateHKDF,this.logger,this.performanceClient,n)(h)}}else{const h=mn(),d=await O(Tv,v.GenerateBaseKey,this.logger,this.performanceClient,n)(),g=Qt(Ri,v.UrlEncodeArr,this.logger,this.performanceClient,n)(new Uint8Array(d));this.encryptionCookie={id:h,key:await O(fy,v.GenerateHKDF,this.logger,this.performanceClient,n)(d)};const m={id:h,key:g};a.setItem(Ey,JSON.stringify(m),0,!0,gh.None)}await O(this.importExistingCache.bind(this),v.ImportExistingCache,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw G(tr);return this.memoryStorage.getItem(n)}async decryptData(n,a,r){if(!this.initialized||!this.encryptionCookie)throw G(tr);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const c=await O(gy,v.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!c)return null;try{return{...JSON.parse(c),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,r,c,h){if(!this.initialized||!this.encryptionCookie)throw G(tr);if(h)this.setItem(n,a);else{const{data:d,nonce:g}=await O($_,v.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a,this.getContext(n)),m={id:this.encryptionCookie.id,nonce:g,data:d,lastUpdatedAt:c};this.setItem(n,JSON.stringify(m))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),vi(this).forEach(r=>this.removeItem(r));const a=dn(this.clientId,this);a.idToken.forEach(r=>this.removeItem(r)),a.accessToken.forEach(r=>this.removeItem(r)),a.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(pt)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=vi(this);a=await this.importArray(a,n),a.length?this.setItem(Ya(),JSON.stringify(a)):this.removeItem(Ya());const r=dn(this.clientId,this);r.idToken=await this.importArray(r.idToken,n),r.accessToken=await this.importArray(r.accessToken,n),r.refreshToken=await this.importArray(r.refreshToken,n),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Qa(this.clientId),JSON.stringify(r)):this.removeItem(Qa(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const r=this.getItem(n);if(!r)return null;let c;try{c=JSON.parse(r)}catch{return null}return xs(c)?c.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),O(gy,v.Decrypt,this.logger,this.performanceClient,a)(this.encryptionCookie.key,c.nonce,this.getContext(n),c.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),r)}async importArray(n,a){const r=[],c=[];return n.forEach(h=>{const d=this.getItemFromEncryptedCache(h,a).then(g=>{g?(this.memoryStorage.setItem(h,g),r.push(h)):this.removeItem(h)});c.push(d)}),await Promise.all(c),r}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n){this.logger.trace("Updating internal cache from broadcast event");const a=this.performanceClient.startMeasurement(v.LocalStorageUpdated);a.add({isBackground:!0});const{key:r,value:c,context:h}=n.data;if(!r){this.logger.error("Broadcast event missing key"),a.end({success:!1,errorCode:"noKey"});return}if(h&&h!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${h}`),a.end({success:!1,errorCode:"contextMismatch"});return}c?(this.memoryStorage.setItem(r,c),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),a.end({success:!0})}}class vb{constructor(){if(!window.sessionStorage)throw gd(Ac)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const X={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function Ci(u,n){const a=u.indexOf(n);a>-1&&u.splice(a,1)}class mh extends ch{constructor(n,a,r,c,h,d,g){super(n,r,c,h,g),this.cacheConfig=a,this.logger=c,this.internalStorage=new Sc,this.browserStorage=_y(n,a.cacheLocation,c,h),this.temporaryCacheStorage=_y(n,a.temporaryCacheLocation,c,h),this.cookieStorage=new Ov,this.eventHandler=d}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=vi(this.browserStorage),r=dn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},n);for(let h=0;h<Ps;h++){const d=h;await this.removeStaleAccounts(h,d,n)}for(let h=0;h<gt;h++){const d=h;await this.migrateIdTokens(h,d,n)}const c=this.getKMSIValues();for(let h=0;h<gt;h++)await this.migrateAccessTokens(h,c,n),await this.migrateRefreshTokens(h,c,n);a=vi(this.browserStorage),r=dn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},n)}async updateOldEntry(n,a){const r=this.browserStorage.getItem(n),c=this.validateAndParseJson(r||"");if(!c)return this.browserStorage.removeItem(n),null;if(!c.lastUpdatedAt)c.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(c),a);else if(ey(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const h=xs(c)?await this.browserStorage.decryptData(n,c,a):c;return!h||!gc(h)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):(ty(h)||ny(h))&&h.expiresOn&&$s(h.expiresOn,Oy)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):h}async removeStaleAccounts(n,a,r){const c=vi(this.browserStorage,n);if(c.length!==0){for(const h of[...c]){this.performanceClient.incrementFields({oldAcntCount:1},r);const d=this.browserStorage.getItem(h),g=this.validateAndParseJson(d||"");if(!g){Ci(c,h);continue}if(g.lastUpdatedAt)ey(g.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(h,g,a,r),Ci(c,h));else{g.lastUpdatedAt=Date.now().toString(),this.setItem(h,JSON.stringify(g),r);continue}}this.setAccountKeys(c,r,n)}}async removeAccountOldSchema(n,a,r,c){const d=(xs(a)?await this.browserStorage.decryptData(n,a,c):a)?.homeAccountId;if(d){const g=this.getTokenKeys(r);[...g.idToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),Ci(g.idToken,m)}),[...g.accessToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),Ci(g.accessToken,m)}),[...g.refreshToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),Ci(g.refreshToken,m)}),this.setTokenKeys(g,c,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},c),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const r of a){const c=this.browserStorage.getUserData(r);if(c){const h=JSON.parse(c),d=En(h.secret,At);d&&(n[h.homeAccountId]=_n(d))}}return n}async migrateIdTokens(n,a,r){const c=dn(this.clientId,this.browserStorage,n);if(c.idToken.length===0)return;const h=dn(this.clientId,this.browserStorage,gt),d=vi(this.browserStorage),g=vi(this.browserStorage,a);for(const m of[...c.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const y=await this.updateOldEntry(m,r);if(!y){Ci(c.idToken,m);continue}const S=d.find(he=>he.includes(y.homeAccountId)),_=g.find(he=>he.includes(y.homeAccountId));let k=null;if(S)k=this.getAccount(S,r);else if(_){const he=this.browserStorage.getItem(_),me=this.validateAndParseJson(he||"");k=me&&xs(me)?await this.browserStorage.decryptData(_,me,r):me}if(!k){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const x=En(y.secret,At),ee=this.generateCredentialKey(y),F=this.getIdTokenCredential(ee,r),ge=Object.keys(x).includes("signin_state"),Ae=F&&Object.keys(En(F.secret,At)||{}).includes("signin_state");if(!F||y.lastUpdatedAt>F.lastUpdatedAt&&(ge||!Ae)){const he=k.tenantProfiles||[],me=Uh(x)||k.realm;if(me&&!he.find(Pe=>Pe.tenantId===me)){const Pe=cc(k.homeAccountId,k.localAccountId,me,x);he.push(Pe)}k.tenantProfiles=he;const Ne=this.generateAccountKey(Ke.getAccountInfo(k)),Ge=_n(x);await this.setUserData(Ne,JSON.stringify(k),r,k.lastUpdatedAt,Ge),d.includes(Ne)||d.push(Ne),await this.setUserData(ee,JSON.stringify(y),r,y.lastUpdatedAt,Ge),this.performanceClient.incrementFields({migratedITCount:1},r),h.idToken.push(ee)}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r),this.setAccountKeys(d,r)}async migrateAccessTokens(n,a,r){const c=dn(this.clientId,this.browserStorage,n);if(c.accessToken.length===0)return;const h=dn(this.clientId,this.browserStorage,gt);for(const d of[...c.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const g=await this.updateOldEntry(d,r);if(!g){Ci(c.accessToken,d);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!h.accessToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r),h.accessToken.push(m);else{const S=this.getAccessTokenCredential(m,r);(!S||g.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r)}async migrateRefreshTokens(n,a,r){const c=dn(this.clientId,this.browserStorage,n);if(c.refreshToken.length===0)return;const h=dn(this.clientId,this.browserStorage,gt);for(const d of[...c.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const g=await this.updateOldEntry(d,r);if(!g){Ci(c.refreshToken,d);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!h.refreshToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r),h.refreshToken.push(m);else{const S=this.getRefreshTokenCredential(m,r);(!S||g.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r)}trackVersionChanges(n){const a=this.browserStorage.getItem(vy);a&&(this.logger.info(`MSAL.js was last initialized by version: ${a}`),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==Zi&&this.setItem(vy,Zi,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,r){const c=new Array(gt+1).fill(0),h=[],d=20;for(let g=0;g<=d;g++)try{if(this.browserStorage.setItem(n,a),g>0)for(let m=0;m<=gt;m++){const y=c.slice(0,m).reduce((_,k)=>_+k,0);if(y>=g)break;const S=g>y+c[m]?y+c[m]:g;g>y&&c[m]>0&&this.removeAccessTokenKeys(h.slice(y,S),r,m)}break}catch(m){const y=sh(m);if(y.errorCode===Vs&&g<d){if(!h.length)for(let S=0;S<=gt;S++)if(n===Qa(this.clientId,S)){const _=JSON.parse(a).accessToken;h.push(..._),c[S]=_.length}else{const _=this.getTokenKeys(S).accessToken;h.push(..._),c[S]=_.length}if(h.length<=g)throw y;this.removeAccessToken(h[g],r,!1)}else throw y}}async setUserData(n,a,r,c,h){const d=new Array(gt+1).fill(0),g=[],m=20;for(let y=0;y<=m;y++)try{if(await O(this.browserStorage.setUserData.bind(this.browserStorage),v.SetUserData,this.logger,this.performanceClient)(n,a,r,c,h),y>0)for(let S=0;S<=gt;S++){const _=d.slice(0,S).reduce((x,ee)=>x+ee,0);if(_>=y)break;const k=y>_+d[S]?_+d[S]:y;y>_&&d[S]>0&&this.removeAccessTokenKeys(g.slice(_,k),r,S)}break}catch(S){const _=sh(S);if(_.errorCode===Vs&&y<m){if(!g.length)for(let k=0;k<=gt;k++){const x=this.getTokenKeys(k).accessToken;g.push(...x),d[k]=x.length}if(g.length<=y)throw _;this.removeAccessToken(g[y],r,!1)}else throw _}}getAccount(n,a){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(n);if(!r)return this.removeAccountKeyFromMap(n,a),null;const c=this.validateAndParseJson(r);return!c||!Ke.isAccountEntity(c)?null:(this.performanceClient.addFields({accountCachedBy:L_(c.cachedByApiId)},a),ch.toObject(new Ke,c))}async setAccount(n,a,r,c){this.logger.trace("BrowserCacheManager.setAccount called");const h=this.generateAccountKey(Ke.getAccountInfo(n)),d=Date.now().toString();n.lastUpdatedAt=d,n.cachedByApiId=c,await this.setUserData(h,JSON.stringify(n),a,d,r);const g=this.addAccountKeyToMap(h,a);this.performanceClient.addFields({kmsi:r},a),this.cacheConfig.cacheLocation===dt.LocalStorage&&g&&this.eventHandler.emitEvent(X.ACCOUNT_ADDED,void 0,Ke.getAccountInfo(n))}getAccountKeys(){return vi(this.browserStorage)}setAccountKeys(n,a,r=Ps){n.length===0?this.removeItem(Ya(r)):this.setItem(Ya(r),JSON.stringify(n),a)}addAccountKeyToMap(n,a){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${n}`);const r=this.getAccountKeys();return r.indexOf(n)===-1?(r.push(n),this.setItem(Ya(),JSON.stringify(r),a),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${n}`);const r=this.getAccountKeys(),c=r.indexOf(n);c>-1?(r.splice(c,1),this.setAccountKeys(r,a),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(n,a){const r=this.getActiveAccount(a);r?.homeAccountId===n.homeAccountId&&r?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(c=>{c.includes(n.homeAccountId)&&c.includes(n.environment)&&this.browserStorage.removeItem(c)}),this.cacheConfig.cacheLocation===dt.LocalStorage&&this.eventHandler.emitEvent(X.ACCOUNT_REMOVED,void 0,n)}removeIdToken(n,a){super.removeIdToken(n,a);const r=this.getTokenKeys(),c=r.idToken.indexOf(n);c>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(c,1),this.setTokenKeys(r,a))}removeAccessToken(n,a,r=!0){super.removeAccessToken(n,a),r&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,r=gt){this.logger.trace("removeAccessTokenKey called");const c=this.getTokenKeys(r);let h=0;if(n.forEach(d=>{const g=c.accessToken.indexOf(d);g>-1&&(c.accessToken.splice(g,1),h++)}),h>0){this.logger.info(`removed ${h} accessToken keys from tokenKeys map`),this.setTokenKeys(c,a,r);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const r=this.getTokenKeys(),c=r.refreshToken.indexOf(n);c>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(c,1),this.setTokenKeys(r,a))}getTokenKeys(n=gt){return dn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,r=gt){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(Qa(this.clientId,r));return}else this.setItem(Qa(this.clientId,r),JSON.stringify(n),a)}getIdTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(n,a),null;const c=this.validateAndParseJson(r);return!c||!i_(c)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),c)}async setIdTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys();d.idToken.indexOf(c)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),d.idToken.push(c),this.setTokenKeys(d,a))}getAccessTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([n],a),null;const c=this.validateAndParseJson(r);return!c||!ty(c)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),c)}async setAccessTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys(),g=d.accessToken.indexOf(c);g!==-1&&d.accessToken.splice(g,1),this.logger.trace(`access token ${g===-1?"added to":"updated in"} map`),d.accessToken.push(c),this.setTokenKeys(d,a)}getRefreshTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(n,a),null;const c=this.validateAndParseJson(r);return!c||!ny(c)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),c)}async setRefreshTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys();d.refreshToken.indexOf(c)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),d.refreshToken.push(c),this.setTokenKeys(d,a))}getAppMetadata(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!s_(n,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(n,a){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=r_(n);this.setItem(r,JSON.stringify(n),a)}getServerTelemetry(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!a_(n,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(n,a,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(n,JSON.stringify(a),r)}getAuthorityMetadata(n){const a=this.internalStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return r&&c_(n,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(Ds.WRAPPER_SKU,n),this.internalStorage.setItem(Ds.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(Ds.WRAPPER_SKU)||H.EMPTY_STRING,a=this.internalStorage.getItem(Ds.WRAPPER_VER)||H.EMPTY_STRING;return[n,a]}setAuthorityMetadata(n,a){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(Kp.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(a);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const c=this.validateAndParseJson(r);return c?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:c.homeAccountId,localAccountId:c.localAccountId,tenantId:c.tenantId},n)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(n,a){const r=this.generateCacheKey(Kp.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("setActiveAccount: Active account set");const c={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId,lastUpdatedAt:Nt().toString()};this.setItem(r,JSON.stringify(c),a)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(X.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!o_(n,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(n,a,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(n,JSON.stringify(a),r)}getTemporaryCache(n,a){const r=a?this.generateCacheKey(n):n;if(this.cacheConfig.storeAuthStateInCookie){const h=this.cookieStorage.getItem(r);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),h}const c=this.temporaryCacheStorage.getItem(r);if(!c){if(this.cacheConfig.cacheLocation===dt.LocalStorage){const h=this.browserStorage.getItem(r);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),h}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),c}setTemporaryCache(n,a,r){const c=r?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(c,a),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(c,a,void 0,this.cacheConfig.secureCookies))}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(n))}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(pt)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(pt)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(n){this.performanceClient.addQueueMeasurement(v.ClearTokensAndKeysWithClaims,n);const a=this.getTokenKeys();let r=0;a.accessToken.forEach(c=>{const h=this.getAccessTokenCredential(c,n);h?.requestedClaimsHash&&c.includes(h.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(c,n),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(n){return Yt.startsWith(n,pt)?n:`${pt}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===ut.REFRESH_TOKEN&&n.familyId||n.clientId,r=n.tokenType&&n.tokenType.toLowerCase()!==be.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${pt}.${gt}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",n.requestedClaimsHash||"",r].join(Cy).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${pt}.${Ps}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(Cy).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Je.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Je.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Je.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Je.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Je.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(n,a){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=sr(JSON.stringify(n));if(this.setTemporaryCache(Je.REQUEST_PARAMS,r,!0),a){const c=sr(a);this.setTemporaryCache(Je.VERIFIER,c,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(Je.REQUEST_PARAMS,!0);if(!n)throw G(WC);const a=this.getTemporaryCache(Je.VERIFIER,!0);let r,c="";try{r=JSON.parse(At(n)),a&&(c=At(a))}catch(h){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${h}`),G(ev)}return[r,c]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const n=this.getTemporaryCache(Je.NATIVE_REQUEST,!0);if(!n)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${pt}.${Je.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(n),this.resetRequestCache(),_v(window),null}}setInteractionInProgress(n,a=Ti.SIGNIN){const r=`${pt}.${Je.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())throw G(YC);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(n,a){const r=dc(n.account?.homeAccountId,n.account?.environment,n.idToken,this.clientId,n.tenantId);let c;a.claims&&(c=await this.cryptoImpl.hashString(a.claims));const h=fc(n.account?.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?Wp(n.expiresOn):0,n.extExpiresOn?Wp(n.extExpiresOn):0,At,void 0,n.tokenType,void 0,a.sshKid,a.claims,c),d={idToken:r,accessToken:h};return this.saveCacheRecord(d,n.correlationId,_n(En(n.idToken,At)),fe.hydrateCache)}async saveCacheRecord(n,a,r,c,h){try{await super.saveCacheRecord(n,a,r,c,h)}catch(d){if(d instanceof qa&&this.performanceClient&&a)try{const g=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:g.refreshToken.length,cacheIdCount:g.idToken.length,cacheAtCount:g.accessToken.length},a)}catch{}throw d}}}function _y(u,n,a,r){try{switch(n){case dt.LocalStorage:return new Cb(u,a,r);case dt.SessionStorage:return new vb;case dt.MemoryStorage:default:break}}catch(c){a.error(c)}return new Sc}const Tb=(u,n,a,r)=>{const c={cacheLocation:dt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new mh(u,c,js,n,a,r)};function Ab(u,n,a,r,c){return u.verbose("getAllAccounts called"),a?n.getAllAccounts(c||{},r):[]}function Sb(u,n,a,r){const c=a.getAccountInfoFilteredBy(u,r);return c?(n.verbose("getAccount: Account matching provided filter found, returning"),c):(n.verbose("getAccount: No matching account found, returning null"),null)}function Eb(u,n,a,r){if(n.trace("getAccountByUsername called"),!u)return n.warning("getAccountByUsername: No username provided"),null;const c=a.getAccountInfoFilteredBy({username:u},r);return c?(n.verbose("getAccountByUsername: Account matching username found, returning"),n.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${u}`),c):(n.verbose("getAccountByUsername: No matching account found, returning null"),null)}function _b(u,n,a,r){if(n.trace("getAccountByHomeId called"),!u)return n.warning("getAccountByHomeId: No homeAccountId provided"),null;const c=a.getAccountInfoFilteredBy({homeAccountId:u},r);return c?(n.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),n.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${u}`),c):(n.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function bb(u,n,a,r){if(n.trace("getAccountByLocalId called"),!u)return n.warning("getAccountByLocalId: No localAccountId provided"),null;const c=a.getAccountInfoFilteredBy({localAccountId:u},r);return c?(n.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),n.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${u}`),c):(n.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function wb(u,n,a){n.setActiveAccount(u,a)}function Rb(u,n){return u.getActiveAccount(n)}const Ib="msal.broadcast.event";class kb{constructor(n){this.eventCallbacks=new Map,this.logger=n||new wi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Ib)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,r){if(typeof window<"u"){const c=r||ob();return this.eventCallbacks.has(c)?(this.logger.error(`Event callback with id: ${c} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(c,[n,a||[]]),this.logger.verbose(`Event callback registered with id: ${c}`),c)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose(`Event callback ${n} removed.`)}emitEvent(n,a,r,c){const h={eventType:n,interactionType:a||null,payload:r||null,error:c||null,timestamp:Date.now()};switch(n){case X.ACCOUNT_ADDED:case X.ACCOUNT_REMOVED:case X.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(h);break;default:this.invokeCallbacks(h);break}}invokeCallbacks(n){this.eventCallbacks.forEach(([a,r],c)=>{(r.length===0||r.includes(n.eventType))&&(this.logger.verbose(`Emitting event to callback ${c}: ${n.eventType}`),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class Mv{constructor(n,a,r,c,h,d,g,m,y){this.config=n,this.browserStorage=a,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=h,this.navigationClient=d,this.platformAuthProvider=m,this.correlationId=y||mn(),this.logger=c.clone(Ot.MSAL_SKU,Zi,this.correlationId),this.performanceClient=g}async clearCacheOnLogout(n,a){if(a)try{this.browserStorage.removeAccount(a,n),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(n),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(n){this.logger.verbose("getRedirectUri called");const a=n||this.config.auth.redirectUri;return Ce.getAbsoluteUrl(a,Yn())}initializeServerTelemetryManager(n,a){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:n,forceRefresh:a||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new or(r,this.browserStorage)}async getDiscoveredAuthority(n){const{account:a}=n,r=n.requestExtraQueryParameters&&n.requestExtraQueryParameters.hasOwnProperty("instance_aware")?n.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(v.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const c={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},h=n.requestAuthority||this.config.auth.authority,d=r?.length?r==="true":this.config.auth.instanceAware,g=a&&d?this.config.auth.authority.replace(Ce.getDomainFromUrl(h),a.environment):h,m=mt.generateAuthority(g,n.requestAzureCloudOptions||this.config.auth.azureCloudOptions),y=await O(MC,v.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(m,this.config.system.networkClient,this.browserStorage,c,this.logger,this.correlationId,this.performanceClient);if(a&&!y.isAlias(a.environment))throw ke(rC);return y}}async function Cd(u,n,a,r){a.addQueueMeasurement(v.InitializeBaseRequest,u.correlationId);const c=u.authority||n.auth.authority,h=[...u&&u.scopes||[]],d={...u,correlationId:u.correlationId,authority:c,scopes:h};if(!d.authenticationScheme)d.authenticationScheme=be.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(d.authenticationScheme===be.SSH){if(!u.sshJwk)throw ke(sc);if(!u.sshKid)throw ke(iC)}r.verbose(`Authentication Scheme set to "${d.authenticationScheme}" as configured in Auth request`)}return n.cache.claimsBasedCachingEnabled&&u.claims&&!Yt.isEmptyObj(u.claims)&&(d.requestedClaimsHash=await Sv(u.claims)),d}async function Ob(u,n,a,r,c){r.addQueueMeasurement(v.InitializeSilentRequest,u.correlationId);const h=await O(Cd,v.InitializeBaseRequest,c,r,u.correlationId)(u,a,r,c);return{...u,...h,account:n,forceRefresh:u.forceRefresh||!1}}function Nv(u,n){let a;const r=u.httpMethod;if(n===Mt.EAR){if(a=r||Vi.POST,a!==Vi.POST)throw ke(sC)}else a=r||Vi.GET;if(u.authorizePostBodyParameters&&a!==Vi.POST)throw ke(cC);return a}class Wa extends Mv{initializeLogoutRequest(n){this.logger.verbose("initializeLogoutRequest called",n?.correlationId);const a={correlationId:this.correlationId||mn(),...n};if(n)if(n.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(n.account){const r=this.getLogoutHintFromIdTokenClaims(n.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),a.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",a.correlationId),a.postLogoutRedirectUri=Ce.getAbsoluteUrl(n.postLogoutRedirectUri,Yn())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",a.correlationId),a.postLogoutRedirectUri=Ce.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Yn())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",a.correlationId),a.postLogoutRedirectUri=Ce.getAbsoluteUrl(Yn(),Yn())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(n){this.performanceClient.addQueueMeasurement(v.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await O(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(n);return new HC(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:r,requestAzureCloudOptions:c,requestExtraQueryParameters:h,account:d}=n;this.performanceClient.addQueueMeasurement(v.StandardInteractionClientGetClientConfiguration,this.correlationId);const g=n.authority||await O(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:c,requestExtraQueryParameters:h,account:d}),m=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:g,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:m.loggerCallback,piiLoggingEnabled:m.piiLoggingEnabled,logLevel:m.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:Ot.MSAL_SKU,version:Zi,cpu:H.EMPTY_STRING,os:H.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(n,a){this.performanceClient.addQueueMeasurement(v.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(n.redirectUri),c={interactionType:a},h=Za.setRequestState(this.browserCrypto,n&&n.state||H.EMPTY_STRING,c),g={...await O(Cd,v.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...n,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:h,nonce:n.nonce||mn(),responseMode:this.config.auth.OIDCOptions.serverResponseType},m={...g,httpMethod:Nv(g,this.config.auth.protocolMode)};if(n.loginHint||n.sid)return m;const y=n.account||this.browserStorage.getActiveAccount(this.correlationId);return y&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${y.homeAccountId}`,this.correlationId),m.account=y),m}}function Mb(u,n){if(!n)return null;try{return Za.parseRequestState(u,n).libraryState.meta}catch{throw P(Va)}}function nr(u,n,a){const r=Qs(u);if(!r)throw hC(u)?(a.error(`A ${n} is present in the iframe but it does not contain known properties. It's likely that the ${n} has been replaced by code running on the redirectUri page.`),a.errorPii(`The ${n} detected is: ${u}`),G(GC)):(a.error(`The request has returned to the redirectUri but a ${n} is not present. It's likely that the ${n} has been removed or the page has been redirected by code running on the redirectUri page.`),G(KC));return r}function Nb(u,n,a){if(!u.state)throw G(id);const r=Mb(n,u.state);if(!r)throw G(qC);if(r.interactionType!==a)throw G(jC)}class Dv{constructor(n,a,r,c,h){this.authModule=n,this.browserStorage=a,this.authCodeRequest=r,this.logger=c,this.performanceClient=h}async handleCodeResponse(n,a,r){this.performanceClient.addQueueMeasurement(v.HandleCodeResponse,a.correlationId);let c;try{c=E_(n,a.state)}catch(h){throw h instanceof ea&&h.subError===rr?G(rr):h}return O(this.handleCodeResponseFromServer.bind(this),v.HandleCodeResponseFromServer,this.logger,this.performanceClient,a.correlationId)(c,a,r)}async handleCodeResponseFromServer(n,a,r,c=!0){if(this.performanceClient.addQueueMeasurement(v.HandleCodeResponseFromServer,a.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=n.code,n.cloud_instance_host_name&&await O(this.authModule.updateAuthority.bind(this.authModule),v.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,a.correlationId)(n.cloud_instance_host_name,a.correlationId),c&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const d=this.createCcsCredentials(a);d&&(this.authCodeRequest.ccsCredential=d)}return await O(this.authModule.acquireToken.bind(this.authModule),v.AuthClientAcquireToken,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,r,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:gn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:gn.UPN}:null}}const Db="ContentError",Ub="PageException",Uv="user_switch";const Hb="USER_INTERACTION_REQUIRED",Lb="USER_CANCEL",zb="NO_NETWORK",Pb="DISABLED",xb="ACCOUNT_UNAVAILABLE",Bb="UX_NOT_ALLOWED";const Kb=-2147186943,Gb={[Uv]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Sn extends Oe{constructor(n,a,r){super(n,a),Object.setPrototypeOf(this,Sn.prototype),this.name="NativeAuthError",this.ext=r}}function Ka(u){if(u.ext&&u.ext.status&&u.ext.status===Pb||u.ext&&u.ext.error&&u.ext.error===Kb)return!0;switch(u.errorCode){case Db:case Ub:return!0;default:return!1}}function ac(u,n,a){if(a&&a.status)switch(a.status){case xb:return ec(NC);case Hb:return new sn(u,n);case Lb:return G(rr);case zb:return G(tc);case Bb:return ec(Jh)}return new Sn(u,Gb[u]||n,a)}class Hv extends Wa{async acquireToken(n){this.performanceClient.addQueueMeasurement(v.SilentCacheClientAcquireToken,n.correlationId);const a=this.initializeServerTelemetryManager(fe.acquireTokenSilent_silentFlow),r=await O(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),c=new T_(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const d=(await O(c.acquireCachedToken.bind(c),v.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),d}catch(h){throw h instanceof lr&&h.errorCode===ad&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),h}}logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n);return this.clearCacheOnLogout(a.correlationId,a?.account)}}class Bs extends Mv{constructor(n,a,r,c,h,d,g,m,y,S,_,k){super(n,a,r,c,h,d,m,y,k),this.apiId=g,this.accountId=S,this.platformAuthProvider=y,this.nativeStorageManager=_,this.silentCacheClient=new Hv(n,this.nativeStorageManager,r,c,h,d,m,y,k);const x=this.platformAuthProvider.getExtensionName();this.skus=or.makeExtraSkuString({libraryName:Ot.MSAL_SKU,libraryVersion:Zi,extensionName:x,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[LE]:this.skus}}async acquireToken(n,a){this.performanceClient.addQueueMeasurement(v.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(v.NativeInteractionClientAcquireToken,this.correlationId),c=Nt(),h=this.initializeServerTelemetryManager(this.apiId);try{const d=await this.initializeNativeRequest(n);try{const m=await this.acquireTokensFromCache(this.accountId,d);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),m}catch(m){if(a===vt.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),m;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const g=await this.platformAuthProvider.sendMessage(d);return await this.handleNativeResponse(g,d,c).then(m=>(r.end({success:!0,isNativeBroker:!0,requestId:m.requestId}),h.clearNativeBrokerErrorCode(),m)).catch(m=>{throw r.end({success:!1,errorCode:m.errorCode,subErrorCode:m.subError}),m})}catch(d){throw d instanceof Sn&&h.setNativeBrokerErrorCode(d.errorCode),r.end({success:!1}),d}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:We.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),P(oh);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},this.correlationId);if(!r)throw P(oh);try{const c=this.createSilentCacheRequest(a,r),h=await this.silentCacheClient.acquireToken(c),d={...r,idTokenClaims:h?.idTokenClaims,idToken:h?.idToken};return{...h,account:d}}catch(c){throw c}}async acquireTokenRedirect(n,a){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=n;delete r.onRedirectNavigate;const c=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(c)}catch(g){if(g instanceof Sn&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(g.errorCode),Ka(g)))throw g}this.browserStorage.setTemporaryCache(Je.NATIVE_REQUEST,JSON.stringify(c),!0);const h={apiId:fe.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(n.redirectUri);a.end({success:!0}),await this.navigationClient.navigateExternal(d,h)}async handleRedirectPromise(n,a){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:c,...h}=r;c&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.NATIVE_REQUEST));const d=Nt();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const g=await this.platformAuthProvider.sendMessage(h),m=await this.handleNativeResponse(g,h,d);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),m}catch(g){throw g}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const c=En(n.id_token,At),h=this.createHomeAccountIdentifier(n,c),d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(h!==d&&n.account.id!==a.accountId)throw ac(Uv);const g=await this.getDiscoveredAuthority({requestAuthority:a.authority}),m=Zh(this.browserStorage,g,h,At,this.correlationId,c,n.client_info,void 0,c.tid,void 0,n.account.id,this.logger);n.expires_in=Number(n.expires_in);const y=await this.generateAuthenticationResult(n,a,c,m,g.canonicalAuthority,r);return await this.cacheAccount(m,this.correlationId,_n(c)),await this.cacheNativeTokens(n,a,h,c,n.access_token,y.tenantId,r),y}createHomeAccountIdentifier(n,a){return Ke.generateHomeAccountId(n.client_info||H.EMPTY_STRING,fn.Default,this.logger,this.browserCrypto,a)}generateScopes(n,a){return a?We.fromString(a):We.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===be.POP&&a.signPopToken){if(n.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),n.shr;const r=new Xa(this.browserCrypto),c={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce};if(!a.keyId)throw P(bh);return r.signPopToken(n.access_token,a.keyId,c)}else return n.access_token}async generateAuthenticationResult(n,a,r,c,h,d){const g=this.addTelemetryFromNativeResponse(n.properties.MATS),m=this.generateScopes(a.scope,n.scope),y=n.account.properties||{},S=y.UID||r.oid||r.sub||H.EMPTY_STRING,_=y.TenantId||r.tid||H.EMPTY_STRING,k=Dh(Ke.getAccountInfo(c),void 0,r,n.id_token);k.nativeAccountId!==n.account.id&&(k.nativeAccountId=n.account.id);const x=await this.generatePopAccessToken(n,a),ee=a.tokenType===be.POP?be.POP:be.BEARER;return{authority:h,uniqueId:S,tenantId:_,scopes:m.asArray(),account:k,idToken:n.id_token,idTokenClaims:r,accessToken:x,fromCache:g?this.isResponseFromCache(g):!1,expiresOn:ja(d+n.expires_in),tokenType:ee,correlationId:this.correlationId,state:n.state,fromNativeBroker:!0}}async cacheAccount(n,a,r){await this.browserStorage.setAccount(n,this.correlationId,r,this.apiId),this.browserStorage.removeAccountContext(Ke.getAccountInfo(n),a)}cacheNativeTokens(n,a,r,c,h,d,g){const m=dc(r,a.authority,n.id_token||"",a.clientId,c.tid||""),y=a.tokenType===be.POP?H.SHR_NONCE_VALIDITY:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,S=g+y,_=this.generateScopes(n.scope,a.scope),k=fc(r,a.authority,h,a.clientId,c.tid||d,_.printScopes(),S,0,At,void 0,a.tokenType,void 0,a.keyId),x={idToken:m,accessToken:k};return this.nativeStorageManager.saveCacheRecord(x,this.correlationId,_n(c),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===be.POP?H.SHR_NONCE_VALIDITY:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const a=await this.getCanonicalAuthority(n),{scopes:r,...c}=n,h=new We(r||[]);h.appendScopes(Ja);const d={...c,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:h.printScopes(),redirectUri:this.getRedirectUri(n.redirectUri),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraQueryParameters,...n.tokenQueryParameters},extendedExpiryToken:!1,keyId:n.popKid};if(d.signPopToken&&n.popKid)throw G(dv);if(this.handleExtraBrokerParams(d),d.extraParameters=d.extraParameters||{},d.extraParameters.telemetry=on.MATS_TELEMETRY,n.authenticationScheme===be.POP){const g={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce},m=new Xa(this.browserCrypto);let y;if(d.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:d.keyId})),d.signPopToken=!1;else{const S=await O(m.generateCnf.bind(m),v.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(g,this.logger);y=S.reqCnfString,d.keyId=S.kid,d.signPopToken=!0}d.reqCnf=y}return this.addRequestSKUs(d),d}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority;n.account&&await this.getDiscoveredAuthority({requestAuthority:a,requestAzureCloudOptions:n.azureCloudOptions,account:n.account});const r=new Ce(a);return r.validateAsUri(),r}getPrompt(n){switch(this.apiId){case fe.ssoSilent:case fe.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),ht.NONE}if(!n){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(n){case ht.NONE:case ht.CONSENT:case ht.LOGIN:case ht.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),n;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${n} is not compatible with native flow`),G(uv)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty(Xs)&&n.extraParameters.hasOwnProperty(Js)&&n.extraParameters.hasOwnProperty(Xi);if(!n.embeddedClientId&&!a)return;let r="";const c=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,r=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[Js],r=n.extraParameters[Xi]),n.extraParameters={child_client_id:r,child_redirect_uri:c},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:c},this.correlationId)}}async function vd(u,n,a,r,c){const h=S_({...u.auth,authority:n},a,r,c);if(qh(h,{sku:Ot.MSAL_SKU,version:Zi,os:"",cpu:""}),u.auth.protocolMode!==Mt.OIDC&&jh(h,u.telemetry.application),a.platformBroker&&(BE(h),c.addFields({isPlatformAuthorizeRequest:!0},a.correlationId),a.authenticationScheme===be.POP)){const d=new Qn(r,c),g=new Xa(d);let m;a.popKid?m=d.encodeKid(a.popKid):m=(await O(g.generateCnf.bind(g),v.PopTokenGenerateCnf,r,c,a.correlationId)(a,r)).reqCnfString,Fh(h,m)}return lc(h,a.correlationId,c),h}async function Td(u,n,a,r,c){if(!a.codeChallenge)throw ke(Oh);const h=await O(vd,v.GetStandardParams,r,c,a.correlationId)(u,n,a,r,c);return zh(h,Ch.CODE),Yh(h,a.codeChallenge,H.S256_CODE_CHALLENGE_METHOD),_i(h,a.extraQueryParameters||{}),$h(n,h,u.auth.encodeExtraQueryParams,a.extraQueryParameters)}async function Ad(u,n,a,r,c,h){if(!r.earJwk)throw G(nd);const d=await vd(n,a,r,c,h);zh(d,Ch.IDTOKEN_TOKEN_REFRESHTOKEN),ZE(d,r.earJwk),Yh(d,r.codeChallenge,H.S256_CODE_CHALLENGE_METHOD);const g=new Map;_i(g,r.extraQueryParameters||{});const m=$h(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return Lv(u,m,d)}async function Sd(u,n,a,r,c,h){const d=await vd(n,a,r,c,h);zh(d,Ch.CODE),Yh(d,r.codeChallenge,r.codeChallengeMethod||H.S256_CODE_CHALLENGE_METHOD),$E(d,r.authorizePostBodyParameters||{});const g=new Map;_i(g,r.extraQueryParameters||{});const m=$h(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return Lv(u,m,d)}function Lv(u,n,a){const r=u.createElement("form");return r.method="post",r.action=n,a.forEach((c,h)=>{const d=u.createElement("input");d.hidden=!0,d.name=h,d.value=c,r.appendChild(d)}),u.body.appendChild(r),r}async function zv(u,n,a,r,c,h,d,g,m,y){if(g.verbose("Account id found, calling WAM for token"),!y)throw G(rd);const S=new Qn(g,m),_=new Bs(r,c,S,g,d,r.system.navigationClient,a,m,y,n,h,u.correlationId),{userRequestState:k}=Za.parseRequestState(S,u.state);return O(_.acquireToken.bind(_),v.NativeInteractionClientAcquireToken,g,m,u.correlationId)({...u,state:k,prompt:void 0})}async function Fa(u,n,a,r,c,h,d,g,m,y,S,_){if(An.removeThrottle(d,c.auth.clientId,u),n.accountId)return O(zv,v.HandleResponsePlatformBroker,y,S,u.correlationId)(u,n.accountId,r,c,d,g,m,y,S,_);const k={...u,code:n.code||"",codeVerifier:a},x=new Dv(h,d,k,y,S);return await O(x.handleCodeResponse.bind(x),v.HandleCodeResponse,y,S,u.correlationId)(n,u,r)}async function Ed(u,n,a,r,c,h,d,g,m,y,S){if(An.removeThrottle(h,r.auth.clientId,u),LC(n,u.state),!n.ear_jwe)throw G(BC);if(!u.earJwk)throw G(nd);const _=JSON.parse(await O(Z_,v.DecryptEarResponse,m,y,u.correlationId)(u.earJwk,n.ear_jwe));if(_.accountId)return O(zv,v.HandleResponsePlatformBroker,m,y,u.correlationId)(u,_.accountId,a,r,h,d,g,m,y,S);const k=new Ji(r.auth.clientId,h,new Qn(m,y),m,null,null,y);k.validateTokenResponse(_);const x={code:"",state:u.state,nonce:u.nonce,client_info:_.client_info,cloud_graph_host_name:_.cloud_graph_host_name,cloud_instance_host_name:_.cloud_instance_host_name,cloud_instance_name:_.cloud_instance_name,msgraph_host:_.msgraph_host};return await O(k.handleServerTokenResponse.bind(k),v.HandleServerTokenResponse,m,y,u.correlationId)(_,c,Nt(),u,a,x,void 0,void 0,void 0,void 0)}const qb=32;async function Wi(u,n,a){u.addQueueMeasurement(v.GeneratePkceCodes,a);const r=Qt(jb,v.GenerateCodeVerifier,n,u,a)(u,n,a),c=await O(Yb,v.GenerateCodeChallengeFromVerifier,n,u,a)(r,u,n,a);return{verifier:r,challenge:c}}function jb(u,n,a){try{const r=new Uint8Array(qb);return Qt(Q_,v.GetRandomValues,n,u,a)(r),Ri(r)}catch{throw G(td)}}async function Yb(u,n,a,r){n.addQueueMeasurement(v.GenerateCodeChallengeFromVerifier,r);try{const c=await O(vv,v.Sha256Digest,a,n,r)(u,n,r);return Ri(new Uint8Array(c))}catch{throw G(td)}}class oc{constructor(n,a,r,c){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=c,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(v.NativeMessageHandlerHandshake),this.platformAuthType=on.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace(this.platformAuthType+" - sendMessage called.");const a={method:Jo.GetToken,request:n},r={channel:on.CHANNEL_ID,extensionId:this.extensionId,responseId:mn(),body:a};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const c=await new Promise((d,g)=>{this.resolvers.set(r.responseId,{resolve:d,reject:g})});return this.validatePlatformBrokerResponse(c)}static async createProvider(n,a,r){n.trace("PlatformAuthExtensionHandler - createProvider called.");try{const c=new oc(n,a,r,on.PREFERRED_EXTENSION_ID);return await c.sendHandshakeRequest(),c}catch{const h=new oc(n,a,r);return await h.sendHandshakeRequest(),h}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const n={channel:on.CHANNEL_ID,extensionId:this.extensionId,responseId:mn(),body:{method:Jo.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=a=>{this.onChannelMessage(a)},window.postMessage(n,window.origin,[this.messageChannel.port2]),new Promise((a,r)=>{this.handshakeResolvers.set(n.responseId,{resolve:a,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(G(cv)),this.handshakeResolvers.delete(n.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),n.source!==window)return;const a=n.data;if(!(!a.channel||a.channel!==on.CHANNEL_ID)&&!(a.extensionId&&a.extensionId!==this.extensionId)&&a.body.method===Jo.HandshakeRequest){const r=this.handshakeResolvers.get(a.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${a.responseId}`);return}this.logger.verbose(a.extensionId?`Extension with id: ${a.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(G(lv))}}onChannelMessage(n){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const a=n.data,r=this.resolvers.get(a.responseId),c=this.handshakeResolvers.get(a.responseId);try{const h=a.body.method;if(h===Jo.Response){if(!r)return;const d=a.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(d)}`),d.status!=="Success")r.reject(ac(d.code,d.description,d.ext));else if(d.result)d.result.code&&d.result.description?r.reject(ac(d.result.code,d.result.description,d.result.ext)):r.resolve(d.result);else throw nh(qs,"Event does not contain result.");this.resolvers.delete(a.responseId)}else if(h===Jo.HandshakeResponse){if(!c){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${a.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=a.extensionId,this.extensionVersion=a.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),c.resolve(),this.handshakeResolvers.delete(a.responseId)}}catch(h){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${h}`),this.logger.errorPii(`Unable to parse ${n}`),r?r.reject(h):c&&c.reject(h)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw nh(qs,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===on.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class _d{constructor(n,a,r){this.logger=n,this.performanceClient=a,this.correlationId=r,this.platformAuthType=on.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,r){if(n.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(on.MICROSOFT_ENTRA_BROKERID))?.includes(on.PLATFORM_DOM_APIS))return n.trace("Platform auth api available in DOM"),new _d(n,a,r)}getExtensionId(){return on.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return on.DOM_API_NAME}async sendMessage(n){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const a=this.initializePlatformDOMRequest(n),r=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(r)}catch(a){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),a}}initializePlatformDOMRequest(n){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:a,clientId:r,authority:c,scope:h,redirectUri:d,correlationId:g,state:m,storeInCache:y,embeddedClientId:S,extraParameters:_,...k}=n,x=this.getDOMExtraParams(k);return{accountId:a,brokerId:this.getExtensionId(),authority:c,clientId:r,correlationId:g||this.correlationId,extraParameters:{..._,...x},isSecurityTokenService:!1,redirectUri:d,scope:h,state:m,storeInCache:y,embeddedClientId:S}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(n);if(n.hasOwnProperty("error")){const a=n;if(a.isSuccess===!1&&a.error&&a.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),ac(a.error.code,a.error.description,{error:parseInt(a.error.errorCode),protocol_error:a.error.protocolError,status:a.error.status,properties:a.error.properties})}}throw nh(qs,"Response missing expected properties.")}convertToPlatformBrokerResponse(n){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((c,[h,d])=>(c[h]=String(d),c),{})}}}async function Qb(u,n,a,r,c){u.trace("getPlatformAuthProvider called",a),u.trace("Has client allowed platform auth via DOM API: "+c);let h;try{c&&(h=await _d.createProvider(u,n,a)),h||(u.trace("Platform auth via DOM API not available, checking for extension"),h=await oc.createProvider(u,r||Iv,n))}catch(d){u.trace("Platform auth not available",d)}return h}function cr(u,n,a,r){if(n.trace("isPlatformAuthAllowed called"),!u.system.allowPlatformBroker&&u.system.allowPlatformBrokerWithDOM)throw ke(lC);if(!u.system.allowPlatformBroker)return n.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!a)return n.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case be.BEARER:case be.POP:return n.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return n.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class Fb extends Wa{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,g,y,S),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=m,this.eventHandler=h}acquireToken(n,a){let r;try{if(r={popupName:this.generatePopupName(n.scopes||Ja,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(n,r,a);{const h={...n,httpMethod:Nv(n,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(h,r,a)}}catch(c){return Promise.reject(c)}}logout(n){try{this.logger.verbose("logoutPopup called");const a=this.initializeLogoutRequest(n),r={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},c=n&&n.authority,h=n&&n.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(a,r,c,h)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(a,r,c,h))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,r){this.logger.verbose("acquireTokenPopupAsync called");const c=await O(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,W.Popup);a.popup&&Rv(c.authority);const h=cr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);return c.platformBroker=h,this.config.auth.protocolMode===Mt.EAR?this.executeEarFlow(c,a,r):this.executeCodeFlow(c,a,r)}async executeCodeFlow(n,a,r){const c=n.correlationId,h=this.initializeServerTelemetryManager(fe.acquireTokenPopup),d=r||await O(Wi,v.GeneratePkceCodes,this.logger,this.performanceClient,c)(this.performanceClient,this.logger,c),g={...n,codeChallenge:d.challenge};try{const m=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,c)({serverTelemetryManager:h,requestAuthority:g.authority,requestAzureCloudOptions:g.azureCloudOptions,requestExtraQueryParameters:g.extraQueryParameters,account:g.account});if(g.httpMethod===Vi.POST)return await this.executeCodeFlowWithPost(g,a,m,d.verifier);{const y=await O(Td,v.GetAuthCodeUrl,this.logger,this.performanceClient,c)(this.config,m.authority,g,this.logger,this.performanceClient),S=this.initiateAuthRequest(y,a);this.eventHandler.emitEvent(X.POPUP_OPENED,W.Popup,{popupWindow:S},null);const _=await this.monitorPopupForHash(S,a.popupWindowParent),k=Qt(nr,v.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await O(Fa,v.HandleResponseCode,this.logger,this.performanceClient,c)(n,k,d.verifier,fe.acquireTokenPopup,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(m){throw a.popup?.close(),m instanceof Oe&&(m.setCorrelationId(this.correlationId),h.cacheFailedRequest(m)),m}}async executeEarFlow(n,a,r){const c=n.correlationId,h=await O(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,c)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),d=await O(hd,v.GenerateEarKey,this.logger,this.performanceClient,c)(),g=r||await O(Wi,v.GeneratePkceCodes,this.logger,this.performanceClient,c)(this.performanceClient,this.logger,c),m={...n,earJwk:d,codeChallenge:g.challenge},y=a.popup||this.openPopup("about:blank",a);(await Ad(y.document,this.config,h,m,this.logger,this.performanceClient)).submit();const _=await O(this.monitorPopupForHash.bind(this),v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,c)(y,a.popupWindowParent),k=Qt(nr,v.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!k.ear_jwe&&k.code){const x=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,c)({serverTelemetryManager:this.initializeServerTelemetryManager(fe.acquireTokenPopup),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:h});return O(Fa,v.HandleResponseCode,this.logger,this.performanceClient,c)(m,k,g.verifier,fe.acquireTokenPopup,this.config,x,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return O(Ed,v.HandleResponseEar,this.logger,this.performanceClient,c)(m,k,fe.acquireTokenPopup,this.config,h,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,r,c){const h=n.correlationId,d=await O(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,h)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),g=a.popup||this.openPopup("about:blank",a);(await Sd(g.document,this.config,d,n,this.logger,this.performanceClient)).submit();const y=await O(this.monitorPopupForHash.bind(this),v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,h)(g,a.popupWindowParent),S=Qt(nr,v.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return O(Fa,v.HandleResponseCode,this.logger,this.performanceClient,h)(n,S,c,fe.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,r,c){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(X.LOGOUT_START,W.Popup,n);const h=this.initializeServerTelemetryManager(fe.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,n.account);const d=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:h,requestAuthority:r,account:n.account||void 0});try{d.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&d.authority.protocolMode===Mt.OIDC){if(this.eventHandler.emitEvent(X.LOGOUT_SUCCESS,W.Popup,n),c){const y={apiId:fe.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Ce.getAbsoluteUrl(c,Yn());await this.navigationClient.navigateInternal(S,y)}a.popup?.close();return}}const g=d.getLogoutUri(n);this.eventHandler.emitEvent(X.LOGOUT_SUCCESS,W.Popup,n);const m=this.openPopup(g,a);if(this.eventHandler.emitEvent(X.POPUP_OPENED,W.Popup,{popupWindow:m},null),await this.monitorPopupForHash(m,a.popupWindowParent).catch(()=>{}),c){const y={apiId:fe.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=Ce.getAbsoluteUrl(c,Yn());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${S}`),await this.navigationClient.navigateInternal(S,y)}else this.logger.verbose("No main window navigation requested")}catch(d){throw a.popup?.close(),d instanceof Oe&&(d.setCorrelationId(this.correlationId),h.cacheFailedRequest(d)),this.eventHandler.emitEvent(X.LOGOUT_FAILURE,W.Popup,null,d),this.eventHandler.emitEvent(X.LOGOUT_END,W.Popup),d}this.eventHandler.emitEvent(X.LOGOUT_END,W.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii(`Navigate to: ${n}`),this.openPopup(n,a);throw this.logger.error("Navigate url is empty"),G(Cc)}monitorPopupForHash(n,a){return new Promise((r,c)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const h=setInterval(()=>{if(n.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(h),c(G(rr));return}let d="";try{d=n.location.href}catch{}if(!d||d==="about:blank")return;clearInterval(h);let g="";const m=this.config.auth.OIDCOptions.serverResponseType;n&&(m===rc.QUERY?g=n.location.search:g=n.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(g)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(n,a)})}openPopup(n,a){try{let r;if(a.popup?(r=a.popup,this.logger.verbosePii(`Navigating popup window to: ${n}`),r.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${n}`),r=this.openSizedPopup(n,a)),!r)throw G(FC);return r.focus&&r.focus(),this.currentWindow=r,a.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),G(QC)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:r,popupWindowParent:c}){const h=c.screenLeft?c.screenLeft:c.screenX,d=c.screenTop?c.screenTop:c.screenY,g=c.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=c.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let y=r.popupSize?.width,S=r.popupSize?.height,_=r.popupPosition?.top,k=r.popupPosition?.left;return(!y||y<0||y>g)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),y=Ot.POPUP_WIDTH),(!S||S<0||S>m)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),S=Ot.POPUP_HEIGHT),(!_||_<0||_>m)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),_=Math.max(0,m/2-Ot.POPUP_HEIGHT/2+d)),(!k||k<0||k>g)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),k=Math.max(0,g/2-Ot.POPUP_WIDTH/2+h)),c.open(n,a,`width=${y}, height=${S}, top=${_}, left=${k}, scrollbars=yes`)}unloadWindow(n){this.currentWindow&&this.currentWindow.close(),n.preventDefault()}cleanPopup(n,a){n.close(),a.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(n,a){return`${Ot.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${Ot.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function Vb(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const u=window.performance.getEntriesByType("navigation");return(u.length?u[0]:void 0)?.type}class Xb extends Wa{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,g,y,S),this.nativeStorage=m}async acquireToken(n){const a=await O(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,W.Redirect);a.platformBroker=cr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);const r=h=>{h.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(X.RESTORE_FROM_BFCACHE,W.Redirect))},c=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${c}`),this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,c,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===Mt.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a,n.onRedirectNavigate)}catch(h){throw h instanceof Oe&&h.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),h}}async executeCodeFlow(n,a){const r=n.correlationId,c=this.initializeServerTelemetryManager(fe.acquireTokenRedirect),h=await O(Wi,v.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),d={...n,codeChallenge:h.challenge};this.browserStorage.cacheAuthorizeRequest(d,h.verifier);try{if(d.httpMethod===Vi.POST)return await this.executeCodeFlowWithPost(d);{const g=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),m=await O(Td,v.GetAuthCodeUrl,this.logger,this.performanceClient,n.correlationId)(this.config,g.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(m,a)}}catch(g){throw g instanceof Oe&&(g.setCorrelationId(this.correlationId),c.cacheFailedRequest(g)),g}}async executeEarFlow(n){const a=n.correlationId,r=await O(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),c=await O(hd,v.GenerateEarKey,this.logger,this.performanceClient,a)(),h=await O(Wi,v.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,earJwk:c,codeChallenge:h.challenge};return this.browserStorage.cacheAuthorizeRequest(d,h.verifier),(await Ad(document,this.config,r,d,this.logger,this.performanceClient)).submit(),new Promise((m,y)=>{setTimeout(()=>{y(G(nc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,r=await O(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return this.browserStorage.cacheAuthorizeRequest(n),(await Sd(document,this.config,r,n,this.logger,this.performanceClient)).submit(),new Promise((h,d)=>{setTimeout(()=>{d(G(nc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n="",a,r,c){const h=this.initializeServerTelemetryManager(fe.handleRedirectPromise);try{const[d,g]=this.getRedirectResponse(n||"");if(!d)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),Vb()!=="back_forward"?c.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const m=this.browserStorage.getTemporaryCache(Je.ORIGIN_URI,!0)||H.EMPTY_STRING,y=Fp(m),S=Fp(window.location.href);if(y===S&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),m.indexOf("#")>-1&&W_(m),await this.handleResponse(d,a,r,h);if(this.config.auth.navigateToLoginRequestUrl){if(!md()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Je.URL_HASH,g,!0);const _={apiId:fe.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let k=!0;if(!m||m==="null"){const x=tb();this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,x,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),k=await this.navigationClient.navigateInternal(x,_)}else this.logger.verbose(`Navigating to loginRequestUrl: ${m}`),k=await this.navigationClient.navigateInternal(m,_);if(!k)return await this.handleResponse(d,a,r,h)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(d,a,r,h);return null}catch(d){throw d instanceof Oe&&(d.setCorrelationId(this.correlationId),h.cacheFailedRequest(d)),d}}getRedirectResponse(n){this.logger.verbose("getRedirectResponseHash called");let a=n;a||(this.config.auth.OIDCOptions.serverResponseType===rc.QUERY?a=window.location.search:a=window.location.hash);let r=Qs(a);if(r){try{Nb(r,this.browserCrypto,W.Redirect)}catch(h){return h instanceof Oe&&this.logger.error(`Interaction type validation failed due to ${h.errorCode}: ${h.errorMessage}`),[null,""]}return _v(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,a]}const c=this.browserStorage.getTemporaryCache(Je.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.URL_HASH)),c&&(r=Qs(c),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,c]):[null,""]}async handleResponse(n,a,r,c){if(!n.state)throw G(id);if(n.ear_jwe){const g=await O(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a.correlationId)({requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});return O(Ed,v.HandleResponseEar,this.logger,this.performanceClient,a.correlationId)(a,n,fe.acquireTokenRedirect,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const d=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:a.authority});return O(Fa,v.HandleResponseCode,this.logger,this.performanceClient,a.correlationId)(a,n,r,fe.acquireTokenRedirect,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n,a){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),n){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${n}`);const r={apiId:fe.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=a||this.config.auth.onRedirectNavigate;if(typeof c=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),c(n)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(n,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(n,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),G(Cc)}async logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n),r=this.initializeServerTelemetryManager(fe.logout);try{this.eventHandler.emitEvent(X.LOGOUT_START,W.Redirect,n),await this.clearCacheOnLogout(this.correlationId,a.account);const c={apiId:fe.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(h.authority.protocolMode===Mt.OIDC)try{h.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(X.LOGOUT_SUCCESS,W.Redirect,a);return}}const d=h.getLogoutUri(a);if(this.eventHandler.emitEvent(X.LOGOUT_SUCCESS,W.Redirect,a),n&&typeof n.onRedirectNavigate=="function")if(n.onRedirectNavigate(d)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),await this.navigationClient.navigateExternal(d,c);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),await this.navigationClient.navigateExternal(d,c);return}}catch(c){throw c instanceof Oe&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),this.eventHandler.emitEvent(X.LOGOUT_FAILURE,W.Redirect,null,c),this.eventHandler.emitEvent(X.LOGOUT_END,W.Redirect),c}this.eventHandler.emitEvent(X.LOGOUT_END,W.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return Ce.getAbsoluteUrl(a,Yn())}}async function Jb(u,n,a,r,c){if(n.addQueueMeasurement(v.SilentHandlerInitiateAuthRequest,r),!u)throw a.info("Navigate url is empty"),G(Cc);return c?O(Wb,v.SilentHandlerLoadFrame,a,n,r)(u,c,n,r):Qt(ew,v.SilentHandlerLoadFrameSync,a,n,r)(u)}async function Zb(u,n,a,r,c){const h=Ec();if(!h.contentDocument)throw"No document associated with iframe!";return(await Sd(h.contentDocument,u,n,a,r,c)).submit(),h}async function $b(u,n,a,r,c){const h=Ec();if(!h.contentDocument)throw"No document associated with iframe!";return(await Ad(h.contentDocument,u,n,a,r,c)).submit(),h}async function by(u,n,a,r,c,h,d){return r.addQueueMeasurement(v.SilentHandlerMonitorIframeForHash,h),new Promise((g,m)=>{n<fh&&c.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${n}ms) than the default (${fh}ms). This may result in timeouts.`);const y=window.setTimeout(()=>{window.clearInterval(S),m(G(VC))},n),S=window.setInterval(()=>{let _="";const k=u.contentWindow;try{_=k?k.location.href:""}catch{}if(!_||_==="about:blank")return;let x="";k&&(d===rc.QUERY?x=k.location.search:x=k.location.hash),window.clearTimeout(y),window.clearInterval(S),g(x)},a)}).finally(()=>{Qt(tw,v.RemoveHiddenIframe,c,r,h)(u)})}function Wb(u,n,a,r){return a.addQueueMeasurement(v.SilentHandlerLoadFrame,r),new Promise((c,h)=>{const d=Ec();window.setTimeout(()=>{if(!d){h("Unable to load iframe");return}d.src=u,c(d)},n)})}function ew(u){const n=Ec();return n.src=u,n}function Ec(){const u=document.createElement("iframe");return u.className="msalSilentIframe",u.style.visibility="hidden",u.style.position="absolute",u.style.width=u.style.height="0",u.style.border="0",u.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),u.setAttribute("allow","local-network-access *"),document.body.appendChild(u),u}function tw(u){document.body===u.parentNode&&document.body.removeChild(u)}class nw extends Wa{constructor(n,a,r,c,h,d,g,m,y,S,_){super(n,a,r,c,h,d,m,S,_),this.apiId=g,this.nativeStorage=y}async acquireToken(n){this.performanceClient.addQueueMeasurement(v.SilentIframeClientAcquireToken,n.correlationId),!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const a={...n};a.prompt?a.prompt!==ht.NONE&&a.prompt!==ht.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${a.prompt} with ${ht.NONE}`),a.prompt=ht.NONE):a.prompt=ht.NONE;const r=await O(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(a,W.Silent);return r.platformBroker=cr(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),Rv(r.authority),this.config.auth.protocolMode===Mt.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(n){let a;const r=this.initializeServerTelemetryManager(this.apiId);try{return a=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await O(this.silentTokenHelper.bind(this),v.SilentIframeClientTokenHelper,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(c){if(c instanceof Oe&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),!a||!(c instanceof Oe)||c.errorCode!==Ot.INVALID_GRANT_ERROR)throw c;return this.performanceClient.addFields({retryError:c.errorCode},this.correlationId),await O(this.silentTokenHelper.bind(this),v.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const a=n.correlationId,r=await O(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),c=await O(hd,v.GenerateEarKey,this.logger,this.performanceClient,a)(),h=await O(Wi,v.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,earJwk:c,codeChallenge:h.challenge},g=await O($b,v.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,a)(this.config,r,d,this.logger,this.performanceClient),m=this.config.auth.OIDCOptions.serverResponseType,y=await O(by,v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(g,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,a,m),S=Qt(nr,v.DeserializeResponse,this.logger,this.performanceClient,a)(y,m,this.logger);if(!S.ear_jwe&&S.code){const _=await O(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:r});return O(Fa,v.HandleResponseCode,this.logger,this.performanceClient,a)(d,S,h.verifier,this.apiId,this.config,_,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return O(Ed,v.HandleResponseEar,this.logger,this.performanceClient,a)(d,S,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(G(vc))}async silentTokenHelper(n,a){const r=a.correlationId;this.performanceClient.addQueueMeasurement(v.SilentIframeClientTokenHelper,r);const c=await O(Wi,v.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),h={...a,codeChallenge:c.challenge};let d;if(a.httpMethod===Vi.POST)d=await O(Zb,v.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,n.authority,h,this.logger,this.performanceClient);else{const S=await O(Td,v.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,n.authority,h,this.logger,this.performanceClient);d=await O(Jb,v.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(S,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const g=this.config.auth.OIDCOptions.serverResponseType,m=await O(by,v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,g),y=Qt(nr,v.DeserializeResponse,this.logger,this.performanceClient,r)(m,g,this.logger);return O(Fa,v.HandleResponseCode,this.logger,this.performanceClient,r)(a,y,c.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class iw extends Wa{async acquireToken(n){this.performanceClient.addQueueMeasurement(v.SilentRefreshClientAcquireToken,n.correlationId);const a=await O(Cd,v.InitializeBaseRequest,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger),r={...n,...a};n.redirectUri&&(r.redirectUri=this.getRedirectUri(n.redirectUri));const c=this.initializeServerTelemetryManager(fe.acquireTokenSilent_silentFlow),h=await this.createRefreshTokenClient({serverTelemetryManager:c,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return O(h.acquireTokenByRefreshToken.bind(h),v.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(r,fe.acquireTokenSilent_silentFlow).catch(d=>{throw d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d),d})}logout(){return Promise.reject(G(vc))}async createRefreshTokenClient(n){const a=await O(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new v_(a,this.performanceClient)}}class aw{constructor(n,a,r,c,h){this.isBrowserEnvironment=typeof window<"u",this.config=n,this.storage=a,this.logger=r,this.cryptoObj=c,this.performanceClient=h}async loadExternalTokens(n,a,r){if(!this.isBrowserEnvironment)throw G(Tc);const c=n.correlationId||mn(),h=this.performanceClient.startMeasurement(v.LoadExternalTokens,c);try{const d=a.id_token?En(a.id_token,At):void 0,g=_n(d||{}),m={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},y=n.authority?new mt(mt.generateAuthority(n.authority,n.azureCloudOptions),this.config.system.networkClient,this.storage,m,this.logger,n.correlationId||mn()):void 0,S=await O(this.loadAccount.bind(this),v.LoadAccount,this.logger,this.performanceClient,c)(n,r.clientInfo||a.client_info||"",c,d,y),_=await O(this.loadIdToken.bind(this),v.LoadIdToken,this.logger,this.performanceClient,c)(a,S.homeAccountId,S.environment,S.realm,c,g),k=await O(this.loadAccessToken.bind(this),v.LoadAccessToken,this.logger,this.performanceClient,c)(n,a,S.homeAccountId,S.environment,S.realm,r,c,g),x=await O(this.loadRefreshToken.bind(this),v.LoadRefreshToken,this.logger,this.performanceClient,c)(a,S.homeAccountId,S.environment,c,g);return h.end({success:!0},void 0,Ke.getAccountInfo(S)),this.generateAuthenticationResult(n,{account:S,idToken:_,accessToken:k,refreshToken:x},d,y)}catch(d){throw h.end({success:!1},d),d}}async loadAccount(n,a,r,c,h){if(this.logger.verbose("TokenCache - loading account"),n.account){const y=Ke.createFromAccountInfo(n.account);return await this.storage.setAccount(y,r,_n(c||{}),fe.loadExternalTokens),y}else if(!h||!a&&!c)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),G(iv);const d=Ke.generateHomeAccountId(a,h.authorityType,this.logger,this.cryptoObj,c),g=c?.tid,m=Zh(this.storage,h,d,At,r,c,a,h.hostnameAndPort,g,void 0,void 0,this.logger);return await this.storage.setAccount(m,r,_n(c||{}),fe.loadExternalTokens),m}async loadIdToken(n,a,r,c,h,d){if(!n.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const g=dc(a,r,n.id_token,this.config.auth.clientId,c);return await this.storage.setIdTokenCredential(g,h,d),g}async loadAccessToken(n,a,r,c,h,d,g,m){if(a.access_token)if(a.expires_in){if(!a.scope&&(!n.scopes||!n.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const y=a.scope?We.fromString(a.scope):new We(n.scopes),S=d.expiresOn||a.expires_in+Nt(),_=d.extendedExpiresOn||(a.ext_expires_in||a.expires_in)+Nt(),k=fc(r,c,a.access_token,this.config.auth.clientId,h,y.printScopes(),S,_,At);return await this.storage.setAccessTokenCredential(k,g,m),k}async loadRefreshToken(n,a,r,c,h){if(!n.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const d=kC(a,r,n.refresh_token,this.config.auth.clientId,n.foci,void 0,n.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(d,c,h),d}generateAuthenticationResult(n,a,r,c){let h="",d=[],g=null,m;a?.accessToken&&(h=a.accessToken.secret,d=We.fromString(a.accessToken.target).asArray(),g=ja(a.accessToken.expiresOn),m=ja(a.accessToken.extendedExpiresOn));const y=a.account;return{authority:c?c.canonicalAuthority:"",uniqueId:a.account.localAccountId,tenantId:a.account.realm,scopes:d,account:Ke.getAccountInfo(y),idToken:a.idToken?.secret||"",idTokenClaims:r||{},accessToken:h,fromCache:!0,expiresOn:g,correlationId:n.correlationId||"",requestId:"",extExpiresOn:m,familyId:a.refreshToken?.familyId||"",tokenType:a?.accessToken?.tokenType||"",state:n.state||"",cloudGraphHostName:y.cloudGraphHostName||"",msGraphHost:y.msGraphHost||"",fromNativeBroker:!1}}}class ow extends HC{constructor(n){super(n),this.includeRedirectUri=!1}}class rw extends Wa{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,m,y,S),this.apiId=g}async acquireToken(n){if(!n.code)throw G(av);const a=await O(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(n,W.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const c={...a,code:n.code},h=await O(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),d=new ow(h);this.logger.verbose("Auth code client created");const g=new Dv(d,this.browserStorage,c,this.logger,this.performanceClient);return await O(g.handleCodeResponseFromServer.bind(g),v.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(c){throw c instanceof Oe&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),c}}logout(){return Promise.reject(G(vc))}}function sw(u,n,a){const r=window.msal?.clientIds||[],c=r.length,h=r.filter(d=>d===u).length;h>1&&a.warning("There is already an instance of MSAL.js in the window with the same client id."),n.add({msalInstanceCount:c,sameClientIdInstanceCount:h})}function Hs(u,n,a){try{pd(u)}catch(r){throw n.end({success:!1},r,a),r}}class _c{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Qn(this.logger,this.performanceClient):js,this.eventHandler=new kb(this.logger),this.browserStorage=this.isBrowserEnvironment?new mh(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,u_(this.config.auth)):Tb(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:dt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new mh(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new aw(this.config,this.browserStorage,this.logger,this.browserCrypto,this.performanceClient),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const r=new _c(n);return await r.initialize(a),r}trackPageVisibility(n){n&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n,a){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(X.INITIALIZE_END);return}const r=n?.correlationId||this.getRequestCorrelationId(),c=this.config.system.allowPlatformBroker,h=this.performanceClient.startMeasurement(v.InitializeClientApplication,r);if(this.eventHandler.emitEvent(X.INITIALIZE_START),!a)try{this.logMultipleInstances(h)}catch{}if(await O(this.browserStorage.initialize.bind(this.browserStorage),v.InitializeCache,this.logger,this.performanceClient,r)(r),c)try{this.platformAuthProvider=await Qb(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout,this.config.system.allowPlatformBrokerWithDOM)}catch(d){this.logger.verbose(d)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Qt(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),v.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(X.INITIALIZE_END),h.end({allowPlatformBroker:c,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("handleRedirectPromise called"),wv(this.initialized),this.isBrowserEnvironment){const a=n||"";let r=this.redirectResponse.get(a);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===Ti.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),c=this.browserStorage.getCachedNativeRequest(),h=c&&this.platformAuthProvider&&!n;let d;this.eventHandler.emitEvent(X.HANDLE_REDIRECT_START,W.Redirect);let g;try{if(h&&this.platformAuthProvider){d=this.performanceClient.startMeasurement(v.AcquireTokenRedirect,c?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),d.add({isPlatformBrokerRequest:!0});const m=new Bs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,c.accountId,this.nativeInternalStorage,c.correlationId);g=O(m.handleRedirectPromise.bind(m),v.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(this.performanceClient,d.event.correlationId)}else{const[m,y]=this.browserStorage.getCachedRequest(),S=m.correlationId;d=this.performanceClient.startMeasurement(v.AcquireTokenRedirect,S),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const _=this.createRedirectClient(S);g=O(_.handleRedirectPromise.bind(_),v.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(n,m,y,d)}}catch(m){throw this.browserStorage.resetRequestCache(),m}return g.then(m=>(m?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(X.LOGIN_SUCCESS,W.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_SUCCESS,W.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),d.end({success:!0},void 0,m.account)):d.event.errorCode?d.end({success:!1},void 0):d.discard(),this.eventHandler.emitEvent(X.HANDLE_REDIRECT_END,W.Redirect),m)).catch(m=>{this.browserStorage.resetRequestCache();const y=m;throw r.length>0?this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_FAILURE,W.Redirect,null,y):this.eventHandler.emitEvent(X.LOGIN_FAILURE,W.Redirect,null,y),this.eventHandler.emitEvent(X.HANDLE_REDIRECT_END,W.Redirect),d.end({success:!1},y),m})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("acquireTokenRedirect called",a);const r=this.performanceClient.startMeasurement(v.AcquireTokenPreRedirect,a);r.add({scenarioId:n.scenarioId});const c=n.onRedirectNavigate;if(c)n.onRedirectNavigate=d=>{const g=typeof c=="function"?c(d):void 0;return r.add({navigateCallbackResult:g!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,g};else{const d=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=g=>{const m=typeof d=="function"?d(g):void 0;return r.add({navigateCallbackResult:m!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,m}}const h=this.getAllAccounts().length>0;try{my(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNIN),h?this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_START,W.Redirect,n):this.eventHandler.emitEvent(X.LOGIN_START,W.Redirect,n);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?d=new Bs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,r).catch(m=>{if(r.add({brokerErrorName:m.name,brokerErrorCode:m.errorCode}),m instanceof Sn&&Ka(m))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(m instanceof sn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(a).acquireToken(n);throw m}):d=this.createRedirectClient(a).acquireToken(n),await d}catch(d){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(v.AcquireTokenRedirect,a).end({success:!1},d,n.account):r.end({success:!1},d,n.account),h?this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_FAILURE,W.Redirect,null,d):this.eventHandler.emitEvent(X.LOGIN_FAILURE,W.Redirect,null,d),d}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(v.AcquireTokenPopup,a);r.add({scenarioId:n.scenarioId});try{this.logger.verbose("acquireTokenPopup called",a),Hs(this.initialized,r,n.account),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNIN)}catch(g){return Promise.reject(g)}const c=this.getAllAccounts();c.length>0?this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_START,W.Popup,n):this.eventHandler.emitEvent(X.LOGIN_START,W.Popup,n);let h;const d=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?(r.add({isPlatformBrokerRequest:!0}),h=this.acquireTokenNative({...n,correlationId:a},fe.acquireTokenPopup).then(g=>(r.end({success:!0},void 0,g.account),g)).catch(g=>{if(r.add({brokerErrorName:g.name,brokerErrorCode:g.errorCode}),g instanceof Sn&&Ka(g))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,d);if(g instanceof sn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(a).acquireToken(n,d);throw g})):h=this.createPopupClient(a).acquireToken(n,d),h.then(g=>(c.length<this.getAllAccounts().length?this.eventHandler.emitEvent(X.LOGIN_SUCCESS,W.Popup,g):this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_SUCCESS,W.Popup,g),r.end({success:!0,accessTokenSize:g.accessToken.length,idTokenSize:g.idToken.length},void 0,g.account),g)).catch(g=>(c.length>0?this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_FAILURE,W.Popup,null,g):this.eventHandler.emitEvent(X.LOGIN_FAILURE,W.Popup,null,g),r.end({success:!1},g,n.account),Promise.reject(g))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&(this.logger.info("Perf: Visibility change detected in ",n.event.name),n.increment({visibilityChangeCount:1}))}async ssoSilent(n){const a=this.getRequestCorrelationId(n),r={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(v.SsoSilent,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),Hs(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",a),this.eventHandler.emitEvent(X.SSO_SILENT_START,W.Silent,r);let c;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),c=this.acquireTokenNative(r,fe.ssoSilent).catch(h=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:h.name,brokerErrorCode:h.errorCode}),h instanceof Sn&&Ka(h))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw h})):c=this.createSilentIframeClient(r.correlationId).acquireToken(r),c.then(h=>(this.eventHandler.emitEvent(X.SSO_SILENT_SUCCESS,W.Silent,h),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.eventHandler.emitEvent(X.SSO_SILENT_FAILURE,W.Silent,null,h),this.ssoSilentMeasurement?.end({success:!1},h,n.account),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("acquireTokenByCode called",a);const r=this.performanceClient.startMeasurement(v.AcquireTokenByCode,a);Hs(this.initialized,r),this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_BY_CODE_START,W.Silent,n),r.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw G(rv);if(n.code){const c=n.code;let h=this.hybridAuthCodeResponses.get(c);return h?(this.logger.verbose("Existing acquireTokenByCode request found",a),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",a),h=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(d=>(this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_BY_CODE_SUCCESS,W.Silent,d),this.hybridAuthCodeResponses.delete(c),r.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),d)).catch(d=>{throw this.hybridAuthCodeResponses.delete(c),this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_BY_CODE_FAILURE,W.Silent,null,d),r.end({success:!1},d),d}),this.hybridAuthCodeResponses.set(c,h)),await h}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const c=await this.acquireTokenNative({...n,correlationId:a},fe.acquireTokenByCode,n.nativeAccountId).catch(h=>{throw h instanceof Sn&&Ka(h)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:h.name,brokerErrorCode:h.errorCode}),h});return r.end({success:!0},void 0,c.account),c}else throw G(sv);else throw G(ov)}catch(c){throw this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_BY_CODE_FAILURE,W.Silent,null,c),r.end({success:!1},c),c}}async acquireTokenByCodeAsync(n){return this.logger.trace("acquireTokenByCodeAsync called",n.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(v.AcquireTokenByCodeAsync,n.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(n.correlationId).acquireToken(n).then(c=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:c.fromCache}),c)).catch(c=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},c),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(this.performanceClient.addQueueMeasurement(v.AcquireTokenFromCache,n.correlationId),a){case vt.Default:case vt.AccessToken:case vt.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(n.correlationId);return O(r.acquireToken.bind(r),v.SilentCacheClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw P(Ei)}}async acquireTokenByRefreshToken(n,a){switch(this.performanceClient.addQueueMeasurement(v.AcquireTokenByRefreshToken,n.correlationId),a){case vt.Default:case vt.AccessTokenAndRefreshToken:case vt.RefreshToken:case vt.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(n.correlationId);return O(r.acquireToken.bind(r),v.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw P(Ei)}}async acquireTokenBySilentIframe(n){this.performanceClient.addQueueMeasurement(v.AcquireTokenBySilentIframe,n.correlationId);const a=this.createSilentIframeClient(n.correlationId);return O(a.acquireToken.bind(a),v.SilentIframeClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n)}async logout(n){const a=this.getRequestCorrelationId(n);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",a),this.logoutRedirect({correlationId:a,...n})}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return my(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return pd(this.initialized),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){const a=this.getRequestCorrelationId();return Ab(this.logger,this.browserStorage,this.isBrowserEnvironment,a,n)}getAccount(n){const a=this.getRequestCorrelationId();return Sb(n,this.logger,this.browserStorage,a)}getAccountByUsername(n){const a=this.getRequestCorrelationId();return Eb(n,this.logger,this.browserStorage,a)}getAccountByHomeId(n){const a=this.getRequestCorrelationId();return _b(n,this.logger,this.browserStorage,a)}getAccountByLocalId(n){const a=this.getRequestCorrelationId();return bb(n,this.logger,this.browserStorage,a)}setActiveAccount(n){const a=this.getRequestCorrelationId();wb(n,this.browserStorage,a)}getActiveAccount(){const n=this.getRequestCorrelationId();return Rb(this.browserStorage,n)}async hydrateCache(n,a){this.logger.verbose("hydrateCache called");const r=Ke.createFromAccountInfo(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(r,n.correlationId,_n(n.idTokenClaims),fe.hydrateCache),n.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,r,c){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw G(rd);return new Bs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(n),this.nativeInternalStorage,n.correlationId).acquireToken(n,c)}canUsePlatformBroker(n,a){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!cr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(n.prompt)switch(n.prompt){case ht.NONE:case ht.CONSENT:case ht.LOGIN:case ht.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${n.prompt} is not compatible with platform broker flow, returning false`),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new Fb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createRedirectClient(n){return new Xb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentIframeClient(n){return new nw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentCacheClient(n){return new Hv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentRefreshClient(n){return new iw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentAuthCodeClient(n){return new rw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,n)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return bv(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==dt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==dt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?mn():H.EMPTY_STRING}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginRedirect called",a),this.acquireTokenRedirect({correlationId:a,...n||uy})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginPopup called",a),this.acquireTokenPopup({correlationId:a,...n||uy})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(v.AcquireTokenSilent,a);r.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),Hs(this.initialized,r,n.account),this.logger.verbose("acquireTokenSilent called",a);const c=n.account||this.getActiveAccount();if(!c)throw G($C);return this.acquireTokenSilentDeduped(n,c,a).then(h=>(r.end({success:!0,fromCache:h.fromCache,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),{...h,state:n.state,correlationId:a})).catch(h=>{throw h instanceof Oe&&h.setCorrelationId(a),r.end({success:!1},h,c),h})}async acquireTokenSilentDeduped(n,a,r){const c=mc(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),h=JSON.stringify(c),d=this.activeSilentTokenRequests.get(h);if(typeof d>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const g=O(this.acquireTokenSilentAsync.bind(this),v.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...n,correlationId:r},a);return this.activeSilentTokenRequests.set(h,g),g.finally(()=>{this.activeSilentTokenRequests.delete(h)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),d}async acquireTokenSilentAsync(n,a){const r=()=>this.trackPageVisibility(n.correlationId);this.performanceClient.addQueueMeasurement(v.AcquireTokenSilentAsync,n.correlationId),this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_START,W.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",r);const c=await O(Ob,v.InitializeSilentRequest,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),h=n.cacheLookupPolicy||vt.Default;return this.acquireTokenSilentNoIframe(c,h).catch(async g=>{if(cw(g,h))if(this.activeIframeRequest)if(h!==vt.Skip){const[y,S]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${S}`,c.correlationId);const _=this.performanceClient.startMeasurement(v.AwaitConcurrentIframe,c.correlationId);_.add({awaitIframeCorrelationId:S});const k=await y;if(_.end({success:k}),k)return this.logger.verbose(`Parallel iframe request with correlationId: ${S} succeeded. Retrying cache and/or RT redemption`,c.correlationId),this.acquireTokenSilentNoIframe(c,h);throw this.logger.info(`Iframe request with correlationId: ${S} failed. Interaction is required.`),g}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",c.correlationId),O(this.acquireTokenBySilentIframe.bind(this),v.AcquireTokenBySilentIframe,this.logger,this.performanceClient,c.correlationId)(c);else{let y;return this.activeIframeRequest=[new Promise(S=>{y=S}),c.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",c.correlationId),O(this.acquireTokenBySilentIframe.bind(this),v.AcquireTokenBySilentIframe,this.logger,this.performanceClient,c.correlationId)(c).then(S=>(y(!0),S)).catch(S=>{throw y(!1),S}).finally(()=>{this.activeIframeRequest=void 0})}else throw g}).then(g=>(this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_SUCCESS,W.Silent,g),this.performanceClient.addFields({fromCache:g.fromCache},n.correlationId),g)).catch(g=>{throw this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_FAILURE,W.Silent,null,g),g}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(n,a){return cr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},n.correlationId),this.acquireTokenNative(n,fe.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},n.correlationId),r instanceof Sn&&Ka(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,P(Ei)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),a===vt.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),O(this.acquireTokenFromCache.bind(this),v.AcquireTokenFromCache,this.logger,this.performanceClient,n.correlationId)(n,a).catch(r=>{if(a===vt.AccessToken)throw r;return this.eventHandler.emitEvent(X.ACQUIRE_TOKEN_NETWORK_START,W.Silent,n),O(this.acquireTokenByRefreshToken.bind(this),v.AcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await O(Wi,v.GeneratePkceCodes,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${a?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n){const a=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(a),sw(a,n,this.logger)}}function cw(u,n){const a=!(u instanceof sn&&u.subError!==yc),r=u.errorCode===Ot.INVALID_GRANT_ERROR||u.errorCode===Ei,c=a&&r||u.errorCode===Ws||u.errorCode===Xh,h=x_.includes(n);return c&&h}async function lw(u,n){const a=new $i(u);return await a.initialize(),_c.createController(a,n)}class bd{static async createPublicClientApplication(n){const a=await lw(n);return new bd(n,a)}constructor(n,a){this.isBroker=!1,this.controller=a||new _c(new $i(n))}async initialize(n){return this.controller.initialize(n,this.isBroker)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(n){return this.controller.getAccount(n)}getAccountByHomeId(n){return this.controller.getAccountByHomeId(n)}getAccountByLocalId(n){return this.controller.getAccountByLocalId(n)}getAccountByUsername(n){return this.controller.getAccountByUsername(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logout(n){return this.controller.logout(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const uw="81dcae7c-55a9-4e4e-86e1-e364b25fc990",hw="https://login.microsoftonline.com/common",dw="https://localhost:8443/",ph=["User.Read","Mail.Read"],rn=new bd({auth:{clientId:uw,authority:hw,redirectUri:dw},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}});let th=null;function bc(){return th||(th=rn.initialize()),th}const wd="msal_last_user";function Pv(u){if(u)try{localStorage.setItem(wd,u)}catch{}}function fw(){try{return localStorage.getItem(wd)}catch{return null}}function wy(){try{localStorage.removeItem(wd)}catch{}}function Rd(u){if(!u.length)return null;const n=rn.getActiveAccount();if(n)return n;const a=fw();if(a){const r=u.find(c=>c.username?.toLowerCase()===a.toLowerCase());if(r)return r}return u[0]}async function gw(){await bc();const u=await rn.loginPopup({scopes:ph,prompt:"select_account"});return u.account&&(rn.setActiveAccount(u.account),Pv(u.account.username)),(await rn.acquireTokenSilent({account:u.account,scopes:ph})).accessToken}async function mw(){await bc();const u=rn.getAllAccounts(),n=Rd(u);if(!n)return null;try{const a=await rn.acquireTokenSilent({account:n,scopes:ph});return rn.setActiveAccount(n),Pv(n.username),a.accessToken}catch(a){if(a instanceof sn)return null;throw a}}async function Ry(){await bc();const u=rn.getAllAccounts(),n=Rd(u);return n?(rn.setActiveAccount(n),{username:n.username,name:n.name}):null}async function pw(){await bc();const u=rn.getAllAccounts(),n=Rd(u);if(!n){wy();return}wy(),await rn.logoutPopup({account:n})}const yw="",Cw=yw.replace(/\/+$/,"");async function ur(u,n,a={}){const r=`${Cw}${u}`,c=await fetch(r,{...a,headers:{...a.headers||{},Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!c.ok){const h=await c.text();throw new Error(`backend ${c.status}: ${h}`)}return c.json()}function vw(u){return ur("/graph/folders",u)}function Tw(u,n,a=25){const r=new URLSearchParams({folder_id:n,top:String(a)}).toString();return ur(`/graph/messages?${r}`,u)}function Aw(u,n,a){return ur("/ingest",u,{method:"POST",body:JSON.stringify({folder_id:n,message_ids:a})})}function Sw(u,n,a=4){return ur("/query",u,{method:"POST",body:JSON.stringify({question:n,n_results:a})})}function Ew(u){return ur("/clear",u,{method:"POST",body:JSON.stringify({})})}function _w(u,n){return u?u.length<=n?u:u.slice(0,n)+"":""}function bw(){const[u,n]=nt.useState("checking session..."),[a,r]=nt.useState(""),[c,h]=nt.useState(!1),[d,g]=nt.useState(""),[m,y]=nt.useState(""),[S,_]=nt.useState([]),[k,x]=nt.useState(""),[ee,F]=nt.useState([]),[ge,Ae]=nt.useState(new Set),he=ge.size,[me,Ne]=nt.useState(!1),[Ge,Pe]=nt.useState(!1),[oe,it]=nt.useState(""),[Ft,cn]=nt.useState(""),[Dt,Ze]=nt.useState([]),[pn,He]=nt.useState("");async function St(z){He("loading folders...");const Y=await vw(z);_(Y.folders||[]),He("")}async function N(){r(""),n("checking session...");try{const z=await mw();if(!z){h(!1),g(""),y(""),n("not signed in");return}h(!0),g(z);const Y=await Ry();y(Y?.username||Y?.name||""),n("signed in"),await St(z),n("ready")}catch(z){h(!1),g(""),y(""),n("error"),r(String(z?.message||z))}}async function B(){r(""),He("signing in...");try{const z=await gw();h(!0),g(z);const Y=await Ry();y(Y?.username||Y?.name||""),n("signed in"),await St(z),n("ready")}catch(z){h(!1),g(""),y(""),n("error"),r(String(z?.message||z))}finally{He("")}}async function $(){r(""),He("signing out...");try{await pw(),h(!1),g(""),y(""),_([]),x(""),F([]),Ae(new Set),Ne(!1),Pe(!1),it(""),cn(""),Ze([]),n("not signed in")}catch(z){n("error"),r(String(z?.message||z))}finally{He("")}}nt.useEffect(()=>{N().catch(()=>{})},[]);async function Te(z){if(x(z),F([]),Ae(new Set),Ne(!1),Pe(!1),!!z&&!(!c||!d)){He("loading messages...");try{const Y=await Tw(d,z,25);F(Y.value||[])}catch(Y){r(String(Y?.message||Y))}finally{He("")}}}function Se(z){Ae(Y=>{const re=new Set(Y);return re.has(z)?re.delete(z):re.add(z),re})}const A=nt.useMemo(()=>["You are about to store selected email content locally on this device.","This MVP stores the selected email text locally for search and question answering.","No email content is uploaded to a remote server by this tool.","You can clear the local index at any time."].join(" "),[]);async function L(){if(!c||!d){alert("Please sign in first.");return}if(!k){alert("Select a folder first.");return}if(!ge.size){alert("Select at least one email.");return}He("ingesting (storing + indexing locally)..."),r("");try{await Aw(d,k,Array.from(ge)),cn("Ingestion complete. You can now ask questions."),Ze([]),Ne(!1),Pe(!1)}catch(z){r(String(z?.message||z))}finally{He("")}}async function K(){if(!c||!d){alert("Please sign in first.");return}const z=oe.trim();if(z){He("querying local index..."),r("");try{const Y=await Sw(d,z,4);cn(Y.answer||""),Ze(Y.sources||[])}catch(Y){r(String(Y?.message||Y))}finally{He("")}}}async function j(){if(!c||!d){alert("Please sign in first.");return}He("clearing local index..."),r("");try{await Ew(d),cn("Local index cleared."),Ze([])}catch(z){r(String(z?.message||z))}finally{He("")}}return Z.jsxs("div",{style:{fontFamily:"Segoe UI, Arial",padding:12,lineHeight:1.35},children:[Z.jsx("h2",{style:{marginTop:0},children:"Outlook Privacy Assistant"}),Z.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:10},children:[Z.jsx("strong",{children:"Status:"})," ",u," ",pn?` ${pn}`:"",c&&m?Z.jsxs("span",{children:["  ",Z.jsx("strong",{children:"Signed in:"})," ",m]}):null]}),Z.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:c?Z.jsx("button",{onClick:()=>$(),children:"Sign out"}):Z.jsx("button",{onClick:()=>B(),children:"Sign in"})}),a&&Z.jsx("pre",{style:{whiteSpace:"pre-wrap",border:"1px solid #ccc",padding:8,marginTop:10},children:a}),Z.jsx("hr",{}),Z.jsx("h3",{children:"Ingest emails"}),Z.jsxs("div",{style:{marginBottom:6},children:[Z.jsx("label",{style:{display:"block",fontSize:12,opacity:.85},children:"Select folder"}),Z.jsxs("select",{style:{width:"100%"},value:k,onChange:z=>Te(z.target.value),disabled:!c,children:[Z.jsx("option",{value:"",children:"Select"}),S.map(z=>Z.jsxs("option",{value:z.id,children:[z.displayName," ",typeof z.totalItemCount=="number"?`(${z.totalItemCount})`:""]},z.id))]})]}),Z.jsx("div",{style:{fontSize:12,opacity:.8},children:"Select individual emails to ingest. The selected emails will be stored locally."}),Z.jsx("div",{style:{maxHeight:220,overflow:"auto",border:"1px solid #ddd",marginTop:8,padding:6},children:ee.length?ee.map(z=>{const Y=z.from?.emailAddress?.address||"",re=ge.has(z.id);return Z.jsxs("label",{style:{display:"block",padding:"6px 4px",borderBottom:"1px solid #eee"},children:[Z.jsx("input",{type:"checkbox",checked:re,onChange:()=>Se(z.id)})," ",Z.jsx("strong",{children:z.subject||"(no subject)"}),Z.jsxs("div",{style:{fontSize:12,opacity:.85},children:[Y,"  ",z.receivedDateTime||""]}),Z.jsx("div",{style:{fontSize:12},children:_w(z.bodyPreview||"",180)})]},z.id)}):Z.jsx("div",{style:{fontSize:12,opacity:.8,padding:6},children:k?"No messages loaded yet (or folder is empty).":"Select a folder to view messages."})}),Z.jsxs("button",{style:{marginTop:10},disabled:!c||!k||he===0,onClick:()=>Ne(!0),children:["ingest selected (",he,")"]}),me&&Z.jsxs("div",{style:{border:"1px solid #c00",padding:10,marginTop:10,background:"#fff5f5"},children:[Z.jsx("strong",{children:"Consent required"}),Z.jsx("p",{style:{marginTop:8,fontSize:12},children:A}),Z.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:12},children:[Z.jsx("input",{type:"checkbox",checked:Ge,onChange:z=>Pe(z.target.checked)})," ","I understand and consent to local storage."]}),Z.jsx("button",{disabled:!Ge,onClick:()=>L(),children:"confirm ingestion"})," ",Z.jsx("button",{onClick:()=>Ne(!1),children:"cancel"})]}),Z.jsx("hr",{}),Z.jsx("h3",{children:"Ask a question"}),Z.jsx("textarea",{value:oe,onChange:z=>it(z.target.value),rows:3,style:{width:"100%"},placeholder:"Ask a question about your indexed emails..."}),Z.jsxs("div",{style:{marginTop:8},children:[Z.jsx("button",{onClick:()=>K(),disabled:!c,children:"ask"})," ",Z.jsx("button",{onClick:()=>j(),disabled:!c,children:"clear local index"})]}),Z.jsx("h3",{style:{marginTop:14},children:"Answer"}),Z.jsx("div",{style:{whiteSpace:"pre-wrap",border:"1px solid #ddd",padding:8,minHeight:70},children:Ft||"No answer yet."}),Z.jsx("h3",{style:{marginTop:14},children:"Citations"}),Dt.length?Dt.map((z,Y)=>Z.jsxs("div",{style:{border:"1px solid #eee",padding:8,marginBottom:8},children:[Z.jsx("div",{children:Z.jsxs("strong",{children:["[",Y+1,"] ",z.subject||"(no subject)"]})}),Z.jsxs("div",{style:{fontSize:12,opacity:.8},children:[z.sender,"  ",z.received_dt," ",typeof z.score=="number"?` score: ${z.score.toFixed(4)}`:""]}),Z.jsx("div",{style:{fontSize:12,marginTop:6},children:z.snippet}),Z.jsx("button",{style:{marginTop:6},onClick:()=>window.open(z.weblink,"_blank","noopener,noreferrer"),children:"open email"})]},z.message_id)):Z.jsx("div",{style:{fontSize:12,opacity:.8},children:"No citations."})]})}vS.createRoot(document.getElementById("root")).render(Z.jsx(hS.StrictMode,{children:Z.jsx(bw,{})}));
