(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(c){if(c.ep)return;c.ep=!0;const h=a(c);fetch(c.href,h)}})();function Ey(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var ju={exports:{}},Vo={};var Rp;function iS(){if(Rp)return Vo;Rp=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(r,c,h){var d=null;if(h!==void 0&&(d=""+h),c.key!==void 0&&(d=""+c.key),"key"in c){h={};for(var g in c)g!=="key"&&(h[g]=c[g])}else h=c;return c=h.ref,{$$typeof:u,type:r,key:d,ref:c!==void 0?c:null,props:h}}return Vo.Fragment=n,Vo.jsx=a,Vo.jsxs=a,Vo}var Ip;function aS(){return Ip||(Ip=1,ju.exports=iS()),ju.exports}var X=aS(),Yu={exports:{}},te={};var kp;function oS(){if(kp)return te;kp=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),O=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=O&&A[O]||A["@@iterator"],typeof A=="function"?A:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,Te={};function ve(A,L,K){this.props=A,this.context=L,this.refs=Te,this.updater=K||ee}ve.prototype.isReactComponent={},ve.prototype.setState=function(A,L){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,L,"setState")},ve.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function he(){}he.prototype=ve.prototype;function ge(A,L,K){this.props=A,this.context=L,this.refs=Te,this.updater=K||ee}var Pe=ge.prototype=new he;Pe.constructor=ge,Q(Pe,ve.prototype),Pe.isPureReactComponent=!0;var ze=Array.isArray;function Ge(){}var oe={H:null,A:null,T:null,S:null},nt=Object.prototype.hasOwnProperty;function Ft(A,L,K){var j=K.ref;return{$$typeof:u,type:A,key:L,ref:j!==void 0?j:null,props:K}}function Yn(A,L){return Ft(A.type,L,A.props)}function St(A){return typeof A=="object"&&A!==null&&A.$$typeof===u}function it(A){var L={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(K){return L[K]})}var sn=/\/+/g;function Vt(A,L){return typeof A=="object"&&A!==null&&A.key!=null?it(""+A.key):L.toString(36)}function Ue(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Ge,Ge):(A.status="pending",A.then(function(L){A.status==="pending"&&(A.status="fulfilled",A.value=L)},function(L){A.status==="pending"&&(A.status="rejected",A.reason=L)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function N(A,L,K,j,z){var F=typeof A;(F==="undefined"||F==="boolean")&&(A=null);var re=!1;if(A===null)re=!0;else switch(F){case"bigint":case"string":case"number":re=!0;break;case"object":switch(A.$$typeof){case u:case n:re=!0;break;case S:return re=A._init,N(re(A._payload),L,K,j,z)}}if(re)return z=z(A),re=j===""?"."+Vt(A,0):j,ze(z)?(K="",re!=null&&(K=re.replace(sn,"$&/")+"/"),N(z,L,K,"",function(eo){return eo})):z!=null&&(St(z)&&(z=Yn(z,K+(z.key==null||A&&A.key===z.key?"":(""+z.key).replace(sn,"$&/")+"/")+re)),L.push(z)),1;re=0;var yt=j===""?".":j+":";if(ze(A))for(var qe=0;qe<A.length;qe++)j=A[qe],F=yt+Vt(j,qe),re+=N(j,L,K,F,z);else if(qe=x(A),typeof qe=="function")for(A=qe.call(A),qe=0;!(j=A.next()).done;)j=j.value,F=yt+Vt(j,qe++),re+=N(j,L,K,F,z);else if(F==="object"){if(typeof A.then=="function")return N(Ue(A),L,K,j,z);throw L=String(A),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return re}function B(A,L,K){if(A==null)return A;var j=[],z=0;return N(A,j,"","",function(F){return L.call(K,F,z++)}),j}function $(A){if(A._status===-1){var L=A._result;L=L(),L.then(function(K){(A._status===0||A._status===-1)&&(A._status=1,A._result=K)},function(K){(A._status===0||A._status===-1)&&(A._status=2,A._result=K)}),A._status===-1&&(A._status=0,A._result=L)}if(A._status===1)return A._result.default;throw A._result}var Ae=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Se={map:B,forEach:function(A,L,K){B(A,function(){L.apply(this,arguments)},K)},count:function(A){var L=0;return B(A,function(){L++}),L},toArray:function(A){return B(A,function(L){return L})||[]},only:function(A){if(!St(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return te.Activity=_,te.Children=Se,te.Component=ve,te.Fragment=a,te.Profiler=c,te.PureComponent=ge,te.StrictMode=r,te.Suspense=m,te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,te.__COMPILER_RUNTIME={__proto__:null,c:function(A){return oe.H.useMemoCache(A)}},te.cache=function(A){return function(){return A.apply(null,arguments)}},te.cacheSignal=function(){return null},te.cloneElement=function(A,L,K){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var j=Q({},A.props),z=A.key;if(L!=null)for(F in L.key!==void 0&&(z=""+L.key),L)!nt.call(L,F)||F==="key"||F==="__self"||F==="__source"||F==="ref"&&L.ref===void 0||(j[F]=L[F]);var F=arguments.length-2;if(F===1)j.children=K;else if(1<F){for(var re=Array(F),yt=0;yt<F;yt++)re[yt]=arguments[yt+2];j.children=re}return Ft(A.type,z,j)},te.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:h,_context:A},A},te.createElement=function(A,L,K){var j,z={},F=null;if(L!=null)for(j in L.key!==void 0&&(F=""+L.key),L)nt.call(L,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(z[j]=L[j]);var re=arguments.length-2;if(re===1)z.children=K;else if(1<re){for(var yt=Array(re),qe=0;qe<re;qe++)yt[qe]=arguments[qe+2];z.children=yt}if(A&&A.defaultProps)for(j in re=A.defaultProps,re)z[j]===void 0&&(z[j]=re[j]);return Ft(A,F,z)},te.createRef=function(){return{current:null}},te.forwardRef=function(A){return{$$typeof:g,render:A}},te.isValidElement=St,te.lazy=function(A){return{$$typeof:S,_payload:{_status:-1,_result:A},_init:$}},te.memo=function(A,L){return{$$typeof:y,type:A,compare:L===void 0?null:L}},te.startTransition=function(A){var L=oe.T,K={};oe.T=K;try{var j=A(),z=oe.S;z!==null&&z(K,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(Ge,Ae)}catch(F){Ae(F)}finally{L!==null&&K.types!==null&&(L.types=K.types),oe.T=L}},te.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},te.use=function(A){return oe.H.use(A)},te.useActionState=function(A,L,K){return oe.H.useActionState(A,L,K)},te.useCallback=function(A,L){return oe.H.useCallback(A,L)},te.useContext=function(A){return oe.H.useContext(A)},te.useDebugValue=function(){},te.useDeferredValue=function(A,L){return oe.H.useDeferredValue(A,L)},te.useEffect=function(A,L){return oe.H.useEffect(A,L)},te.useEffectEvent=function(A){return oe.H.useEffectEvent(A)},te.useId=function(){return oe.H.useId()},te.useImperativeHandle=function(A,L,K){return oe.H.useImperativeHandle(A,L,K)},te.useInsertionEffect=function(A,L){return oe.H.useInsertionEffect(A,L)},te.useLayoutEffect=function(A,L){return oe.H.useLayoutEffect(A,L)},te.useMemo=function(A,L){return oe.H.useMemo(A,L)},te.useOptimistic=function(A,L){return oe.H.useOptimistic(A,L)},te.useReducer=function(A,L,K){return oe.H.useReducer(A,L,K)},te.useRef=function(A){return oe.H.useRef(A)},te.useState=function(A){return oe.H.useState(A)},te.useSyncExternalStore=function(A,L,K){return oe.H.useSyncExternalStore(A,L,K)},te.useTransition=function(){return oe.H.useTransition()},te.version="19.2.3",te}var Op;function ph(){return Op||(Op=1,Yu.exports=oS()),Yu.exports}var tt=ph();const rS=Ey(tt);var Qu={exports:{}},Xo={},Fu={exports:{}},Vu={};var Mp;function sS(){return Mp||(Mp=1,(function(u){function n(N,B){var $=N.length;N.push(B);e:for(;0<$;){var Ae=$-1>>>1,Se=N[Ae];if(0<c(Se,B))N[Ae]=B,N[$]=Se,$=Ae;else break e}}function a(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var B=N[0],$=N.pop();if($!==B){N[0]=$;e:for(var Ae=0,Se=N.length,A=Se>>>1;Ae<A;){var L=2*(Ae+1)-1,K=N[L],j=L+1,z=N[j];if(0>c(K,$))j<Se&&0>c(z,K)?(N[Ae]=z,N[j]=$,Ae=j):(N[Ae]=K,N[L]=$,Ae=L);else if(j<Se&&0>c(z,$))N[Ae]=z,N[j]=$,Ae=j;else break e}}return B}function c(N,B){var $=N.sortIndex-B.sortIndex;return $!==0?$:N.id-B.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;u.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();u.unstable_now=function(){return d.now()-g}}var m=[],y=[],S=1,_=null,O=3,x=!1,ee=!1,Q=!1,Te=!1,ve=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function Pe(N){for(var B=a(y);B!==null;){if(B.callback===null)r(y);else if(B.startTime<=N)r(y),B.sortIndex=B.expirationTime,n(m,B);else break;B=a(y)}}function ze(N){if(Q=!1,Pe(N),!ee)if(a(m)!==null)ee=!0,Ge||(Ge=!0,it());else{var B=a(y);B!==null&&Ue(ze,B.startTime-N)}}var Ge=!1,oe=-1,nt=5,Ft=-1;function Yn(){return Te?!0:!(u.unstable_now()-Ft<nt)}function St(){if(Te=!1,Ge){var N=u.unstable_now();Ft=N;var B=!0;try{e:{ee=!1,Q&&(Q=!1,he(oe),oe=-1),x=!0;var $=O;try{t:{for(Pe(N),_=a(m);_!==null&&!(_.expirationTime>N&&Yn());){var Ae=_.callback;if(typeof Ae=="function"){_.callback=null,O=_.priorityLevel;var Se=Ae(_.expirationTime<=N);if(N=u.unstable_now(),typeof Se=="function"){_.callback=Se,Pe(N),B=!0;break t}_===a(m)&&r(m),Pe(N)}else r(m);_=a(m)}if(_!==null)B=!0;else{var A=a(y);A!==null&&Ue(ze,A.startTime-N),B=!1}}break e}finally{_=null,O=$,x=!1}B=void 0}}finally{B?it():Ge=!1}}}var it;if(typeof ge=="function")it=function(){ge(St)};else if(typeof MessageChannel<"u"){var sn=new MessageChannel,Vt=sn.port2;sn.port1.onmessage=St,it=function(){Vt.postMessage(null)}}else it=function(){ve(St,0)};function Ue(N,B){oe=ve(function(){N(u.unstable_now())},B)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(N){N.callback=null},u.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<N?Math.floor(1e3/N):5},u.unstable_getCurrentPriorityLevel=function(){return O},u.unstable_next=function(N){switch(O){case 1:case 2:case 3:var B=3;break;default:B=O}var $=O;O=B;try{return N()}finally{O=$}},u.unstable_requestPaint=function(){Te=!0},u.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=O;O=N;try{return B()}finally{O=$}},u.unstable_scheduleCallback=function(N,B,$){var Ae=u.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Ae+$:Ae):$=Ae,N){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=$+Se,N={id:S++,callback:B,priorityLevel:N,startTime:$,expirationTime:Se,sortIndex:-1},$>Ae?(N.sortIndex=$,n(y,N),a(m)===null&&N===a(y)&&(Q?(he(oe),oe=-1):Q=!0,Ue(ze,$-Ae))):(N.sortIndex=Se,n(m,N),ee||x||(ee=!0,Ge||(Ge=!0,it()))),N},u.unstable_shouldYield=Yn,u.unstable_wrapCallback=function(N){var B=O;return function(){var $=O;O=B;try{return N.apply(this,arguments)}finally{O=$}}}})(Vu)),Vu}var Np;function cS(){return Np||(Np=1,Fu.exports=sS()),Fu.exports}var Xu={exports:{}},ft={};var Dp;function lS(){if(Dp)return ft;Dp=1;var u=ph();function n(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(m,y,S){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:_==null?null:""+_,children:m,containerInfo:y,implementation:S}}var d=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ft.createPortal=function(m,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return h(m,y,null,S)},ft.flushSync=function(m){var y=d.T,S=r.p;try{if(d.T=null,r.p=2,m)return m()}finally{d.T=y,r.p=S,r.d.f()}},ft.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(m,y))},ft.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ft.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var S=y.as,_=g(S,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,x=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?r.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:O,fetchPriority:x}):S==="script"&&r.d.X(m,{crossOrigin:_,integrity:O,fetchPriority:x,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},ft.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=g(y.as,y.crossOrigin);r.d.M(m,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(m)},ft.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,_=g(S,y.crossOrigin);r.d.L(m,S,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},ft.preloadModule=function(m,y){if(typeof m=="string")if(y){var S=g(y.as,y.crossOrigin);r.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(m)},ft.requestFormReset=function(m){r.d.r(m)},ft.unstable_batchedUpdates=function(m,y){return m(y)},ft.useFormState=function(m,y,S){return d.H.useFormState(m,y,S)},ft.useFormStatus=function(){return d.H.useHostTransitionStatus()},ft.version="19.2.3",ft}var Up;function uS(){if(Up)return Xu.exports;Up=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Xu.exports=lS(),Xu.exports}var Hp;function hS(){if(Hp)return Xo;Hp=1;var u=cS(),n=ph(),a=uS();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(h(e)!==e)throw Error(r(188))}function y(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,o=t;;){var s=i.return;if(s===null)break;var l=s.alternate;if(l===null){if(o=s.return,o!==null){i=o;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===i)return m(s),e;if(l===o)return m(s),t;l=l.sibling}throw Error(r(188))}if(i.return!==o.return)i=s,o=l;else{for(var f=!1,p=s.child;p;){if(p===i){f=!0,i=s,o=l;break}if(p===o){f=!0,o=s,i=l;break}p=p.sibling}if(!f){for(p=l.child;p;){if(p===i){f=!0,i=l,o=s;break}if(p===o){f=!0,o=l,i=s;break}p=p.sibling}if(!f)throw Error(r(189))}}if(i.alternate!==o)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,O=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),ge=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),Ft=Symbol.for("react.activity"),Yn=Symbol.for("react.memo_cache_sentinel"),St=Symbol.iterator;function it(e){return e===null||typeof e!="object"?null:(e=St&&e[St]||e["@@iterator"],typeof e=="function"?e:null)}var sn=Symbol.for("react.client.reference");function Vt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===sn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case ve:return"Profiler";case Te:return"StrictMode";case ze:return"Suspense";case Ge:return"SuspenseList";case Ft:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ee:return"Portal";case ge:return e.displayName||"Context";case he:return(e._context.displayName||"Context")+".Consumer";case Pe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return t=e.displayName||null,t!==null?t:Vt(e.type)||"Memo";case nt:t=e._payload,e=e._init;try{return Vt(e(t))}catch{}}return null}var Ue=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},Ae=[],Se=-1;function A(e){return{current:e}}function L(e){0>Se||(e.current=Ae[Se],Ae[Se]=null,Se--)}function K(e,t){Se++,Ae[Se]=e.current,e.current=t}var j=A(null),z=A(null),F=A(null),re=A(null);function yt(e,t){switch(K(F,t),K(z,e),K(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Jm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Jm(t),e=Zm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(j),K(j,e)}function qe(){L(j),L(z),L(F)}function eo(e){e.memoizedState!==null&&K(re,e);var t=j.current,i=Zm(t,e.type);t!==i&&(K(z,e),K(j,i))}function dr(e){z.current===e&&(L(j),L(z)),re.current===e&&(L(re),jo._currentValue=$)}var wc,bd;function Ii(e){if(wc===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);wc=t&&t[1]||"",bd=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wc+e+bd}var Rc=!1;function Ic(e,t){if(!e||Rc)return"";Rc=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(I){var R=I}Reflect.construct(e,[],U)}else{try{U.call()}catch(I){R=I}e.call(U.prototype)}}else{try{throw Error()}catch(I){R=I}(U=e())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(I){if(I&&R&&typeof I.stack=="string")return[I.stack,R.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=o.DetermineComponentFrameRoot(),f=l[0],p=l[1];if(f&&p){var C=f.split(`
`),w=p.split(`
`);for(s=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;s<w.length&&!w[s].includes("DetermineComponentFrameRoot");)s++;if(o===C.length||s===w.length)for(o=C.length-1,s=w.length-1;1<=o&&0<=s&&C[o]!==w[s];)s--;for(;1<=o&&0<=s;o--,s--)if(C[o]!==w[s]){if(o!==1||s!==1)do if(o--,s--,0>s||C[o]!==w[s]){var M=`
`+C[o].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),M}while(1<=o&&0<=s);break}}}finally{Rc=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ii(i):""}function UT(e,t){switch(e.tag){case 26:case 27:case 5:return Ii(e.type);case 16:return Ii("Lazy");case 13:return e.child!==t&&t!==null?Ii("Suspense Fallback"):Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return Ic(e.type,!1);case 11:return Ic(e.type.render,!1);case 1:return Ic(e.type,!0);case 31:return Ii("Activity");default:return""}}function wd(e){try{var t="",i=null;do t+=UT(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var kc=Object.prototype.hasOwnProperty,Oc=u.unstable_scheduleCallback,Mc=u.unstable_cancelCallback,HT=u.unstable_shouldYield,LT=u.unstable_requestPaint,Dt=u.unstable_now,zT=u.unstable_getCurrentPriorityLevel,Rd=u.unstable_ImmediatePriority,Id=u.unstable_UserBlockingPriority,fr=u.unstable_NormalPriority,PT=u.unstable_LowPriority,kd=u.unstable_IdlePriority,xT=u.log,BT=u.unstable_setDisableYieldValue,to=null,Ut=null;function Qn(e){if(typeof xT=="function"&&BT(e),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(to,e)}catch{}}var Ht=Math.clz32?Math.clz32:qT,KT=Math.log,GT=Math.LN2;function qT(e){return e>>>=0,e===0?32:31-(KT(e)/GT|0)|0}var gr=256,mr=262144,pr=4194304;function ki(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yr(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var s=0,l=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var p=o&134217727;return p!==0?(o=p&~l,o!==0?s=ki(o):(f&=p,f!==0?s=ki(f):i||(i=p&~e,i!==0&&(s=ki(i))))):(p=o&~l,p!==0?s=ki(p):f!==0?s=ki(f):i||(i=o&~e,i!==0&&(s=ki(i)))),s===0?0:t!==0&&t!==s&&(t&l)===0&&(l=s&-s,i=t&-t,l>=i||l===32&&(i&4194048)!==0)?t:s}function no(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function jT(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Od(){var e=pr;return pr<<=1,(pr&62914560)===0&&(pr=4194304),e}function Nc(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function io(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function YT(e,t,i,o,s,l){var f=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var p=e.entanglements,C=e.expirationTimes,w=e.hiddenUpdates;for(i=f&~i;0<i;){var M=31-Ht(i),U=1<<M;p[M]=0,C[M]=-1;var R=w[M];if(R!==null)for(w[M]=null,M=0;M<R.length;M++){var I=R[M];I!==null&&(I.lane&=-536870913)}i&=~U}o!==0&&Md(e,o,0),l!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=l&~(f&~t))}function Md(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-Ht(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Nd(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-Ht(i),s=1<<o;s&t|e[o]&t&&(e[o]|=t),i&=~s}}function Dd(e,t){var i=t&-t;return i=(i&42)!==0?1:Dc(i),(i&(e.suspendedLanes|t))!==0?0:i}function Dc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Uc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ud(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:vp(e.type))}function Hd(e,t){var i=B.p;try{return B.p=e,t()}finally{B.p=i}}var Fn=Math.random().toString(36).slice(2),at="__reactFiber$"+Fn,Et="__reactProps$"+Fn,ta="__reactContainer$"+Fn,Hc="__reactEvents$"+Fn,QT="__reactListeners$"+Fn,FT="__reactHandles$"+Fn,Ld="__reactResources$"+Fn,ao="__reactMarker$"+Fn;function Lc(e){delete e[at],delete e[Et],delete e[Hc],delete e[QT],delete e[FT]}function na(e){var t=e[at];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ta]||i[at]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=ap(e);e!==null;){if(i=e[at])return i;e=ap(e)}return t}e=i,i=e.parentNode}return null}function ia(e){if(e=e[at]||e[ta]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function oo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function aa(e){var t=e[Ld];return t||(t=e[Ld]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[ao]=!0}var zd=new Set,Pd={};function Oi(e,t){oa(e,t),oa(e+"Capture",t)}function oa(e,t){for(Pd[e]=t,e=0;e<t.length;e++)zd.add(t[e])}var VT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xd={},Bd={};function XT(e){return kc.call(Bd,e)?!0:kc.call(xd,e)?!1:VT.test(e)?Bd[e]=!0:(xd[e]=!0,!1)}function Cr(e,t,i){if(XT(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Tr(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function En(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function Xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JT(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var s=o.get,l=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zc(e){if(!e._valueTracker){var t=Kd(e)?"checked":"value";e._valueTracker=JT(e,t,""+e[t])}}function Gd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=Kd(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ZT=/[\n"\\]/g;function Jt(e){return e.replace(ZT,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Pc(e,t,i,o,s,l,f,p){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Xt(t)):e.value!==""+Xt(t)&&(e.value=""+Xt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?xc(e,f,Xt(t)):i!=null?xc(e,f,Xt(i)):o!=null&&e.removeAttribute("value"),s==null&&l!=null&&(e.defaultChecked=!!l),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+Xt(p):e.removeAttribute("name")}function qd(e,t,i,o,s,l,f,p){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||i!=null){if(!(l!=="submit"&&l!=="reset"||t!=null)){zc(e);return}i=i!=null?""+Xt(i):"",t=t!=null?""+Xt(t):i,p||t===e.value||(e.value=t),e.defaultValue=t}o=o??s,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=p?e.checked:!!o,e.defaultChecked=!!o,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),zc(e)}function xc(e,t,i){t==="number"&&vr(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ra(e,t,i,o){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Xt(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,o&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function jd(e,t,i){if(t!=null&&(t=""+Xt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Xt(i):""}function Yd(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(r(92));if(Ue(o)){if(1<o.length)throw Error(r(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=Xt(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),zc(e)}function sa(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var $T=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qd(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||$T.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Fd(e,t,i){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var s in t)o=t[s],t.hasOwnProperty(s)&&i[s]!==o&&Qd(e,s,o)}else for(var l in t)t.hasOwnProperty(l)&&Qd(e,l,t[l])}function Bc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ev=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ar(e){return ev.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function _n(){}var Kc=null;function Gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ca=null,la=null;function Vd(e){var t=ia(e);if(t&&(e=t.stateNode)){var i=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(Pc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Jt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var s=o[Et]||null;if(!s)throw Error(r(90));Pc(o,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&Gd(o)}break e;case"textarea":jd(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ra(e,!!i.multiple,t,!1)}}}var qc=!1;function Xd(e,t,i){if(qc)return e(t,i);qc=!0;try{var o=e(t);return o}finally{if(qc=!1,(ca!==null||la!==null)&&(cs(),ca&&(t=ca,e=la,la=ca=null,Vd(t),e)))for(t=0;t<e.length;t++)Vd(e[t])}}function ro(e,t){var i=e.stateNode;if(i===null)return null;var o=i[Et]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=!1;if(bn)try{var so={};Object.defineProperty(so,"passive",{get:function(){jc=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{jc=!1}var Vn=null,Yc=null,Sr=null;function Jd(){if(Sr)return Sr;var e,t=Yc,i=t.length,o,s="value"in Vn?Vn.value:Vn.textContent,l=s.length;for(e=0;e<i&&t[e]===s[e];e++);var f=i-e;for(o=1;o<=f&&t[i-o]===s[l-o];o++);return Sr=s.slice(e,1<o?1-o:void 0)}function Er(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _r(){return!0}function Zd(){return!1}function _t(e){function t(i,o,s,l,f){this._reactName=i,this._targetInst=s,this.type=o,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?_r:Zd,this.isPropagationStopped=Zd,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),t}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},br=_t(Mi),co=_({},Mi,{view:0,detail:0}),tv=_t(co),Qc,Fc,lo,wr=_({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lo&&(lo&&e.type==="mousemove"?(Qc=e.screenX-lo.screenX,Fc=e.screenY-lo.screenY):Fc=Qc=0,lo=e),Qc)},movementY:function(e){return"movementY"in e?e.movementY:Fc}}),$d=_t(wr),nv=_({},wr,{dataTransfer:0}),iv=_t(nv),av=_({},co,{relatedTarget:0}),Vc=_t(av),ov=_({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),rv=_t(ov),sv=_({},Mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cv=_t(sv),lv=_({},Mi,{data:0}),Wd=_t(lv),uv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dv[e])?!!t[e]:!1}function Xc(){return fv}var gv=_({},co,{key:function(e){if(e.key){var t=uv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Er(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(e){return e.type==="keypress"?Er(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Er(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mv=_t(gv),pv=_({},wr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ef=_t(pv),yv=_({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),Cv=_t(yv),Tv=_({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),vv=_t(Tv),Av=_({},wr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sv=_t(Av),Ev=_({},Mi,{newState:0,oldState:0}),_v=_t(Ev),bv=[9,13,27,32],Jc=bn&&"CompositionEvent"in window,uo=null;bn&&"documentMode"in document&&(uo=document.documentMode);var wv=bn&&"TextEvent"in window&&!uo,tf=bn&&(!Jc||uo&&8<uo&&11>=uo),nf=" ",af=!1;function of(e,t){switch(e){case"keyup":return bv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ua=!1;function Rv(e,t){switch(e){case"compositionend":return rf(t);case"keypress":return t.which!==32?null:(af=!0,nf);case"textInput":return e=t.data,e===nf&&af?null:e;default:return null}}function Iv(e,t){if(ua)return e==="compositionend"||!Jc&&of(e,t)?(e=Jd(),Sr=Yc=Vn=null,ua=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tf&&t.locale!=="ko"?null:t.data;default:return null}}var kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kv[e.type]:t==="textarea"}function cf(e,t,i,o){ca?la?la.push(o):la=[o]:ca=o,t=ms(t,"onChange"),0<t.length&&(i=new br("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var ho=null,fo=null;function Ov(e){jm(e,0)}function Rr(e){var t=oo(e);if(Gd(t))return e}function lf(e,t){if(e==="change")return t}var uf=!1;if(bn){var Zc;if(bn){var $c="oninput"in document;if(!$c){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),$c=typeof hf.oninput=="function"}Zc=$c}else Zc=!1;uf=Zc&&(!document.documentMode||9<document.documentMode)}function df(){ho&&(ho.detachEvent("onpropertychange",ff),fo=ho=null)}function ff(e){if(e.propertyName==="value"&&Rr(fo)){var t=[];cf(t,fo,e,Gc(e)),Xd(Ov,t)}}function Mv(e,t,i){e==="focusin"?(df(),ho=t,fo=i,ho.attachEvent("onpropertychange",ff)):e==="focusout"&&df()}function Nv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rr(fo)}function Dv(e,t){if(e==="click")return Rr(t)}function Uv(e,t){if(e==="input"||e==="change")return Rr(t)}function Hv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:Hv;function go(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var s=i[o];if(!kc.call(t,s)||!Lt(e[s],t[s]))return!1}return!0}function gf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mf(e,t){var i=gf(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=gf(i)}}function pf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=vr(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=vr(e.document)}return t}function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Lv=bn&&"documentMode"in document&&11>=document.documentMode,ha=null,el=null,mo=null,tl=!1;function Cf(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;tl||ha==null||ha!==vr(o)||(o=ha,"selectionStart"in o&&Wc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),mo&&go(mo,o)||(mo=o,o=ms(el,"onSelect"),0<o.length&&(t=new br("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=ha)))}function Ni(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var da={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionrun:Ni("Transition","TransitionRun"),transitionstart:Ni("Transition","TransitionStart"),transitioncancel:Ni("Transition","TransitionCancel"),transitionend:Ni("Transition","TransitionEnd")},nl={},Tf={};bn&&(Tf=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Di(e){if(nl[e])return nl[e];if(!da[e])return e;var t=da[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Tf)return nl[e]=t[i];return e}var vf=Di("animationend"),Af=Di("animationiteration"),Sf=Di("animationstart"),zv=Di("transitionrun"),Pv=Di("transitionstart"),xv=Di("transitioncancel"),Ef=Di("transitionend"),_f=new Map,il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");il.push("scrollEnd");function cn(e,t){_f.set(e,t),Oi(t,[e])}var Ir=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Zt=[],fa=0,al=0;function kr(){for(var e=fa,t=al=fa=0;t<e;){var i=Zt[t];Zt[t++]=null;var o=Zt[t];Zt[t++]=null;var s=Zt[t];Zt[t++]=null;var l=Zt[t];if(Zt[t++]=null,o!==null&&s!==null){var f=o.pending;f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s}l!==0&&bf(i,s,l)}}function Or(e,t,i,o){Zt[fa++]=e,Zt[fa++]=t,Zt[fa++]=i,Zt[fa++]=o,al|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function ol(e,t,i,o){return Or(e,t,i,o),Mr(e)}function Ui(e,t){return Or(e,null,null,t),Mr(e)}function bf(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var s=!1,l=e.return;l!==null;)l.childLanes|=i,o=l.alternate,o!==null&&(o.childLanes|=i),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(s=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,s&&t!==null&&(s=31-Ht(i),e=l.hiddenUpdates,o=e[s],o===null?e[s]=[t]:o.push(t),t.lane=i|536870912),l):null}function Mr(e){if(50<zo)throw zo=0,gu=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ga={};function Bv(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,i,o){return new Bv(e,t,i,o)}function rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wn(e,t){var i=e.alternate;return i===null?(i=zt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function wf(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Nr(e,t,i,o,s,l){var f=0;if(o=e,typeof e=="function")rl(e)&&(f=1);else if(typeof e=="string")f=YA(e,i,j.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ft:return e=zt(31,i,t,s),e.elementType=Ft,e.lanes=l,e;case Q:return Hi(i.children,s,l,t);case Te:f=8,s|=24;break;case ve:return e=zt(12,i,t,s|2),e.elementType=ve,e.lanes=l,e;case ze:return e=zt(13,i,t,s),e.elementType=ze,e.lanes=l,e;case Ge:return e=zt(19,i,t,s),e.elementType=Ge,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ge:f=10;break e;case he:f=9;break e;case Pe:f=11;break e;case oe:f=14;break e;case nt:f=16,o=null;break e}f=29,i=Error(r(130,e===null?"null":typeof e,"")),o=null}return t=zt(f,i,t,s),t.elementType=e,t.type=o,t.lanes=l,t}function Hi(e,t,i,o){return e=zt(7,e,o,t),e.lanes=i,e}function sl(e,t,i){return e=zt(6,e,null,t),e.lanes=i,e}function Rf(e){var t=zt(18,null,null,0);return t.stateNode=e,t}function cl(e,t,i){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var If=new WeakMap;function $t(e,t){if(typeof e=="object"&&e!==null){var i=If.get(e);return i!==void 0?i:(t={value:e,source:t,stack:wd(t)},If.set(e,t),t)}return{value:e,source:t,stack:wd(t)}}var ma=[],pa=0,Dr=null,po=0,Wt=[],en=0,Xn=null,mn=1,pn="";function Rn(e,t){ma[pa++]=po,ma[pa++]=Dr,Dr=e,po=t}function kf(e,t,i){Wt[en++]=mn,Wt[en++]=pn,Wt[en++]=Xn,Xn=e;var o=mn;e=pn;var s=32-Ht(o)-1;o&=~(1<<s),i+=1;var l=32-Ht(t)+s;if(30<l){var f=s-s%5;l=(o&(1<<f)-1).toString(32),o>>=f,s-=f,mn=1<<32-Ht(t)+s|i<<s|o,pn=l+e}else mn=1<<l|i<<s|o,pn=e}function ll(e){e.return!==null&&(Rn(e,1),kf(e,1,0))}function ul(e){for(;e===Dr;)Dr=ma[--pa],ma[pa]=null,po=ma[--pa],ma[pa]=null;for(;e===Xn;)Xn=Wt[--en],Wt[en]=null,pn=Wt[--en],Wt[en]=null,mn=Wt[--en],Wt[en]=null}function Of(e,t){Wt[en++]=mn,Wt[en++]=pn,Wt[en++]=Xn,mn=t.id,pn=t.overflow,Xn=e}var ot=null,Ne=null,de=!1,Jn=null,tn=!1,hl=Error(r(519));function Zn(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo($t(t,e)),hl}function Mf(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[at]=e,t[Et]=o,i){case"dialog":ce("cancel",t),ce("close",t);break;case"iframe":case"object":case"embed":ce("load",t);break;case"video":case"audio":for(i=0;i<xo.length;i++)ce(xo[i],t);break;case"source":ce("error",t);break;case"img":case"image":case"link":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"input":ce("invalid",t),qd(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ce("invalid",t);break;case"textarea":ce("invalid",t),Yd(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||Vm(t.textContent,i)?(o.popover!=null&&(ce("beforetoggle",t),ce("toggle",t)),o.onScroll!=null&&ce("scroll",t),o.onScrollEnd!=null&&ce("scrollend",t),o.onClick!=null&&(t.onclick=_n),t=!0):t=!1,t||Zn(e,!0)}function Nf(e){for(ot=e.return;ot;)switch(ot.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:ot=ot.return}}function ya(e){if(e!==ot)return!1;if(!de)return Nf(e),de=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||ku(e.type,e.memoizedProps)),i=!i),i&&Ne&&Zn(e),Nf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ne=ip(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ne=ip(e)}else t===27?(t=Ne,hi(e.type)?(e=Uu,Uu=null,Ne=e):Ne=t):Ne=ot?an(e.stateNode.nextSibling):null;return!0}function Li(){Ne=ot=null,de=!1}function dl(){var e=Jn;return e!==null&&(It===null?It=e:It.push.apply(It,e),Jn=null),e}function yo(e){Jn===null?Jn=[e]:Jn.push(e)}var fl=A(null),zi=null,In=null;function $n(e,t,i){K(fl,t._currentValue),t._currentValue=i}function kn(e){e._currentValue=fl.current,L(fl)}function gl(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function ml(e,t,i,o){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){var f=s.child;l=l.firstContext;e:for(;l!==null;){var p=l;l=s;for(var C=0;C<t.length;C++)if(p.context===t[C]){l.lanes|=i,p=l.alternate,p!==null&&(p.lanes|=i),gl(l.return,i,e),o||(f=null);break e}l=p.next}}else if(s.tag===18){if(f=s.return,f===null)throw Error(r(341));f.lanes|=i,l=f.alternate,l!==null&&(l.lanes|=i),gl(f,i,e),f=null}else f=s.child;if(f!==null)f.return=s;else for(f=s;f!==null;){if(f===e){f=null;break}if(s=f.sibling,s!==null){s.return=f.return,f=s;break}f=f.return}s=f}}function Ca(e,t,i,o){e=null;for(var s=t,l=!1;s!==null;){if(!l){if((s.flags&524288)!==0)l=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var f=s.alternate;if(f===null)throw Error(r(387));if(f=f.memoizedProps,f!==null){var p=s.type;Lt(s.pendingProps.value,f.value)||(e!==null?e.push(p):e=[p])}}else if(s===re.current){if(f=s.alternate,f===null)throw Error(r(387));f.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(jo):e=[jo])}s=s.return}e!==null&&ml(t,e,i,o),t.flags|=262144}function Ur(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){zi=e,In=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return Df(zi,e)}function Hr(e,t){return zi===null&&Pi(e),Df(e,t)}function Df(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},In===null){if(e===null)throw Error(r(308));In=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else In=In.next=t;return i}var Kv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Gv=u.unstable_scheduleCallback,qv=u.unstable_NormalPriority,Qe={$$typeof:ge,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pl(){return{controller:new Kv,data:new Map,refCount:0}}function Co(e){e.refCount--,e.refCount===0&&Gv(qv,function(){e.controller.abort()})}var To=null,yl=0,Ta=0,va=null;function jv(e,t){if(To===null){var i=To=[];yl=0,Ta=vu(),va={status:"pending",value:void 0,then:function(o){i.push(o)}}}return yl++,t.then(Uf,Uf),t}function Uf(){if(--yl===0&&To!==null){va!==null&&(va.status="fulfilled");var e=To;To=null,Ta=0,va=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Yv(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(o.status="rejected",o.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),o}var Hf=N.S;N.S=function(e,t){Cm=Dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&jv(e,t),Hf!==null&&Hf(e,t)};var xi=A(null);function Cl(){var e=xi.current;return e!==null?e:Me.pooledCache}function Lr(e,t){t===null?K(xi,xi.current):K(xi,t.pool)}function Lf(){var e=Cl();return e===null?null:{parent:Qe._currentValue,pool:e}}var Aa=Error(r(460)),Tl=Error(r(474)),zr=Error(r(542)),Pr={then:function(){}};function zf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pf(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(_n,_n),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bf(e),e;default:if(typeof t.status=="string")t.then(_n,_n);else{if(e=Me,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=o}},function(o){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bf(e),e}throw Ki=t,Aa}}function Bi(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ki=i,Aa):i}}var Ki=null;function xf(){if(Ki===null)throw Error(r(459));var e=Ki;return Ki=null,e}function Bf(e){if(e===Aa||e===zr)throw Error(r(483))}var Sa=null,vo=0;function xr(e){var t=vo;return vo+=1,Sa===null&&(Sa=[]),Pf(Sa,e,t)}function Ao(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Br(e,t){throw t.$$typeof===O?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Kf(e){function t(E,v){if(e){var b=E.deletions;b===null?(E.deletions=[v],E.flags|=16):b.push(v)}}function i(E,v){if(!e)return null;for(;v!==null;)t(E,v),v=v.sibling;return null}function o(E){for(var v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(E,v){return E=wn(E,v),E.index=0,E.sibling=null,E}function l(E,v,b){return E.index=b,e?(b=E.alternate,b!==null?(b=b.index,b<v?(E.flags|=67108866,v):b):(E.flags|=67108866,v)):(E.flags|=1048576,v)}function f(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function p(E,v,b,D){return v===null||v.tag!==6?(v=sl(b,E.mode,D),v.return=E,v):(v=s(v,b),v.return=E,v)}function C(E,v,b,D){var V=b.type;return V===Q?M(E,v,b.props.children,D,b.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===nt&&Bi(V)===v.type)?(v=s(v,b.props),Ao(v,b),v.return=E,v):(v=Nr(b.type,b.key,b.props,null,E.mode,D),Ao(v,b),v.return=E,v)}function w(E,v,b,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=cl(b,E.mode,D),v.return=E,v):(v=s(v,b.children||[]),v.return=E,v)}function M(E,v,b,D,V){return v===null||v.tag!==7?(v=Hi(b,E.mode,D,V),v.return=E,v):(v=s(v,b),v.return=E,v)}function U(E,v,b){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=sl(""+v,E.mode,b),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case x:return b=Nr(v.type,v.key,v.props,null,E.mode,b),Ao(b,v),b.return=E,b;case ee:return v=cl(v,E.mode,b),v.return=E,v;case nt:return v=Bi(v),U(E,v,b)}if(Ue(v)||it(v))return v=Hi(v,E.mode,b,null),v.return=E,v;if(typeof v.then=="function")return U(E,xr(v),b);if(v.$$typeof===ge)return U(E,Hr(E,v),b);Br(E,v)}return null}function R(E,v,b,D){var V=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return V!==null?null:p(E,v,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case x:return b.key===V?C(E,v,b,D):null;case ee:return b.key===V?w(E,v,b,D):null;case nt:return b=Bi(b),R(E,v,b,D)}if(Ue(b)||it(b))return V!==null?null:M(E,v,b,D,null);if(typeof b.then=="function")return R(E,v,xr(b),D);if(b.$$typeof===ge)return R(E,v,Hr(E,b),D);Br(E,b)}return null}function I(E,v,b,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return E=E.get(b)||null,p(v,E,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case x:return E=E.get(D.key===null?b:D.key)||null,C(v,E,D,V);case ee:return E=E.get(D.key===null?b:D.key)||null,w(v,E,D,V);case nt:return D=Bi(D),I(E,v,b,D,V)}if(Ue(D)||it(D))return E=E.get(b)||null,M(v,E,D,V,null);if(typeof D.then=="function")return I(E,v,b,xr(D),V);if(D.$$typeof===ge)return I(E,v,b,Hr(v,D),V);Br(v,D)}return null}function q(E,v,b,D){for(var V=null,me=null,Y=v,ie=v=0,ue=null;Y!==null&&ie<b.length;ie++){Y.index>ie?(ue=Y,Y=null):ue=Y.sibling;var pe=R(E,Y,b[ie],D);if(pe===null){Y===null&&(Y=ue);break}e&&Y&&pe.alternate===null&&t(E,Y),v=l(pe,v,ie),me===null?V=pe:me.sibling=pe,me=pe,Y=ue}if(ie===b.length)return i(E,Y),de&&Rn(E,ie),V;if(Y===null){for(;ie<b.length;ie++)Y=U(E,b[ie],D),Y!==null&&(v=l(Y,v,ie),me===null?V=Y:me.sibling=Y,me=Y);return de&&Rn(E,ie),V}for(Y=o(Y);ie<b.length;ie++)ue=I(Y,E,ie,b[ie],D),ue!==null&&(e&&ue.alternate!==null&&Y.delete(ue.key===null?ie:ue.key),v=l(ue,v,ie),me===null?V=ue:me.sibling=ue,me=ue);return e&&Y.forEach(function(pi){return t(E,pi)}),de&&Rn(E,ie),V}function Z(E,v,b,D){if(b==null)throw Error(r(151));for(var V=null,me=null,Y=v,ie=v=0,ue=null,pe=b.next();Y!==null&&!pe.done;ie++,pe=b.next()){Y.index>ie?(ue=Y,Y=null):ue=Y.sibling;var pi=R(E,Y,pe.value,D);if(pi===null){Y===null&&(Y=ue);break}e&&Y&&pi.alternate===null&&t(E,Y),v=l(pi,v,ie),me===null?V=pi:me.sibling=pi,me=pi,Y=ue}if(pe.done)return i(E,Y),de&&Rn(E,ie),V;if(Y===null){for(;!pe.done;ie++,pe=b.next())pe=U(E,pe.value,D),pe!==null&&(v=l(pe,v,ie),me===null?V=pe:me.sibling=pe,me=pe);return de&&Rn(E,ie),V}for(Y=o(Y);!pe.done;ie++,pe=b.next())pe=I(Y,E,ie,pe.value,D),pe!==null&&(e&&pe.alternate!==null&&Y.delete(pe.key===null?ie:pe.key),v=l(pe,v,ie),me===null?V=pe:me.sibling=pe,me=pe);return e&&Y.forEach(function(nS){return t(E,nS)}),de&&Rn(E,ie),V}function Ie(E,v,b,D){if(typeof b=="object"&&b!==null&&b.type===Q&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case x:e:{for(var V=b.key;v!==null;){if(v.key===V){if(V=b.type,V===Q){if(v.tag===7){i(E,v.sibling),D=s(v,b.props.children),D.return=E,E=D;break e}}else if(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===nt&&Bi(V)===v.type){i(E,v.sibling),D=s(v,b.props),Ao(D,b),D.return=E,E=D;break e}i(E,v);break}else t(E,v);v=v.sibling}b.type===Q?(D=Hi(b.props.children,E.mode,D,b.key),D.return=E,E=D):(D=Nr(b.type,b.key,b.props,null,E.mode,D),Ao(D,b),D.return=E,E=D)}return f(E);case ee:e:{for(V=b.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){i(E,v.sibling),D=s(v,b.children||[]),D.return=E,E=D;break e}else{i(E,v);break}else t(E,v);v=v.sibling}D=cl(b,E.mode,D),D.return=E,E=D}return f(E);case nt:return b=Bi(b),Ie(E,v,b,D)}if(Ue(b))return q(E,v,b,D);if(it(b)){if(V=it(b),typeof V!="function")throw Error(r(150));return b=V.call(b),Z(E,v,b,D)}if(typeof b.then=="function")return Ie(E,v,xr(b),D);if(b.$$typeof===ge)return Ie(E,v,Hr(E,b),D);Br(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,v!==null&&v.tag===6?(i(E,v.sibling),D=s(v,b),D.return=E,E=D):(i(E,v),D=sl(b,E.mode,D),D.return=E,E=D),f(E)):i(E,v)}return function(E,v,b,D){try{vo=0;var V=Ie(E,v,b,D);return Sa=null,V}catch(Y){if(Y===Aa||Y===zr)throw Y;var me=zt(29,Y,null,E.mode);return me.lanes=D,me.return=E,me}}}var Gi=Kf(!0),Gf=Kf(!1),Wn=!1;function vl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Al(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ti(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ce&2)!==0){var s=o.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),o.pending=t,t=Mr(e),bf(e,null,i),t}return Or(e,o,t,i),Mr(e)}function So(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Nd(e,i)}}function Sl(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var s=null,l=null;if(i=i.firstBaseUpdate,i!==null){do{var f={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};l===null?s=l=f:l=l.next=f,i=i.next}while(i!==null);l===null?s=l=t:l=l.next=t}else s=l=t;i={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var El=!1;function Eo(){if(El){var e=va;if(e!==null)throw e}}function _o(e,t,i,o){El=!1;var s=e.updateQueue;Wn=!1;var l=s.firstBaseUpdate,f=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var C=p,w=C.next;C.next=null,f===null?l=w:f.next=w,f=C;var M=e.alternate;M!==null&&(M=M.updateQueue,p=M.lastBaseUpdate,p!==f&&(p===null?M.firstBaseUpdate=w:p.next=w,M.lastBaseUpdate=C))}if(l!==null){var U=s.baseState;f=0,M=w=C=null,p=l;do{var R=p.lane&-536870913,I=R!==p.lane;if(I?(le&R)===R:(o&R)===R){R!==0&&R===Ta&&(El=!0),M!==null&&(M=M.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var q=e,Z=p;R=t;var Ie=i;switch(Z.tag){case 1:if(q=Z.payload,typeof q=="function"){U=q.call(Ie,U,R);break e}U=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=Z.payload,R=typeof q=="function"?q.call(Ie,U,R):q,R==null)break e;U=_({},U,R);break e;case 2:Wn=!0}}R=p.callback,R!==null&&(e.flags|=64,I&&(e.flags|=8192),I=s.callbacks,I===null?s.callbacks=[R]:I.push(R))}else I={lane:R,tag:p.tag,payload:p.payload,callback:p.callback,next:null},M===null?(w=M=I,C=U):M=M.next=I,f|=R;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;I=p,p=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);M===null&&(C=U),s.baseState=C,s.firstBaseUpdate=w,s.lastBaseUpdate=M,l===null&&(s.shared.lanes=0),ri|=f,e.lanes=f,e.memoizedState=U}}function qf(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function jf(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)qf(i[e],t)}var Ea=A(null),Kr=A(0);function Yf(e,t){e=Pn,K(Kr,e),K(Ea,t),Pn=e|t.baseLanes}function _l(){K(Kr,Pn),K(Ea,Ea.current)}function bl(){Pn=Kr.current,L(Ea),L(Kr)}var Pt=A(null),nn=null;function ni(e){var t=e.alternate;K(je,je.current&1),K(Pt,e),nn===null&&(t===null||Ea.current!==null||t.memoizedState!==null)&&(nn=e)}function wl(e){K(je,je.current),K(Pt,e),nn===null&&(nn=e)}function Qf(e){e.tag===22?(K(je,je.current),K(Pt,e),nn===null&&(nn=e)):ii()}function ii(){K(je,je.current),K(Pt,Pt.current)}function xt(e){L(Pt),nn===e&&(nn=null),L(je)}var je=A(0);function Gr(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Nu(i)||Du(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var On=0,ne=null,we=null,Fe=null,qr=!1,_a=!1,qi=!1,jr=0,bo=0,ba=null,Qv=0;function xe(){throw Error(r(321))}function Rl(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Lt(e[i],t[i]))return!1;return!0}function Il(e,t,i,o,s,l){return On=l,ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?kg:ql,qi=!1,l=i(o,s),qi=!1,_a&&(l=Vf(t,i,o,s)),Ff(e),l}function Ff(e){N.H=Io;var t=we!==null&&we.next!==null;if(On=0,Fe=we=ne=null,qr=!1,bo=0,ba=null,t)throw Error(r(300));e===null||Ve||(e=e.dependencies,e!==null&&Ur(e)&&(Ve=!0))}function Vf(e,t,i,o){ne=e;var s=0;do{if(_a&&(ba=null),bo=0,_a=!1,25<=s)throw Error(r(301));if(s+=1,Fe=we=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}N.H=Og,l=t(i,o)}while(_a);return l}function Fv(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?wo(t):t,e=e.useState()[0],(we!==null?we.memoizedState:null)!==e&&(ne.flags|=1024),t}function kl(){var e=jr!==0;return jr=0,e}function Ol(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ml(e){if(qr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}qr=!1}On=0,Fe=we=ne=null,_a=!1,bo=jr=0,ba=null}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ne.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Ye(){if(we===null){var e=ne.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Fe===null?ne.memoizedState:Fe.next;if(t!==null)Fe=t,we=e;else{if(e===null)throw ne.alternate===null?Error(r(467)):Error(r(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Fe===null?ne.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Yr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wo(e){var t=bo;return bo+=1,ba===null&&(ba=[]),e=Pf(ba,e,t),t=ne,(Fe===null?t.memoizedState:Fe.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?kg:ql),e}function Qr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return wo(e);if(e.$$typeof===ge)return rt(e)}throw Error(r(438,String(e)))}function Nl(e){var t=null,i=ne.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Yr(),ne.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=Yn;return t.index++,i}function Mn(e,t){return typeof t=="function"?t(e):t}function Fr(e){var t=Ye();return Dl(t,we,e)}function Dl(e,t,i){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var s=e.baseQueue,l=o.pending;if(l!==null){if(s!==null){var f=s.next;s.next=l.next,l.next=f}t.baseQueue=s=l,o.pending=null}if(l=e.baseState,s===null)e.memoizedState=l;else{t=s.next;var p=f=null,C=null,w=t,M=!1;do{var U=w.lane&-536870913;if(U!==w.lane?(le&U)===U:(On&U)===U){var R=w.revertLane;if(R===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),U===Ta&&(M=!0);else if((On&R)===R){w=w.next,R===Ta&&(M=!0);continue}else U={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},C===null?(p=C=U,f=l):C=C.next=U,ne.lanes|=R,ri|=R;U=w.action,qi&&i(l,U),l=w.hasEagerState?w.eagerState:i(l,U)}else R={lane:U,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},C===null?(p=C=R,f=l):C=C.next=R,ne.lanes|=U,ri|=U;w=w.next}while(w!==null&&w!==t);if(C===null?f=l:C.next=p,!Lt(l,e.memoizedState)&&(Ve=!0,M&&(i=va,i!==null)))throw i;e.memoizedState=l,e.baseState=f,e.baseQueue=C,o.lastRenderedState=l}return s===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Ul(e){var t=Ye(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var o=i.dispatch,s=i.pending,l=t.memoizedState;if(s!==null){i.pending=null;var f=s=s.next;do l=e(l,f.action),f=f.next;while(f!==s);Lt(l,t.memoizedState)||(Ve=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),i.lastRenderedState=l}return[l,o]}function Xf(e,t,i){var o=ne,s=Ye(),l=de;if(l){if(i===void 0)throw Error(r(407));i=i()}else i=t();var f=!Lt((we||s).memoizedState,i);if(f&&(s.memoizedState=i,Ve=!0),s=s.queue,zl($f.bind(null,o,s,e),[e]),s.getSnapshot!==t||f||Fe!==null&&Fe.memoizedState.tag&1){if(o.flags|=2048,wa(9,{destroy:void 0},Zf.bind(null,o,s,i,t),null),Me===null)throw Error(r(349));l||(On&127)!==0||Jf(o,t,i)}return i}function Jf(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=ne.updateQueue,t===null?(t=Yr(),ne.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Zf(e,t,i,o){t.value=i,t.getSnapshot=o,Wf(t)&&eg(e)}function $f(e,t,i){return i(function(){Wf(t)&&eg(e)})}function Wf(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Lt(e,i)}catch{return!0}}function eg(e){var t=Ui(e,2);t!==null&&kt(t,e,2)}function Hl(e){var t=Ct();if(typeof e=="function"){var i=e;if(e=i(),qi){Qn(!0);try{i()}finally{Qn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:e},t}function tg(e,t,i,o){return e.baseState=i,Dl(e,we,typeof o=="function"?o:Mn)}function Vv(e,t,i,o,s){if(Jr(e))throw Error(r(485));if(e=t.action,e!==null){var l={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){l.listeners.push(f)}};N.T!==null?i(!0):l.isTransition=!1,o(l),i=t.pending,i===null?(l.next=t.pending=l,ng(t,l)):(l.next=i.next,t.pending=i.next=l)}}function ng(e,t){var i=t.action,o=t.payload,s=e.state;if(t.isTransition){var l=N.T,f={};N.T=f;try{var p=i(s,o),C=N.S;C!==null&&C(f,p),ig(e,t,p)}catch(w){Ll(e,t,w)}finally{l!==null&&f.types!==null&&(l.types=f.types),N.T=l}}else try{l=i(s,o),ig(e,t,l)}catch(w){Ll(e,t,w)}}function ig(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){ag(e,t,o)},function(o){return Ll(e,t,o)}):ag(e,t,i)}function ag(e,t,i){t.status="fulfilled",t.value=i,og(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,ng(e,i)))}function Ll(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,og(t),t=t.next;while(t!==o)}e.action=null}function og(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function rg(e,t){return t}function sg(e,t){if(de){var i=Me.formState;if(i!==null){e:{var o=ne;if(de){if(Ne){t:{for(var s=Ne,l=tn;s.nodeType!==8;){if(!l){s=null;break t}if(s=an(s.nextSibling),s===null){s=null;break t}}l=s.data,s=l==="F!"||l==="F"?s:null}if(s){Ne=an(s.nextSibling),o=s.data==="F!";break e}}Zn(o)}o=!1}o&&(t=i[0])}}return i=Ct(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rg,lastRenderedState:t},i.queue=o,i=wg.bind(null,ne,o),o.dispatch=i,o=Hl(!1),l=Gl.bind(null,ne,!1,o.queue),o=Ct(),s={state:t,dispatch:null,action:e,pending:null},o.queue=s,i=Vv.bind(null,ne,s,l,i),s.dispatch=i,o.memoizedState=e,[t,i,!1]}function cg(e){var t=Ye();return lg(t,we,e)}function lg(e,t,i){if(t=Dl(e,t,rg)[0],e=Fr(Mn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=wo(t)}catch(f){throw f===Aa?zr:f}else o=t;t=Ye();var s=t.queue,l=s.dispatch;return i!==t.memoizedState&&(ne.flags|=2048,wa(9,{destroy:void 0},Xv.bind(null,s,i),null)),[o,l,e]}function Xv(e,t){e.action=t}function ug(e){var t=Ye(),i=we;if(i!==null)return lg(t,i,e);Ye(),t=t.memoizedState,i=Ye();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function wa(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=ne.updateQueue,t===null&&(t=Yr(),ne.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function hg(){return Ye().memoizedState}function Vr(e,t,i,o){var s=Ct();ne.flags|=e,s.memoizedState=wa(1|t,{destroy:void 0},i,o===void 0?null:o)}function Xr(e,t,i,o){var s=Ye();o=o===void 0?null:o;var l=s.memoizedState.inst;we!==null&&o!==null&&Rl(o,we.memoizedState.deps)?s.memoizedState=wa(t,l,i,o):(ne.flags|=e,s.memoizedState=wa(1|t,l,i,o))}function dg(e,t){Vr(8390656,8,e,t)}function zl(e,t){Xr(2048,8,e,t)}function Jv(e){ne.flags|=4;var t=ne.updateQueue;if(t===null)t=Yr(),ne.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function fg(e){var t=Ye().memoizedState;return Jv({ref:t,nextImpl:e}),function(){if((Ce&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function gg(e,t){return Xr(4,2,e,t)}function mg(e,t){return Xr(4,4,e,t)}function pg(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yg(e,t,i){i=i!=null?i.concat([e]):null,Xr(4,4,pg.bind(null,t,e),i)}function Pl(){}function Cg(e,t){var i=Ye();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Rl(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Tg(e,t){var i=Ye();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Rl(t,o[1]))return o[0];if(o=e(),qi){Qn(!0);try{e()}finally{Qn(!1)}}return i.memoizedState=[o,t],o}function xl(e,t,i){return i===void 0||(On&1073741824)!==0&&(le&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=vm(),ne.lanes|=e,ri|=e,i)}function vg(e,t,i,o){return Lt(i,t)?i:Ea.current!==null?(e=xl(e,i,o),Lt(e,t)||(Ve=!0),e):(On&42)===0||(On&1073741824)!==0&&(le&261930)===0?(Ve=!0,e.memoizedState=i):(e=vm(),ne.lanes|=e,ri|=e,t)}function Ag(e,t,i,o,s){var l=B.p;B.p=l!==0&&8>l?l:8;var f=N.T,p={};N.T=p,Gl(e,!1,t,i);try{var C=s(),w=N.S;if(w!==null&&w(p,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var M=Yv(C,o);Ro(e,t,M,Gt(e))}else Ro(e,t,o,Gt(e))}catch(U){Ro(e,t,{then:function(){},status:"rejected",reason:U},Gt())}finally{B.p=l,f!==null&&p.types!==null&&(f.types=p.types),N.T=f}}function Zv(){}function Bl(e,t,i,o){if(e.tag!==5)throw Error(r(476));var s=Sg(e).queue;Ag(e,s,t,$,i===null?Zv:function(){return Eg(e),i(o)})}function Sg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:$},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Eg(e){var t=Sg(e);t.next===null&&(t=e.alternate.memoizedState),Ro(e,t.next.queue,{},Gt())}function Kl(){return rt(jo)}function _g(){return Ye().memoizedState}function bg(){return Ye().memoizedState}function $v(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Gt();e=ei(i);var o=ti(t,e,i);o!==null&&(kt(o,t,i),So(o,t,i)),t={cache:pl()},e.payload=t;return}t=t.return}}function Wv(e,t,i){var o=Gt();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Jr(e)?Rg(t,i):(i=ol(e,t,i,o),i!==null&&(kt(i,e,o),Ig(i,t,o)))}function wg(e,t,i){var o=Gt();Ro(e,t,i,o)}function Ro(e,t,i,o){var s={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Jr(e))Rg(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,p=l(f,i);if(s.hasEagerState=!0,s.eagerState=p,Lt(p,f))return Or(e,t,s,0),Me===null&&kr(),!1}catch{}if(i=ol(e,t,s,o),i!==null)return kt(i,e,o),Ig(i,t,o),!0}return!1}function Gl(e,t,i,o){if(o={lane:2,revertLane:vu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jr(e)){if(t)throw Error(r(479))}else t=ol(e,i,o,2),t!==null&&kt(t,e,2)}function Jr(e){var t=e.alternate;return e===ne||t!==null&&t===ne}function Rg(e,t){_a=qr=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Ig(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Nd(e,i)}}var Io={readContext:rt,use:Qr,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe};Io.useEffectEvent=xe;var kg={readContext:rt,use:Qr,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:dg,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Vr(4194308,4,pg.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Vr(4194308,4,e,t)},useInsertionEffect:function(e,t){Vr(4,2,e,t)},useMemo:function(e,t){var i=Ct();t=t===void 0?null:t;var o=e();if(qi){Qn(!0);try{e()}finally{Qn(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=Ct();if(i!==void 0){var s=i(t);if(qi){Qn(!0);try{i(t)}finally{Qn(!1)}}}else s=t;return o.memoizedState=o.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},o.queue=e,e=e.dispatch=Wv.bind(null,ne,e),[o.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:function(e){e=Hl(e);var t=e.queue,i=wg.bind(null,ne,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Pl,useDeferredValue:function(e,t){var i=Ct();return xl(i,e,t)},useTransition:function(){var e=Hl(!1);return e=Ag.bind(null,ne,e.queue,!0,!1),Ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=ne,s=Ct();if(de){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),Me===null)throw Error(r(349));(le&127)!==0||Jf(o,t,i)}s.memoizedState=i;var l={value:i,getSnapshot:t};return s.queue=l,dg($f.bind(null,o,l,e),[e]),o.flags|=2048,wa(9,{destroy:void 0},Zf.bind(null,o,l,i,t),null),i},useId:function(){var e=Ct(),t=Me.identifierPrefix;if(de){var i=pn,o=mn;i=(o&~(1<<32-Ht(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=jr++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=Qv++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Kl,useFormState:sg,useActionState:sg,useOptimistic:function(e){var t=Ct();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Gl.bind(null,ne,!0,i),i.dispatch=t,[e,t]},useMemoCache:Nl,useCacheRefresh:function(){return Ct().memoizedState=$v.bind(null,ne)},useEffectEvent:function(e){var t=Ct(),i={impl:e};return t.memoizedState=i,function(){if((Ce&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},ql={readContext:rt,use:Qr,useCallback:Cg,useContext:rt,useEffect:zl,useImperativeHandle:yg,useInsertionEffect:gg,useLayoutEffect:mg,useMemo:Tg,useReducer:Fr,useRef:hg,useState:function(){return Fr(Mn)},useDebugValue:Pl,useDeferredValue:function(e,t){var i=Ye();return vg(i,we.memoizedState,e,t)},useTransition:function(){var e=Fr(Mn)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:wo(e),t]},useSyncExternalStore:Xf,useId:_g,useHostTransitionStatus:Kl,useFormState:cg,useActionState:cg,useOptimistic:function(e,t){var i=Ye();return tg(i,we,e,t)},useMemoCache:Nl,useCacheRefresh:bg};ql.useEffectEvent=fg;var Og={readContext:rt,use:Qr,useCallback:Cg,useContext:rt,useEffect:zl,useImperativeHandle:yg,useInsertionEffect:gg,useLayoutEffect:mg,useMemo:Tg,useReducer:Ul,useRef:hg,useState:function(){return Ul(Mn)},useDebugValue:Pl,useDeferredValue:function(e,t){var i=Ye();return we===null?xl(i,e,t):vg(i,we.memoizedState,e,t)},useTransition:function(){var e=Ul(Mn)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:wo(e),t]},useSyncExternalStore:Xf,useId:_g,useHostTransitionStatus:Kl,useFormState:ug,useActionState:ug,useOptimistic:function(e,t){var i=Ye();return we!==null?tg(i,we,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Nl,useCacheRefresh:bg};Og.useEffectEvent=fg;function jl(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:_({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Yl={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Gt(),s=ei(o);s.payload=t,i!=null&&(s.callback=i),t=ti(e,s,o),t!==null&&(kt(t,e,o),So(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Gt(),s=ei(o);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=ti(e,s,o),t!==null&&(kt(t,e,o),So(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Gt(),o=ei(i);o.tag=2,t!=null&&(o.callback=t),t=ti(e,o,i),t!==null&&(kt(t,e,i),So(t,e,i))}};function Mg(e,t,i,o,s,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,l,f):t.prototype&&t.prototype.isPureReactComponent?!go(i,o)||!go(s,l):!0}function Ng(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Yl.enqueueReplaceState(t,t.state,null)}function ji(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=_({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}function Dg(e){Ir(e)}function Ug(e){console.error(e)}function Hg(e){Ir(e)}function Zr(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Lg(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Ql(e,t,i){return i=ei(i),i.tag=3,i.payload={element:null},i.callback=function(){Zr(e,t)},i}function zg(e){return e=ei(e),e.tag=3,e}function Pg(e,t,i,o){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var l=o.value;e.payload=function(){return s(l)},e.callback=function(){Lg(t,i,o)}}var f=i.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){Lg(t,i,o),typeof s!="function"&&(si===null?si=new Set([this]):si.add(this));var p=o.stack;this.componentDidCatch(o.value,{componentStack:p!==null?p:""})})}function eA(e,t,i,o,s){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Ca(t,i,s,!0),i=Pt.current,i!==null){switch(i.tag){case 31:case 13:return nn===null?ls():i.alternate===null&&Be===0&&(Be=3),i.flags&=-257,i.flags|=65536,i.lanes=s,o===Pr?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),yu(e,o,s)),!1;case 22:return i.flags|=65536,o===Pr?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),yu(e,o,s)),!1}throw Error(r(435,i.tag))}return yu(e,o,s),ls(),!1}if(de)return t=Pt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,o!==hl&&(e=Error(r(422),{cause:o}),yo($t(e,i)))):(o!==hl&&(t=Error(r(423),{cause:o}),yo($t(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,o=$t(o,i),s=Ql(e.stateNode,o,s),Sl(e,s),Be!==4&&(Be=2)),!1;var l=Error(r(520),{cause:o});if(l=$t(l,i),Lo===null?Lo=[l]:Lo.push(l),Be!==4&&(Be=2),t===null)return!0;o=$t(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=Ql(i.stateNode,o,e),Sl(i,e),!1;case 1:if(t=i.type,l=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(si===null||!si.has(l))))return i.flags|=65536,s&=-s,i.lanes|=s,s=zg(s),Pg(s,e,i,o),Sl(i,s),!1}i=i.return}while(i!==null);return!1}var Fl=Error(r(461)),Ve=!1;function st(e,t,i,o){t.child=e===null?Gf(t,null,i,o):Gi(t,e.child,i,o)}function xg(e,t,i,o,s){i=i.render;var l=t.ref;if("ref"in o){var f={};for(var p in o)p!=="ref"&&(f[p]=o[p])}else f=o;return Pi(t),o=Il(e,t,i,f,l,s),p=kl(),e!==null&&!Ve?(Ol(e,t,s),Nn(e,t,s)):(de&&p&&ll(t),t.flags|=1,st(e,t,o,s),t.child)}function Bg(e,t,i,o,s){if(e===null){var l=i.type;return typeof l=="function"&&!rl(l)&&l.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=l,Kg(e,t,l,o,s)):(e=Nr(i.type,null,o,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!tu(e,s)){var f=l.memoizedProps;if(i=i.compare,i=i!==null?i:go,i(f,o)&&e.ref===t.ref)return Nn(e,t,s)}return t.flags|=1,e=wn(l,o),e.ref=t.ref,e.return=t,t.child=e}function Kg(e,t,i,o,s){if(e!==null){var l=e.memoizedProps;if(go(l,o)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=o=l,tu(e,s))(e.flags&131072)!==0&&(Ve=!0);else return t.lanes=e.lanes,Nn(e,t,s)}return Vl(e,t,i,o,s)}function Gg(e,t,i,o){var s=o.children,l=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(l=l!==null?l.baseLanes|i:i,e!==null){for(o=t.child=e.child,s=0;o!==null;)s=s|o.lanes|o.childLanes,o=o.sibling;o=s&~l}else o=0,t.child=null;return qg(e,t,l,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Lr(t,l!==null?l.cachePool:null),l!==null?Yf(t,l):_l(),Qf(t);else return o=t.lanes=536870912,qg(e,t,l!==null?l.baseLanes|i:i,i,o)}else l!==null?(Lr(t,l.cachePool),Yf(t,l),ii(),t.memoizedState=null):(e!==null&&Lr(t,null),_l(),ii());return st(e,t,s,i),t.child}function ko(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qg(e,t,i,o,s){var l=Cl();return l=l===null?null:{parent:Qe._currentValue,pool:l},t.memoizedState={baseLanes:i,cachePool:l},e!==null&&Lr(t,null),_l(),Qf(t),e!==null&&Ca(e,t,o,!0),t.childLanes=s,null}function $r(e,t){return t=es({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function jg(e,t,i){return Gi(t,e.child,null,i),e=$r(t,t.pendingProps),e.flags|=2,xt(t),t.memoizedState=null,e}function tA(e,t,i){var o=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(de){if(o.mode==="hidden")return e=$r(t,o),t.lanes=536870912,ko(null,e);if(wl(t),(e=Ne)?(e=np(e,tn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Xn!==null?{id:mn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},i=Rf(e),i.return=t,t.child=i,ot=t,Ne=null)):e=null,e===null)throw Zn(t);return t.lanes=536870912,null}return $r(t,o)}var l=e.memoizedState;if(l!==null){var f=l.dehydrated;if(wl(t),s)if(t.flags&256)t.flags&=-257,t=jg(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(Ve||Ca(e,t,i,!1),s=(i&e.childLanes)!==0,Ve||s){if(o=Me,o!==null&&(f=Dd(o,i),f!==0&&f!==l.retryLane))throw l.retryLane=f,Ui(e,f),kt(o,e,f),Fl;ls(),t=jg(e,t,i)}else e=l.treeContext,Ne=an(f.nextSibling),ot=t,de=!0,Jn=null,tn=!1,e!==null&&Of(t,e),t=$r(t,o),t.flags|=4096;return t}return e=wn(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Wr(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Vl(e,t,i,o,s){return Pi(t),i=Il(e,t,i,o,void 0,s),o=kl(),e!==null&&!Ve?(Ol(e,t,s),Nn(e,t,s)):(de&&o&&ll(t),t.flags|=1,st(e,t,i,s),t.child)}function Yg(e,t,i,o,s,l){return Pi(t),t.updateQueue=null,i=Vf(t,o,i,s),Ff(e),o=kl(),e!==null&&!Ve?(Ol(e,t,l),Nn(e,t,l)):(de&&o&&ll(t),t.flags|=1,st(e,t,i,l),t.child)}function Qg(e,t,i,o,s){if(Pi(t),t.stateNode===null){var l=ga,f=i.contextType;typeof f=="object"&&f!==null&&(l=rt(f)),l=new i(o,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Yl,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=o,l.state=t.memoizedState,l.refs={},vl(t),f=i.contextType,l.context=typeof f=="object"&&f!==null?rt(f):ga,l.state=t.memoizedState,f=i.getDerivedStateFromProps,typeof f=="function"&&(jl(t,i,f,o),l.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(f=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),f!==l.state&&Yl.enqueueReplaceState(l,l.state,null),_o(t,o,l,s),Eo(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){l=t.stateNode;var p=t.memoizedProps,C=ji(i,p);l.props=C;var w=l.context,M=i.contextType;f=ga,typeof M=="object"&&M!==null&&(f=rt(M));var U=i.getDerivedStateFromProps;M=typeof U=="function"||typeof l.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,M||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p||w!==f)&&Ng(t,l,o,f),Wn=!1;var R=t.memoizedState;l.state=R,_o(t,o,l,s),Eo(),w=t.memoizedState,p||R!==w||Wn?(typeof U=="function"&&(jl(t,i,U,o),w=t.memoizedState),(C=Wn||Mg(t,i,C,o,R,w,f))?(M||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=w),l.props=o,l.state=w,l.context=f,o=C):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{l=t.stateNode,Al(e,t),f=t.memoizedProps,M=ji(i,f),l.props=M,U=t.pendingProps,R=l.context,w=i.contextType,C=ga,typeof w=="object"&&w!==null&&(C=rt(w)),p=i.getDerivedStateFromProps,(w=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==U||R!==C)&&Ng(t,l,o,C),Wn=!1,R=t.memoizedState,l.state=R,_o(t,o,l,s),Eo();var I=t.memoizedState;f!==U||R!==I||Wn||e!==null&&e.dependencies!==null&&Ur(e.dependencies)?(typeof p=="function"&&(jl(t,i,p,o),I=t.memoizedState),(M=Wn||Mg(t,i,M,o,R,I,C)||e!==null&&e.dependencies!==null&&Ur(e.dependencies))?(w||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,I,C),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,I,C)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=I),l.props=o,l.state=I,l.context=C,o=M):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),o=!1)}return l=o,Wr(e,t),o=(t.flags&128)!==0,l||o?(l=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&o?(t.child=Gi(t,e.child,null,s),t.child=Gi(t,null,i,s)):st(e,t,i,s),t.memoizedState=l.state,e=t.child):e=Nn(e,t,s),e}function Fg(e,t,i,o){return Li(),t.flags|=256,st(e,t,i,o),t.child}var Xl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jl(e){return{baseLanes:e,cachePool:Lf()}}function Zl(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Kt),e}function Vg(e,t,i){var o=t.pendingProps,s=!1,l=(t.flags&128)!==0,f;if((f=l)||(f=e!==null&&e.memoizedState===null?!1:(je.current&2)!==0),f&&(s=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(de){if(s?ni(t):ii(),(e=Ne)?(e=np(e,tn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Xn!==null?{id:mn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},i=Rf(e),i.return=t,t.child=i,ot=t,Ne=null)):e=null,e===null)throw Zn(t);return Du(e)?t.lanes=32:t.lanes=536870912,null}var p=o.children;return o=o.fallback,s?(ii(),s=t.mode,p=es({mode:"hidden",children:p},s),o=Hi(o,s,i,null),p.return=t,o.return=t,p.sibling=o,t.child=p,o=t.child,o.memoizedState=Jl(i),o.childLanes=Zl(e,f,i),t.memoizedState=Xl,ko(null,o)):(ni(t),$l(t,p))}var C=e.memoizedState;if(C!==null&&(p=C.dehydrated,p!==null)){if(l)t.flags&256?(ni(t),t.flags&=-257,t=Wl(e,t,i)):t.memoizedState!==null?(ii(),t.child=e.child,t.flags|=128,t=null):(ii(),p=o.fallback,s=t.mode,o=es({mode:"visible",children:o.children},s),p=Hi(p,s,i,null),p.flags|=2,o.return=t,p.return=t,o.sibling=p,t.child=o,Gi(t,e.child,null,i),o=t.child,o.memoizedState=Jl(i),o.childLanes=Zl(e,f,i),t.memoizedState=Xl,t=ko(null,o));else if(ni(t),Du(p)){if(f=p.nextSibling&&p.nextSibling.dataset,f)var w=f.dgst;f=w,o=Error(r(419)),o.stack="",o.digest=f,yo({value:o,source:null,stack:null}),t=Wl(e,t,i)}else if(Ve||Ca(e,t,i,!1),f=(i&e.childLanes)!==0,Ve||f){if(f=Me,f!==null&&(o=Dd(f,i),o!==0&&o!==C.retryLane))throw C.retryLane=o,Ui(e,o),kt(f,e,o),Fl;Nu(p)||ls(),t=Wl(e,t,i)}else Nu(p)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Ne=an(p.nextSibling),ot=t,de=!0,Jn=null,tn=!1,e!==null&&Of(t,e),t=$l(t,o.children),t.flags|=4096);return t}return s?(ii(),p=o.fallback,s=t.mode,C=e.child,w=C.sibling,o=wn(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,w!==null?p=wn(w,p):(p=Hi(p,s,i,null),p.flags|=2),p.return=t,o.return=t,o.sibling=p,t.child=o,ko(null,o),o=t.child,p=e.child.memoizedState,p===null?p=Jl(i):(s=p.cachePool,s!==null?(C=Qe._currentValue,s=s.parent!==C?{parent:C,pool:C}:s):s=Lf(),p={baseLanes:p.baseLanes|i,cachePool:s}),o.memoizedState=p,o.childLanes=Zl(e,f,i),t.memoizedState=Xl,ko(e.child,o)):(ni(t),i=e.child,e=i.sibling,i=wn(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=i,t.memoizedState=null,i)}function $l(e,t){return t=es({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function es(e,t){return e=zt(22,e,null,t),e.lanes=0,e}function Wl(e,t,i){return Gi(t,e.child,null,i),e=$l(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xg(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),gl(e.return,t,i)}function eu(e,t,i,o,s,l){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:s,treeForkCount:l}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=i,f.tailMode=s,f.treeForkCount=l)}function Jg(e,t,i){var o=t.pendingProps,s=o.revealOrder,l=o.tail;o=o.children;var f=je.current,p=(f&2)!==0;if(p?(f=f&1|2,t.flags|=128):f&=1,K(je,f),st(e,t,o,i),o=de?po:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xg(e,i,t);else if(e.tag===19)Xg(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&Gr(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),eu(t,!1,s,i,l,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gr(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}eu(t,!0,i,null,l,o);break;case"together":eu(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Nn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ri|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ca(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=wn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=wn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function tu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ur(e)))}function nA(e,t,i){switch(t.tag){case 3:yt(t,t.stateNode.containerInfo),$n(t,Qe,e.memoizedState.cache),Li();break;case 27:case 5:eo(t);break;case 4:yt(t,t.stateNode.containerInfo);break;case 10:$n(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,wl(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(ni(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Vg(e,t,i):(ni(t),e=Nn(e,t,i),e!==null?e.sibling:null);ni(t);break;case 19:var s=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Ca(e,t,i,!1),o=(i&t.childLanes)!==0),s){if(o)return Jg(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(je,je.current),o)break;return null;case 22:return t.lanes=0,Gg(e,t,i,t.pendingProps);case 24:$n(t,Qe,e.memoizedState.cache)}return Nn(e,t,i)}function Zg(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ve=!0;else{if(!tu(e,i)&&(t.flags&128)===0)return Ve=!1,nA(e,t,i);Ve=(e.flags&131072)!==0}else Ve=!1,de&&(t.flags&1048576)!==0&&kf(t,po,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=Bi(t.elementType),t.type=e,typeof e=="function")rl(e)?(o=ji(e,o),t.tag=1,t=Qg(null,t,e,o,i)):(t.tag=0,t=Vl(null,t,e,o,i));else{if(e!=null){var s=e.$$typeof;if(s===Pe){t.tag=11,t=xg(null,t,e,o,i);break e}else if(s===oe){t.tag=14,t=Bg(null,t,e,o,i);break e}}throw t=Vt(e)||e,Error(r(306,t,""))}}return t;case 0:return Vl(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,s=ji(o,t.pendingProps),Qg(e,t,o,s,i);case 3:e:{if(yt(t,t.stateNode.containerInfo),e===null)throw Error(r(387));o=t.pendingProps;var l=t.memoizedState;s=l.element,Al(e,t),_o(t,o,null,i);var f=t.memoizedState;if(o=f.cache,$n(t,Qe,o),o!==l.cache&&ml(t,[Qe],i,!0),Eo(),o=f.element,l.isDehydrated)if(l={element:o,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Fg(e,t,o,i);break e}else if(o!==s){s=$t(Error(r(424)),t),yo(s),t=Fg(e,t,o,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ne=an(e.firstChild),ot=t,de=!0,Jn=null,tn=!0,i=Gf(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Li(),o===s){t=Nn(e,t,i);break e}st(e,t,o,i)}t=t.child}return t;case 26:return Wr(e,t),e===null?(i=cp(t.type,null,t.pendingProps,null))?t.memoizedState=i:de||(i=t.type,e=t.pendingProps,o=ps(F.current).createElement(i),o[at]=t,o[Et]=e,ct(o,i,e),We(o),t.stateNode=o):t.memoizedState=cp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return eo(t),e===null&&de&&(o=t.stateNode=op(t.type,t.pendingProps,F.current),ot=t,tn=!0,s=Ne,hi(t.type)?(Uu=s,Ne=an(o.firstChild)):Ne=s),st(e,t,t.pendingProps.children,i),Wr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&de&&((s=o=Ne)&&(o=NA(o,t.type,t.pendingProps,tn),o!==null?(t.stateNode=o,ot=t,Ne=an(o.firstChild),tn=!1,s=!0):s=!1),s||Zn(t)),eo(t),s=t.type,l=t.pendingProps,f=e!==null?e.memoizedProps:null,o=l.children,ku(s,l)?o=null:f!==null&&ku(s,f)&&(t.flags|=32),t.memoizedState!==null&&(s=Il(e,t,Fv,null,null,i),jo._currentValue=s),Wr(e,t),st(e,t,o,i),t.child;case 6:return e===null&&de&&((e=i=Ne)&&(i=DA(i,t.pendingProps,tn),i!==null?(t.stateNode=i,ot=t,Ne=null,e=!0):e=!1),e||Zn(t)),null;case 13:return Vg(e,t,i);case 4:return yt(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Gi(t,null,o,i):st(e,t,o,i),t.child;case 11:return xg(e,t,t.type,t.pendingProps,i);case 7:return st(e,t,t.pendingProps,i),t.child;case 8:return st(e,t,t.pendingProps.children,i),t.child;case 12:return st(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,$n(t,t.type,o.value),st(e,t,o.children,i),t.child;case 9:return s=t.type._context,o=t.pendingProps.children,Pi(t),s=rt(s),o=o(s),t.flags|=1,st(e,t,o,i),t.child;case 14:return Bg(e,t,t.type,t.pendingProps,i);case 15:return Kg(e,t,t.type,t.pendingProps,i);case 19:return Jg(e,t,i);case 31:return tA(e,t,i);case 22:return Gg(e,t,i,t.pendingProps);case 24:return Pi(t),o=rt(Qe),e===null?(s=Cl(),s===null&&(s=Me,l=pl(),s.pooledCache=l,l.refCount++,l!==null&&(s.pooledCacheLanes|=i),s=l),t.memoizedState={parent:o,cache:s},vl(t),$n(t,Qe,s)):((e.lanes&i)!==0&&(Al(e,t),_o(t,null,null,i),Eo()),s=e.memoizedState,l=t.memoizedState,s.parent!==o?(s={parent:o,cache:o},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),$n(t,Qe,o)):(o=l.cache,$n(t,Qe,o),o!==s.cache&&ml(t,[Qe],i,!0))),st(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Dn(e){e.flags|=4}function nu(e,t,i,o,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(_m())e.flags|=8192;else throw Ki=Pr,Tl}else e.flags&=-16777217}function $g(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!fp(t))if(_m())e.flags|=8192;else throw Ki=Pr,Tl}function ts(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Od():536870912,e.lanes|=t,Oa|=t)}function Oo(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function De(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags&65011712,o|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function iA(e,t,i){var o=t.pendingProps;switch(ul(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(t),null;case 1:return De(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),kn(Qe),qe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ya(t)?Dn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,dl())),De(t),null;case 26:var s=t.type,l=t.memoizedState;return e===null?(Dn(t),l!==null?(De(t),$g(t,l)):(De(t),nu(t,s,null,o,i))):l?l!==e.memoizedState?(Dn(t),De(t),$g(t,l)):(De(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Dn(t),De(t),nu(t,s,e,o,i)),null;case 27:if(dr(t),i=F.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Dn(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return De(t),null}e=j.current,ya(t)?Mf(t):(e=op(s,o,i),t.stateNode=e,Dn(t))}return De(t),null;case 5:if(dr(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Dn(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return De(t),null}if(l=j.current,ya(t))Mf(t);else{var f=ps(F.current);switch(l){case 1:l=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:l=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":l=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":l=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":l=f.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof o.is=="string"?f.createElement("select",{is:o.is}):f.createElement("select"),o.multiple?l.multiple=!0:o.size&&(l.size=o.size);break;default:l=typeof o.is=="string"?f.createElement(s,{is:o.is}):f.createElement(s)}}l[at]=t,l[Et]=o;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=l;e:switch(ct(l,s,o),s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Dn(t)}}return De(t),nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Dn(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(r(166));if(e=F.current,ya(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,s=ot,s!==null)switch(s.tag){case 27:case 5:o=s.memoizedProps}e[at]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Vm(e.nodeValue,i)),e||Zn(t,!0)}else e=ps(e).createTextNode(o),e[at]=t,t.stateNode=e}return De(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=ya(t),i!==null){if(e===null){if(!o)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[at]=t}else Li(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;De(t),e=!1}else i=dl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(xt(t),t):(xt(t),null);if((t.flags&128)!==0)throw Error(r(558))}return De(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=ya(t),o!==null&&o.dehydrated!==null){if(e===null){if(!s)throw Error(r(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));s[at]=t}else Li(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;De(t),s=!1}else s=dl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(xt(t),t):(xt(t),null)}return xt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,s=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(s=o.alternate.memoizedState.cachePool.pool),l=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),l!==s&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),ts(t,t.updateQueue),De(t),null);case 4:return qe(),e===null&&_u(t.stateNode.containerInfo),De(t),null;case 10:return kn(t.type),De(t),null;case 19:if(L(je),o=t.memoizedState,o===null)return De(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)Oo(o,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(l=Gr(e),l!==null){for(t.flags|=128,Oo(o,!1),e=l.updateQueue,t.updateQueue=e,ts(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)wf(i,e),i=i.sibling;return K(je,je.current&1|2),de&&Rn(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&Dt()>rs&&(t.flags|=128,s=!0,Oo(o,!1),t.lanes=4194304)}else{if(!s)if(e=Gr(l),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,ts(t,e),Oo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!de)return De(t),null}else 2*Dt()-o.renderingStartTime>rs&&i!==536870912&&(t.flags|=128,s=!0,Oo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Dt(),e.sibling=null,i=je.current,K(je,s?i&1|2:i&1),de&&Rn(t,o.treeForkCount),e):(De(t),null);case 22:case 23:return xt(t),bl(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(De(t),t.subtreeFlags&6&&(t.flags|=8192)):De(t),i=t.updateQueue,i!==null&&ts(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&L(xi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),kn(Qe),De(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function aA(e,t){switch(ul(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kn(Qe),qe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return dr(t),null;case 31:if(t.memoizedState!==null){if(xt(t),t.alternate===null)throw Error(r(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(xt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(je),null;case 4:return qe(),null;case 10:return kn(t.type),null;case 22:case 23:return xt(t),bl(),e!==null&&L(xi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return kn(Qe),null;case 25:return null;default:return null}}function Wg(e,t){switch(ul(t),t.tag){case 3:kn(Qe),qe();break;case 26:case 27:case 5:dr(t);break;case 4:qe();break;case 31:t.memoizedState!==null&&xt(t);break;case 13:xt(t);break;case 19:L(je);break;case 10:kn(t.type);break;case 22:case 23:xt(t),bl(),e!==null&&L(xi);break;case 24:kn(Qe)}}function Mo(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&e)===e){o=void 0;var l=i.create,f=i.inst;o=l(),f.destroy=o}i=i.next}while(i!==s)}}catch(p){_e(t,t.return,p)}}function ai(e,t,i){try{var o=t.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var l=s.next;o=l;do{if((o.tag&e)===e){var f=o.inst,p=f.destroy;if(p!==void 0){f.destroy=void 0,s=t;var C=i,w=p;try{w()}catch(M){_e(s,C,M)}}}o=o.next}while(o!==l)}}catch(M){_e(t,t.return,M)}}function em(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{jf(t,i)}catch(o){_e(e,e.return,o)}}}function tm(e,t,i){i.props=ji(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){_e(e,t,o)}}function No(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(s){_e(e,t,s)}}function yn(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(s){_e(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){_e(e,t,s)}else i.current=null}function nm(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(s){_e(e,e.return,s)}}function iu(e,t,i){try{var o=e.stateNode;wA(o,e.type,i,t),o[Et]=t}catch(s){_e(e,e.return,s)}}function im(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&hi(e.type)||e.tag===4}function au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||im(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&hi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ou(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=_n));else if(o!==4&&(o===27&&hi(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(ou(e,t,i),e=e.sibling;e!==null;)ou(e,t,i),e=e.sibling}function ns(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&hi(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(ns(e,t,i),e=e.sibling;e!==null;)ns(e,t,i),e=e.sibling}function am(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ct(t,o,i),t[at]=e,t[Et]=i}catch(l){_e(e,e.return,l)}}var Un=!1,Xe=!1,ru=!1,om=typeof WeakSet=="function"?WeakSet:Set,et=null;function oA(e,t){if(e=e.containerInfo,Ru=Es,e=yf(e),Wc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var s=o.anchorOffset,l=o.focusNode;o=o.focusOffset;try{i.nodeType,l.nodeType}catch{i=null;break e}var f=0,p=-1,C=-1,w=0,M=0,U=e,R=null;t:for(;;){for(var I;U!==i||s!==0&&U.nodeType!==3||(p=f+s),U!==l||o!==0&&U.nodeType!==3||(C=f+o),U.nodeType===3&&(f+=U.nodeValue.length),(I=U.firstChild)!==null;)R=U,U=I;for(;;){if(U===e)break t;if(R===i&&++w===s&&(p=f),R===l&&++M===o&&(C=f),(I=U.nextSibling)!==null)break;U=R,R=U.parentNode}U=I}i=p===-1||C===-1?null:{start:p,end:C}}else i=null}i=i||{start:0,end:0}}else i=null;for(Iu={focusedElem:e,selectionRange:i},Es=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){switch(t=et,l=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)s=e[i],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&l!==null){e=void 0,i=t,s=l.memoizedProps,l=l.memoizedState,o=i.stateNode;try{var q=ji(i.type,s);e=o.getSnapshotBeforeUpdate(q,l),o.__reactInternalSnapshotBeforeUpdate=e}catch(Z){_e(i,i.return,Z)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Mu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}}function rm(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Ln(e,i),o&4&&Mo(5,i);break;case 1:if(Ln(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(f){_e(i,i.return,f)}else{var s=ji(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){_e(i,i.return,f)}}o&64&&em(i),o&512&&No(i,i.return);break;case 3:if(Ln(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{jf(e,t)}catch(f){_e(i,i.return,f)}}break;case 27:t===null&&o&4&&am(i);case 26:case 5:Ln(e,i),t===null&&o&4&&nm(i),o&512&&No(i,i.return);break;case 12:Ln(e,i);break;case 31:Ln(e,i),o&4&&lm(e,i);break;case 13:Ln(e,i),o&4&&um(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=gA.bind(null,i),UA(e,i))));break;case 22:if(o=i.memoizedState!==null||Un,!o){t=t!==null&&t.memoizedState!==null||Xe,s=Un;var l=Xe;Un=o,(Xe=t)&&!l?zn(e,i,(i.subtreeFlags&8772)!==0):Ln(e,i),Un=s,Xe=l}break;case 30:break;default:Ln(e,i)}}function sm(e){var t=e.alternate;t!==null&&(e.alternate=null,sm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Lc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,bt=!1;function Hn(e,t,i){for(i=i.child;i!==null;)cm(e,t,i),i=i.sibling}function cm(e,t,i){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(to,i)}catch{}switch(i.tag){case 26:Xe||yn(i,t),Hn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Xe||yn(i,t);var o=He,s=bt;hi(i.type)&&(He=i.stateNode,bt=!1),Hn(e,t,i),Ko(i.stateNode),He=o,bt=s;break;case 5:Xe||yn(i,t);case 6:if(o=He,s=bt,He=null,Hn(e,t,i),He=o,bt=s,He!==null)if(bt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(i.stateNode)}catch(l){_e(i,t,l)}else try{He.removeChild(i.stateNode)}catch(l){_e(i,t,l)}break;case 18:He!==null&&(bt?(e=He,ep(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Pa(e)):ep(He,i.stateNode));break;case 4:o=He,s=bt,He=i.stateNode.containerInfo,bt=!0,Hn(e,t,i),He=o,bt=s;break;case 0:case 11:case 14:case 15:ai(2,i,t),Xe||ai(4,i,t),Hn(e,t,i);break;case 1:Xe||(yn(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&tm(i,t,o)),Hn(e,t,i);break;case 21:Hn(e,t,i);break;case 22:Xe=(o=Xe)||i.memoizedState!==null,Hn(e,t,i),Xe=o;break;default:Hn(e,t,i)}}function lm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pa(e)}catch(i){_e(t,t.return,i)}}}function um(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pa(e)}catch(i){_e(t,t.return,i)}}function rA(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new om),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new om),t;default:throw Error(r(435,e.tag))}}function is(e,t){var i=rA(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var s=mA.bind(null,e,o);o.then(s,s)}})}function wt(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var s=i[o],l=e,f=t,p=f;e:for(;p!==null;){switch(p.tag){case 27:if(hi(p.type)){He=p.stateNode,bt=!1;break e}break;case 5:He=p.stateNode,bt=!1;break e;case 3:case 4:He=p.stateNode.containerInfo,bt=!0;break e}p=p.return}if(He===null)throw Error(r(160));cm(l,f,s),He=null,bt=!1,l=s.alternate,l!==null&&(l.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hm(t,e),t=t.sibling}var ln=null;function hm(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wt(t,e),Rt(e),o&4&&(ai(3,e,e.return),Mo(3,e),ai(5,e,e.return));break;case 1:wt(t,e),Rt(e),o&512&&(Xe||i===null||yn(i,i.return)),o&64&&Un&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var s=ln;if(wt(t,e),Rt(e),o&512&&(Xe||i===null||yn(i,i.return)),o&4){var l=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(o){case"title":l=s.getElementsByTagName("title")[0],(!l||l[ao]||l[at]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=s.createElement(o),s.head.insertBefore(l,s.querySelector("head > title"))),ct(l,o,i),l[at]=e,We(l),o=l;break e;case"link":var f=hp("link","href",s).get(o+(i.href||""));if(f){for(var p=0;p<f.length;p++)if(l=f[p],l.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&l.getAttribute("rel")===(i.rel==null?null:i.rel)&&l.getAttribute("title")===(i.title==null?null:i.title)&&l.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){f.splice(p,1);break t}}l=s.createElement(o),ct(l,o,i),s.head.appendChild(l);break;case"meta":if(f=hp("meta","content",s).get(o+(i.content||""))){for(p=0;p<f.length;p++)if(l=f[p],l.getAttribute("content")===(i.content==null?null:""+i.content)&&l.getAttribute("name")===(i.name==null?null:i.name)&&l.getAttribute("property")===(i.property==null?null:i.property)&&l.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&l.getAttribute("charset")===(i.charSet==null?null:i.charSet)){f.splice(p,1);break t}}l=s.createElement(o),ct(l,o,i),s.head.appendChild(l);break;default:throw Error(r(468,o))}l[at]=e,We(l),o=l}e.stateNode=o}else dp(s,e.type,e.stateNode);else e.stateNode=up(s,o,e.memoizedProps);else l!==o?(l===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):l.count--,o===null?dp(s,e.type,e.stateNode):up(s,o,e.memoizedProps)):o===null&&e.stateNode!==null&&iu(e,e.memoizedProps,i.memoizedProps)}break;case 27:wt(t,e),Rt(e),o&512&&(Xe||i===null||yn(i,i.return)),i!==null&&o&4&&iu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(wt(t,e),Rt(e),o&512&&(Xe||i===null||yn(i,i.return)),e.flags&32){s=e.stateNode;try{sa(s,"")}catch(q){_e(e,e.return,q)}}o&4&&e.stateNode!=null&&(s=e.memoizedProps,iu(e,s,i!==null?i.memoizedProps:s)),o&1024&&(ru=!0);break;case 6:if(wt(t,e),Rt(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(q){_e(e,e.return,q)}}break;case 3:if(Ts=null,s=ln,ln=ys(t.containerInfo),wt(t,e),ln=s,Rt(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Pa(t.containerInfo)}catch(q){_e(e,e.return,q)}ru&&(ru=!1,dm(e));break;case 4:o=ln,ln=ys(e.stateNode.containerInfo),wt(t,e),Rt(e),ln=o;break;case 12:wt(t,e),Rt(e);break;case 31:wt(t,e),Rt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,is(e,o)));break;case 13:wt(t,e),Rt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(os=Dt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,is(e,o)));break;case 22:s=e.memoizedState!==null;var C=i!==null&&i.memoizedState!==null,w=Un,M=Xe;if(Un=w||s,Xe=M||C,wt(t,e),Xe=M,Un=w,Rt(e),o&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||C||Un||Xe||Yi(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){C=i=t;try{if(l=C.stateNode,s)f=l.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{p=C.stateNode;var U=C.memoizedProps.style,R=U!=null&&U.hasOwnProperty("display")?U.display:null;p.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(q){_e(C,C.return,q)}}}else if(t.tag===6){if(i===null){C=t;try{C.stateNode.nodeValue=s?"":C.memoizedProps}catch(q){_e(C,C.return,q)}}}else if(t.tag===18){if(i===null){C=t;try{var I=C.stateNode;s?tp(I,!0):tp(C.stateNode,!1)}catch(q){_e(C,C.return,q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,is(e,i))));break;case 19:wt(t,e),Rt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,is(e,o)));break;case 30:break;case 21:break;default:wt(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(im(o)){i=o;break}o=o.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var s=i.stateNode,l=au(e);ns(e,l,s);break;case 5:var f=i.stateNode;i.flags&32&&(sa(f,""),i.flags&=-33);var p=au(e);ns(e,p,f);break;case 3:case 4:var C=i.stateNode.containerInfo,w=au(e);ou(e,w,C);break;default:throw Error(r(161))}}catch(M){_e(e,e.return,M)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;dm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ln(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)rm(e,t.alternate,t),t=t.sibling}function Yi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ai(4,t,t.return),Yi(t);break;case 1:yn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&tm(t,t.return,i),Yi(t);break;case 27:Ko(t.stateNode);case 26:case 5:yn(t,t.return),Yi(t);break;case 22:t.memoizedState===null&&Yi(t);break;case 30:Yi(t);break;default:Yi(t)}e=e.sibling}}function zn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,s=e,l=t,f=l.flags;switch(l.tag){case 0:case 11:case 15:zn(s,l,i),Mo(4,l);break;case 1:if(zn(s,l,i),o=l,s=o.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(w){_e(o,o.return,w)}if(o=l,s=o.updateQueue,s!==null){var p=o.stateNode;try{var C=s.shared.hiddenCallbacks;if(C!==null)for(s.shared.hiddenCallbacks=null,s=0;s<C.length;s++)qf(C[s],p)}catch(w){_e(o,o.return,w)}}i&&f&64&&em(l),No(l,l.return);break;case 27:am(l);case 26:case 5:zn(s,l,i),i&&o===null&&f&4&&nm(l),No(l,l.return);break;case 12:zn(s,l,i);break;case 31:zn(s,l,i),i&&f&4&&lm(s,l);break;case 13:zn(s,l,i),i&&f&4&&um(s,l);break;case 22:l.memoizedState===null&&zn(s,l,i),No(l,l.return);break;case 30:break;default:zn(s,l,i)}t=t.sibling}}function su(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Co(i))}function cu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Co(e))}function un(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fm(e,t,i,o),t=t.sibling}function fm(e,t,i,o){var s=t.flags;switch(t.tag){case 0:case 11:case 15:un(e,t,i,o),s&2048&&Mo(9,t);break;case 1:un(e,t,i,o);break;case 3:un(e,t,i,o),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Co(e)));break;case 12:if(s&2048){un(e,t,i,o),e=t.stateNode;try{var l=t.memoizedProps,f=l.id,p=l.onPostCommit;typeof p=="function"&&p(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){_e(t,t.return,C)}}else un(e,t,i,o);break;case 31:un(e,t,i,o);break;case 13:un(e,t,i,o);break;case 23:break;case 22:l=t.stateNode,f=t.alternate,t.memoizedState!==null?l._visibility&2?un(e,t,i,o):Do(e,t):l._visibility&2?un(e,t,i,o):(l._visibility|=2,Ra(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),s&2048&&su(f,t);break;case 24:un(e,t,i,o),s&2048&&cu(t.alternate,t);break;default:un(e,t,i,o)}}function Ra(e,t,i,o,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var l=e,f=t,p=i,C=o,w=f.flags;switch(f.tag){case 0:case 11:case 15:Ra(l,f,p,C,s),Mo(8,f);break;case 23:break;case 22:var M=f.stateNode;f.memoizedState!==null?M._visibility&2?Ra(l,f,p,C,s):Do(l,f):(M._visibility|=2,Ra(l,f,p,C,s)),s&&w&2048&&su(f.alternate,f);break;case 24:Ra(l,f,p,C,s),s&&w&2048&&cu(f.alternate,f);break;default:Ra(l,f,p,C,s)}t=t.sibling}}function Do(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,s=o.flags;switch(o.tag){case 22:Do(i,o),s&2048&&su(o.alternate,o);break;case 24:Do(i,o),s&2048&&cu(o.alternate,o);break;default:Do(i,o)}t=t.sibling}}var Uo=8192;function Ia(e,t,i){if(e.subtreeFlags&Uo)for(e=e.child;e!==null;)gm(e,t,i),e=e.sibling}function gm(e,t,i){switch(e.tag){case 26:Ia(e,t,i),e.flags&Uo&&e.memoizedState!==null&&QA(i,ln,e.memoizedState,e.memoizedProps);break;case 5:Ia(e,t,i);break;case 3:case 4:var o=ln;ln=ys(e.stateNode.containerInfo),Ia(e,t,i),ln=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Uo,Uo=16777216,Ia(e,t,i),Uo=o):Ia(e,t,i));break;default:Ia(e,t,i)}}function mm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ho(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];et=o,ym(o,e)}mm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pm(e),e=e.sibling}function pm(e){switch(e.tag){case 0:case 11:case 15:Ho(e),e.flags&2048&&ai(9,e,e.return);break;case 3:Ho(e);break;case 12:Ho(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,as(e)):Ho(e);break;default:Ho(e)}}function as(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];et=o,ym(o,e)}mm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ai(8,t,t.return),as(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,as(t));break;default:as(t)}e=e.sibling}}function ym(e,t){for(;et!==null;){var i=et;switch(i.tag){case 0:case 11:case 15:ai(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Co(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,et=o;else e:for(i=e;et!==null;){o=et;var s=o.sibling,l=o.return;if(sm(o),o===i){et=null;break e}if(s!==null){s.return=l,et=s;break e}et=l}}}var sA={getCacheForType:function(e){var t=rt(Qe),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return rt(Qe).controller.signal}},cA=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Me=null,se=null,le=0,Ee=0,Bt=null,oi=!1,ka=!1,lu=!1,Pn=0,Be=0,ri=0,Qi=0,uu=0,Kt=0,Oa=0,Lo=null,It=null,hu=!1,os=0,Cm=0,rs=1/0,ss=null,si=null,Ze=0,ci=null,Ma=null,xn=0,du=0,fu=null,Tm=null,zo=0,gu=null;function Gt(){return(Ce&2)!==0&&le!==0?le&-le:N.T!==null?vu():Ud()}function vm(){if(Kt===0)if((le&536870912)===0||de){var e=mr;mr<<=1,(mr&3932160)===0&&(mr=262144),Kt=e}else Kt=536870912;return e=Pt.current,e!==null&&(e.flags|=32),Kt}function kt(e,t,i){(e===Me&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)&&(Na(e,0),li(e,le,Kt,!1)),io(e,i),((Ce&2)===0||e!==Me)&&(e===Me&&((Ce&2)===0&&(Qi|=i),Be===4&&li(e,le,Kt,!1)),Cn(e))}function Am(e,t,i){if((Ce&6)!==0)throw Error(r(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||no(e,t),s=o?hA(e,t):pu(e,t,!0),l=o;do{if(s===0){ka&&!o&&li(e,t,0,!1);break}else{if(i=e.current.alternate,l&&!lA(i)){s=pu(e,t,!1),l=!1;continue}if(s===2){if(l=t,e.errorRecoveryDisabledLanes&l)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var p=e;s=Lo;var C=p.current.memoizedState.isDehydrated;if(C&&(Na(p,f).flags|=256),f=pu(p,f,!1),f!==2){if(lu&&!C){p.errorRecoveryDisabledLanes|=l,Qi|=l,s=4;break e}l=It,It=s,l!==null&&(It===null?It=l:It.push.apply(It,l))}s=f}if(l=!1,s!==2)continue}}if(s===1){Na(e,0),li(e,t,0,!0);break}e:{switch(o=e,l=s,l){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:li(o,t,Kt,!oi);break e;case 2:It=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(s=os+300-Dt(),10<s)){if(li(o,t,Kt,!oi),yr(o,0,!0)!==0)break e;xn=t,o.timeoutHandle=$m(Sm.bind(null,o,i,It,ss,hu,t,Kt,Qi,Oa,oi,l,"Throttled",-0,0),s);break e}Sm(o,i,It,ss,hu,t,Kt,Qi,Oa,oi,l,null,-0,0)}}break}while(!0);Cn(e)}function Sm(e,t,i,o,s,l,f,p,C,w,M,U,R,I){if(e.timeoutHandle=-1,U=t.subtreeFlags,U&8192||(U&16785408)===16785408){U={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_n},gm(t,l,U);var q=(l&62914560)===l?os-Dt():(l&4194048)===l?Cm-Dt():0;if(q=FA(U,q),q!==null){xn=l,e.cancelPendingCommit=q(Om.bind(null,e,t,l,i,o,s,f,p,C,M,U,null,R,I)),li(e,l,f,!w);return}}Om(e,t,l,i,o,s,f,p,C)}function lA(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var s=i[o],l=s.getSnapshot;s=s.value;try{if(!Lt(l(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function li(e,t,i,o){t&=~uu,t&=~Qi,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var s=t;0<s;){var l=31-Ht(s),f=1<<l;o[l]=-1,s&=~f}i!==0&&Md(e,i,t)}function cs(){return(Ce&6)===0?(Po(0),!1):!0}function mu(){if(se!==null){if(Ee===0)var e=se.return;else e=se,In=zi=null,Ml(e),Sa=null,vo=0,e=se;for(;e!==null;)Wg(e.alternate,e),e=e.return;se=null}}function Na(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,kA(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),xn=0,mu(),Me=e,se=i=wn(e.current,null),le=t,Ee=0,Bt=null,oi=!1,ka=no(e,t),lu=!1,Oa=Kt=uu=Qi=ri=Be=0,It=Lo=null,hu=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var s=31-Ht(o),l=1<<s;t|=e[s],o&=~l}return Pn=t,kr(),i}function Em(e,t){ne=null,N.H=Io,t===Aa||t===zr?(t=xf(),Ee=3):t===Tl?(t=xf(),Ee=4):Ee=t===Fl?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Bt=t,se===null&&(Be=1,Zr(e,$t(t,e.current)))}function _m(){var e=Pt.current;return e===null?!0:(le&4194048)===le?nn===null:(le&62914560)===le||(le&536870912)!==0?e===nn:!1}function bm(){var e=N.H;return N.H=Io,e===null?Io:e}function wm(){var e=N.A;return N.A=sA,e}function ls(){Be=4,oi||(le&4194048)!==le&&Pt.current!==null||(ka=!0),(ri&134217727)===0&&(Qi&134217727)===0||Me===null||li(Me,le,Kt,!1)}function pu(e,t,i){var o=Ce;Ce|=2;var s=bm(),l=wm();(Me!==e||le!==t)&&(ss=null,Na(e,t)),t=!1;var f=Be;e:do try{if(Ee!==0&&se!==null){var p=se,C=Bt;switch(Ee){case 8:mu(),f=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(t=!0);var w=Ee;if(Ee=0,Bt=null,Da(e,p,C,w),i&&ka){f=0;break e}break;default:w=Ee,Ee=0,Bt=null,Da(e,p,C,w)}}uA(),f=Be;break}catch(M){Em(e,M)}while(!0);return t&&e.shellSuspendCounter++,In=zi=null,Ce=o,N.H=s,N.A=l,se===null&&(Me=null,le=0,kr()),f}function uA(){for(;se!==null;)Rm(se)}function hA(e,t){var i=Ce;Ce|=2;var o=bm(),s=wm();Me!==e||le!==t?(ss=null,rs=Dt()+500,Na(e,t)):ka=no(e,t);e:do try{if(Ee!==0&&se!==null){t=se;var l=Bt;t:switch(Ee){case 1:Ee=0,Bt=null,Da(e,t,l,1);break;case 2:case 9:if(zf(l)){Ee=0,Bt=null,Im(t);break}t=function(){Ee!==2&&Ee!==9||Me!==e||(Ee=7),Cn(e)},l.then(t,t);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:zf(l)?(Ee=0,Bt=null,Im(t)):(Ee=0,Bt=null,Da(e,t,l,7));break;case 5:var f=null;switch(se.tag){case 26:f=se.memoizedState;case 5:case 27:var p=se;if(f?fp(f):p.stateNode.complete){Ee=0,Bt=null;var C=p.sibling;if(C!==null)se=C;else{var w=p.return;w!==null?(se=w,us(w)):se=null}break t}}Ee=0,Bt=null,Da(e,t,l,5);break;case 6:Ee=0,Bt=null,Da(e,t,l,6);break;case 8:mu(),Be=6;break e;default:throw Error(r(462))}}dA();break}catch(M){Em(e,M)}while(!0);return In=zi=null,N.H=o,N.A=s,Ce=i,se!==null?0:(Me=null,le=0,kr(),Be)}function dA(){for(;se!==null&&!HT();)Rm(se)}function Rm(e){var t=Zg(e.alternate,e,Pn);e.memoizedProps=e.pendingProps,t===null?us(e):se=t}function Im(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Yg(i,t,t.pendingProps,t.type,void 0,le);break;case 11:t=Yg(i,t,t.pendingProps,t.type.render,t.ref,le);break;case 5:Ml(t);default:Wg(i,t),t=se=wf(t,Pn),t=Zg(i,t,Pn)}e.memoizedProps=e.pendingProps,t===null?us(e):se=t}function Da(e,t,i,o){In=zi=null,Ml(t),Sa=null,vo=0;var s=t.return;try{if(eA(e,s,t,i,le)){Be=1,Zr(e,$t(i,e.current)),se=null;return}}catch(l){if(s!==null)throw se=s,l;Be=1,Zr(e,$t(i,e.current)),se=null;return}t.flags&32768?(de||o===1?e=!0:ka||(le&536870912)!==0?e=!1:(oi=e=!0,(o===2||o===9||o===3||o===6)&&(o=Pt.current,o!==null&&o.tag===13&&(o.flags|=16384))),km(t,e)):us(t)}function us(e){var t=e;do{if((t.flags&32768)!==0){km(t,oi);return}e=t.return;var i=iA(t.alternate,t,Pn);if(i!==null){se=i;return}if(t=t.sibling,t!==null){se=t;return}se=t=e}while(t!==null);Be===0&&(Be=5)}function km(e,t){do{var i=aA(e.alternate,e);if(i!==null){i.flags&=32767,se=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){se=e;return}se=e=i}while(e!==null);Be=6,se=null}function Om(e,t,i,o,s,l,f,p,C){e.cancelPendingCommit=null;do hs();while(Ze!==0);if((Ce&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(l=t.lanes|t.childLanes,l|=al,YT(e,i,l,f,p,C),e===Me&&(se=Me=null,le=0),Ma=t,ci=e,xn=i,du=l,fu=s,Tm=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,pA(fr,function(){return Hm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,s=B.p,B.p=2,f=Ce,Ce|=4;try{oA(e,t,i)}finally{Ce=f,B.p=s,N.T=o}}Ze=1,Mm(),Nm(),Dm()}}function Mm(){if(Ze===1){Ze=0;var e=ci,t=Ma,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null;var o=B.p;B.p=2;var s=Ce;Ce|=4;try{hm(t,e);var l=Iu,f=yf(e.containerInfo),p=l.focusedElem,C=l.selectionRange;if(f!==p&&p&&p.ownerDocument&&pf(p.ownerDocument.documentElement,p)){if(C!==null&&Wc(p)){var w=C.start,M=C.end;if(M===void 0&&(M=w),"selectionStart"in p)p.selectionStart=w,p.selectionEnd=Math.min(M,p.value.length);else{var U=p.ownerDocument||document,R=U&&U.defaultView||window;if(R.getSelection){var I=R.getSelection(),q=p.textContent.length,Z=Math.min(C.start,q),Ie=C.end===void 0?Z:Math.min(C.end,q);!I.extend&&Z>Ie&&(f=Ie,Ie=Z,Z=f);var E=mf(p,Z),v=mf(p,Ie);if(E&&v&&(I.rangeCount!==1||I.anchorNode!==E.node||I.anchorOffset!==E.offset||I.focusNode!==v.node||I.focusOffset!==v.offset)){var b=U.createRange();b.setStart(E.node,E.offset),I.removeAllRanges(),Z>Ie?(I.addRange(b),I.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),I.addRange(b))}}}}for(U=[],I=p;I=I.parentNode;)I.nodeType===1&&U.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<U.length;p++){var D=U[p];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Es=!!Ru,Iu=Ru=null}finally{Ce=s,B.p=o,N.T=i}}e.current=t,Ze=2}}function Nm(){if(Ze===2){Ze=0;var e=ci,t=Ma,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=N.T,N.T=null;var o=B.p;B.p=2;var s=Ce;Ce|=4;try{rm(e,t.alternate,t)}finally{Ce=s,B.p=o,N.T=i}}Ze=3}}function Dm(){if(Ze===4||Ze===3){Ze=0,LT();var e=ci,t=Ma,i=xn,o=Tm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ze=5:(Ze=0,Ma=ci=null,Um(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(si=null),Uc(i),t=t.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(to,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=N.T,s=B.p,B.p=2,N.T=null;try{for(var l=e.onRecoverableError,f=0;f<o.length;f++){var p=o[f];l(p.value,{componentStack:p.stack})}}finally{N.T=t,B.p=s}}(xn&3)!==0&&hs(),Cn(e),s=e.pendingLanes,(i&261930)!==0&&(s&42)!==0?e===gu?zo++:(zo=0,gu=e):zo=0,Po(0)}}function Um(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Co(t)))}function hs(){return Mm(),Nm(),Dm(),Hm()}function Hm(){if(Ze!==5)return!1;var e=ci,t=du;du=0;var i=Uc(xn),o=N.T,s=B.p;try{B.p=32>i?32:i,N.T=null,i=fu,fu=null;var l=ci,f=xn;if(Ze=0,Ma=ci=null,xn=0,(Ce&6)!==0)throw Error(r(331));var p=Ce;if(Ce|=4,pm(l.current),fm(l,l.current,f,i),Ce=p,Po(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(to,l)}catch{}return!0}finally{B.p=s,N.T=o,Um(e,t)}}function Lm(e,t,i){t=$t(i,t),t=Ql(e.stateNode,t,2),e=ti(e,t,2),e!==null&&(io(e,2),Cn(e))}function _e(e,t,i){if(e.tag===3)Lm(e,e,i);else for(;t!==null;){if(t.tag===3){Lm(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(si===null||!si.has(o))){e=$t(i,e),i=zg(2),o=ti(t,i,2),o!==null&&(Pg(i,o,t,e),io(o,2),Cn(o));break}}t=t.return}}function yu(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new cA;var s=new Set;o.set(t,s)}else s=o.get(t),s===void 0&&(s=new Set,o.set(t,s));s.has(i)||(lu=!0,s.add(i),e=fA.bind(null,e,t,i),t.then(e,e))}function fA(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Me===e&&(le&i)===i&&(Be===4||Be===3&&(le&62914560)===le&&300>Dt()-os?(Ce&2)===0&&Na(e,0):uu|=i,Oa===le&&(Oa=0)),Cn(e)}function zm(e,t){t===0&&(t=Od()),e=Ui(e,t),e!==null&&(io(e,t),Cn(e))}function gA(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),zm(e,i)}function mA(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(t),zm(e,i)}function pA(e,t){return Oc(e,t)}var ds=null,Ua=null,Cu=!1,fs=!1,Tu=!1,ui=0;function Cn(e){e!==Ua&&e.next===null&&(Ua===null?ds=Ua=e:Ua=Ua.next=e),fs=!0,Cu||(Cu=!0,CA())}function Po(e,t){if(!Tu&&fs){Tu=!0;do for(var i=!1,o=ds;o!==null;){if(e!==0){var s=o.pendingLanes;if(s===0)var l=0;else{var f=o.suspendedLanes,p=o.pingedLanes;l=(1<<31-Ht(42|e)+1)-1,l&=s&~(f&~p),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(i=!0,Km(o,l))}else l=le,l=yr(o,o===Me?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(l&3)===0||no(o,l)||(i=!0,Km(o,l));o=o.next}while(i);Tu=!1}}function yA(){Pm()}function Pm(){fs=Cu=!1;var e=0;ui!==0&&IA()&&(e=ui);for(var t=Dt(),i=null,o=ds;o!==null;){var s=o.next,l=xm(o,t);l===0?(o.next=null,i===null?ds=s:i.next=s,s===null&&(Ua=i)):(i=o,(e!==0||(l&3)!==0)&&(fs=!0)),o=s}Ze!==0&&Ze!==5||Po(e),ui!==0&&(ui=0)}function xm(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var f=31-Ht(l),p=1<<f,C=s[f];C===-1?((p&i)===0||(p&o)!==0)&&(s[f]=jT(p,t)):C<=t&&(e.expiredLanes|=p),l&=~p}if(t=Me,i=le,i=yr(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Mc(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||no(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&Mc(o),Uc(i)){case 2:case 8:i=Id;break;case 32:i=fr;break;case 268435456:i=kd;break;default:i=fr}return o=Bm.bind(null,e),i=Oc(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&Mc(o),e.callbackPriority=2,e.callbackNode=null,2}function Bm(e,t){if(Ze!==0&&Ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(hs()&&e.callbackNode!==i)return null;var o=le;return o=yr(e,e===Me?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Am(e,o,t),xm(e,Dt()),e.callbackNode!=null&&e.callbackNode===i?Bm.bind(null,e):null)}function Km(e,t){if(hs())return null;Am(e,t,!0)}function CA(){OA(function(){(Ce&6)!==0?Oc(Rd,yA):Pm()})}function vu(){if(ui===0){var e=Ta;e===0&&(e=gr,gr<<=1,(gr&261888)===0&&(gr=256)),ui=e}return ui}function Gm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ar(""+e)}function qm(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function TA(e,t,i,o,s){if(t==="submit"&&i&&i.stateNode===s){var l=Gm((s[Et]||null).action),f=o.submitter;f&&(t=(t=f[Et]||null)?Gm(t.formAction):f.getAttribute("formAction"),t!==null&&(l=t,f=null));var p=new br("action","action",null,o,s);e.push({event:p,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ui!==0){var C=f?qm(s,f):new FormData(s);Bl(i,{pending:!0,data:C,method:s.method,action:l},null,C)}}else typeof l=="function"&&(p.preventDefault(),C=f?qm(s,f):new FormData(s),Bl(i,{pending:!0,data:C,method:s.method,action:l},l,C))},currentTarget:s}]})}}for(var Au=0;Au<il.length;Au++){var Su=il[Au],vA=Su.toLowerCase(),AA=Su[0].toUpperCase()+Su.slice(1);cn(vA,"on"+AA)}cn(vf,"onAnimationEnd"),cn(Af,"onAnimationIteration"),cn(Sf,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(zv,"onTransitionRun"),cn(Pv,"onTransitionStart"),cn(xv,"onTransitionCancel"),cn(Ef,"onTransitionEnd"),oa("onMouseEnter",["mouseout","mouseover"]),oa("onMouseLeave",["mouseout","mouseover"]),oa("onPointerEnter",["pointerout","pointerover"]),oa("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xo));function jm(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],s=o.event;o=o.listeners;e:{var l=void 0;if(t)for(var f=o.length-1;0<=f;f--){var p=o[f],C=p.instance,w=p.currentTarget;if(p=p.listener,C!==l&&s.isPropagationStopped())break e;l=p,s.currentTarget=w;try{l(s)}catch(M){Ir(M)}s.currentTarget=null,l=C}else for(f=0;f<o.length;f++){if(p=o[f],C=p.instance,w=p.currentTarget,p=p.listener,C!==l&&s.isPropagationStopped())break e;l=p,s.currentTarget=w;try{l(s)}catch(M){Ir(M)}s.currentTarget=null,l=C}}}}function ce(e,t){var i=t[Hc];i===void 0&&(i=t[Hc]=new Set);var o=e+"__bubble";i.has(o)||(Ym(t,e,2,!1),i.add(o))}function Eu(e,t,i){var o=0;t&&(o|=4),Ym(i,e,o,t)}var gs="_reactListening"+Math.random().toString(36).slice(2);function _u(e){if(!e[gs]){e[gs]=!0,zd.forEach(function(i){i!=="selectionchange"&&(SA.has(i)||Eu(i,!1,e),Eu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gs]||(t[gs]=!0,Eu("selectionchange",!1,t))}}function Ym(e,t,i,o){switch(vp(t)){case 2:var s=JA;break;case 8:s=ZA;break;default:s=xu}i=s.bind(null,t,i,e),s=void 0,!jc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),o?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function bu(e,t,i,o,s){var l=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var p=o.stateNode.containerInfo;if(p===s)break;if(f===4)for(f=o.return;f!==null;){var C=f.tag;if((C===3||C===4)&&f.stateNode.containerInfo===s)return;f=f.return}for(;p!==null;){if(f=na(p),f===null)return;if(C=f.tag,C===5||C===6||C===26||C===27){o=l=f;continue e}p=p.parentNode}}o=o.return}Xd(function(){var w=l,M=Gc(i),U=[];e:{var R=_f.get(e);if(R!==void 0){var I=br,q=e;switch(e){case"keypress":if(Er(i)===0)break e;case"keydown":case"keyup":I=mv;break;case"focusin":q="focus",I=Vc;break;case"focusout":q="blur",I=Vc;break;case"beforeblur":case"afterblur":I=Vc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Cv;break;case vf:case Af:case Sf:I=rv;break;case Ef:I=vv;break;case"scroll":case"scrollend":I=tv;break;case"wheel":I=Sv;break;case"copy":case"cut":case"paste":I=cv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=ef;break;case"toggle":case"beforetoggle":I=_v}var Z=(t&4)!==0,Ie=!Z&&(e==="scroll"||e==="scrollend"),E=Z?R!==null?R+"Capture":null:R;Z=[];for(var v=w,b;v!==null;){var D=v;if(b=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||b===null||E===null||(D=ro(v,E),D!=null&&Z.push(Bo(v,D,b))),Ie)break;v=v.return}0<Z.length&&(R=new I(R,q,null,i,M),U.push({event:R,listeners:Z}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",R&&i!==Kc&&(q=i.relatedTarget||i.fromElement)&&(na(q)||q[ta]))break e;if((I||R)&&(R=M.window===M?M:(R=M.ownerDocument)?R.defaultView||R.parentWindow:window,I?(q=i.relatedTarget||i.toElement,I=w,q=q?na(q):null,q!==null&&(Ie=h(q),Z=q.tag,q!==Ie||Z!==5&&Z!==27&&Z!==6)&&(q=null)):(I=null,q=w),I!==q)){if(Z=$d,D="onMouseLeave",E="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(Z=ef,D="onPointerLeave",E="onPointerEnter",v="pointer"),Ie=I==null?R:oo(I),b=q==null?R:oo(q),R=new Z(D,v+"leave",I,i,M),R.target=Ie,R.relatedTarget=b,D=null,na(M)===w&&(Z=new Z(E,v+"enter",q,i,M),Z.target=b,Z.relatedTarget=Ie,D=Z),Ie=D,I&&q)t:{for(Z=EA,E=I,v=q,b=0,D=E;D;D=Z(D))b++;D=0;for(var V=v;V;V=Z(V))D++;for(;0<b-D;)E=Z(E),b--;for(;0<D-b;)v=Z(v),D--;for(;b--;){if(E===v||v!==null&&E===v.alternate){Z=E;break t}E=Z(E),v=Z(v)}Z=null}else Z=null;I!==null&&Qm(U,R,I,Z,!1),q!==null&&Ie!==null&&Qm(U,Ie,q,Z,!0)}}e:{if(R=w?oo(w):window,I=R.nodeName&&R.nodeName.toLowerCase(),I==="select"||I==="input"&&R.type==="file")var me=lf;else if(sf(R))if(uf)me=Uv;else{me=Nv;var Y=Mv}else I=R.nodeName,!I||I.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?w&&Bc(w.elementType)&&(me=lf):me=Dv;if(me&&(me=me(e,w))){cf(U,me,i,M);break e}Y&&Y(e,R,w),e==="focusout"&&w&&R.type==="number"&&w.memoizedProps.value!=null&&xc(R,"number",R.value)}switch(Y=w?oo(w):window,e){case"focusin":(sf(Y)||Y.contentEditable==="true")&&(ha=Y,el=w,mo=null);break;case"focusout":mo=el=ha=null;break;case"mousedown":tl=!0;break;case"contextmenu":case"mouseup":case"dragend":tl=!1,Cf(U,i,M);break;case"selectionchange":if(Lv)break;case"keydown":case"keyup":Cf(U,i,M)}var ie;if(Jc)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else ua?of(e,i)&&(ue="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ue="onCompositionStart");ue&&(tf&&i.locale!=="ko"&&(ua||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&ua&&(ie=Jd()):(Vn=M,Yc="value"in Vn?Vn.value:Vn.textContent,ua=!0)),Y=ms(w,ue),0<Y.length&&(ue=new Wd(ue,e,null,i,M),U.push({event:ue,listeners:Y}),ie?ue.data=ie:(ie=rf(i),ie!==null&&(ue.data=ie)))),(ie=wv?Rv(e,i):Iv(e,i))&&(ue=ms(w,"onBeforeInput"),0<ue.length&&(Y=new Wd("onBeforeInput","beforeinput",null,i,M),U.push({event:Y,listeners:ue}),Y.data=ie)),TA(U,e,w,i,M)}jm(U,t)})}function Bo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ms(e,t){for(var i=t+"Capture",o=[];e!==null;){var s=e,l=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||l===null||(s=ro(e,i),s!=null&&o.unshift(Bo(e,s,l)),s=ro(e,t),s!=null&&o.push(Bo(e,s,l))),e.tag===3)return o;e=e.return}return[]}function EA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Qm(e,t,i,o,s){for(var l=t._reactName,f=[];i!==null&&i!==o;){var p=i,C=p.alternate,w=p.stateNode;if(p=p.tag,C!==null&&C===o)break;p!==5&&p!==26&&p!==27||w===null||(C=w,s?(w=ro(i,l),w!=null&&f.unshift(Bo(i,w,C))):s||(w=ro(i,l),w!=null&&f.push(Bo(i,w,C)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var _A=/\r\n?/g,bA=/\u0000|\uFFFD/g;function Fm(e){return(typeof e=="string"?e:""+e).replace(_A,`
`).replace(bA,"")}function Vm(e,t){return t=Fm(t),Fm(e)===t}function Re(e,t,i,o,s,l){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||sa(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&sa(e,""+o);break;case"className":Tr(e,"class",o);break;case"tabIndex":Tr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(e,i,o);break;case"style":Fd(e,o,l);break;case"data":if(t!=="object"){Tr(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Ar(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(i==="formAction"?(t!=="input"&&Re(e,t,"name",s.name,s,null),Re(e,t,"formEncType",s.formEncType,s,null),Re(e,t,"formMethod",s.formMethod,s,null),Re(e,t,"formTarget",s.formTarget,s,null)):(Re(e,t,"encType",s.encType,s,null),Re(e,t,"method",s.method,s,null),Re(e,t,"target",s.target,s,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Ar(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=_n);break;case"onScroll":o!=null&&ce("scroll",e);break;case"onScrollEnd":o!=null&&ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Ar(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ce("beforetoggle",e),ce("toggle",e),Cr(e,"popover",o);break;case"xlinkActuate":En(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":En(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":En(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":En(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":En(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":En(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":En(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":En(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":En(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Cr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=WT.get(i)||i,Cr(e,i,o))}}function wu(e,t,i,o,s,l){switch(i){case"style":Fd(e,o,l);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof o=="string"?sa(e,o):(typeof o=="number"||typeof o=="bigint")&&sa(e,""+o);break;case"onScroll":o!=null&&ce("scroll",e);break;case"onScrollEnd":o!=null&&ce("scrollend",e);break;case"onClick":o!=null&&(e.onclick=_n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),l=e[Et]||null,l=l!=null?l[i]:null,typeof l=="function"&&e.removeEventListener(t,l,s),typeof o=="function")){typeof l!="function"&&l!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,s);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):Cr(e,i,o)}}}function ct(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",e),ce("load",e);var o=!1,s=!1,l;for(l in i)if(i.hasOwnProperty(l)){var f=i[l];if(f!=null)switch(l){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Re(e,t,l,f,i,null)}}s&&Re(e,t,"srcSet",i.srcSet,i,null),o&&Re(e,t,"src",i.src,i,null);return;case"input":ce("invalid",e);var p=l=f=s=null,C=null,w=null;for(o in i)if(i.hasOwnProperty(o)){var M=i[o];if(M!=null)switch(o){case"name":s=M;break;case"type":f=M;break;case"checked":C=M;break;case"defaultChecked":w=M;break;case"value":l=M;break;case"defaultValue":p=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,t));break;default:Re(e,t,o,M,i,null)}}qd(e,l,p,C,w,f,s,!1);return;case"select":ce("invalid",e),o=f=l=null;for(s in i)if(i.hasOwnProperty(s)&&(p=i[s],p!=null))switch(s){case"value":l=p;break;case"defaultValue":f=p;break;case"multiple":o=p;default:Re(e,t,s,p,i,null)}t=l,i=f,e.multiple=!!o,t!=null?ra(e,!!o,t,!1):i!=null&&ra(e,!!o,i,!0);return;case"textarea":ce("invalid",e),l=s=o=null;for(f in i)if(i.hasOwnProperty(f)&&(p=i[f],p!=null))switch(f){case"value":o=p;break;case"defaultValue":s=p;break;case"children":l=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:Re(e,t,f,p,i,null)}Yd(e,o,s,l);return;case"option":for(C in i)i.hasOwnProperty(C)&&(o=i[C],o!=null)&&(C==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Re(e,t,C,o,i,null));return;case"dialog":ce("beforetoggle",e),ce("toggle",e),ce("cancel",e),ce("close",e);break;case"iframe":case"object":ce("load",e);break;case"video":case"audio":for(o=0;o<xo.length;o++)ce(xo[o],e);break;case"image":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"embed":case"source":case"link":ce("error",e),ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in i)if(i.hasOwnProperty(w)&&(o=i[w],o!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Re(e,t,w,o,i,null)}return;default:if(Bc(t)){for(M in i)i.hasOwnProperty(M)&&(o=i[M],o!==void 0&&wu(e,t,M,o,i,void 0));return}}for(p in i)i.hasOwnProperty(p)&&(o=i[p],o!=null&&Re(e,t,p,o,i,null))}function wA(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,l=null,f=null,p=null,C=null,w=null,M=null;for(I in i){var U=i[I];if(i.hasOwnProperty(I)&&U!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":C=U;default:o.hasOwnProperty(I)||Re(e,t,I,null,o,U)}}for(var R in o){var I=o[R];if(U=i[R],o.hasOwnProperty(R)&&(I!=null||U!=null))switch(R){case"type":l=I;break;case"name":s=I;break;case"checked":w=I;break;case"defaultChecked":M=I;break;case"value":f=I;break;case"defaultValue":p=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,t));break;default:I!==U&&Re(e,t,R,I,o,U)}}Pc(e,f,p,C,w,M,l,s);return;case"select":I=f=p=R=null;for(l in i)if(C=i[l],i.hasOwnProperty(l)&&C!=null)switch(l){case"value":break;case"multiple":I=C;default:o.hasOwnProperty(l)||Re(e,t,l,null,o,C)}for(s in o)if(l=o[s],C=i[s],o.hasOwnProperty(s)&&(l!=null||C!=null))switch(s){case"value":R=l;break;case"defaultValue":p=l;break;case"multiple":f=l;default:l!==C&&Re(e,t,s,l,o,C)}t=p,i=f,o=I,R!=null?ra(e,!!i,R,!1):!!o!=!!i&&(t!=null?ra(e,!!i,t,!0):ra(e,!!i,i?[]:"",!1));return;case"textarea":I=R=null;for(p in i)if(s=i[p],i.hasOwnProperty(p)&&s!=null&&!o.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Re(e,t,p,null,o,s)}for(f in o)if(s=o[f],l=i[f],o.hasOwnProperty(f)&&(s!=null||l!=null))switch(f){case"value":R=s;break;case"defaultValue":I=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(r(91));break;default:s!==l&&Re(e,t,f,s,o,l)}jd(e,R,I);return;case"option":for(var q in i)R=i[q],i.hasOwnProperty(q)&&R!=null&&!o.hasOwnProperty(q)&&(q==="selected"?e.selected=!1:Re(e,t,q,null,o,R));for(C in o)R=o[C],I=i[C],o.hasOwnProperty(C)&&R!==I&&(R!=null||I!=null)&&(C==="selected"?e.selected=R&&typeof R!="function"&&typeof R!="symbol":Re(e,t,C,R,o,I));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Z in i)R=i[Z],i.hasOwnProperty(Z)&&R!=null&&!o.hasOwnProperty(Z)&&Re(e,t,Z,null,o,R);for(w in o)if(R=o[w],I=i[w],o.hasOwnProperty(w)&&R!==I&&(R!=null||I!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(137,t));break;default:Re(e,t,w,R,o,I)}return;default:if(Bc(t)){for(var Ie in i)R=i[Ie],i.hasOwnProperty(Ie)&&R!==void 0&&!o.hasOwnProperty(Ie)&&wu(e,t,Ie,void 0,o,R);for(M in o)R=o[M],I=i[M],!o.hasOwnProperty(M)||R===I||R===void 0&&I===void 0||wu(e,t,M,R,o,I);return}}for(var E in i)R=i[E],i.hasOwnProperty(E)&&R!=null&&!o.hasOwnProperty(E)&&Re(e,t,E,null,o,R);for(U in o)R=o[U],I=i[U],!o.hasOwnProperty(U)||R===I||R==null&&I==null||Re(e,t,U,R,o,I)}function Xm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var s=i[o],l=s.transferSize,f=s.initiatorType,p=s.duration;if(l&&p&&Xm(f)){for(f=0,p=s.responseEnd,o+=1;o<i.length;o++){var C=i[o],w=C.startTime;if(w>p)break;var M=C.transferSize,U=C.initiatorType;M&&Xm(U)&&(C=C.responseEnd,f+=M*(C<p?1:(p-w)/(C-w)))}if(--o,t+=8*(l+f)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ru=null,Iu=null;function ps(e){return e.nodeType===9?e:e.ownerDocument}function Jm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ou=null;function IA(){var e=window.event;return e&&e.type==="popstate"?e===Ou?!1:(Ou=e,!0):(Ou=null,!1)}var $m=typeof setTimeout=="function"?setTimeout:void 0,kA=typeof clearTimeout=="function"?clearTimeout:void 0,Wm=typeof Promise=="function"?Promise:void 0,OA=typeof queueMicrotask=="function"?queueMicrotask:typeof Wm<"u"?function(e){return Wm.resolve(null).then(e).catch(MA)}:$m;function MA(e){setTimeout(function(){throw e})}function hi(e){return e==="head"}function ep(e,t){var i=t,o=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(s),Pa(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")Ko(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Ko(i);for(var l=i.firstChild;l;){var f=l.nextSibling,p=l.nodeName;l[ao]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&l.rel.toLowerCase()==="stylesheet"||i.removeChild(l),l=f}}else i==="body"&&Ko(e.ownerDocument.body);i=s}while(i);Pa(t)}function tp(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Mu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Mu(i),Lc(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function NA(e,t,i,o){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ao])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=an(e.nextSibling),e===null)break}return null}function DA(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=an(e.nextSibling),e===null))return null;return e}function np(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=an(e.nextSibling),e===null))return null;return e}function Nu(e){return e.data==="$?"||e.data==="$~"}function Du(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function UA(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Uu=null;function ip(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return an(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function ap(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function op(e,t,i){switch(t=ps(i),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ko(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Lc(e)}var on=new Map,rp=new Set;function ys(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bn=B.d;B.d={f:HA,r:LA,D:zA,C:PA,L:xA,m:BA,X:GA,S:KA,M:qA};function HA(){var e=Bn.f(),t=cs();return e||t}function LA(e){var t=ia(e);t!==null&&t.tag===5&&t.type==="form"?Eg(t):Bn.r(e)}var Ha=typeof document>"u"?null:document;function sp(e,t,i){var o=Ha;if(o&&typeof t=="string"&&t){var s=Jt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),rp.has(s)||(rp.add(s),e={rel:e,crossOrigin:i,href:t},o.querySelector(s)===null&&(t=o.createElement("link"),ct(t,"link",e),We(t),o.head.appendChild(t)))}}function zA(e){Bn.D(e),sp("dns-prefetch",e,null)}function PA(e,t){Bn.C(e,t),sp("preconnect",e,t)}function xA(e,t,i){Bn.L(e,t,i);var o=Ha;if(o&&e&&t){var s='link[rel="preload"][as="'+Jt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+Jt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+Jt(i.imageSizes)+'"]')):s+='[href="'+Jt(e)+'"]';var l=s;switch(t){case"style":l=La(e);break;case"script":l=za(e)}on.has(l)||(e=_({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),on.set(l,e),o.querySelector(s)!==null||t==="style"&&o.querySelector(Go(l))||t==="script"&&o.querySelector(qo(l))||(t=o.createElement("link"),ct(t,"link",e),We(t),o.head.appendChild(t)))}}function BA(e,t){Bn.m(e,t);var i=Ha;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Jt(o)+'"][href="'+Jt(e)+'"]',l=s;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=za(e)}if(!on.has(l)&&(e=_({rel:"modulepreload",href:e},t),on.set(l,e),i.querySelector(s)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(qo(l)))return}o=i.createElement("link"),ct(o,"link",e),We(o),i.head.appendChild(o)}}}function KA(e,t,i){Bn.S(e,t,i);var o=Ha;if(o&&e){var s=aa(o).hoistableStyles,l=La(e);t=t||"default";var f=s.get(l);if(!f){var p={loading:0,preload:null};if(f=o.querySelector(Go(l)))p.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},i),(i=on.get(l))&&Hu(e,i);var C=f=o.createElement("link");We(C),ct(C,"link",e),C._p=new Promise(function(w,M){C.onload=w,C.onerror=M}),C.addEventListener("load",function(){p.loading|=1}),C.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Cs(f,t,o)}f={type:"stylesheet",instance:f,count:1,state:p},s.set(l,f)}}}function GA(e,t){Bn.X(e,t);var i=Ha;if(i&&e){var o=aa(i).hoistableScripts,s=za(e),l=o.get(s);l||(l=i.querySelector(qo(s)),l||(e=_({src:e,async:!0},t),(t=on.get(s))&&Lu(e,t),l=i.createElement("script"),We(l),ct(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},o.set(s,l))}}function qA(e,t){Bn.M(e,t);var i=Ha;if(i&&e){var o=aa(i).hoistableScripts,s=za(e),l=o.get(s);l||(l=i.querySelector(qo(s)),l||(e=_({src:e,async:!0,type:"module"},t),(t=on.get(s))&&Lu(e,t),l=i.createElement("script"),We(l),ct(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},o.set(s,l))}}function cp(e,t,i,o){var s=(s=F.current)?ys(s):null;if(!s)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=La(i.href),i=aa(s).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=La(i.href);var l=aa(s).hoistableStyles,f=l.get(e);if(f||(s=s.ownerDocument||s,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,f),(l=s.querySelector(Go(e)))&&!l._p&&(f.instance=l,f.state.loading=5),on.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},on.set(e,i),l||jA(s,e,i,f.state))),t&&o===null)throw Error(r(528,""));return f}if(t&&o!==null)throw Error(r(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=za(i),i=aa(s).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function La(e){return'href="'+Jt(e)+'"'}function Go(e){return'link[rel="stylesheet"]['+e+"]"}function lp(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function jA(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),ct(t,"link",i),We(t),e.head.appendChild(t))}function za(e){return'[src="'+Jt(e)+'"]'}function qo(e){return"script[async]"+e}function up(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Jt(i.href)+'"]');if(o)return t.instance=o,We(o),o;var s=_({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),We(o),ct(o,"style",s),Cs(o,i.precedence,e),t.instance=o;case"stylesheet":s=La(i.href);var l=e.querySelector(Go(s));if(l)return t.state.loading|=4,t.instance=l,We(l),l;o=lp(i),(s=on.get(s))&&Hu(o,s),l=(e.ownerDocument||e).createElement("link"),We(l);var f=l;return f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),ct(l,"link",o),t.state.loading|=4,Cs(l,i.precedence,e),t.instance=l;case"script":return l=za(i.src),(s=e.querySelector(qo(l)))?(t.instance=s,We(s),s):(o=i,(s=on.get(l))&&(o=_({},i),Lu(o,s)),e=e.ownerDocument||e,s=e.createElement("script"),We(s),ct(s,"link",o),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,Cs(o,i.precedence,e));return t.instance}function Cs(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=o.length?o[o.length-1]:null,l=s,f=0;f<o.length;f++){var p=o[f];if(p.dataset.precedence===t)l=p;else if(l!==s)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ts=null;function hp(e,t,i){if(Ts===null){var o=new Map,s=Ts=new Map;s.set(i,o)}else s=Ts,o=s.get(i),o||(o=new Map,s.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var l=i[s];if(!(l[ao]||l[at]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var f=l.getAttribute(t)||"";f=e+f;var p=o.get(f);p?p.push(l):o.set(f,[l])}}return o}function dp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function YA(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function QA(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var s=La(o.href),l=t.querySelector(Go(s));if(l){t=l._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=vs.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=l,We(l);return}l=t.ownerDocument||t,o=lp(o),(s=on.get(s))&&Hu(o,s),l=l.createElement("link"),We(l);var f=l;f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),ct(l,"link",o),i.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=vs.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var zu=0;function FA(e,t){return e.stylesheets&&e.count===0&&Ss(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Ss(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+t);0<e.imgBytes&&zu===0&&(zu=62500*RA());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ss(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>zu?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(s)}}:null}function vs(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ss(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var As=null;function Ss(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,As=new Map,t.forEach(VA,e),As=null,vs.call(e))}function VA(e,t){if(!(t.state.loading&4)){var i=As.get(e);if(i)var o=i.get(null);else{i=new Map,As.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<s.length;l++){var f=s[l];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(i.set(f.dataset.precedence,f),o=f)}o&&i.set(null,o)}s=t.instance,f=s.getAttribute("data-precedence"),l=i.get(f)||o,l===o&&i.set(null,s),i.set(f,s),this.count++,o=vs.bind(this),s.addEventListener("load",o),s.addEventListener("error",o),l?l.parentNode.insertBefore(s,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var jo={$$typeof:ge,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function XA(e,t,i,o,s,l,f,p,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nc(0),this.hiddenUpdates=Nc(null),this.identifierPrefix=o,this.onUncaughtError=s,this.onCaughtError=l,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function gp(e,t,i,o,s,l,f,p,C,w,M,U){return e=new XA(e,t,i,f,C,w,M,U,p),t=1,l===!0&&(t|=24),l=zt(3,null,null,t),e.current=l,l.stateNode=e,t=pl(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:o,isDehydrated:i,cache:t},vl(l),e}function mp(e){return e?(e=ga,e):ga}function pp(e,t,i,o,s,l){s=mp(s),o.context===null?o.context=s:o.pendingContext=s,o=ei(t),o.payload={element:i},l=l===void 0?null:l,l!==null&&(o.callback=l),i=ti(e,o,t),i!==null&&(kt(i,e,t),So(i,e,t))}function yp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Pu(e,t){yp(e,t),(e=e.alternate)&&yp(e,t)}function Cp(e){if(e.tag===13||e.tag===31){var t=Ui(e,67108864);t!==null&&kt(t,e,67108864),Pu(e,67108864)}}function Tp(e){if(e.tag===13||e.tag===31){var t=Gt();t=Dc(t);var i=Ui(e,t);i!==null&&kt(i,e,t),Pu(e,t)}}var Es=!0;function JA(e,t,i,o){var s=N.T;N.T=null;var l=B.p;try{B.p=2,xu(e,t,i,o)}finally{B.p=l,N.T=s}}function ZA(e,t,i,o){var s=N.T;N.T=null;var l=B.p;try{B.p=8,xu(e,t,i,o)}finally{B.p=l,N.T=s}}function xu(e,t,i,o){if(Es){var s=Bu(o);if(s===null)bu(e,t,o,_s,i),Ap(e,o);else if(WA(s,e,t,i,o))o.stopPropagation();else if(Ap(e,o),t&4&&-1<$A.indexOf(e)){for(;s!==null;){var l=ia(s);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var f=ki(l.pendingLanes);if(f!==0){var p=l;for(p.pendingLanes|=2,p.entangledLanes|=2;f;){var C=1<<31-Ht(f);p.entanglements[1]|=C,f&=~C}Cn(l),(Ce&6)===0&&(rs=Dt()+500,Po(0))}}break;case 31:case 13:p=Ui(l,2),p!==null&&kt(p,l,2),cs(),Pu(l,2)}if(l=Bu(o),l===null&&bu(e,t,o,_s,i),l===s)break;s=l}s!==null&&o.stopPropagation()}else bu(e,t,o,null,i)}}function Bu(e){return e=Gc(e),Ku(e)}var _s=null;function Ku(e){if(_s=null,e=na(e),e!==null){var t=h(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=g(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _s=e,null}function vp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zT()){case Rd:return 2;case Id:return 8;case fr:case PT:return 32;case kd:return 268435456;default:return 32}default:return 32}}var Gu=!1,di=null,fi=null,gi=null,Yo=new Map,Qo=new Map,mi=[],$A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ap(e,t){switch(e){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(t.pointerId)}}function Fo(e,t,i,o,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:l,targetContainers:[s]},t!==null&&(t=ia(t),t!==null&&Cp(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function WA(e,t,i,o,s){switch(t){case"focusin":return di=Fo(di,e,t,i,o,s),!0;case"dragenter":return fi=Fo(fi,e,t,i,o,s),!0;case"mouseover":return gi=Fo(gi,e,t,i,o,s),!0;case"pointerover":var l=s.pointerId;return Yo.set(l,Fo(Yo.get(l)||null,e,t,i,o,s)),!0;case"gotpointercapture":return l=s.pointerId,Qo.set(l,Fo(Qo.get(l)||null,e,t,i,o,s)),!0}return!1}function Sp(e){var t=na(e.target);if(t!==null){var i=h(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,Hd(e.priority,function(){Tp(i)});return}}else if(t===31){if(t=g(i),t!==null){e.blockedOn=t,Hd(e.priority,function(){Tp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Bu(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Kc=o,i.target.dispatchEvent(o),Kc=null}else return t=ia(i),t!==null&&Cp(t),e.blockedOn=i,!1;t.shift()}return!0}function Ep(e,t,i){bs(e)&&i.delete(t)}function eS(){Gu=!1,di!==null&&bs(di)&&(di=null),fi!==null&&bs(fi)&&(fi=null),gi!==null&&bs(gi)&&(gi=null),Yo.forEach(Ep),Qo.forEach(Ep)}function ws(e,t){e.blockedOn===t&&(e.blockedOn=null,Gu||(Gu=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,eS)))}var Rs=null;function _p(e){Rs!==e&&(Rs=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Rs===e&&(Rs=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],s=e[t+2];if(typeof o!="function"){if(Ku(o||i)===null)continue;break}var l=ia(i);l!==null&&(e.splice(t,3),t-=3,Bl(l,{pending:!0,data:s,method:i.method,action:o},o,s))}}))}function Pa(e){function t(C){return ws(C,e)}di!==null&&ws(di,e),fi!==null&&ws(fi,e),gi!==null&&ws(gi,e),Yo.forEach(t),Qo.forEach(t);for(var i=0;i<mi.length;i++){var o=mi[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<mi.length&&(i=mi[0],i.blockedOn===null);)Sp(i),i.blockedOn===null&&mi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var s=i[o],l=i[o+1],f=s[Et]||null;if(typeof l=="function")f||_p(i);else if(f){var p=null;if(l&&l.hasAttribute("formAction")){if(s=l,f=l[Et]||null)p=f.formAction;else if(Ku(s)!==null)continue}else p=f.action;typeof p=="function"?i[o+1]=p:(i.splice(o,3),o-=3),_p(i)}}}function bp(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(f){return s=f})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function qu(e){this._internalRoot=e}Is.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var i=t.current,o=Gt();pp(i,o,e,t,null,null)},Is.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pp(e.current,2,null,e,null,null),cs(),t[ta]=null}};function Is(e){this._internalRoot=e}Is.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ud();e={blockedOn:null,target:e,priority:t};for(var i=0;i<mi.length&&t!==0&&t<mi[i].priority;i++);mi.splice(i,0,e),i===0&&Sp(e)}};var wp=n.version;if(wp!=="19.2.3")throw Error(r(527,wp,"19.2.3"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var tS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{to=ks.inject(tS),Ut=ks}catch{}}return Xo.createRoot=function(e,t){if(!c(e))throw Error(r(299));var i=!1,o="",s=Dg,l=Ug,f=Hg;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=gp(e,1,!1,null,null,i,o,null,s,l,f,bp),e[ta]=t.current,_u(e),new qu(t)},Xo.hydrateRoot=function(e,t,i){if(!c(e))throw Error(r(299));var o=!1,s="",l=Dg,f=Ug,p=Hg,C=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(l=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError),i.formState!==void 0&&(C=i.formState)),t=gp(e,1,!0,t,i??null,o,s,C,l,f,p,bp),t.context=mp(null),i=t.current,o=Gt(),o=Dc(o),s=ei(o),s.callback=null,ti(i,s,o),i=o,t.current.lanes=i,io(t,i),Cn(t),e[ta]=t.current,_u(e),new Is(t)},Xo.version="19.2.3",Xo}var Lp;function dS(){if(Lp)return Qu.exports;Lp=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Qu.exports=hS(),Qu.exports}var fS=dS();const gS=Ey(fS);const H={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ai={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Vi={GET:"GET",POST:"POST"},Ja=[H.OPENID_SCOPE,H.PROFILE_SCOPE,H.OFFLINE_ACCESS_SCOPE],zp=[...Ja,H.EMAIL_SCOPE],vt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Pp={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Si={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Os={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},ht={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},yh={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},sc={QUERY:"query",FRAGMENT:"fragment"},mS={QUERY:"query"},_y={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Ms={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},ar={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ut={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Ch="appmetadata",pS="client_info",Gs="1",qs={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},qt={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},lt={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},be={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},er={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},xp={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},xa={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Ju={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Fi={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},yS={Pop:"pop"},by=300;const js="unexpected_error",CS="post_request_failed";const Bp={[js]:"Unexpected error in authentication.",[CS]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Oe extends Error{constructor(n,a,r){const c=a?`${n}: ${a}`:n;super(c),Object.setPrototypeOf(this,Oe.prototype),this.errorCode=n||H.EMPTY_STRING,this.errorMessage=a||H.EMPTY_STRING,this.subError=r||H.EMPTY_STRING,this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function nh(u,n){return new Oe(u,n?`${Bp[u]} ${n}`:Bp[u])}const Th="client_info_decoding_error",wy="client_info_empty_error",vh="token_parsing_error",Ry="null_or_empty_token",Gn="endpoints_resolution_error",Iy="network_error",ky="openid_config_error",Oy="hash_not_deserialized",Va="invalid_state",My="state_mismatch",ih="state_not_found",Ny="nonce_mismatch",Ah="auth_time_not_found",Dy="max_age_transpired",TS="multiple_matching_tokens",vS="multiple_matching_accounts",Uy="multiple_matching_appMetadata",Hy="request_cannot_be_made",Ly="cannot_remove_empty_scope",zy="cannot_append_scopeset",ah="empty_input_scopeset",AS="device_code_polling_cancelled",SS="device_code_expired",ES="device_code_unknown_error",Sh="no_account_in_silent_request",Py="invalid_cache_record",Eh="invalid_cache_environment",oh="no_account_found",rh="no_crypto_object",_S="unexpected_credential_type",bS="invalid_assertion",wS="invalid_client_credential",Ei="token_refresh_required",RS="user_timeout_reached",xy="token_claims_cnf_required_for_signedjwt",By="authorization_code_missing_from_server_response",Ky="binding_key_not_removed",Gy="end_session_endpoint_not_supported",_h="key_id_missing",IS="no_network_connectivity",kS="user_canceled",OS="missing_tenant_id_error",ae="method_not_implemented",MS="nested_app_auth_bridge_disabled",NS="platform_broker_error";const Kp={[Th]:"The client info could not be parsed/decoded correctly",[wy]:"The client info was empty",[vh]:"Token cannot be parsed",[Ry]:"The token is null or empty",[Gn]:"Endpoints cannot be resolved",[Iy]:"Network request failed",[ky]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Oy]:"The hash parameters could not be deserialized",[Va]:"State was not the expected format",[My]:"State mismatch error",[ih]:"State not found",[Ny]:"Nonce mismatch error",[Ah]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Dy]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[TS]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[vS]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Uy]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Hy]:"Token request cannot be made without authorization code or refresh token.",[Ly]:"Cannot remove null or empty scope from ScopeSet",[zy]:"Cannot append ScopeSet",[ah]:"Empty input ScopeSet cannot be processed",[AS]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[SS]:"Device code is expired.",[ES]:"Device code stopped polling for unknown reasons.",[Sh]:"Please pass an account object, silent flow is not supported without account information",[Py]:"Cache record object was null or undefined.",[Eh]:"Invalid environment when attempting to create cache entry",[oh]:"No account found in cache for given key.",[rh]:"No crypto object detected.",[_S]:"Unexpected credential type.",[bS]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[wS]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ei]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[RS]:"User defined timeout for device code polling reached",[xy]:"Cannot generate a POP jwt if the token_claims are not populated",[By]:"Server response does not contain an authorization code to proceed",[Ky]:"Could not remove the credential's binding key from storage.",[Gy]:"The provided authority does not support logout",[_h]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[IS]:"No network connectivity. Check your internet connection.",[kS]:"User cancelled the flow.",[OS]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ae]:"This method has not been implemented",[MS]:"The nested app auth bridge is disabled",[NS]:"An error occurred in the native broker. See the platformBrokerError property for details."};class bh extends Oe{constructor(n,a){super(n,a?`${Kp[n]}: ${a}`:Kp[n]),this.name="ClientAuthError",Object.setPrototypeOf(this,bh.prototype)}}function P(u,n){return new bh(u,n)}const Ys={createNewGuid:()=>{throw P(ae)},base64Decode:()=>{throw P(ae)},base64Encode:()=>{throw P(ae)},base64UrlEncode:()=>{throw P(ae)},encodeKid:()=>{throw P(ae)},async getPublicKeyThumbprint(){throw P(ae)},async removeTokenBindingKey(){throw P(ae)},async clearKeystore(){throw P(ae)},async signJwt(){throw P(ae)},async hashString(){throw P(ae)}};var Le;(function(u){u[u.Error=0]="Error",u[u.Warning=1]="Warning",u[u.Info=2]="Info",u[u.Verbose=3]="Verbose",u[u.Trace=4]="Trace"})(Le||(Le={}));class wi{constructor(n,a,r){this.level=Le.Info;const c=()=>{},h=n||wi.createDefaultLoggerOptions();this.localCallback=h.loggerCallback||c,this.piiLoggingEnabled=h.piiLoggingEnabled||!1,this.level=typeof h.logLevel=="number"?h.logLevel:Le.Info,this.correlationId=h.correlationId||H.EMPTY_STRING,this.packageName=a||H.EMPTY_STRING,this.packageVersion=r||H.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Le.Info}}clone(n,a,r){return new wi({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},n,a)}logMessage(n,a){if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const h=`${`[${new Date().toUTCString()}] : [${a.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Le[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,h,a.containsPii||!1)}executeCallback(n,a,r){this.localCallback&&this.localCallback(n,a,r)}error(n,a){this.logMessage(n,{logLevel:Le.Error,containsPii:!1,correlationId:a||H.EMPTY_STRING})}errorPii(n,a){this.logMessage(n,{logLevel:Le.Error,containsPii:!0,correlationId:a||H.EMPTY_STRING})}warning(n,a){this.logMessage(n,{logLevel:Le.Warning,containsPii:!1,correlationId:a||H.EMPTY_STRING})}warningPii(n,a){this.logMessage(n,{logLevel:Le.Warning,containsPii:!0,correlationId:a||H.EMPTY_STRING})}info(n,a){this.logMessage(n,{logLevel:Le.Info,containsPii:!1,correlationId:a||H.EMPTY_STRING})}infoPii(n,a){this.logMessage(n,{logLevel:Le.Info,containsPii:!0,correlationId:a||H.EMPTY_STRING})}verbose(n,a){this.logMessage(n,{logLevel:Le.Verbose,containsPii:!1,correlationId:a||H.EMPTY_STRING})}verbosePii(n,a){this.logMessage(n,{logLevel:Le.Verbose,containsPii:!0,correlationId:a||H.EMPTY_STRING})}trace(n,a){this.logMessage(n,{logLevel:Le.Trace,containsPii:!1,correlationId:a||H.EMPTY_STRING})}tracePii(n,a){this.logMessage(n,{logLevel:Le.Trace,containsPii:!0,correlationId:a||H.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const qy="@azure/msal-common",wh="15.14.0";const Rh={None:"none"};const jy="redirect_uri_empty",DS="claims_request_parsing_error",Yy="authority_uri_insecure",Zo="url_parse_error",Qy="empty_url_error",Fy="empty_input_scopes_error",Ih="invalid_claims",Vy="token_request_empty",Xy="logout_request_empty",US="invalid_code_challenge_method",kh="pkce_params_missing",Oh="invalid_cloud_discovery_metadata",Jy="invalid_authority_metadata",Zy="untrusted_authority",cc="missing_ssh_jwk",$y="missing_ssh_kid",HS="missing_nonce_authentication_header",LS="invalid_authentication_header",Wy="cannot_set_OIDCOptions",eC="cannot_allow_platform_broker",tC="authority_mismatch",nC="invalid_request_method_for_EAR",iC="invalid_authorize_post_body_parameters",aC="invalid_platform_broker_configuration";const zS={[jy]:"A redirect URI is required for all calls, and none has been set.",[DS]:"Could not parse the given claims request object.",[Yy]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Zo]:"URL could not be parsed into appropriate segments.",[Qy]:"URL was empty or null.",[Fy]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Ih]:"Given claims parameter must be a stringified JSON object.",[Vy]:"Token request was empty and not found in cache.",[Xy]:"The logout request was null or undefined.",[US]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[kh]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Oh]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Jy]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Zy]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[cc]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[$y]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[HS]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[LS]:"Invalid authentication header provided",[Wy]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[eC]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[tC]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[iC]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[nC]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[aC]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."};class Mh extends Oe{constructor(n){super(n,zS[n]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Mh.prototype)}}function ke(u){return new Mh(u)}class jt{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},r=n.split("&"),c=h=>decodeURIComponent(h.replace(/\+/g," "));return r.forEach(h=>{if(h.trim()){const[d,g]=h.split(/=(.+)/g,2);d&&g&&(a[c(d)]=c(g))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}static matchPattern(n,a){return new RegExp(n.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(a)}}class $e{constructor(n){const a=n?jt.trimArrayEntries([...n]):[],r=a?jt.removeEmptyStringsFromArray(a):[];if(!r||!r.length)throw ke(Fy);this.scopes=new Set,r.forEach(c=>this.scopes.add(c))}static fromString(n){const r=(n||H.EMPTY_STRING).split(" ");return new $e(r)}static createSearchScopes(n){const a=n&&n.length>0?n:[...Ja],r=new $e(a);return r.containsOnlyOIDCScopes()?r.removeScope(H.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(n){const a=this.printScopesLowerCase().split(" "),r=new $e(a);return n?r.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return zp.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw P(zy)}}removeScope(n){if(!n)throw P(Ly);this.scopes.delete(n.trim())}removeOIDCScopes(){zp.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw P(ah);const a=new Set;return n.scopes.forEach(r=>a.add(r.toLowerCase())),this.scopes.forEach(r=>a.add(r.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw P(ah);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),r=n.getScopeCount(),c=this.getScopeCount();return a.size<c+r}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):H.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Qs(u,n){if(!u)throw P(wy);try{const a=n(u);return JSON.parse(a)}catch{throw P(Th)}}function Ga(u){if(!u)throw P(Th);const n=u.split(ar.CLIENT_INFO_SEPARATOR,2);return{uid:n[0],utid:n.length<2?H.EMPTY_STRING:n[1]}}function Gp(u,n){return!!u&&!!n&&u===n.split(".")[1]}function lc(u,n,a,r){if(r){const{oid:c,sub:h,tid:d,name:g,tfp:m,acr:y,preferred_username:S,upn:_,login_hint:O}=r,x=d||m||y||"";return{tenantId:x,localAccountId:c||h||"",name:g,username:S||_||"",loginHint:O,isHomeTenant:Gp(x,u)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:Gp(a,u)}}function Nh(u,n,a,r){let c=u;if(n){const{isHomeTenant:h,...d}=n;c={...u,...d}}if(a){const{isHomeTenant:h,...d}=lc(u.homeAccountId,u.localAccountId,u.tenantId,a);return c={...c,...d,idTokenClaims:a,idToken:r},c}return c}const dn={Default:0,Adfs:1,Dsts:2,Ciam:3};function Dh(u){return u&&(u.tid||u.tfp||u.acr)||null}const Mt={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class Ke{static getAccountInfo(n){return{homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:n.username,localAccountId:n.localAccountId,loginHint:n.loginHint,name:n.name,nativeAccountId:n.nativeAccountId,authorityType:n.authorityType,tenantProfiles:new Map((n.tenantProfiles||[]).map(a=>[a.tenantId,a])),dataBoundary:n.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(n,a,r){const c=new Ke;a.authorityType===dn.Adfs?c.authorityType=Ms.ADFS_ACCOUNT_TYPE:a.protocolMode===Mt.OIDC?c.authorityType=Ms.GENERIC_ACCOUNT_TYPE:c.authorityType=Ms.MSSTS_ACCOUNT_TYPE;let h;n.clientInfo&&r&&(h=Qs(n.clientInfo,r),h.xms_tdbr&&(c.dataBoundary=h.xms_tdbr==="EU"?"EU":"None")),c.clientInfo=n.clientInfo,c.homeAccountId=n.homeAccountId,c.nativeAccountId=n.nativeAccountId;const d=n.environment||a&&a.getPreferredCache();if(!d)throw P(Eh);c.environment=d,c.realm=h?.utid||Dh(n.idTokenClaims)||"",c.localAccountId=h?.uid||n.idTokenClaims?.oid||n.idTokenClaims?.sub||"";const g=n.idTokenClaims?.preferred_username||n.idTokenClaims?.upn,m=n.idTokenClaims?.emails?n.idTokenClaims.emails[0]:null;if(c.username=g||m||"",c.loginHint=n.idTokenClaims?.login_hint,c.name=n.idTokenClaims?.name||"",c.cloudGraphHostName=n.cloudGraphHostName,c.msGraphHost=n.msGraphHost,n.tenantProfiles)c.tenantProfiles=n.tenantProfiles;else{const y=lc(n.homeAccountId,c.localAccountId,c.realm,n.idTokenClaims);c.tenantProfiles=[y]}return c}static createFromAccountInfo(n,a,r){const c=new Ke;return c.authorityType=n.authorityType||Ms.GENERIC_ACCOUNT_TYPE,c.homeAccountId=n.homeAccountId,c.localAccountId=n.localAccountId,c.nativeAccountId=n.nativeAccountId,c.realm=n.tenantId,c.environment=n.environment,c.username=n.username,c.name=n.name,c.loginHint=n.loginHint,c.cloudGraphHostName=a,c.msGraphHost=r,c.tenantProfiles=Array.from(n.tenantProfiles?.values()||[]),c.dataBoundary=n.dataBoundary,c}static generateHomeAccountId(n,a,r,c,h){if(!(a===dn.Adfs||a===dn.Dsts)){if(n)try{const d=Qs(n,c.base64Decode);if(d.uid&&d.utid)return`${d.uid}.${d.utid}`}catch{}r.warning("No client info in response")}return h?.sub||""}static isAccountEntity(n){return n?n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("realm")&&n.hasOwnProperty("localAccountId")&&n.hasOwnProperty("username")&&n.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(n,a,r){if(!n||!a)return!1;let c=!0;if(r){const h=n.idTokenClaims||{},d=a.idTokenClaims||{};c=h.iat===d.iat&&h.nonce===d.nonce}return n.homeAccountId===a.homeAccountId&&n.localAccountId===a.localAccountId&&n.username===a.username&&n.tenantId===a.tenantId&&n.loginHint===a.loginHint&&n.environment===a.environment&&n.nativeAccountId===a.nativeAccountId&&c}}function An(u,n){const a=PS(u);try{const r=n(a);return JSON.parse(r)}catch{throw P(vh)}}function Sn(u){if(!u.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return u.signin_state.some(r=>n.includes(r.trim().toLowerCase()))}function PS(u){if(!u)throw P(Ry);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(u);if(!a||a.length<4)throw P(vh);return a[2]}function oC(u,n){if(n===0||Date.now()-3e5>u+n)throw P(Dy)}function qp(u){if(!u)return u;let n=u.toLowerCase();return jt.endsWith(n,"?")?n=n.slice(0,-1):jt.endsWith(n,"?/")&&(n=n.slice(0,-2)),jt.endsWith(n,"/")||(n+="/"),n}function rC(u){return u.startsWith("#/")?u.substring(2):u.startsWith("#")||u.startsWith("?")?u.substring(1):u}function Fs(u){if(!u||u.indexOf("=")<0)return null;try{const n=rC(u),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw P(Oy)}return null}function or(u,n=!0,a){const r=new Array;return u.forEach((c,h)=>{!n&&a&&h in a?r.push(`${h}=${c}`):r.push(`${h}=${encodeURIComponent(c)}`)}),r.join("&")}function jp(u){if(!u)return u;const n=u.split("#")[0];try{const a=new URL(n),r=a.origin+a.pathname+a.search;return qp(r)}catch{return qp(n)}}class ye{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw ke(Qy);n.includes("#")||(this._urlString=ye.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return jt.endsWith(a,"?")?a=a.slice(0,-1):jt.endsWith(a,"?/")&&(a=a.slice(0,-2)),jt.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw ke(Zo)}if(!n.HostNameAndPort||!n.PathSegments)throw ke(Zo);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw ke(Yy)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return ye.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),r=a.PathSegments;return n&&r.length!==0&&(r[0]===Si.COMMON||r[0]===Si.ORGANIZATIONS)&&(r[0]=n),ye.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw ke(Zo);const r={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let c=r.AbsolutePath.split("/");return c=c.filter(h=>h&&h.length>0),r.PathSegments=c,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=n.match(a);if(!r)throw ke(Zo);return r[2]}static getAbsoluteUrl(n,a){if(n[0]===H.FORWARD_SLASH){const c=new ye(a).getUrlComponents();return c.Protocol+"//"+c.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new ye(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}static hashContainsKnownProperties(n){return!!Fs(n)}}const sC={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Yp=sC.endpointMetadata,Uh=sC.instanceDiscoveryMetadata,cC=new Set;Uh.metadata.forEach(u=>{u.aliases.forEach(n=>{cC.add(n)})});function xS(u,n){let a;const r=u.canonicalAuthority;if(r){const c=new ye(r).getUrlComponents().HostNameAndPort;a=Qp(c,u.cloudDiscoveryMetadata?.metadata,qt.CONFIG,n)||Qp(c,Uh.metadata,qt.HARDCODED_VALUES,n)||u.knownAuthorities}return a||[]}function Qp(u,n,a,r){if(r?.trace(`getAliasesFromMetadata called with source: ${a}`),u&&n){const c=Vs(n,u);if(c)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${a}, returning aliases`),c.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${a}`)}return null}function BS(u){return Vs(Uh.metadata,u)}function Vs(u,n){for(let a=0;a<u.length;a++){const r=u[a];if(r.aliases.includes(n))return r}return null}const Xs="cache_quota_exceeded",Hh="cache_error_unknown";const Zu={[Xs]:"Exceeded cache storage capacity.",[Hh]:"Unexpected error occurred when using cache storage."};class qa extends Oe{constructor(n,a){const r=a||(Zu[n]?Zu[n]:Zu[Hh]);super(`${n}: ${r}`),Object.setPrototypeOf(this,qa.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=r}}function sh(u){return u instanceof Error?u.name==="QuotaExceededError"||u.name==="NS_ERROR_DOM_QUOTA_REACHED"||u.message.includes("exceeded the quota")?new qa(Xs):new qa(u.name,u.message):new qa(Hh)}class ch{constructor(n,a,r,c,h){this.clientId=n,this.cryptoImpl=a,this.commonLogger=r.clone(qy,wh),this.staticAuthorityOptions=h,this.performanceClient=c}getAllAccounts(n,a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){if(Object.keys(n).length===0||Object.values(n).every(c=>!c))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(n,a);return r.length>1?r.sort(h=>h.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(n,a){const r=this.getAccountsFilteredBy(n,a);return r.length>0?Ke.getAccountInfo(r[0]):null}buildTenantProfiles(n,a,r){return n.flatMap(c=>this.getTenantProfilesFromAccountEntity(c,a,r?.tenantId,r))}getTenantedAccountInfoByFilter(n,a,r,c,h){let d=null,g;if(h&&!this.tenantProfileMatchesFilter(r,h))return null;const m=this.getIdToken(n,c,a,r.tenantId);return m&&(g=An(m.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(g,h))?null:(d=Nh(n,r,g,m?.secret),d)}getTenantProfilesFromAccountEntity(n,a,r,c){const h=Ke.getAccountInfo(n);let d=h.tenantProfiles||new Map;const g=this.getTokenKeys();if(r){const y=d.get(r);if(y)d=new Map([[r,y]]);else return[]}const m=[];return d.forEach(y=>{const S=this.getTenantedAccountInfoByFilter(h,g,y,a,c);S&&m.push(S)}),m}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,r,c,h){if(!n)throw P(Py);try{n.account&&await this.setAccount(n.account,a,r,c),n.idToken&&h?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,r),n.accessToken&&h?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,r),n.refreshToken&&h?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,r),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(d){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),d instanceof Oe?d:sh(d)}}async saveAccessToken(n,a,r){const c={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType,requestedClaimsHash:n.requestedClaimsHash},h=this.getTokenKeys(),d=$e.fromString(n.target);h.accessToken.forEach(g=>{if(!this.accessTokenKeyMatchesFilter(g,c,!1))return;const m=this.getAccessTokenCredential(g,a);m&&this.credentialMatchesFilter(m,c)&&$e.fromString(m.target).intersectingScopeSets(d)&&this.removeAccessToken(g,a)}),await this.setAccessTokenCredential(n,a,r)}getAccountsFilteredBy(n,a){const r=this.getAccountKeys(),c=[];return r.forEach(h=>{const d=this.getAccount(h,a);if(!d||n.homeAccountId&&!this.matchHomeAccountId(d,n.homeAccountId)||n.username&&!this.matchUsername(d.username,n.username)||n.environment&&!this.matchEnvironment(d,n.environment)||n.realm&&!this.matchRealm(d,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(d,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(d,n.authorityType))return;const g={localAccountId:n?.localAccountId,name:n?.name},m=d.tenantProfiles?.filter(y=>this.tenantProfileMatchesFilter(y,g));m&&m.length===0||c.push(d)}),c}credentialMatchesFilter(n,a){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||(a.requestedClaimsHash||n.requestedClaimsHash)&&n.requestedClaimsHash!==a.requestedClaimsHash||n.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===be.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n){const a=this.getKeys(),r={};return a.forEach(c=>{if(!this.isAppMetadata(c))return;const h=this.getAppMetadata(c);h&&(n.environment&&!this.matchEnvironment(h,n.environment)||n.clientId&&!this.matchClientId(h,n.clientId)||(r[c]=h))}),r}getAuthorityMetadataByAlias(n){const a=this.getAuthorityMetadataKeys();let r=null;return a.forEach(c=>{if(!this.isAuthorityMetadata(c)||c.indexOf(this.clientId)===-1)return;const h=this.getAuthorityMetadata(c);h&&h.aliases.indexOf(n)!==-1&&(r=h)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(r=>{this.removeAccount(r,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const r=this.getAccountKeys(),c=h=>h.includes(n.homeAccountId)&&h.includes(n.environment);r.filter(c).forEach(h=>{this.removeItem(h,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const r=this.getTokenKeys(),c=h=>h.includes(n.homeAccountId)&&h.includes(n.environment);r.idToken.filter(c).forEach(h=>{this.removeIdToken(h,a)}),r.accessToken.filter(c).forEach(h=>{this.removeAccessToken(h,a)}),r.refreshToken.filter(c).forEach(h=>{this.removeRefreshToken(h,a)})}removeAccessToken(n,a){const r=this.getAccessTokenCredential(n,a);if(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),!r||r.credentialType.toLowerCase()!==ut.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==be.POP)return;const c=r.keyId;c&&this.cryptoImpl.removeTokenBindingKey(c).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${c}`,a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}removeAppMetadata(n){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,n)}),!0}getIdToken(n,a,r,c,h){this.commonLogger.trace("CacheManager - getIdToken called");const d={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:ut.ID_TOKEN,clientId:this.clientId,realm:c},g=this.getIdTokensByFilter(d,a,r),m=g.size;if(m<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(m>1){let y=g;if(!c){const S=new Map;g.forEach((O,x)=>{O.realm===n.tenantId&&S.set(x,O)});const _=S.size;if(_<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),g.values().next().value;if(_===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),S.values().next().value;y=S}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),y.forEach((S,_)=>{this.removeIdToken(_,a)}),h&&a&&h.addFields({multiMatchedID:g.size},a),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),g.values().next().value}getIdTokensByFilter(n,a,r){const c=r&&r.idToken||this.getTokenKeys().idToken,h=new Map;return c.forEach(d=>{if(!this.idTokenKeyMatchesFilter(d,{clientId:this.clientId,...n}))return;const g=this.getIdTokenCredential(d,a);g&&this.credentialMatchesFilter(g,n)&&h.set(d,g)}),h}idTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,r,c){const h=a.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",h);const d=$e.createSearchScopes(a.scopes),g=a.authenticationScheme||be.BEARER,m=g.toLowerCase()!==be.BEARER.toLowerCase()?ut.ACCESS_TOKEN_WITH_AUTH_SCHEME:ut.ACCESS_TOKEN,y={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:m,clientId:this.clientId,realm:c||n.tenantId,target:d,tokenType:g,keyId:a.sshKid,requestedClaimsHash:a.requestedClaimsHash},S=r&&r.accessToken||this.getTokenKeys().accessToken,_=[];S.forEach(x=>{if(this.accessTokenKeyMatchesFilter(x,y,!0)){const ee=this.getAccessTokenCredential(x,h);ee&&this.credentialMatchesFilter(ee,y)&&_.push(ee)}});const O=_.length;return O<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",h),null):O>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",h),_.forEach(x=>{this.removeAccessToken(this.generateCredentialKey(x),h)}),this.performanceClient.addFields({multiMatchedAT:_.length},h),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",h),_[0])}accessTokenKeyMatchesFilter(n,a,r){const c=n.toLowerCase();if(a.clientId&&c.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&c.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&c.indexOf(a.realm.toLowerCase())===-1||a.requestedClaimsHash&&c.indexOf(a.requestedClaimsHash.toLowerCase())===-1)return!1;if(a.target){const h=a.target.asArray();for(let d=0;d<h.length;d++){if(r&&!c.includes(h[d].toLowerCase()))return!1;if(!r&&c.includes(h[d].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const r=this.getTokenKeys(),c=[];return r.accessToken.forEach(h=>{if(!this.accessTokenKeyMatchesFilter(h,n,!0))return;const d=this.getAccessTokenCredential(h,a);d&&this.credentialMatchesFilter(d,n)&&c.push(d)}),c}getRefreshToken(n,a,r,c,h){this.commonLogger.trace("CacheManager - getRefreshToken called");const d=a?Gs:void 0,g={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:ut.REFRESH_TOKEN,clientId:this.clientId,familyId:d},m=c&&c.refreshToken||this.getTokenKeys().refreshToken,y=[];m.forEach(_=>{if(this.refreshTokenKeyMatchesFilter(_,g)){const O=this.getRefreshTokenCredential(_,r);O&&this.credentialMatchesFilter(O,g)&&y.push(O)}});const S=y.length;return S<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(S>1&&h&&r&&h.addFields({multiMatchedRT:S},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),y[0])}refreshTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.familyId&&r.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n){const a={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(a),c=Object.keys(r).map(d=>r[d]),h=c.length;if(h<1)return null;if(h>1)throw P(Uy);return c[0]}isAppMetadataFOCI(n){const a=this.readAppMetadataFromCache(n);return!!(a&&a.familyId===Gs)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const r=n.oid||n.sub;return a===r}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a){if(this.staticAuthorityOptions){const c=xS(this.staticAuthorityOptions,this.commonLogger);if(c.includes(a)&&c.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==ut.ACCESS_TOKEN&&n.credentialType!==ut.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:$e.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(Ch)!==-1}isAuthorityMetadata(n){return n.indexOf(qs.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(n){return`${qs.CACHE_KEY}-${this.clientId}-${n}`}static toObject(n,a){for(const r in a)n[r]=a[r];return n}}class KS extends ch{async setAccount(){throw P(ae)}getAccount(){throw P(ae)}async setIdTokenCredential(){throw P(ae)}getIdTokenCredential(){throw P(ae)}async setAccessTokenCredential(){throw P(ae)}getAccessTokenCredential(){throw P(ae)}async setRefreshTokenCredential(){throw P(ae)}getRefreshTokenCredential(){throw P(ae)}setAppMetadata(){throw P(ae)}getAppMetadata(){throw P(ae)}setServerTelemetry(){throw P(ae)}getServerTelemetry(){throw P(ae)}setAuthorityMetadata(){throw P(ae)}getAuthorityMetadata(){throw P(ae)}getAuthorityMetadataKeys(){throw P(ae)}setThrottlingCache(){throw P(ae)}getThrottlingCache(){throw P(ae)}removeItem(){throw P(ae)}getKeys(){throw P(ae)}getAccountKeys(){throw P(ae)}getTokenKeys(){throw P(ae)}generateCredentialKey(){throw P(ae)}generateAccountKey(){throw P(ae)}}const T={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse",LoadExternalTokens:"LoadExternalTokens",LoadAccount:"loadAccount",LoadIdToken:"loadIdToken",LoadAccessToken:"loadAccessToken",LoadRefreshToken:"loadRefreshToken"},GS={InProgress:1};class Fp{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class lC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:GS.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""},measurement:new Fp}}startPerformanceMeasurement(){return new Fp}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const uC={tokenRenewalOffsetSeconds:by,preventCorsPreflight:!1},qS={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Le.Info,correlationId:H.EMPTY_STRING},jS={claimsBasedCachingEnabled:!1},YS={async sendGetRequestAsync(){throw P(ae)},async sendPostRequestAsync(){throw P(ae)}},QS={sku:H.SKU,version:wh,cpu:H.EMPTY_STRING,os:H.EMPTY_STRING},FS={clientSecret:H.EMPTY_STRING,clientAssertion:void 0},VS={azureCloudInstance:Rh.None,tenant:`${H.DEFAULT_COMMON_TENANT}`},XS={application:{appName:"",appVersion:""}};function JS({authOptions:u,systemOptions:n,loggerOptions:a,cacheOptions:r,storageInterface:c,networkInterface:h,cryptoInterface:d,clientCredentials:g,libraryInfo:m,telemetry:y,serverTelemetryManager:S,persistencePlugin:_,serializableCache:O}){const x={...qS,...a};return{authOptions:ZS(u),systemOptions:{...uC,...n},loggerOptions:x,cacheOptions:{...jS,...r},storageInterface:c||new KS(u.clientId,Ys,new wi(x),new lC),networkInterface:h||YS,cryptoInterface:d||Ys,clientCredentials:g||FS,libraryInfo:{...QS,...m},telemetry:{...XS,...y},serverTelemetryManager:S||null,persistencePlugin:_||null,serializableCache:O||null}}function ZS(u){return{clientCapabilities:[],azureCloudOptions:VS,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...u}}function hC(u){return u.authOptions.authority.options.protocolMode===Mt.OIDC}const fn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};const Xi="client_id",dC="redirect_uri",$S="response_type",WS="response_mode",eE="grant_type",tE="claims",nE="scope",iE="refresh_token",aE="state",oE="nonce",rE="prompt",sE="code",cE="code_challenge",lE="code_challenge_method",uE="code_verifier",hE="client-request-id",dE="x-client-SKU",fE="x-client-VER",gE="x-client-OS",mE="x-client-CPU",pE="x-client-current-telemetry",yE="x-client-last-telemetry",CE="x-ms-lib-capability",TE="x-app-name",vE="x-app-ver",AE="post_logout_redirect_uri",SE="id_token_hint",EE="client_secret",_E="client_assertion",bE="client_assertion_type",fC="token_type",gC="req_cnf",Vp="return_spa_code",wE="nativebroker",RE="logout_hint",IE="sid",kE="login_hint",OE="domain_hint",ME="x-client-xtra-sku",Js="brk_client_id",Zs="brk_redirect_uri",lh="instance_aware",NE="ear_jwk",DE="ear_jwe_crypto";function uc(u,n,a){if(!n)return;const r=u.get(Xi);r&&u.has(Js)&&a?.addFields({embeddedClientId:r,embeddedRedirectUri:u.get(dC)},n)}function Lh(u,n){u.set($S,n)}function UE(u,n){u.set(WS,n||mS.QUERY)}function HE(u){u.set(wE,"1")}function zh(u,n,a=!0,r=Ja){a&&!r.includes("openid")&&!n.includes("openid")&&r.push("openid");const c=a?[...n||[],...r]:n||[],h=new $e(c);u.set(nE,h.printScopes())}function Ph(u,n){u.set(Xi,n)}function xh(u,n){u.set(dC,n)}function LE(u,n){u.set(AE,n)}function zE(u,n){u.set(SE,n)}function PE(u,n){u.set(OE,n)}function Ns(u,n){u.set(kE,n)}function $s(u,n){u.set(vt.CCS_HEADER,`UPN:${n}`)}function tr(u,n){u.set(vt.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function Xp(u,n){u.set(IE,n)}function Bh(u,n,a){const r=jE(n,a);try{JSON.parse(r)}catch{throw ke(Ih)}u.set(tE,r)}function Kh(u,n){u.set(hE,n)}function Gh(u,n){u.set(dE,n.sku),u.set(fE,n.version),n.os&&u.set(gE,n.os),n.cpu&&u.set(mE,n.cpu)}function qh(u,n){n?.appName&&u.set(TE,n.appName),n?.appVersion&&u.set(vE,n.appVersion)}function xE(u,n){u.set(rE,n)}function mC(u,n){n&&u.set(aE,n)}function BE(u,n){u.set(oE,n)}function jh(u,n,a){if(n&&a)u.set(cE,n),u.set(lE,a);else throw ke(kh)}function KE(u,n){u.set(sE,n)}function GE(u,n){u.set(iE,n)}function qE(u,n){u.set(uE,n)}function pC(u,n){u.set(EE,n)}function yC(u,n){n&&u.set(_E,n)}function CC(u,n){n&&u.set(bE,n)}function TC(u,n){u.set(eE,n)}function Yh(u){u.set(pS,"1")}function vC(u){u.has(lh)||u.set(lh,"true")}function _i(u,n){Object.entries(n).forEach(([a,r])=>{!u.has(a)&&r&&u.set(a,r)})}function jE(u,n){let a;if(!u)a={};else try{a=JSON.parse(u)}catch{throw ke(Ih)}return n&&n.length>0&&(a.hasOwnProperty(Os.ACCESS_TOKEN)||(a[Os.ACCESS_TOKEN]={}),a[Os.ACCESS_TOKEN][Os.XMS_CC]={values:n}),JSON.stringify(a)}function Qh(u,n){n&&(u.set(fC,be.POP),u.set(gC,n))}function AC(u,n){n&&(u.set(fC,be.SSH),u.set(gC,n))}function SC(u,n){u.set(pE,n.generateCurrentRequestHeaderValue()),u.set(yE,n.generateLastRequestHeaderValue())}function EC(u){u.set(CE,er.X_MS_LIB_CAPABILITY_VALUE)}function YE(u,n){u.set(RE,n)}function hc(u,n,a){u.has(Js)||u.set(Js,n),u.has(Zs)||u.set(Zs,a)}function QE(u,n){u.set(NE,encodeURIComponent(n)),u.set(DE,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function FE(u,n){Object.entries(n).forEach(([a,r])=>{r&&u.set(a,r)})}function VE(u){return u.hasOwnProperty("authorization_endpoint")&&u.hasOwnProperty("token_endpoint")&&u.hasOwnProperty("issuer")&&u.hasOwnProperty("jwks_uri")}function XE(u){return u.hasOwnProperty("tenant_discovery_endpoint")&&u.hasOwnProperty("metadata")}function JE(u){return u.hasOwnProperty("error")&&u.hasOwnProperty("error_description")}const Yt=(u,n,a,r,c)=>(...h)=>{a.trace(`Executing function ${n}`);const d=r?.startMeasurement(n,c);if(c){const g=n+"CallCount";r?.incrementFields({[g]:1},c)}try{const g=u(...h);return d?.end({success:!0}),a.trace(`Returning result from ${n}`),g}catch(g){a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw d?.end({success:!1},g),g}},k=(u,n,a,r,c)=>(...h)=>{a.trace(`Executing function ${n}`);const d=r?.startMeasurement(n,c);if(c){const g=n+"CallCount";r?.incrementFields({[g]:1},c)}return r?.setPreQueueTime(n,c),u(...h).then(g=>(a.trace(`Returning result from ${n}`),d?.end({success:!0}),g)).catch(g=>{a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw d?.end({success:!1},g),g})};class dc{constructor(n,a,r,c){this.networkInterface=n,this.logger=a,this.performanceClient=r,this.correlationId=c}async detectRegion(n,a){this.performanceClient?.addQueueMeasurement(T.RegionDiscoveryDetectRegion,this.correlationId);let r=n;if(r)a.region_source=xa.ENVIRONMENT_VARIABLE;else{const c=dc.IMDS_OPTIONS;try{const h=await k(this.getRegionFromIMDS.bind(this),T.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(H.IMDS_VERSION,c);if(h.status===Ai.SUCCESS&&(r=h.body,a.region_source=xa.IMDS),h.status===Ai.BAD_REQUEST){const d=await k(this.getCurrentVersion.bind(this),T.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(c);if(!d)return a.region_source=xa.FAILED_AUTO_DETECTION,null;const g=await k(this.getRegionFromIMDS.bind(this),T.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,c);g.status===Ai.SUCCESS&&(r=g.body,a.region_source=xa.IMDS)}}catch{return a.region_source=xa.FAILED_AUTO_DETECTION,null}}return r||(a.region_source=xa.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(n,a){return this.performanceClient?.addQueueMeasurement(T.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${H.IMDS_ENDPOINT}?api-version=${n}&format=text`,a,H.IMDS_TIMEOUT)}async getCurrentVersion(n){this.performanceClient?.addQueueMeasurement(T.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const a=await this.networkInterface.sendGetRequestAsync(`${H.IMDS_ENDPOINT}?format=json`,n);return a.status===Ai.BAD_REQUEST&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}dc.IMDS_OPTIONS={headers:{Metadata:"true"}};function Nt(){return Math.round(new Date().getTime()/1e3)}function Jp(u){return u.getTime()/1e3}function ja(u){return u?new Date(Number(u)*1e3):new Date}function Ws(u,n){const a=Number(u)||0;return Nt()+n>a}function Zp(u,n){const a=Number(u)+n*24*60*60*1e3;return Date.now()>a}function ZE(u){return Number(u)>Nt()}function fc(u,n,a,r,c){return{credentialType:ut.ID_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,realm:c,lastUpdatedAt:Date.now().toString()}}function gc(u,n,a,r,c,h,d,g,m,y,S,_,O,x,ee){const Q={homeAccountId:u,credentialType:ut.ACCESS_TOKEN,secret:a,cachedAt:Nt().toString(),expiresOn:d.toString(),extendedExpiresOn:g.toString(),environment:n,clientId:r,realm:c,target:h,tokenType:S||be.BEARER,lastUpdatedAt:Date.now().toString()};if(_&&(Q.userAssertionHash=_),y&&(Q.refreshOn=y.toString()),x&&(Q.requestedClaims=x,Q.requestedClaimsHash=ee),Q.tokenType?.toLowerCase()!==be.BEARER.toLowerCase())switch(Q.credentialType=ut.ACCESS_TOKEN_WITH_AUTH_SCHEME,Q.tokenType){case be.POP:const Te=An(a,m);if(!Te?.cnf?.kid)throw P(xy);Q.keyId=Te.cnf.kid;break;case be.SSH:Q.keyId=O}return Q}function _C(u,n,a,r,c,h,d){const g={credentialType:ut.REFRESH_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,lastUpdatedAt:Date.now().toString()};return h&&(g.userAssertionHash=h),c&&(g.familyId=c),d&&(g.expiresOn=d.toString()),g}function mc(u){return u.hasOwnProperty("homeAccountId")&&u.hasOwnProperty("environment")&&u.hasOwnProperty("credentialType")&&u.hasOwnProperty("clientId")&&u.hasOwnProperty("secret")}function $p(u){return u?mc(u)&&u.hasOwnProperty("realm")&&u.hasOwnProperty("target")&&(u.credentialType===ut.ACCESS_TOKEN||u.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function $E(u){return u?mc(u)&&u.hasOwnProperty("realm")&&u.credentialType===ut.ID_TOKEN:!1}function Wp(u){return u?mc(u)&&u.credentialType===ut.REFRESH_TOKEN:!1}function WE(u,n){const a=u.indexOf(lt.CACHE_KEY)===0;let r=!0;return n&&(r=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&r}function e_(u,n){let a=!1;u&&(a=u.indexOf(er.THROTTLING_PREFIX)===0);let r=!0;return n&&(r=n.hasOwnProperty("throttleTime")),a&&r}function t_({environment:u,clientId:n}){return[Ch,u,n].join(ar.CACHE_KEY_SEPARATOR).toLowerCase()}function n_(u,n){return n?u.indexOf(Ch)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function i_(u,n){return n?u.indexOf(qs.CACHE_KEY)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function ey(){return Nt()+qs.REFRESH_TIME_SECONDS}function Ds(u,n,a){u.authorization_endpoint=n.authorization_endpoint,u.token_endpoint=n.token_endpoint,u.end_session_endpoint=n.end_session_endpoint,u.issuer=n.issuer,u.endpointsFromNetwork=a,u.jwks_uri=n.jwks_uri}function $u(u,n,a){u.aliases=n.aliases,u.preferred_cache=n.preferred_cache,u.preferred_network=n.preferred_network,u.aliasesFromNetwork=a}function ty(u){return u.expiresAt<=Nt()}class mt{constructor(n,a,r,c,h,d,g,m){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=r,this.authorityOptions=c,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=h,this.performanceClient=g,this.correlationId=d,this.managedIdentity=m||!1,this.regionDiscovery=new dc(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(H.CIAM_AUTH_URL))return dn.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case H.ADFS:return dn.Adfs;case H.DSTS:return dn.Dsts}return dn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new ye(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw P(Gn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw P(Gn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw P(Gn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw P(Gy);return this.replacePath(this.metadata.end_session_endpoint)}else throw P(Gn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw P(Gn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw P(Gn)}canReplaceTenant(n){return n.PathSegments.length===1&&!mt.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===dn.Default&&this.protocolMode!==Mt.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const c=new ye(this.metadata.canonical_authority).getUrlComponents(),h=c.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((g,m)=>{let y=h[m];if(m===0&&this.canReplaceTenant(c)){const S=new ye(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];y!==S&&(this.logger.verbose(`Replacing tenant domain name ${y} with id ${S}`),y=S)}g!==y&&(a=a.replace(`/${y}/`,`/${g}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===dn.Adfs||this.protocolMode===Mt.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(T.AuthorityResolveEndpointsAsync,this.correlationId);const n=this.getCurrentMetadataEntity(),a=await k(this.updateCloudDiscoveryMetadata.bind(this),T.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const r=await k(this.updateEndpointMetadata.bind(this),T.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:ey(),jwks_uri:""}),n}updateCachedMetadata(n,a,r){a!==qt.CACHE&&r?.source!==qt.CACHE&&(n.expiresAt=ey(),n.canonical_authority=this.canonicalAuthority);const c=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache);this.cacheManager.setAuthorityMetadata(c,n),this.metadata=n}async updateEndpointMetadata(n){this.performanceClient?.addQueueMeasurement(T.AuthorityUpdateEndpointMetadata,this.correlationId);const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===qt.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const c=await k(this.updateMetadataWithRegionalInformation.bind(this),T.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(a.metadata);Ds(n,c,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let r=await k(this.getEndpointMetadataFromNetwork.bind(this),T.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await k(this.updateMetadataWithRegionalInformation.bind(this),T.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Ds(n,r,!0),qt.NETWORK;throw P(ky,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ds(n,a,!1),{source:qt.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const c=this.getEndpointMetadataFromHardcodedValues();if(c)return Ds(n,c,!1),{source:qt.HARDCODED_VALUES,metadata:c};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=ty(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:qt.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(n){return new ye(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ke(Jy)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(T.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{const r=await this.networkInterface.sendGetRequestAsync(a,n);return VE(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Yp?Yp[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){this.performanceClient?.addQueueMeasurement(T.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==H.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Ju.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,mt.replaceWithRegionalInformation(n,a);const r=await k(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),T.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Ju.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,mt.replaceWithRegionalInformation(n,r);this.regionDiscoveryMetadata.region_outcome=Ju.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){this.performanceClient?.addQueueMeasurement(T.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const r=await k(this.getCloudDiscoveryMetadataFromNetwork.bind(this),T.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return $u(n,r,!0),qt.NETWORK;throw ke(Zy)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||H.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||H.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${n.canonical_authority||H.NOT_APPLICABLE}`);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),$u(n,a,!1),qt.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const c=BS(this.hostnameAndPort);if(c)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),$u(n,c,!1),qt.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=ty(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),qt.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===dn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),mt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=Vs(n.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),a)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),a;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ke(Oh)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),mt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(T.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const n=`${H.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let r=null;try{const c=await this.networkInterface.sendGetRequestAsync(n,a);let h,d;if(XE(c.body))h=c.body,d=h.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${h.tenant_discovery_endpoint}`);else if(JE(c.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${c.status}`),h=c.body,h.error===H.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${h.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${h.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),d=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Vs(d,this.hostnameAndPort)}catch(c){if(c instanceof Oe)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${c.errorCode}
Error Description: ${c.errorMessage}`);else{const h=c;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${h.name}
Error Description: ${h.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=mt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&ye.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let r;if(a&&a.azureCloudInstance!==Rh.None){const c=a.tenant?a.tenant:H.DEFAULT_COMMON_TENANT;r=`${a.azureCloudInstance}/${c}/`}return r||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return H.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw P(Gn)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return cC.has(n)}static isPublicCloudAuthority(n){return H.KNOWN_PUBLIC_CLOUDS.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,r){const c=new ye(n);c.validateAsUri();const h=c.getUrlComponents();let d=`${a}.${h.HostNameAndPort}`;this.isPublicCloudAuthority(h.HostNameAndPort)&&(d=`${a}.${H.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const g=ye.constructAuthorityUriFromObject({...c.getUrlComponents(),HostNameAndPort:d}).urlString;return r?`${g}?${r}`:g}static replaceWithRegionalInformation(n,a){const r={...n};return r.authorization_endpoint=mt.buildRegionalAuthorityString(r.authorization_endpoint,a),r.token_endpoint=mt.buildRegionalAuthorityString(r.token_endpoint,a),r.end_session_endpoint&&(r.end_session_endpoint=mt.buildRegionalAuthorityString(r.end_session_endpoint,a)),r}static transformCIAMAuthority(n){let a=n;const c=new ye(n).getUrlComponents();if(c.PathSegments.length===0&&c.HostNameAndPort.endsWith(H.CIAM_AUTH_URL)){const h=c.HostNameAndPort.split(".")[0];a=`${a}${h}${H.AAD_TENANT_DOMAIN_SUFFIX}`}return a}}mt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Si.COMMON,Si.CONSUMERS,Si.ORGANIZATIONS]);function a_(u){const r=new ye(u).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case Si.COMMON:case Si.ORGANIZATIONS:case Si.CONSUMERS:return;default:return r}}function bC(u){return u.endsWith(H.FORWARD_SLASH)?u:`${u}${H.FORWARD_SLASH}`}function o_(u){const n=u.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw ke(Oh)}return{canonicalAuthority:u.authority?bC(u.authority):void 0,knownAuthorities:u.knownAuthorities,cloudDiscoveryMetadata:a}}async function wC(u,n,a,r,c,h,d){d?.addQueueMeasurement(T.AuthorityFactoryCreateDiscoveredInstance,h);const g=mt.transformCIAMAuthority(bC(u)),m=new mt(g,n,a,r,c,h,d);try{return await k(m.resolveEndpointsAsync.bind(m),T.AuthorityResolveEndpointsAsync,c,d,h)(),m}catch{throw P(Gn)}}class ea extends Oe{constructor(n,a,r,c,h){super(n,a,r),this.name="ServerError",this.errorNo=c,this.status=h,Object.setPrototypeOf(this,ea.prototype)}}function pc(u,n,a){return{clientId:u,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.tokenBodyParameters?.clientId}}class Tn{static generateThrottlingStorageKey(n){return`${er.THROTTLING_PREFIX}.${JSON.stringify(n)}`}static preProcess(n,a,r){const c=Tn.generateThrottlingStorageKey(a),h=n.getThrottlingCache(c);if(h){if(h.throttleTime<Date.now()){n.removeItem(c,r);return}throw new ea(h.errorCodes?.join(" ")||H.EMPTY_STRING,h.errorMessage,h.subError)}}static postProcess(n,a,r,c){if(Tn.checkResponseStatus(r)||Tn.checkResponseForRetryAfter(r)){const h={throttleTime:Tn.calculateThrottleTime(parseInt(r.headers[vt.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};n.setThrottlingCache(Tn.generateThrottlingStorageKey(a),h,c)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty(vt.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,r=Date.now()/1e3;return Math.floor(Math.min(r+(a||er.DEFAULT_THROTTLE_TIME_SECONDS),r+er.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(n,a,r,c){const h=pc(a,r,c),d=this.generateThrottlingStorageKey(h);n.removeItem(d,r.correlationId)}}class yc extends Oe{constructor(n,a,r){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,yc.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=r}}function $o(u,n,a,r){return u.errorMessage=`${u.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new yc(u,n,a)}class Fh{constructor(n,a){this.config=JS(n),this.logger=new wi(this.config.loggerOptions,qy,wh),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}createTokenRequestHeaders(n){const a={};if(a[vt.CONTENT_TYPE]=H.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case fn.HOME_ACCOUNT_ID:try{const r=Ga(n.credential);a[vt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case fn.UPN:a[vt.CCS_HEADER]=`UPN: ${n.credential}`;break}return a}async executePostToTokenEndpoint(n,a,r,c,h,d){d&&this.performanceClient?.addQueueMeasurement(d,h);const g=await this.sendPostRequest(c,n,{body:a,headers:r},h);return this.config.serverTelemetryManager&&g.status<500&&g.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),g}async sendPostRequest(n,a,r,c){Tn.preProcess(this.cacheManager,n,c);let h;try{h=await k(this.networkClient.sendPostRequestAsync.bind(this.networkClient),T.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,c)(a,r);const d=h.headers||{};this.performanceClient?.addFields({refreshTokenSize:h.body.refresh_token?.length||0,httpVerToken:d[vt.X_MS_HTTP_VERSION]||"",requestId:d[vt.X_MS_REQUEST_ID]||""},c)}catch(d){if(d instanceof yc){const g=d.responseHeaders;throw g&&this.performanceClient?.addFields({httpVerToken:g[vt.X_MS_HTTP_VERSION]||"",requestId:g[vt.X_MS_REQUEST_ID]||"",contentTypeHeader:g[vt.CONTENT_TYPE]||void 0,contentLengthHeader:g[vt.CONTENT_LENGTH]||void 0,httpStatus:d.httpStatus},c),d.error}throw d instanceof Oe?d:P(Iy)}return Tn.postProcess(this.cacheManager,n,h,c),h}async updateAuthority(n,a){this.performanceClient?.addQueueMeasurement(T.UpdateTokenEndpointAuthority,a);const r=`https://${n}/${this.authority.tenant}/`,c=await wC(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=c}createTokenQueryParameters(n){const a=new Map;return n.embeddedClientId&&hc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenQueryParameters&&_i(a,n.tokenQueryParameters),Kh(a,n.correlationId),uc(a,n.correlationId,this.performanceClient),or(a)}}const ec="no_tokens_found",RC="native_account_unavailable",Vh="refresh_token_expired",Xh="ux_not_allowed",r_="interaction_required",s_="consent_required",c_="login_required",Cc="bad_token";const ny=[r_,s_,c_,Cc,Xh],l_=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],u_={[ec]:"No refresh token found in the cache. Please sign-in.",[RC]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Vh]:"Refresh token has expired.",[Cc]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Xh]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Qt extends Oe{constructor(n,a,r,c,h,d,g,m){super(n,a,r),Object.setPrototypeOf(this,Qt.prototype),this.timestamp=c||H.EMPTY_STRING,this.traceId=h||H.EMPTY_STRING,this.correlationId=d||H.EMPTY_STRING,this.claims=g||H.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=m}}function IC(u,n,a){const r=!!u&&ny.indexOf(u)>-1,c=!!a&&l_.indexOf(a)>-1,h=!!n&&ny.some(d=>n.indexOf(d)>-1);return r||h||c}function tc(u){return new Qt(u,u_[u])}class Za{static setRequestState(n,a,r){const c=Za.generateLibraryState(n,r);return a?`${c}${H.RESOURCE_DELIM}${a}`:c}static generateLibraryState(n,a){if(!n)throw P(rh);const r={id:n.createNewGuid()};a&&(r.meta=a);const c=JSON.stringify(r);return n.base64Encode(c)}static parseRequestState(n,a){if(!n)throw P(rh);if(!a)throw P(Va);try{const r=a.split(H.RESOURCE_DELIM),c=r[0],h=r.length>1?r.slice(1).join(H.RESOURCE_DELIM):H.EMPTY_STRING,d=n.base64Decode(c),g=JSON.parse(d);return{userRequestState:h||H.EMPTY_STRING,libraryState:g}}catch{throw P(Va)}}}const h_={SW:"sw"};class Xa{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){this.performanceClient?.addQueueMeasurement(T.PopTokenGenerateCnf,n.correlationId);const r=await k(this.generateKid.bind(this),T.PopTokenGenerateCnf,a,this.performanceClient,n.correlationId)(n),c=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:c}}async generateKid(n){return this.performanceClient?.addQueueMeasurement(T.PopTokenGenerateKid,n.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:h_.SW}}async signPopToken(n,a,r){return this.signPayload(n,a,r)}async signPayload(n,a,r,c){const{resourceRequestMethod:h,resourceRequestUri:d,shrClaims:g,shrNonce:m,shrOptions:y}=r,_=(d?new ye(d):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:Nt(),m:h?.toUpperCase(),u:_?.HostNameAndPort,nonce:m||this.cryptoUtils.createNewGuid(),p:_?.AbsolutePath,q:_?.QueryString?[[],_.QueryString]:void 0,client_claims:g||void 0,...c},a,y,r.correlationId)}}class d_{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Ji{constructor(n,a,r,c,h,d,g){this.clientId=n,this.cacheStorage=a,this.cryptoObj=r,this.logger=c,this.serializableCache=h,this.persistencePlugin=d,this.performanceClient=g}validateTokenResponse(n,a){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||H.NOT_AVAILABLE} - Timestamp: ${n.timestamp||H.NOT_AVAILABLE} - Description: ${n.error_description||H.NOT_AVAILABLE} - Correlation ID: ${n.correlation_id||H.NOT_AVAILABLE} - Trace ID: ${n.trace_id||H.NOT_AVAILABLE}`,c=n.error_codes?.length?n.error_codes[0]:void 0,h=new ea(n.error,r,n.suberror,c,n.status);if(a&&n.status&&n.status>=Ai.SERVER_ERROR_RANGE_START&&n.status<=Ai.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${h}`);return}else if(a&&n.status&&n.status>=Ai.CLIENT_ERROR_RANGE_START&&n.status<=Ai.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${h}`);return}throw IC(n.error,n.error_description,n.suberror)?new Qt(n.error,n.error_description,n.suberror,n.timestamp||H.EMPTY_STRING,n.trace_id||H.EMPTY_STRING,n.correlation_id||H.EMPTY_STRING,n.claims||H.EMPTY_STRING,c):h}}async handleServerTokenResponse(n,a,r,c,h,d,g,m,y,S){this.performanceClient?.addQueueMeasurement(T.HandleServerTokenResponse,n.correlation_id);let _;if(n.id_token){if(_=An(n.id_token||H.EMPTY_STRING,this.cryptoObj.base64Decode),d&&d.nonce&&_.nonce!==d.nonce)throw P(Ny);if(c.maxAge||c.maxAge===0){const Q=_.auth_time;if(!Q)throw P(Ah);oC(Q,c.maxAge)}}this.homeAccountIdentifier=Ke.generateHomeAccountId(n.client_info||H.EMPTY_STRING,a.authorityType,this.logger,this.cryptoObj,_);let O;d&&d.state&&(O=Za.parseRequestState(this.cryptoObj,d.state)),n.key_id=n.key_id||c.sshKid||void 0;const x=this.generateCacheRecord(n,a,r,c,_,g,d);let ee;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),ee=new d_(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(ee)),m&&!y&&x.account){const Q=this.cacheStorage.generateAccountKey(Ke.getAccountInfo(x.account));if(!this.cacheStorage.getAccount(Q,c.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Ji.generateAuthenticationResult(this.cryptoObj,a,x,!1,c,_,O,void 0,S)}await this.cacheStorage.saveCacheRecord(x,c.correlationId,Sn(_||{}),h,c.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&ee&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(ee))}return Ji.generateAuthenticationResult(this.cryptoObj,a,x,!1,c,_,O,n,S)}generateCacheRecord(n,a,r,c,h,d,g){const m=a.getPreferredCache();if(!m)throw P(Eh);const y=Dh(h);let S,_;n.id_token&&h&&(S=fc(this.homeAccountIdentifier,m,n.id_token,this.clientId,y||""),_=Jh(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,c.correlationId,h,n.client_info,m,y,g,void 0,this.logger));let O=null;if(n.access_token){const Q=n.scope?$e.fromString(n.scope):new $e(c.scopes||[]),Te=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,ve=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,he=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,ge=r+Te,Pe=ge+ve,ze=he&&he>0?r+he:void 0;O=gc(this.homeAccountIdentifier,m,n.access_token,this.clientId,y||a.tenant||"",Q.printScopes(),ge,Pe,this.cryptoObj.base64Decode,ze,n.token_type,d,n.key_id,c.claims,c.requestedClaimsHash)}let x=null;if(n.refresh_token){let Q;if(n.refresh_token_expires_in){const Te=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;Q=r+Te,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:Q},c.correlationId)}x=_C(this.homeAccountIdentifier,m,n.refresh_token,this.clientId,n.foci,d,Q)}let ee=null;return n.foci&&(ee={clientId:this.clientId,environment:m,familyId:n.foci}),{account:_,idToken:S,accessToken:O,refreshToken:x,appMetadata:ee}}static async generateAuthenticationResult(n,a,r,c,h,d,g,m,y){let S=H.EMPTY_STRING,_=[],O=null,x,ee,Q=H.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===be.POP&&!h.popKid){const ge=new Xa(n),{secret:Pe,keyId:ze}=r.accessToken;if(!ze)throw P(_h);S=await ge.signPopToken(Pe,ze,h)}else S=r.accessToken.secret;_=$e.fromString(r.accessToken.target).asArray(),O=ja(r.accessToken.expiresOn),x=ja(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(ee=ja(r.accessToken.refreshOn))}r.appMetadata&&(Q=r.appMetadata.familyId===Gs?Gs:"");const Te=d?.oid||d?.sub||"",ve=d?.tid||"";m?.spa_accountid&&r.account&&(r.account.nativeAccountId=m?.spa_accountid);const he=r.account?Nh(Ke.getAccountInfo(r.account),void 0,d,r.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:Te,tenantId:ve,scopes:_,account:he,idToken:r?.idToken?.secret||"",idTokenClaims:d||{},accessToken:S,fromCache:c,expiresOn:O,extExpiresOn:x,refreshOn:ee,correlationId:h.correlationId,requestId:y||H.EMPTY_STRING,familyId:Q,tokenType:r.accessToken?.tokenType||H.EMPTY_STRING,state:g?g.userRequestState:H.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||H.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||H.EMPTY_STRING,code:m?.spa_code,fromNativeBroker:!1}}}function Jh(u,n,a,r,c,h,d,g,m,y,S,_){_?.verbose("setCachedAccount called");const x=u.getAccountKeys().find(he=>he.startsWith(a));let ee=null;x&&(ee=u.getAccount(x,c));const Q=ee||Ke.createAccount({homeAccountId:a,idTokenClaims:h,clientInfo:d,environment:g,cloudGraphHostName:y?.cloud_graph_host_name,msGraphHost:y?.msgraph_host,nativeAccountId:S},n,r),Te=Q.tenantProfiles||[],ve=m||Q.realm;if(ve&&!Te.find(he=>he.tenantId===ve)){const he=lc(a,Q.localAccountId,ve,h);Te.push(he)}return Q.tenantProfiles=Te,Q}async function kC(u,n,a){return typeof u=="string"?u:u({clientId:n,tokenEndpoint:a})}class OC extends Fh{constructor(n,a){super(n,a),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,r){if(this.performanceClient?.addQueueMeasurement(T.AuthClientAcquireToken,n.correlationId),!n.code)throw P(Hy);const c=Nt(),h=await k(this.executeTokenRequest.bind(this),T.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(this.authority,n),d=h.headers?.[vt.X_MS_REQUEST_ID],g=new Ji(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return g.validateTokenResponse(h.body),k(g.handleServerTokenResponse.bind(g),T.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(h.body,this.authority,c,n,a,r,void 0,void 0,void 0,d)}getLogoutUri(n){if(!n)throw ke(Xy);const a=this.createLogoutUrlQueryString(n);return ye.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(T.AuthClientExecuteTokenRequest,a.correlationId);const r=this.createTokenQueryParameters(a),c=ye.appendQueryString(n.tokenEndpoint,r),h=await k(this.createTokenRequestBody.bind(this),T.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,a.correlationId)(a);let d;if(a.clientInfo)try{const y=Qs(a.clientInfo,this.cryptoUtils.base64Decode);d={credential:`${y.uid}${ar.CLIENT_INFO_SEPARATOR}${y.utid}`,type:fn.HOME_ACCOUNT_ID}}catch(y){this.logger.verbose("Could not parse client info for CCS Header: "+y)}const g=this.createTokenRequestHeaders(d||a.ccsCredential),m=pc(this.config.authOptions.clientId,a);return k(this.executePostToTokenEndpoint.bind(this),T.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,a.correlationId)(c,h,g,m,a.correlationId,T.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(T.AuthClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(Ph(a,n.embeddedClientId||n.tokenBodyParameters?.[Xi]||this.config.authOptions.clientId),this.includeRedirectUri)xh(a,n.redirectUri);else if(!n.redirectUri)throw ke(jy);if(zh(a,n.scopes,!0,this.oidcDefaultScopes),KE(a,n.code),Gh(a,this.config.libraryInfo),qh(a,this.config.telemetry.application),EC(a),this.serverTelemetryManager&&!hC(this.config)&&SC(a,this.serverTelemetryManager),n.codeVerifier&&qE(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&pC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;yC(a,await kC(c.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),CC(a,c.assertionType)}if(TC(a,_y.AUTHORIZATION_CODE_GRANT),Yh(a),n.authenticationScheme===be.POP){const c=new Xa(this.cryptoUtils,this.performanceClient);let h;n.popKid?h=this.cryptoUtils.encodeKid(n.popKid):h=(await k(c.generateCnf.bind(c),T.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Qh(a,h)}else if(n.authenticationScheme===be.SSH)if(n.sshJwk)AC(a,n.sshJwk);else throw ke(cc);(!jt.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Bh(a,n.claims,this.config.authOptions.clientCapabilities);let r;if(n.clientInfo)try{const c=Qs(n.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${c.uid}${ar.CLIENT_INFO_SEPARATOR}${c.utid}`,type:fn.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}else r=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case fn.HOME_ACCOUNT_ID:try{const c=Ga(r.credential);tr(a,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case fn.UPN:$s(a,r.credential);break}return n.embeddedClientId&&hc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&_i(a,n.tokenBodyParameters),n.enableSpaAuthorizationCode&&(!n.tokenBodyParameters||!n.tokenBodyParameters[Vp])&&_i(a,{[Vp]:"1"}),uc(a,n.correlationId,this.performanceClient),or(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&LE(a,n.postLogoutRedirectUri),n.correlationId&&Kh(a,n.correlationId),n.idTokenHint&&zE(a,n.idTokenHint),n.state&&mC(a,n.state),n.logoutHint&&YE(a,n.logoutHint),n.extraQueryParameters&&_i(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&vC(a),or(a,this.config.authOptions.encodeExtraQueryParams,n.extraQueryParameters)}}const f_=300;class g_ extends Fh{constructor(n,a){super(n,a)}async acquireToken(n,a){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientAcquireToken,n.correlationId);const r=Nt(),c=await k(this.executeTokenRequest.bind(this),T.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(n,this.authority),h=c.headers?.[vt.X_MS_REQUEST_ID],d=new Ji(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(c.body),k(d.handleServerTokenResponse.bind(d),T.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(c.body,this.authority,r,n,a,void 0,void 0,!0,n.forceCache,h)}async acquireTokenByRefreshToken(n,a){if(!n)throw ke(Vy);if(this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientAcquireTokenByRefreshToken,n.correlationId),!n.account)throw P(Sh);if(this.cacheManager.isAppMetadataFOCI(n.account.environment))try{return await k(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(c){const h=c instanceof Qt&&c.errorCode===ec,d=c instanceof ea&&c.errorCode===xp.INVALID_GRANT_ERROR&&c.subError===xp.CLIENT_MISMATCH_ERROR;if(h||d)return k(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw c}return k(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,r){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId);const c=Yt(this.cacheManager.getRefreshToken.bind(this.cacheManager),T.CacheManagerGetRefreshToken,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0,this.performanceClient);if(!c)throw tc(ec);if(c.expiresOn){const d=n.refreshTokenExpirationOffsetSeconds||f_;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(c.expiresOn),rtOffsetSeconds:d},n.correlationId),Ws(c.expiresOn,d))throw tc(Vh)}const h={...n,refreshToken:c.secret,authenticationScheme:n.authenticationScheme||be.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:fn.HOME_ACCOUNT_ID}};try{return await k(this.acquireToken.bind(this),T.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(h,r)}catch(d){if(d instanceof Qt&&d.subError===Cc){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const g=this.cacheManager.generateCredentialKey(c);this.cacheManager.removeRefreshToken(g,n.correlationId)}throw d}}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),c=ye.appendQueryString(a.tokenEndpoint,r),h=await k(this.createTokenRequestBody.bind(this),T.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n),d=this.createTokenRequestHeaders(n.ccsCredential),g=pc(this.config.authOptions.clientId,n);return k(this.executePostToTokenEndpoint.bind(this),T.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(c,h,d,g,n.correlationId,T.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(T.RefreshTokenClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(Ph(a,n.embeddedClientId||n.tokenBodyParameters?.[Xi]||this.config.authOptions.clientId),n.redirectUri&&xh(a,n.redirectUri),zh(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),TC(a,_y.REFRESH_TOKEN_GRANT),Yh(a),Gh(a,this.config.libraryInfo),qh(a,this.config.telemetry.application),EC(a),this.serverTelemetryManager&&!hC(this.config)&&SC(a,this.serverTelemetryManager),GE(a,n.refreshToken),this.config.clientCredentials.clientSecret&&pC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;yC(a,await kC(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),CC(a,r.assertionType)}if(n.authenticationScheme===be.POP){const r=new Xa(this.cryptoUtils,this.performanceClient);let c;n.popKid?c=this.cryptoUtils.encodeKid(n.popKid):c=(await k(r.generateCnf.bind(r),T.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Qh(a,c)}else if(n.authenticationScheme===be.SSH)if(n.sshJwk)AC(a,n.sshJwk);else throw ke(cc);if((!jt.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Bh(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case fn.HOME_ACCOUNT_ID:try{const r=Ga(n.ccsCredential.credential);tr(a,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case fn.UPN:$s(a,n.ccsCredential.credential);break}return n.embeddedClientId&&hc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&_i(a,n.tokenBodyParameters),uc(a,n.correlationId,this.performanceClient),or(a)}}class m_ extends Fh{constructor(n,a){super(n,a)}async acquireCachedToken(n){this.performanceClient?.addQueueMeasurement(T.SilentFlowClientAcquireCachedToken,n.correlationId);let a=Fi.NOT_APPLICABLE;if(n.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!jt.isEmptyObj(n.claims))throw this.setCacheOutcome(Fi.FORCE_REFRESH_OR_CLAIMS,n.correlationId),P(Ei);if(!n.account)throw P(Sh);const r=n.account.tenantId||a_(n.authority),c=this.cacheManager.getTokenKeys(),h=this.cacheManager.getAccessToken(n.account,n,c,r);if(h){if(ZE(h.cachedAt)||Ws(h.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Fi.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),P(Ei);h.refreshOn&&Ws(h.refreshOn,0)&&(a=Fi.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Fi.NO_CACHED_ACCESS_TOKEN,n.correlationId),P(Ei);const d=n.authority||this.authority.getPreferredCache(),g={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:h,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,c,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(d)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await k(this.generateResultFromCacheRecord.bind(this),T.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,n.correlationId)(g,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==Fi.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${n}`)}async generateResultFromCacheRecord(n,a){this.performanceClient?.addQueueMeasurement(T.SilentFlowClientGenerateResultFromCacheRecord,a.correlationId);let r;if(n.idToken&&(r=An(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const c=r?.auth_time;if(!c)throw P(Ah);oC(c,a.maxAge)}return Ji.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,r)}}const p_={sendGetRequestAsync:()=>Promise.reject(P(ae)),sendPostRequestAsync:()=>Promise.reject(P(ae))};function y_(u,n,a,r){const c=n.correlationId,h=new Map;Ph(h,n.embeddedClientId||n.extraQueryParameters?.[Xi]||u.clientId);const d=[...n.scopes||[],...n.extraScopesToConsent||[]];if(zh(h,d,!0,u.authority.options.OIDCOptions?.defaultScopes),xh(h,n.redirectUri),Kh(h,c),UE(h,n.responseMode),Yh(h),n.prompt&&(xE(h,n.prompt),r?.addFields({prompt:n.prompt},c)),n.domainHint&&(PE(h,n.domainHint),r?.addFields({domainHintFromRequest:!0},c)),n.prompt!==ht.SELECT_ACCOUNT)if(n.sid&&n.prompt===ht.NONE)a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Xp(h,n.sid),r?.addFields({sidFromRequest:!0},c);else if(n.account){const g=v_(n.account);let m=A_(n.account);if(m&&n.domainHint&&(a.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),m=null),m){a.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ns(h,m),r?.addFields({loginHintFromClaim:!0},c);try{const y=Ga(n.account.homeAccountId);tr(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(g&&n.prompt===ht.NONE){a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Xp(h,g),r?.addFields({sidFromClaim:!0},c);try{const y=Ga(n.account.homeAccountId);tr(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(n.loginHint)a.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ns(h,n.loginHint),$s(h,n.loginHint),r?.addFields({loginHintFromRequest:!0},c);else if(n.account.username){a.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ns(h,n.account.username),r?.addFields({loginHintFromUpn:!0},c);try{const y=Ga(n.account.homeAccountId);tr(h,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else n.loginHint&&(a.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ns(h,n.loginHint),$s(h,n.loginHint),r?.addFields({loginHintFromRequest:!0},c));else a.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return n.nonce&&BE(h,n.nonce),n.state&&mC(h,n.state),(n.claims||u.clientCapabilities&&u.clientCapabilities.length>0)&&Bh(h,n.claims,u.clientCapabilities),n.embeddedClientId&&hc(h,u.clientId,u.redirectUri),u.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(lh))&&vC(h),h}function Zh(u,n,a,r){const c=or(n,a,r);return ye.appendQueryString(u.authorizationEndpoint,c)}function C_(u,n){if(MC(u,n),!u.code)throw P(By);return u}function MC(u,n){if(!u.state||!n)throw u.state?P(ih,"Cached State"):P(ih,"Server State");let a,r;try{a=decodeURIComponent(u.state)}catch{throw P(Va,u.state)}try{r=decodeURIComponent(n)}catch{throw P(Va,u.state)}if(a!==r)throw P(My);if(u.error||u.error_description||u.suberror){const c=T_(u);throw IC(u.error,u.error_description,u.suberror)?new Qt(u.error||"",u.error_description,u.suberror,u.timestamp||"",u.trace_id||"",u.correlation_id||"",u.claims||"",c):new ea(u.error||"",u.error_description,u.suberror,c)}}function T_(u){const n="code=",a=u.error_uri?.lastIndexOf(n);return a&&a>=0?u.error_uri?.substring(a+n.length):void 0}function v_(u){return u.idTokenClaims?.sid||null}function A_(u){return u.loginHint||u.idTokenClaims?.login_hint||null}const iy=",",NC="|";function S_(u){const{skus:n,libraryName:a,libraryVersion:r,extensionName:c,extensionVersion:h}=u,d=new Map([[0,[a,r]],[2,[c,h]]]);let g=[];if(n?.length){if(g=n.split(iy),g.length<4)return n}else g=Array.from({length:4},()=>NC);return d.forEach((m,y)=>{m.length===2&&m[0]?.length&&m[1]?.length&&E_({skuArr:g,index:y,skuName:m[0],skuVersion:m[1]})}),g.join(iy)}function E_(u){const{skuArr:n,index:a,skuName:r,skuVersion:c}=u;a>=n.length||(n[a]=[r,c].join(NC))}class rr{constructor(n,a){this.cacheOutcome=Fi.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||H.EMPTY_STRING,this.wrapperVer=n.wrapperVer||H.EMPTY_STRING,this.telemetryCacheKey=lt.CACHE_KEY+ar.CACHE_KEY_SEPARATOR+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${lt.VALUE_SEPARATOR}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&a.push(`broker_error=${r}`);const c=a.join(lt.VALUE_SEPARATOR),h=this.getRegionDiscoveryFields(),d=[n,h].join(lt.VALUE_SEPARATOR);return[lt.SCHEMA_VERSION,d,c].join(lt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=rr.maxErrorsToSend(n),r=n.failedRequests.slice(0,2*a).join(lt.VALUE_SEPARATOR),c=n.errors.slice(0,a).join(lt.VALUE_SEPARATOR),h=n.errors.length,d=a<h?lt.OVERFLOW_TRUE:lt.OVERFLOW_FALSE,g=[h,d].join(lt.VALUE_SEPARATOR);return[lt.SCHEMA_VERSION,n.cacheHits,r,c,g].join(lt.CATEGORY_SEPARATOR)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=lt.MAX_CACHED_ERRORS&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof Oe?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(lt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=rr.maxErrorsToSend(n),r=n.errors.length;if(a===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const c={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,c,this.correlationId)}}static maxErrorsToSend(n){let a,r=0,c=0;const h=n.errors.length;for(a=0;a<h;a++){const d=n.failedRequests[2*a]||H.EMPTY_STRING,g=n.failedRequests[2*a+1]||H.EMPTY_STRING,m=n.errors[a]||H.EMPTY_STRING;if(c+=d.toString().length+g.toString().length+m.length+3,c<lt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||H.EMPTY_STRING),n.push(this.regionSource||H.EMPTY_STRING),n.push(this.regionOutcome||H.EMPTY_STRING),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return S_(n)}}const DC="missing_kid_error",UC="missing_alg_error";const __={[DC]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[UC]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class $h extends Oe{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,$h.prototype)}}function ay(u){return new $h(u,__[u])}class Wh{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw ay(DC);if(!n.alg)throw ay(UC);const a=new Wh({typ:n.typ||yS.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}const ed="pkce_not_created",td="ear_jwk_empty",HC="ear_jwe_empty",uh="crypto_nonexistent",Tc="empty_navigate_uri",LC="hash_empty_error",nd="no_state_in_hash",zC="hash_does_not_contain_known_properties",PC="unable_to_parse_state",xC="state_interaction_type_mismatch",BC="interaction_in_progress",KC="popup_window_error",GC="empty_window_error",sr="user_cancelled",b_="monitor_popup_timeout",qC="monitor_window_timeout",jC="redirect_in_iframe",YC="block_iframe_reload",QC="block_nested_popups",w_="iframe_closed_prematurely",vc="silent_logout_unsupported",FC="no_account_error",R_="silent_prompt_value_error",VC="no_token_request_cache_error",XC="unable_to_parse_token_request_cache_error",I_="auth_request_not_set_error",k_="invalid_cache_type",Ac="non_browser_environment",Ba="database_not_open",nc="no_network_connectivity",JC="post_request_failed",ZC="get_request_failed",hh="failed_to_parse_response",$C="unable_to_load_token",id="crypto_key_not_found",WC="auth_code_required",eT="auth_code_or_nativeAccountId_required",tT="spa_code_and_nativeAccountId_present",ad="database_unavailable",nT="unable_to_acquire_token_from_native_platform",iT="native_handshake_timeout",aT="native_extension_not_installed",od="native_connection_not_established",nr="uninitialized_public_client_application",oT="native_prompt_not_supported",rT="invalid_base64_string",sT="invalid_pop_token_request",cT="failed_to_build_headers",lT="failed_to_parse_headers",zs="failed_to_decrypt_ear_response",ic="timed_out";const Kn="For more visit: aka.ms/msaljs/browser-errors",O_={[ed]:"The PKCE code challenge and verifier could not be generated.",[td]:"No EAR encryption key provided. This is unexpected.",[HC]:"Server response does not contain ear_jwe property. This is unexpected.",[uh]:"The crypto object or function is not available.",[Tc]:"Navigation URI is empty. Please check stack trace for more info.",[LC]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Kn}`,[nd]:"Hash does not contain state. Please verify that the request originated from msal.",[zC]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Kn}`,[PC]:"Unable to parse state. Please verify that the request originated from msal.",[xC]:"Hash contains state but the interaction type does not match the caller.",[BC]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Kn}`,[KC]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[GC]:"window.open returned null or undefined window object.",[sr]:"User cancelled the flow.",[b_]:`Token acquisition in popup failed due to timeout.  ${Kn}`,[qC]:`Token acquisition in iframe failed due to timeout.  ${Kn}`,[jC]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[YC]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Kn}`,[QC]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[w_]:"The iframe being monitored was closed prematurely.",[vc]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[FC]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[R_]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[VC]:"No token request found in cache.",[XC]:"The cached token request could not be parsed.",[I_]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[k_]:"Invalid cache type",[Ac]:"Login and token requests are not supported in non-browser environments.",[Ba]:"Database is not open!",[nc]:"No network connectivity. Check your internet connection.",[JC]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ZC]:"Network request failed. Please check the network trace to determine root cause.",[hh]:"Failed to parse network response. Check network trace.",[$C]:"Error loading token to cache.",[id]:"Cryptographic Key or Keypair not found in browser storage.",[WC]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[eT]:"An authorization code or nativeAccountId must be provided to this flow.",[tT]:"Request cannot contain both spa code and native account id.",[ad]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[nT]:`Unable to acquire token from native platform.  ${Kn}`,[iT]:"Timed out while attempting to establish connection to browser extension",[aT]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[od]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Kn}`,[nr]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Kn}`,[oT]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[rT]:"Invalid base64 encoded string.",[sT]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[cT]:"Failed to build request headers object.",[lT]:"Failed to parse response headers",[zs]:"Failed to decrypt ear response",[ic]:"The request timed out."};class ur extends Oe{constructor(n,a){super(n,O_[n],a),Object.setPrototypeOf(this,ur.prototype),this.name="BrowserAuthError"}}function G(u,n){return new ur(u,n)}const Ot={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},rn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Jo={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},dt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},oy={GET:"GET",POST:"POST"},Ti={SIGNIN:"signin",SIGNOUT:"signout"},Je={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Us={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},fe={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},ry={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},M_=u=>typeof u=="number"&&u in ry?ry[u]:"unknown";var W;(function(u){u.Redirect="redirect",u.Popup="popup",u.Silent="silent",u.None="none"})(W||(W={}));const sy={scopes:Ja},uT="jwk",dh="msal.db",N_=1,D_=`${dh}.keys`,Tt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},U_=[Tt.Default,Tt.Skip,Tt.RefreshTokenAndNetwork];function Hs(u){return encodeURIComponent(cr(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Ri(u){return hT(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cr(u){return hT(new TextEncoder().encode(u))}function hT(u){const n=Array.from(u,a=>String.fromCodePoint(a)).join("");return btoa(n)}function At(u){return new TextDecoder().decode(bi(u))}function bi(u){let n=u.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw G(rT)}const a=atob(n);return Uint8Array.from(a,r=>r.codePointAt(0)||0)}const H_="RSASSA-PKCS1-v1_5",$a="AES-GCM",dT="HKDF",rd="SHA-256",L_=2048,z_=new Uint8Array([1,0,1]),cy="0123456789abcdef",ly=new Uint32Array(1),sd="raw",fT="encrypt",cd="decrypt",P_="deriveKey",x_="crypto_subtle_undefined",ld={name:H_,hash:rd,modulusLength:L_,publicExponent:z_};function B_(u){if(!window)throw G(Ac);if(!window.crypto)throw G(uh);if(!u&&!window.crypto.subtle)throw G(uh,x_)}async function gT(u,n,a){n?.addQueueMeasurement(T.Sha256Digest,a);const c=new TextEncoder().encode(u);return window.crypto.subtle.digest(rd,c)}function K_(u){return window.crypto.getRandomValues(u)}function Wu(){return window.crypto.getRandomValues(ly),ly[0]}function gn(){const u=Date.now(),n=Wu()*1024+(Wu()&1023),a=new Uint8Array(16),r=Math.trunc(n/2**30),c=n&2**30-1,h=Wu();a[0]=u/2**40,a[1]=u/2**32,a[2]=u/2**24,a[3]=u/2**16,a[4]=u/2**8,a[5]=u,a[6]=112|r>>>8,a[7]=r,a[8]=128|c>>>24,a[9]=c>>>16,a[10]=c>>>8,a[11]=c,a[12]=h>>>24,a[13]=h>>>16,a[14]=h>>>8,a[15]=h;let d="";for(let g=0;g<a.length;g++)d+=cy.charAt(a[g]>>>4),d+=cy.charAt(a[g]&15),(g===3||g===5||g===7||g===9)&&(d+="-");return d}async function G_(u,n){return window.crypto.subtle.generateKey(ld,u,n)}async function eh(u){return window.crypto.subtle.exportKey(uT,u)}async function q_(u,n,a){return window.crypto.subtle.importKey(uT,u,ld,n,a)}async function j_(u,n){return window.crypto.subtle.sign(ld,u,n)}async function ud(){const u=await mT(),a={alg:"dir",kty:"oct",k:Ri(new Uint8Array(u))};return cr(JSON.stringify(a))}async function Y_(u){const n=At(u),r=JSON.parse(n).k,c=bi(r);return window.crypto.subtle.importKey(sd,c,$a,!1,[cd])}async function Q_(u,n){const a=n.split(".");if(a.length!==5)throw G(zs,"jwe_length");const r=await Y_(u).catch(()=>{throw G(zs,"import_key")});try{const c=new TextEncoder().encode(a[0]),h=bi(a[2]),d=bi(a[3]),g=bi(a[4]),m=g.byteLength*8,y=new Uint8Array(d.length+g.length);y.set(d),y.set(g,d.length);const S=await window.crypto.subtle.decrypt({name:$a,iv:h,tagLength:m,additionalData:c},r,y);return new TextDecoder().decode(S)}catch{throw G(zs,"decrypt")}}async function mT(){const u=await window.crypto.subtle.generateKey({name:$a,length:256},!0,[fT,cd]);return window.crypto.subtle.exportKey(sd,u)}async function uy(u){return window.crypto.subtle.importKey(sd,u,dT,!1,[P_])}async function pT(u,n,a){return window.crypto.subtle.deriveKey({name:dT,salt:n,hash:rd,info:new TextEncoder().encode(a)},u,{name:$a,length:256},!1,[fT,cd])}async function F_(u,n,a){const r=new TextEncoder().encode(n),c=window.crypto.getRandomValues(new Uint8Array(16)),h=await pT(u,c,a),d=await window.crypto.subtle.encrypt({name:$a,iv:new Uint8Array(12)},h,r);return{data:Ri(new Uint8Array(d)),nonce:Ri(c)}}async function hy(u,n,a,r){const c=bi(r),h=await pT(u,bi(n),a),d=await window.crypto.subtle.decrypt({name:$a,iv:new Uint8Array(12)},h,c);return new TextDecoder().decode(d)}async function yT(u){const n=await gT(u),a=new Uint8Array(n);return Ri(a)}const Sc="storage_not_supported",CT="stubbed_public_client_application_called",hd="in_mem_redirect_unavailable";const Ps={[Sc]:"Given storage configuration option was not supported.",[CT]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[hd]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Ps[Sc],Ps[CT],Ps[hd];class dd extends Oe{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,dd.prototype)}}function fd(u){return new dd(u,Ps[u])}function TT(u){u.location.hash="",typeof u.history.replaceState=="function"&&u.history.replaceState(null,"",`${u.location.origin}${u.location.pathname}${u.location.search}`)}function V_(u){const n=u.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function gd(){return window.parent!==window}function X_(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Ot.POPUP_NAME_PREFIX}.`)===0}function qn(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function J_(){const n=new ye(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function Z_(){if(ye.hashContainsKnownProperties(window.location.hash)&&gd())throw G(YC)}function $_(u){if(gd()&&!u)throw G(jC)}function W_(){if(X_())throw G(QC)}function vT(){if(typeof window>"u")throw G(Ac)}function AT(u){if(!u)throw G(nr)}function md(u){vT(),Z_(),W_(),AT(u)}function dy(u,n){if(md(u),$_(n.system.allowRedirectInIframe),n.cache.cacheLocation===dt.MemoryStorage&&!n.cache.storeAuthStateInCookie)throw fd(hd)}function ST(u){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(u).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function eb(){return gn()}class ac{navigateInternal(n,a){return ac.defaultNavigateWindow(n,a)}navigateExternal(n,a){return ac.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((r,c)=>{setTimeout(()=>{c(G(ic,"failed_to_redirect"))},a.timeout)})}}class tb{async sendGetRequestAsync(n,a){let r,c={},h=0;const d=fy(a);try{r=await fetch(n,{method:oy.GET,headers:d})}catch(g){throw $o(G(window.navigator.onLine?ZC:nc),void 0,void 0,g)}c=gy(r.headers);try{return h=r.status,{headers:c,body:await r.json(),status:h}}catch(g){throw $o(G(hh),h,c,g)}}async sendPostRequestAsync(n,a){const r=a&&a.body||"",c=fy(a);let h,d=0,g={};try{h=await fetch(n,{method:oy.POST,headers:c,body:r})}catch(m){throw $o(G(window.navigator.onLine?JC:nc),void 0,void 0,m)}g=gy(h.headers);try{return d=h.status,{headers:g,body:await h.json(),status:d}}catch(m){throw $o(G(hh),d,g,m)}}}function fy(u){try{const n=new Headers;if(!(u&&u.headers))return n;const a=u.headers;return Object.entries(a).forEach(([r,c])=>{n.append(r,c)}),n}catch(n){throw $o(G(cT),void 0,void 0,n)}}function gy(u){try{const n={};return u.forEach((a,r)=>{n[r]=a}),n}catch{throw G(lT)}}const nb=6e4,fh=1e4,ib=3e4,ET=2e3;function ab({auth:u,cache:n,system:a,telemetry:r},c){const h={clientId:H.EMPTY_STRING,authority:`${H.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:H.EMPTY_STRING,authorityMetadata:H.EMPTY_STRING,redirectUri:typeof window<"u"?qn():"",postLogoutRedirectUri:H.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Mt.AAD,OIDCOptions:{serverResponseType:sc.FRAGMENT,defaultScopes:[H.OPENID_SCOPE,H.PROFILE_SCOPE,H.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Rh.None,tenant:H.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},d={cacheLocation:dt.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(n&&n.cacheLocation===dt.LocalStorage),claimsBasedCachingEnabled:!1},g={loggerCallback:()=>{},logLevel:Le.Info,piiLoggingEnabled:!1},y={...{...uC,loggerOptions:g,networkClient:c?new tb:p_,navigationClient:new ac,loadFrameTimeout:0,windowHashTimeout:a?.loadFrameTimeout||nb,iframeHashTimeout:a?.loadFrameTimeout||fh,navigateFrameWait:0,redirectNavigationTimeout:ib,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,allowPlatformBrokerWithDOM:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||ET,pollIntervalMilliseconds:Ot.DEFAULT_POLL_INTERVAL_MS},...a,loggerOptions:a?.loggerOptions||g},S={application:{appName:H.EMPTY_STRING,appVersion:H.EMPTY_STRING},client:new lC};if(u?.protocolMode!==Mt.OIDC&&u?.OIDCOptions&&new wi(y.loggerOptions).warning(JSON.stringify(ke(Wy))),u?.protocolMode&&u.protocolMode===Mt.OIDC&&y?.allowPlatformBroker)throw ke(eC);return{auth:{...h,...u,OIDCOptions:{...h.OIDCOptions,...u?.OIDCOptions}},cache:{...d,...n},system:y,telemetry:{...S,...r}}}const ob="@azure/msal-browser",Zi="4.28.0";const pt="msal",_T="browser",my="|",gt=2,xs=2,rb=`${pt}.${_T}.log.level`,sb=`${pt}.${_T}.log.pii`,py=`${pt}.version`,yy="account.keys",Cy="token.keys";function Ya(u=xs){return u<1?`${pt}.${yy}`:`${pt}.${u}.${yy}`}function Qa(u,n=gt){return n<1?`${pt}.${Cy}.${u}`:`${pt}.${n}.${Cy}.${u}`}class pd{static loggerCallback(n,a){switch(n){case Le.Error:console.error(a);return;case Le.Info:console.info(a);return;case Le.Verbose:console.debug(a);return;case Le.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=ab(n,this.browserEnvironment);let a;try{a=window[dt.SessionStorage]}catch{}const r=a?.getItem(rb),c=a?.getItem(sb)?.toLowerCase(),h=c==="true"?!0:c==="false"?!1:void 0,d={...this.config.system.loggerOptions},g=r&&Object.keys(Le).includes(r)?Le[r]:void 0;g&&(d.loggerCallback=pd.loggerCallback,d.logLevel=g),h!==void 0&&(d.piiLoggingEnabled=h),this.logger=new wi(d,ob,Zi),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class $i extends pd{getModuleName(){return $i.MODULE_NAME}getId(){return $i.ID}async initialize(){return this.available=typeof window<"u",this.available}}$i.MODULE_NAME="";$i.ID="StandardOperatingContext";class cb{constructor(){this.dbName=dh,this.version=N_,this.tableName=D_,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",c=>{c.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",c=>{const h=c;this.db=h.target.result,this.dbOpen=!0,n()}),r.addEventListener("error",()=>a(G(ad)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(Ba));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);d.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result)}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((r,c)=>{if(!this.db)return c(G(Ba));const g=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);g.addEventListener("success",()=>{this.closeConnection(),r()}),g.addEventListener("error",m=>{this.closeConnection(),c(m)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(Ba));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);d.addEventListener("success",()=>{this.closeConnection(),a()}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(G(Ba));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();h.addEventListener("success",d=>{const g=d;this.closeConnection(),n(g.target.result)}),h.addEventListener("error",d=>{this.closeConnection(),a(d)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(G(Ba));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);d.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result===1)}),d.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const r=window.indexedDB.deleteDatabase(dh),c=setTimeout(()=>a(!1),200);r.addEventListener("success",()=>(clearTimeout(c),n(!0))),r.addEventListener("blocked",()=>(clearTimeout(c),n(!0))),r.addEventListener("error",()=>(clearTimeout(c),a(!1)))})}}class Ec{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,r)=>{n.push(r)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class lb{constructor(n){this.inMemoryCache=new Ec,this.indexedDBCache=new cb,this.logger=n}handleDatabaseAccessError(n){if(n instanceof ur&&n.errorCode===ad)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw n}async getItem(n){const a=this.inMemoryCache.getItem(n);if(!a)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r)}return a}async setItem(n,a){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(n){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(a){this.handleDatabaseAccessError(a)}}async getKeys(){const n=this.inMemoryCache.getKeys();if(n.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(a){this.handleDatabaseAccessError(a)}return n}async containsKey(n){const a=this.inMemoryCache.containsKey(n);if(!a)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r)}return a}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const n=await this.indexedDBCache.deleteDatabase();return n&&this.logger.verbose("Persistent keystore deleted"),n}catch(n){return this.handleDatabaseAccessError(n),!1}}}class jn{constructor(n,a,r){this.logger=n,B_(r??!1),this.cache=new lb(this.logger),this.performanceClient=a}createNewGuid(){return gn()}base64Encode(n){return cr(n)}base64Decode(n){return At(n)}base64UrlEncode(n){return Hs(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(T.CryptoOptsGetPublicKeyThumbprint,n.correlationId),r=await G_(jn.EXTRACTABLE,jn.POP_KEY_USAGES),c=await eh(r.publicKey),h={e:c.e,kty:c.kty,n:c.n},d=Ty(h),g=await this.hashString(d),m=await eh(r.privateKey),y=await q_(m,!1,["sign"]);return await this.cache.setItem(g,{privateKey:y,publicKey:r.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri}),a&&a.end({success:!0}),g}async removeTokenBindingKey(n){if(await this.cache.removeItem(n),await this.cache.containsKey(n))throw P(Ky)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(n){return n instanceof Error?this.logger.error(`Clearing keystore failed with error: ${n.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(n,a,r,c){const h=this.performanceClient?.startMeasurement(T.CryptoOptsSignJwt,c),d=await this.cache.getItem(a);if(!d)throw G(id);const g=await eh(d.publicKey),m=Ty(g),y=Hs(JSON.stringify({kid:a})),S=Wh.getShrHeaderString({...r?.header,alg:g.alg,kid:y}),_=Hs(S);n.cnf={jwk:JSON.parse(m)};const O=Hs(JSON.stringify(n)),x=`${_}.${O}`,Q=new TextEncoder().encode(x),Te=await j_(d.privateKey,Q),ve=Ri(new Uint8Array(Te)),he=`${x}.${ve}`;return h&&h.end({success:!0}),he}async hashString(n){return yT(n)}}jn.POP_KEY_USAGES=["sign","verify"];jn.EXTRACTABLE=!0;function Ty(u){return JSON.stringify(u,Object.keys(u).sort())}const ub=1440*60*1e3,gh={Lax:"Lax",None:"None"};class bT{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,r=document.cookie.split(";");for(let c=0;c<r.length;c++){const h=r[c],[d,...g]=decodeURIComponent(h).trim().split("="),m=g.join("=");if(d===a)return m}return""}getUserData(){throw P(ae)}setItem(n,a,r,c=!0,h=gh.Lax){let d=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${h};`;if(r){const g=hb(r);d+=`expires=${g};`}(c||h===gh.None)&&(d+="Secure;"),document.cookie=d}async setUserData(){return Promise.reject(P(ae))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(r=>{const c=decodeURIComponent(r).trim().split("=");a.push(c[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function hb(u){const n=new Date;return new Date(n.getTime()+u*ub).toUTCString()}function Ci(u,n){const a=u.getItem(Ya(n));return a?JSON.parse(a):[]}function hn(u,n,a){const r=n.getItem(Qa(u,a));if(r){const c=JSON.parse(r);if(c&&c.hasOwnProperty("idToken")&&c.hasOwnProperty("accessToken")&&c.hasOwnProperty("refreshToken"))return c}return{idToken:[],accessToken:[],refreshToken:[]}}function Bs(u){return u.hasOwnProperty("id")&&u.hasOwnProperty("nonce")&&u.hasOwnProperty("data")}const vy="msal.cache.encryption",db="msal.broadcast.cache";class fb{constructor(n,a,r){if(!window.localStorage)throw fd(Sc);this.memoryStorage=new Ec,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=r,this.broadcast=new BroadcastChannel(db)}async initialize(n){const a=new bT,r=a.getItem(vy);let c={key:"",id:""};if(r)try{c=JSON.parse(r)}catch{}if(c.key&&c.id){const h=Yt(bi,T.Base64Decode,this.logger,this.performanceClient,n)(c.key);this.encryptionCookie={id:c.id,key:await k(uy,T.GenerateHKDF,this.logger,this.performanceClient,n)(h)}}else{const h=gn(),d=await k(mT,T.GenerateBaseKey,this.logger,this.performanceClient,n)(),g=Yt(Ri,T.UrlEncodeArr,this.logger,this.performanceClient,n)(new Uint8Array(d));this.encryptionCookie={id:h,key:await k(uy,T.GenerateHKDF,this.logger,this.performanceClient,n)(d)};const m={id:h,key:g};a.setItem(vy,JSON.stringify(m),0,!0,gh.None)}await k(this.importExistingCache.bind(this),T.ImportExistingCache,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw G(nr);return this.memoryStorage.getItem(n)}async decryptData(n,a,r){if(!this.initialized||!this.encryptionCookie)throw G(nr);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const c=await k(hy,T.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!c)return null;try{return{...JSON.parse(c),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,r,c,h){if(!this.initialized||!this.encryptionCookie)throw G(nr);if(h)this.setItem(n,a);else{const{data:d,nonce:g}=await k(F_,T.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a,this.getContext(n)),m={id:this.encryptionCookie.id,nonce:g,data:d,lastUpdatedAt:c};this.setItem(n,JSON.stringify(m))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),Ci(this).forEach(r=>this.removeItem(r));const a=hn(this.clientId,this);a.idToken.forEach(r=>this.removeItem(r)),a.accessToken.forEach(r=>this.removeItem(r)),a.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(pt)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=Ci(this);a=await this.importArray(a,n),a.length?this.setItem(Ya(),JSON.stringify(a)):this.removeItem(Ya());const r=hn(this.clientId,this);r.idToken=await this.importArray(r.idToken,n),r.accessToken=await this.importArray(r.accessToken,n),r.refreshToken=await this.importArray(r.refreshToken,n),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Qa(this.clientId),JSON.stringify(r)):this.removeItem(Qa(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const r=this.getItem(n);if(!r)return null;let c;try{c=JSON.parse(r)}catch{return null}return Bs(c)?c.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),k(hy,T.Decrypt,this.logger,this.performanceClient,a)(this.encryptionCookie.key,c.nonce,this.getContext(n),c.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),r)}async importArray(n,a){const r=[],c=[];return n.forEach(h=>{const d=this.getItemFromEncryptedCache(h,a).then(g=>{g?(this.memoryStorage.setItem(h,g),r.push(h)):this.removeItem(h)});c.push(d)}),await Promise.all(c),r}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n){this.logger.trace("Updating internal cache from broadcast event");const a=this.performanceClient.startMeasurement(T.LocalStorageUpdated);a.add({isBackground:!0});const{key:r,value:c,context:h}=n.data;if(!r){this.logger.error("Broadcast event missing key"),a.end({success:!1,errorCode:"noKey"});return}if(h&&h!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${h}`),a.end({success:!1,errorCode:"contextMismatch"});return}c?(this.memoryStorage.setItem(r,c),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),a.end({success:!0})}}class gb{constructor(){if(!window.sessionStorage)throw fd(Sc)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const J={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function yi(u,n){const a=u.indexOf(n);a>-1&&u.splice(a,1)}class mh extends ch{constructor(n,a,r,c,h,d,g){super(n,r,c,h,g),this.cacheConfig=a,this.logger=c,this.internalStorage=new Ec,this.browserStorage=Ay(n,a.cacheLocation,c,h),this.temporaryCacheStorage=Ay(n,a.temporaryCacheLocation,c,h),this.cookieStorage=new bT,this.eventHandler=d}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=Ci(this.browserStorage),r=hn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},n);for(let h=0;h<xs;h++){const d=h;await this.removeStaleAccounts(h,d,n)}for(let h=0;h<gt;h++){const d=h;await this.migrateIdTokens(h,d,n)}const c=this.getKMSIValues();for(let h=0;h<gt;h++)await this.migrateAccessTokens(h,c,n),await this.migrateRefreshTokens(h,c,n);a=Ci(this.browserStorage),r=hn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},n)}async updateOldEntry(n,a){const r=this.browserStorage.getItem(n),c=this.validateAndParseJson(r||"");if(!c)return this.browserStorage.removeItem(n),null;if(!c.lastUpdatedAt)c.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(c),a);else if(Zp(c.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const h=Bs(c)?await this.browserStorage.decryptData(n,c,a):c;return!h||!mc(h)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):($p(h)||Wp(h))&&h.expiresOn&&Ws(h.expiresOn,by)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):h}async removeStaleAccounts(n,a,r){const c=Ci(this.browserStorage,n);if(c.length!==0){for(const h of[...c]){this.performanceClient.incrementFields({oldAcntCount:1},r);const d=this.browserStorage.getItem(h),g=this.validateAndParseJson(d||"");if(!g){yi(c,h);continue}if(g.lastUpdatedAt)Zp(g.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(h,g,a,r),yi(c,h));else{g.lastUpdatedAt=Date.now().toString(),this.setItem(h,JSON.stringify(g),r);continue}}this.setAccountKeys(c,r,n)}}async removeAccountOldSchema(n,a,r,c){const d=(Bs(a)?await this.browserStorage.decryptData(n,a,c):a)?.homeAccountId;if(d){const g=this.getTokenKeys(r);[...g.idToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),yi(g.idToken,m)}),[...g.accessToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),yi(g.accessToken,m)}),[...g.refreshToken].filter(m=>m.includes(d)).forEach(m=>{this.browserStorage.removeItem(m),yi(g.refreshToken,m)}),this.setTokenKeys(g,c,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},c),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const r of a){const c=this.browserStorage.getUserData(r);if(c){const h=JSON.parse(c),d=An(h.secret,At);d&&(n[h.homeAccountId]=Sn(d))}}return n}async migrateIdTokens(n,a,r){const c=hn(this.clientId,this.browserStorage,n);if(c.idToken.length===0)return;const h=hn(this.clientId,this.browserStorage,gt),d=Ci(this.browserStorage),g=Ci(this.browserStorage,a);for(const m of[...c.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const y=await this.updateOldEntry(m,r);if(!y){yi(c.idToken,m);continue}const S=d.find(he=>he.includes(y.homeAccountId)),_=g.find(he=>he.includes(y.homeAccountId));let O=null;if(S)O=this.getAccount(S,r);else if(_){const he=this.browserStorage.getItem(_),ge=this.validateAndParseJson(he||"");O=ge&&Bs(ge)?await this.browserStorage.decryptData(_,ge,r):ge}if(!O){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const x=An(y.secret,At),ee=this.generateCredentialKey(y),Q=this.getIdTokenCredential(ee,r),Te=Object.keys(x).includes("signin_state"),ve=Q&&Object.keys(An(Q.secret,At)||{}).includes("signin_state");if(!Q||y.lastUpdatedAt>Q.lastUpdatedAt&&(Te||!ve)){const he=O.tenantProfiles||[],ge=Dh(x)||O.realm;if(ge&&!he.find(Ge=>Ge.tenantId===ge)){const Ge=lc(O.homeAccountId,O.localAccountId,ge,x);he.push(Ge)}O.tenantProfiles=he;const Pe=this.generateAccountKey(Ke.getAccountInfo(O)),ze=Sn(x);await this.setUserData(Pe,JSON.stringify(O),r,O.lastUpdatedAt,ze),d.includes(Pe)||d.push(Pe),await this.setUserData(ee,JSON.stringify(y),r,y.lastUpdatedAt,ze),this.performanceClient.incrementFields({migratedITCount:1},r),h.idToken.push(ee)}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r),this.setAccountKeys(d,r)}async migrateAccessTokens(n,a,r){const c=hn(this.clientId,this.browserStorage,n);if(c.accessToken.length===0)return;const h=hn(this.clientId,this.browserStorage,gt);for(const d of[...c.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const g=await this.updateOldEntry(d,r);if(!g){yi(c.accessToken,d);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!h.accessToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r),h.accessToken.push(m);else{const S=this.getAccessTokenCredential(m,r);(!S||g.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r)}async migrateRefreshTokens(n,a,r){const c=hn(this.clientId,this.browserStorage,n);if(c.refreshToken.length===0)return;const h=hn(this.clientId,this.browserStorage,gt);for(const d of[...c.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const g=await this.updateOldEntry(d,r);if(!g){yi(c.refreshToken,d);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!h.refreshToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r),h.refreshToken.push(m);else{const S=this.getRefreshTokenCredential(m,r);(!S||g.lastUpdatedAt>S.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(c,r,n),this.setTokenKeys(h,r)}trackVersionChanges(n){const a=this.browserStorage.getItem(py);a&&(this.logger.info(`MSAL.js was last initialized by version: ${a}`),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==Zi&&this.setItem(py,Zi,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,r){const c=new Array(gt+1).fill(0),h=[],d=20;for(let g=0;g<=d;g++)try{if(this.browserStorage.setItem(n,a),g>0)for(let m=0;m<=gt;m++){const y=c.slice(0,m).reduce((_,O)=>_+O,0);if(y>=g)break;const S=g>y+c[m]?y+c[m]:g;g>y&&c[m]>0&&this.removeAccessTokenKeys(h.slice(y,S),r,m)}break}catch(m){const y=sh(m);if(y.errorCode===Xs&&g<d){if(!h.length)for(let S=0;S<=gt;S++)if(n===Qa(this.clientId,S)){const _=JSON.parse(a).accessToken;h.push(..._),c[S]=_.length}else{const _=this.getTokenKeys(S).accessToken;h.push(..._),c[S]=_.length}if(h.length<=g)throw y;this.removeAccessToken(h[g],r,!1)}else throw y}}async setUserData(n,a,r,c,h){const d=new Array(gt+1).fill(0),g=[],m=20;for(let y=0;y<=m;y++)try{if(await k(this.browserStorage.setUserData.bind(this.browserStorage),T.SetUserData,this.logger,this.performanceClient)(n,a,r,c,h),y>0)for(let S=0;S<=gt;S++){const _=d.slice(0,S).reduce((x,ee)=>x+ee,0);if(_>=y)break;const O=y>_+d[S]?_+d[S]:y;y>_&&d[S]>0&&this.removeAccessTokenKeys(g.slice(_,O),r,S)}break}catch(S){const _=sh(S);if(_.errorCode===Xs&&y<m){if(!g.length)for(let O=0;O<=gt;O++){const x=this.getTokenKeys(O).accessToken;g.push(...x),d[O]=x.length}if(g.length<=y)throw _;this.removeAccessToken(g[y],r,!1)}else throw _}}getAccount(n,a){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(n);if(!r)return this.removeAccountKeyFromMap(n,a),null;const c=this.validateAndParseJson(r);return!c||!Ke.isAccountEntity(c)?null:(this.performanceClient.addFields({accountCachedBy:M_(c.cachedByApiId)},a),ch.toObject(new Ke,c))}async setAccount(n,a,r,c){this.logger.trace("BrowserCacheManager.setAccount called");const h=this.generateAccountKey(Ke.getAccountInfo(n)),d=Date.now().toString();n.lastUpdatedAt=d,n.cachedByApiId=c,await this.setUserData(h,JSON.stringify(n),a,d,r);const g=this.addAccountKeyToMap(h,a);this.performanceClient.addFields({kmsi:r},a),this.cacheConfig.cacheLocation===dt.LocalStorage&&g&&this.eventHandler.emitEvent(J.ACCOUNT_ADDED,void 0,Ke.getAccountInfo(n))}getAccountKeys(){return Ci(this.browserStorage)}setAccountKeys(n,a,r=xs){n.length===0?this.removeItem(Ya(r)):this.setItem(Ya(r),JSON.stringify(n),a)}addAccountKeyToMap(n,a){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${n}`);const r=this.getAccountKeys();return r.indexOf(n)===-1?(r.push(n),this.setItem(Ya(),JSON.stringify(r),a),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${n}`);const r=this.getAccountKeys(),c=r.indexOf(n);c>-1?(r.splice(c,1),this.setAccountKeys(r,a),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(n,a){const r=this.getActiveAccount(a);r?.homeAccountId===n.homeAccountId&&r?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(c=>{c.includes(n.homeAccountId)&&c.includes(n.environment)&&this.browserStorage.removeItem(c)}),this.cacheConfig.cacheLocation===dt.LocalStorage&&this.eventHandler.emitEvent(J.ACCOUNT_REMOVED,void 0,n)}removeIdToken(n,a){super.removeIdToken(n,a);const r=this.getTokenKeys(),c=r.idToken.indexOf(n);c>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(c,1),this.setTokenKeys(r,a))}removeAccessToken(n,a,r=!0){super.removeAccessToken(n,a),r&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,r=gt){this.logger.trace("removeAccessTokenKey called");const c=this.getTokenKeys(r);let h=0;if(n.forEach(d=>{const g=c.accessToken.indexOf(d);g>-1&&(c.accessToken.splice(g,1),h++)}),h>0){this.logger.info(`removed ${h} accessToken keys from tokenKeys map`),this.setTokenKeys(c,a,r);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const r=this.getTokenKeys(),c=r.refreshToken.indexOf(n);c>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(c,1),this.setTokenKeys(r,a))}getTokenKeys(n=gt){return hn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,r=gt){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(Qa(this.clientId,r));return}else this.setItem(Qa(this.clientId,r),JSON.stringify(n),a)}getIdTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(n,a),null;const c=this.validateAndParseJson(r);return!c||!$E(c)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),c)}async setIdTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys();d.idToken.indexOf(c)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),d.idToken.push(c),this.setTokenKeys(d,a))}getAccessTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([n],a),null;const c=this.validateAndParseJson(r);return!c||!$p(c)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),c)}async setAccessTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys(),g=d.accessToken.indexOf(c);g!==-1&&d.accessToken.splice(g,1),this.logger.trace(`access token ${g===-1?"added to":"updated in"} map`),d.accessToken.push(c),this.setTokenKeys(d,a)}getRefreshTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(n,a),null;const c=this.validateAndParseJson(r);return!c||!Wp(c)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),c)}async setRefreshTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const c=this.generateCredentialKey(n),h=Date.now().toString();n.lastUpdatedAt=h,await this.setUserData(c,JSON.stringify(n),a,h,r);const d=this.getTokenKeys();d.refreshToken.indexOf(c)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),d.refreshToken.push(c),this.setTokenKeys(d,a))}getAppMetadata(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!n_(n,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(n,a){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=t_(n);this.setItem(r,JSON.stringify(n),a)}getServerTelemetry(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!WE(n,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(n,a,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(n,JSON.stringify(a),r)}getAuthorityMetadata(n){const a=this.internalStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return r&&i_(n,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(Us.WRAPPER_SKU,n),this.internalStorage.setItem(Us.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(Us.WRAPPER_SKU)||H.EMPTY_STRING,a=this.internalStorage.getItem(Us.WRAPPER_VER)||H.EMPTY_STRING;return[n,a]}setAuthorityMetadata(n,a){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(Pp.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(a);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const c=this.validateAndParseJson(r);return c?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:c.homeAccountId,localAccountId:c.localAccountId,tenantId:c.tenantId},n)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(n,a){const r=this.generateCacheKey(Pp.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("setActiveAccount: Active account set");const c={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId,lastUpdatedAt:Nt().toString()};this.setItem(r,JSON.stringify(c),a)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(J.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!e_(n,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(n,a,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(n,JSON.stringify(a),r)}getTemporaryCache(n,a){const r=a?this.generateCacheKey(n):n;if(this.cacheConfig.storeAuthStateInCookie){const h=this.cookieStorage.getItem(r);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),h}const c=this.temporaryCacheStorage.getItem(r);if(!c){if(this.cacheConfig.cacheLocation===dt.LocalStorage){const h=this.browserStorage.getItem(r);if(h)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),h}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),c}setTemporaryCache(n,a,r){const c=r?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(c,a),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(c,a,void 0,this.cacheConfig.secureCookies))}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(n))}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(pt)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(pt)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(n){this.performanceClient.addQueueMeasurement(T.ClearTokensAndKeysWithClaims,n);const a=this.getTokenKeys();let r=0;a.accessToken.forEach(c=>{const h=this.getAccessTokenCredential(c,n);h?.requestedClaimsHash&&c.includes(h.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(c,n),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(n){return jt.startsWith(n,pt)?n:`${pt}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===ut.REFRESH_TOKEN&&n.familyId||n.clientId,r=n.tokenType&&n.tokenType.toLowerCase()!==be.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${pt}.${gt}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",n.requestedClaimsHash||"",r].join(my).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${pt}.${xs}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(my).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Je.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Je.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Je.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Je.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Je.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(n,a){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=cr(JSON.stringify(n));if(this.setTemporaryCache(Je.REQUEST_PARAMS,r,!0),a){const c=cr(a);this.setTemporaryCache(Je.VERIFIER,c,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(Je.REQUEST_PARAMS,!0);if(!n)throw G(VC);const a=this.getTemporaryCache(Je.VERIFIER,!0);let r,c="";try{r=JSON.parse(At(n)),a&&(c=At(a))}catch(h){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${h}`),G(XC)}return[r,c]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const n=this.getTemporaryCache(Je.NATIVE_REQUEST,!0);if(!n)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${pt}.${Je.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(n),this.resetRequestCache(),TT(window),null}}setInteractionInProgress(n,a=Ti.SIGNIN){const r=`${pt}.${Je.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())throw G(BC);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(n,a){const r=fc(n.account?.homeAccountId,n.account?.environment,n.idToken,this.clientId,n.tenantId);let c;a.claims&&(c=await this.cryptoImpl.hashString(a.claims));const h=gc(n.account?.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?Jp(n.expiresOn):0,n.extExpiresOn?Jp(n.extExpiresOn):0,At,void 0,n.tokenType,void 0,a.sshKid,a.claims,c),d={idToken:r,accessToken:h};return this.saveCacheRecord(d,n.correlationId,Sn(An(n.idToken,At)),fe.hydrateCache)}async saveCacheRecord(n,a,r,c,h){try{await super.saveCacheRecord(n,a,r,c,h)}catch(d){if(d instanceof qa&&this.performanceClient&&a)try{const g=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:g.refreshToken.length,cacheIdCount:g.idToken.length,cacheAtCount:g.accessToken.length},a)}catch{}throw d}}}function Ay(u,n,a,r){try{switch(n){case dt.LocalStorage:return new fb(u,a,r);case dt.SessionStorage:return new gb;case dt.MemoryStorage:default:break}}catch(c){a.error(c)}return new Ec}const mb=(u,n,a,r)=>{const c={cacheLocation:dt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new mh(u,c,Ys,n,a,r)};function pb(u,n,a,r,c){return u.verbose("getAllAccounts called"),a?n.getAllAccounts(c||{},r):[]}function yb(u,n,a,r){const c=a.getAccountInfoFilteredBy(u,r);return c?(n.verbose("getAccount: Account matching provided filter found, returning"),c):(n.verbose("getAccount: No matching account found, returning null"),null)}function Cb(u,n,a,r){if(n.trace("getAccountByUsername called"),!u)return n.warning("getAccountByUsername: No username provided"),null;const c=a.getAccountInfoFilteredBy({username:u},r);return c?(n.verbose("getAccountByUsername: Account matching username found, returning"),n.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${u}`),c):(n.verbose("getAccountByUsername: No matching account found, returning null"),null)}function Tb(u,n,a,r){if(n.trace("getAccountByHomeId called"),!u)return n.warning("getAccountByHomeId: No homeAccountId provided"),null;const c=a.getAccountInfoFilteredBy({homeAccountId:u},r);return c?(n.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),n.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${u}`),c):(n.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function vb(u,n,a,r){if(n.trace("getAccountByLocalId called"),!u)return n.warning("getAccountByLocalId: No localAccountId provided"),null;const c=a.getAccountInfoFilteredBy({localAccountId:u},r);return c?(n.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),n.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${u}`),c):(n.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Ab(u,n,a){n.setActiveAccount(u,a)}function Sb(u,n){return u.getActiveAccount(n)}const Eb="msal.broadcast.event";class _b{constructor(n){this.eventCallbacks=new Map,this.logger=n||new wi({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Eb)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,r){if(typeof window<"u"){const c=r||eb();return this.eventCallbacks.has(c)?(this.logger.error(`Event callback with id: ${c} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(c,[n,a||[]]),this.logger.verbose(`Event callback registered with id: ${c}`),c)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose(`Event callback ${n} removed.`)}emitEvent(n,a,r,c){const h={eventType:n,interactionType:a||null,payload:r||null,error:c||null,timestamp:Date.now()};switch(n){case J.ACCOUNT_ADDED:case J.ACCOUNT_REMOVED:case J.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(h);break;default:this.invokeCallbacks(h);break}}invokeCallbacks(n){this.eventCallbacks.forEach(([a,r],c)=>{(r.length===0||r.includes(n.eventType))&&(this.logger.verbose(`Emitting event to callback ${c}: ${n.eventType}`),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class wT{constructor(n,a,r,c,h,d,g,m,y){this.config=n,this.browserStorage=a,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=h,this.navigationClient=d,this.platformAuthProvider=m,this.correlationId=y||gn(),this.logger=c.clone(Ot.MSAL_SKU,Zi,this.correlationId),this.performanceClient=g}async clearCacheOnLogout(n,a){if(a)try{this.browserStorage.removeAccount(a,n),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(n),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(n){this.logger.verbose("getRedirectUri called");const a=n||this.config.auth.redirectUri;return ye.getAbsoluteUrl(a,qn())}initializeServerTelemetryManager(n,a){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:n,forceRefresh:a||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new rr(r,this.browserStorage)}async getDiscoveredAuthority(n){const{account:a}=n,r=n.requestExtraQueryParameters&&n.requestExtraQueryParameters.hasOwnProperty("instance_aware")?n.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(T.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const c={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},h=n.requestAuthority||this.config.auth.authority,d=r?.length?r==="true":this.config.auth.instanceAware,g=a&&d?this.config.auth.authority.replace(ye.getDomainFromUrl(h),a.environment):h,m=mt.generateAuthority(g,n.requestAzureCloudOptions||this.config.auth.azureCloudOptions),y=await k(wC,T.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(m,this.config.system.networkClient,this.browserStorage,c,this.logger,this.correlationId,this.performanceClient);if(a&&!y.isAlias(a.environment))throw ke(tC);return y}}async function yd(u,n,a,r){a.addQueueMeasurement(T.InitializeBaseRequest,u.correlationId);const c=u.authority||n.auth.authority,h=[...u&&u.scopes||[]],d={...u,correlationId:u.correlationId,authority:c,scopes:h};if(!d.authenticationScheme)d.authenticationScheme=be.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(d.authenticationScheme===be.SSH){if(!u.sshJwk)throw ke(cc);if(!u.sshKid)throw ke($y)}r.verbose(`Authentication Scheme set to "${d.authenticationScheme}" as configured in Auth request`)}return n.cache.claimsBasedCachingEnabled&&u.claims&&!jt.isEmptyObj(u.claims)&&(d.requestedClaimsHash=await yT(u.claims)),d}async function bb(u,n,a,r,c){r.addQueueMeasurement(T.InitializeSilentRequest,u.correlationId);const h=await k(yd,T.InitializeBaseRequest,c,r,u.correlationId)(u,a,r,c);return{...u,...h,account:n,forceRefresh:u.forceRefresh||!1}}function RT(u,n){let a;const r=u.httpMethod;if(n===Mt.EAR){if(a=r||Vi.POST,a!==Vi.POST)throw ke(nC)}else a=r||Vi.GET;if(u.authorizePostBodyParameters&&a!==Vi.POST)throw ke(iC);return a}class Wa extends wT{initializeLogoutRequest(n){this.logger.verbose("initializeLogoutRequest called",n?.correlationId);const a={correlationId:this.correlationId||gn(),...n};if(n)if(n.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(n.account){const r=this.getLogoutHintFromIdTokenClaims(n.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),a.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",a.correlationId),a.postLogoutRedirectUri=ye.getAbsoluteUrl(n.postLogoutRedirectUri,qn())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",a.correlationId),a.postLogoutRedirectUri=ye.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,qn())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",a.correlationId),a.postLogoutRedirectUri=ye.getAbsoluteUrl(qn(),qn())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(n){this.performanceClient.addQueueMeasurement(T.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await k(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(n);return new OC(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:r,requestAzureCloudOptions:c,requestExtraQueryParameters:h,account:d}=n;this.performanceClient.addQueueMeasurement(T.StandardInteractionClientGetClientConfiguration,this.correlationId);const g=n.authority||await k(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:c,requestExtraQueryParameters:h,account:d}),m=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:g,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:m.loggerCallback,piiLoggingEnabled:m.piiLoggingEnabled,logLevel:m.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:Ot.MSAL_SKU,version:Zi,cpu:H.EMPTY_STRING,os:H.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(n,a){this.performanceClient.addQueueMeasurement(T.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(n.redirectUri),c={interactionType:a},h=Za.setRequestState(this.browserCrypto,n&&n.state||H.EMPTY_STRING,c),g={...await k(yd,T.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...n,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:h,nonce:n.nonce||gn(),responseMode:this.config.auth.OIDCOptions.serverResponseType},m={...g,httpMethod:RT(g,this.config.auth.protocolMode)};if(n.loginHint||n.sid)return m;const y=n.account||this.browserStorage.getActiveAccount(this.correlationId);return y&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${y.homeAccountId}`,this.correlationId),m.account=y),m}}function wb(u,n){if(!n)return null;try{return Za.parseRequestState(u,n).libraryState.meta}catch{throw P(Va)}}function ir(u,n,a){const r=Fs(u);if(!r)throw rC(u)?(a.error(`A ${n} is present in the iframe but it does not contain known properties. It's likely that the ${n} has been replaced by code running on the redirectUri page.`),a.errorPii(`The ${n} detected is: ${u}`),G(zC)):(a.error(`The request has returned to the redirectUri but a ${n} is not present. It's likely that the ${n} has been removed or the page has been redirected by code running on the redirectUri page.`),G(LC));return r}function Rb(u,n,a){if(!u.state)throw G(nd);const r=wb(n,u.state);if(!r)throw G(PC);if(r.interactionType!==a)throw G(xC)}class IT{constructor(n,a,r,c,h){this.authModule=n,this.browserStorage=a,this.authCodeRequest=r,this.logger=c,this.performanceClient=h}async handleCodeResponse(n,a,r){this.performanceClient.addQueueMeasurement(T.HandleCodeResponse,a.correlationId);let c;try{c=C_(n,a.state)}catch(h){throw h instanceof ea&&h.subError===sr?G(sr):h}return k(this.handleCodeResponseFromServer.bind(this),T.HandleCodeResponseFromServer,this.logger,this.performanceClient,a.correlationId)(c,a,r)}async handleCodeResponseFromServer(n,a,r,c=!0){if(this.performanceClient.addQueueMeasurement(T.HandleCodeResponseFromServer,a.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=n.code,n.cloud_instance_host_name&&await k(this.authModule.updateAuthority.bind(this.authModule),T.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,a.correlationId)(n.cloud_instance_host_name,a.correlationId),c&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const d=this.createCcsCredentials(a);d&&(this.authCodeRequest.ccsCredential=d)}return await k(this.authModule.acquireToken.bind(this.authModule),T.AuthClientAcquireToken,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,r,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:fn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:fn.UPN}:null}}const Ib="ContentError",kb="PageException",kT="user_switch";const Ob="USER_INTERACTION_REQUIRED",Mb="USER_CANCEL",Nb="NO_NETWORK",Db="DISABLED",Ub="ACCOUNT_UNAVAILABLE",Hb="UX_NOT_ALLOWED";const Lb=-2147186943,zb={[kT]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class vn extends Oe{constructor(n,a,r){super(n,a),Object.setPrototypeOf(this,vn.prototype),this.name="NativeAuthError",this.ext=r}}function Ka(u){if(u.ext&&u.ext.status&&u.ext.status===Db||u.ext&&u.ext.error&&u.ext.error===Lb)return!0;switch(u.errorCode){case Ib:case kb:return!0;default:return!1}}function oc(u,n,a){if(a&&a.status)switch(a.status){case Ub:return tc(RC);case Ob:return new Qt(u,n);case Mb:return G(sr);case Nb:return G(nc);case Hb:return tc(Xh)}return new vn(u,zb[u]||n,a)}class OT extends Wa{async acquireToken(n){this.performanceClient.addQueueMeasurement(T.SilentCacheClientAcquireToken,n.correlationId);const a=this.initializeServerTelemetryManager(fe.acquireTokenSilent_silentFlow),r=await k(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),c=new m_(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const d=(await k(c.acquireCachedToken.bind(c),T.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),d}catch(h){throw h instanceof ur&&h.errorCode===id&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),h}}logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n);return this.clearCacheOnLogout(a.correlationId,a?.account)}}class Ks extends wT{constructor(n,a,r,c,h,d,g,m,y,S,_,O){super(n,a,r,c,h,d,m,y,O),this.apiId=g,this.accountId=S,this.platformAuthProvider=y,this.nativeStorageManager=_,this.silentCacheClient=new OT(n,this.nativeStorageManager,r,c,h,d,m,y,O);const x=this.platformAuthProvider.getExtensionName();this.skus=rr.makeExtraSkuString({libraryName:Ot.MSAL_SKU,libraryVersion:Zi,extensionName:x,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[ME]:this.skus}}async acquireToken(n,a){this.performanceClient.addQueueMeasurement(T.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(T.NativeInteractionClientAcquireToken,this.correlationId),c=Nt(),h=this.initializeServerTelemetryManager(this.apiId);try{const d=await this.initializeNativeRequest(n);try{const m=await this.acquireTokensFromCache(this.accountId,d);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),m}catch(m){if(a===Tt.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),m;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const g=await this.platformAuthProvider.sendMessage(d);return await this.handleNativeResponse(g,d,c).then(m=>(r.end({success:!0,isNativeBroker:!0,requestId:m.requestId}),h.clearNativeBrokerErrorCode(),m)).catch(m=>{throw r.end({success:!1,errorCode:m.errorCode,subErrorCode:m.subError}),m})}catch(d){throw d instanceof vn&&h.setNativeBrokerErrorCode(d.errorCode),r.end({success:!1}),d}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:$e.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),P(oh);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},this.correlationId);if(!r)throw P(oh);try{const c=this.createSilentCacheRequest(a,r),h=await this.silentCacheClient.acquireToken(c),d={...r,idTokenClaims:h?.idTokenClaims,idToken:h?.idToken};return{...h,account:d}}catch(c){throw c}}async acquireTokenRedirect(n,a){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=n;delete r.onRedirectNavigate;const c=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(c)}catch(g){if(g instanceof vn&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(g.errorCode),Ka(g)))throw g}this.browserStorage.setTemporaryCache(Je.NATIVE_REQUEST,JSON.stringify(c),!0);const h={apiId:fe.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(n.redirectUri);a.end({success:!0}),await this.navigationClient.navigateExternal(d,h)}async handleRedirectPromise(n,a){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:c,...h}=r;c&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.NATIVE_REQUEST));const d=Nt();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const g=await this.platformAuthProvider.sendMessage(h),m=await this.handleNativeResponse(g,h,d);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),m}catch(g){throw g}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const c=An(n.id_token,At),h=this.createHomeAccountIdentifier(n,c),d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(h!==d&&n.account.id!==a.accountId)throw oc(kT);const g=await this.getDiscoveredAuthority({requestAuthority:a.authority}),m=Jh(this.browserStorage,g,h,At,this.correlationId,c,n.client_info,void 0,c.tid,void 0,n.account.id,this.logger);n.expires_in=Number(n.expires_in);const y=await this.generateAuthenticationResult(n,a,c,m,g.canonicalAuthority,r);return await this.cacheAccount(m,this.correlationId,Sn(c)),await this.cacheNativeTokens(n,a,h,c,n.access_token,y.tenantId,r),y}createHomeAccountIdentifier(n,a){return Ke.generateHomeAccountId(n.client_info||H.EMPTY_STRING,dn.Default,this.logger,this.browserCrypto,a)}generateScopes(n,a){return a?$e.fromString(a):$e.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===be.POP&&a.signPopToken){if(n.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),n.shr;const r=new Xa(this.browserCrypto),c={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce};if(!a.keyId)throw P(_h);return r.signPopToken(n.access_token,a.keyId,c)}else return n.access_token}async generateAuthenticationResult(n,a,r,c,h,d){const g=this.addTelemetryFromNativeResponse(n.properties.MATS),m=this.generateScopes(a.scope,n.scope),y=n.account.properties||{},S=y.UID||r.oid||r.sub||H.EMPTY_STRING,_=y.TenantId||r.tid||H.EMPTY_STRING,O=Nh(Ke.getAccountInfo(c),void 0,r,n.id_token);O.nativeAccountId!==n.account.id&&(O.nativeAccountId=n.account.id);const x=await this.generatePopAccessToken(n,a),ee=a.tokenType===be.POP?be.POP:be.BEARER;return{authority:h,uniqueId:S,tenantId:_,scopes:m.asArray(),account:O,idToken:n.id_token,idTokenClaims:r,accessToken:x,fromCache:g?this.isResponseFromCache(g):!1,expiresOn:ja(d+n.expires_in),tokenType:ee,correlationId:this.correlationId,state:n.state,fromNativeBroker:!0}}async cacheAccount(n,a,r){await this.browserStorage.setAccount(n,this.correlationId,r,this.apiId),this.browserStorage.removeAccountContext(Ke.getAccountInfo(n),a)}cacheNativeTokens(n,a,r,c,h,d,g){const m=fc(r,a.authority,n.id_token||"",a.clientId,c.tid||""),y=a.tokenType===be.POP?H.SHR_NONCE_VALIDITY:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,S=g+y,_=this.generateScopes(n.scope,a.scope),O=gc(r,a.authority,h,a.clientId,c.tid||d,_.printScopes(),S,0,At,void 0,a.tokenType,void 0,a.keyId),x={idToken:m,accessToken:O};return this.nativeStorageManager.saveCacheRecord(x,this.correlationId,Sn(c),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===be.POP?H.SHR_NONCE_VALIDITY:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const a=await this.getCanonicalAuthority(n),{scopes:r,...c}=n,h=new $e(r||[]);h.appendScopes(Ja);const d={...c,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:h.printScopes(),redirectUri:this.getRedirectUri(n.redirectUri),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraQueryParameters,...n.tokenQueryParameters},extendedExpiryToken:!1,keyId:n.popKid};if(d.signPopToken&&n.popKid)throw G(sT);if(this.handleExtraBrokerParams(d),d.extraParameters=d.extraParameters||{},d.extraParameters.telemetry=rn.MATS_TELEMETRY,n.authenticationScheme===be.POP){const g={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce},m=new Xa(this.browserCrypto);let y;if(d.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:d.keyId})),d.signPopToken=!1;else{const S=await k(m.generateCnf.bind(m),T.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(g,this.logger);y=S.reqCnfString,d.keyId=S.kid,d.signPopToken=!0}d.reqCnf=y}return this.addRequestSKUs(d),d}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority;n.account&&await this.getDiscoveredAuthority({requestAuthority:a,requestAzureCloudOptions:n.azureCloudOptions,account:n.account});const r=new ye(a);return r.validateAsUri(),r}getPrompt(n){switch(this.apiId){case fe.ssoSilent:case fe.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),ht.NONE}if(!n){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(n){case ht.NONE:case ht.CONSENT:case ht.LOGIN:case ht.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),n;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${n} is not compatible with native flow`),G(oT)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty(Js)&&n.extraParameters.hasOwnProperty(Zs)&&n.extraParameters.hasOwnProperty(Xi);if(!n.embeddedClientId&&!a)return;let r="";const c=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,r=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[Zs],r=n.extraParameters[Xi]),n.extraParameters={child_client_id:r,child_redirect_uri:c},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:c},this.correlationId)}}async function Cd(u,n,a,r,c){const h=y_({...u.auth,authority:n},a,r,c);if(Gh(h,{sku:Ot.MSAL_SKU,version:Zi,os:"",cpu:""}),u.auth.protocolMode!==Mt.OIDC&&qh(h,u.telemetry.application),a.platformBroker&&(HE(h),c.addFields({isPlatformAuthorizeRequest:!0},a.correlationId),a.authenticationScheme===be.POP)){const d=new jn(r,c),g=new Xa(d);let m;a.popKid?m=d.encodeKid(a.popKid):m=(await k(g.generateCnf.bind(g),T.PopTokenGenerateCnf,r,c,a.correlationId)(a,r)).reqCnfString,Qh(h,m)}return uc(h,a.correlationId,c),h}async function Td(u,n,a,r,c){if(!a.codeChallenge)throw ke(kh);const h=await k(Cd,T.GetStandardParams,r,c,a.correlationId)(u,n,a,r,c);return Lh(h,yh.CODE),jh(h,a.codeChallenge,H.S256_CODE_CHALLENGE_METHOD),_i(h,a.extraQueryParameters||{}),Zh(n,h,u.auth.encodeExtraQueryParams,a.extraQueryParameters)}async function vd(u,n,a,r,c,h){if(!r.earJwk)throw G(td);const d=await Cd(n,a,r,c,h);Lh(d,yh.IDTOKEN_TOKEN_REFRESHTOKEN),QE(d,r.earJwk),jh(d,r.codeChallenge,H.S256_CODE_CHALLENGE_METHOD);const g=new Map;_i(g,r.extraQueryParameters||{});const m=Zh(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return MT(u,m,d)}async function Ad(u,n,a,r,c,h){const d=await Cd(n,a,r,c,h);Lh(d,yh.CODE),jh(d,r.codeChallenge,r.codeChallengeMethod||H.S256_CODE_CHALLENGE_METHOD),FE(d,r.authorizePostBodyParameters||{});const g=new Map;_i(g,r.extraQueryParameters||{});const m=Zh(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return MT(u,m,d)}function MT(u,n,a){const r=u.createElement("form");return r.method="post",r.action=n,a.forEach((c,h)=>{const d=u.createElement("input");d.hidden=!0,d.name=h,d.value=c,r.appendChild(d)}),u.body.appendChild(r),r}async function NT(u,n,a,r,c,h,d,g,m,y){if(g.verbose("Account id found, calling WAM for token"),!y)throw G(od);const S=new jn(g,m),_=new Ks(r,c,S,g,d,r.system.navigationClient,a,m,y,n,h,u.correlationId),{userRequestState:O}=Za.parseRequestState(S,u.state);return k(_.acquireToken.bind(_),T.NativeInteractionClientAcquireToken,g,m,u.correlationId)({...u,state:O,prompt:void 0})}async function Fa(u,n,a,r,c,h,d,g,m,y,S,_){if(Tn.removeThrottle(d,c.auth.clientId,u),n.accountId)return k(NT,T.HandleResponsePlatformBroker,y,S,u.correlationId)(u,n.accountId,r,c,d,g,m,y,S,_);const O={...u,code:n.code||"",codeVerifier:a},x=new IT(h,d,O,y,S);return await k(x.handleCodeResponse.bind(x),T.HandleCodeResponse,y,S,u.correlationId)(n,u,r)}async function Sd(u,n,a,r,c,h,d,g,m,y,S){if(Tn.removeThrottle(h,r.auth.clientId,u),MC(n,u.state),!n.ear_jwe)throw G(HC);if(!u.earJwk)throw G(td);const _=JSON.parse(await k(Q_,T.DecryptEarResponse,m,y,u.correlationId)(u.earJwk,n.ear_jwe));if(_.accountId)return k(NT,T.HandleResponsePlatformBroker,m,y,u.correlationId)(u,_.accountId,a,r,h,d,g,m,y,S);const O=new Ji(r.auth.clientId,h,new jn(m,y),m,null,null,y);O.validateTokenResponse(_);const x={code:"",state:u.state,nonce:u.nonce,client_info:_.client_info,cloud_graph_host_name:_.cloud_graph_host_name,cloud_instance_host_name:_.cloud_instance_host_name,cloud_instance_name:_.cloud_instance_name,msgraph_host:_.msgraph_host};return await k(O.handleServerTokenResponse.bind(O),T.HandleServerTokenResponse,m,y,u.correlationId)(_,c,Nt(),u,a,x,void 0,void 0,void 0,void 0)}const Pb=32;async function Wi(u,n,a){u.addQueueMeasurement(T.GeneratePkceCodes,a);const r=Yt(xb,T.GenerateCodeVerifier,n,u,a)(u,n,a),c=await k(Bb,T.GenerateCodeChallengeFromVerifier,n,u,a)(r,u,n,a);return{verifier:r,challenge:c}}function xb(u,n,a){try{const r=new Uint8Array(Pb);return Yt(K_,T.GetRandomValues,n,u,a)(r),Ri(r)}catch{throw G(ed)}}async function Bb(u,n,a,r){n.addQueueMeasurement(T.GenerateCodeChallengeFromVerifier,r);try{const c=await k(gT,T.Sha256Digest,a,n,r)(u,n,r);return Ri(new Uint8Array(c))}catch{throw G(ed)}}class rc{constructor(n,a,r,c){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=c,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(T.NativeMessageHandlerHandshake),this.platformAuthType=rn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace(this.platformAuthType+" - sendMessage called.");const a={method:Jo.GetToken,request:n},r={channel:rn.CHANNEL_ID,extensionId:this.extensionId,responseId:gn(),body:a};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const c=await new Promise((d,g)=>{this.resolvers.set(r.responseId,{resolve:d,reject:g})});return this.validatePlatformBrokerResponse(c)}static async createProvider(n,a,r){n.trace("PlatformAuthExtensionHandler - createProvider called.");try{const c=new rc(n,a,r,rn.PREFERRED_EXTENSION_ID);return await c.sendHandshakeRequest(),c}catch{const h=new rc(n,a,r);return await h.sendHandshakeRequest(),h}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const n={channel:rn.CHANNEL_ID,extensionId:this.extensionId,responseId:gn(),body:{method:Jo.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=a=>{this.onChannelMessage(a)},window.postMessage(n,window.origin,[this.messageChannel.port2]),new Promise((a,r)=>{this.handshakeResolvers.set(n.responseId,{resolve:a,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(G(iT)),this.handshakeResolvers.delete(n.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),n.source!==window)return;const a=n.data;if(!(!a.channel||a.channel!==rn.CHANNEL_ID)&&!(a.extensionId&&a.extensionId!==this.extensionId)&&a.body.method===Jo.HandshakeRequest){const r=this.handshakeResolvers.get(a.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${a.responseId}`);return}this.logger.verbose(a.extensionId?`Extension with id: ${a.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(G(aT))}}onChannelMessage(n){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const a=n.data,r=this.resolvers.get(a.responseId),c=this.handshakeResolvers.get(a.responseId);try{const h=a.body.method;if(h===Jo.Response){if(!r)return;const d=a.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(d)}`),d.status!=="Success")r.reject(oc(d.code,d.description,d.ext));else if(d.result)d.result.code&&d.result.description?r.reject(oc(d.result.code,d.result.description,d.result.ext)):r.resolve(d.result);else throw nh(js,"Event does not contain result.");this.resolvers.delete(a.responseId)}else if(h===Jo.HandshakeResponse){if(!c){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${a.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=a.extensionId,this.extensionVersion=a.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),c.resolve(),this.handshakeResolvers.delete(a.responseId)}}catch(h){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${h}`),this.logger.errorPii(`Unable to parse ${n}`),r?r.reject(h):c&&c.reject(h)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw nh(js,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===rn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Ed{constructor(n,a,r){this.logger=n,this.performanceClient=a,this.correlationId=r,this.platformAuthType=rn.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,r){if(n.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(rn.MICROSOFT_ENTRA_BROKERID))?.includes(rn.PLATFORM_DOM_APIS))return n.trace("Platform auth api available in DOM"),new Ed(n,a,r)}getExtensionId(){return rn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return rn.DOM_API_NAME}async sendMessage(n){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const a=this.initializePlatformDOMRequest(n),r=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(r)}catch(a){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),a}}initializePlatformDOMRequest(n){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:a,clientId:r,authority:c,scope:h,redirectUri:d,correlationId:g,state:m,storeInCache:y,embeddedClientId:S,extraParameters:_,...O}=n,x=this.getDOMExtraParams(O);return{accountId:a,brokerId:this.getExtensionId(),authority:c,clientId:r,correlationId:g||this.correlationId,extraParameters:{..._,...x},isSecurityTokenService:!1,redirectUri:d,scope:h,state:m,storeInCache:y,embeddedClientId:S}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(n);if(n.hasOwnProperty("error")){const a=n;if(a.isSuccess===!1&&a.error&&a.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),oc(a.error.code,a.error.description,{error:parseInt(a.error.errorCode),protocol_error:a.error.protocolError,status:a.error.status,properties:a.error.properties})}}throw nh(js,"Response missing expected properties.")}convertToPlatformBrokerResponse(n){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((c,[h,d])=>(c[h]=String(d),c),{})}}}async function Kb(u,n,a,r,c){u.trace("getPlatformAuthProvider called",a),u.trace("Has client allowed platform auth via DOM API: "+c);let h;try{c&&(h=await Ed.createProvider(u,n,a)),h||(u.trace("Platform auth via DOM API not available, checking for extension"),h=await rc.createProvider(u,r||ET,n))}catch(d){u.trace("Platform auth not available",d)}return h}function lr(u,n,a,r){if(n.trace("isPlatformAuthAllowed called"),!u.system.allowPlatformBroker&&u.system.allowPlatformBrokerWithDOM)throw ke(aC);if(!u.system.allowPlatformBroker)return n.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!a)return n.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case be.BEARER:case be.POP:return n.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return n.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class Gb extends Wa{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,g,y,S),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=m,this.eventHandler=h}acquireToken(n,a){let r;try{if(r={popupName:this.generatePopupName(n.scopes||Ja,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(n,r,a);{const h={...n,httpMethod:RT(n,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(h,r,a)}}catch(c){return Promise.reject(c)}}logout(n){try{this.logger.verbose("logoutPopup called");const a=this.initializeLogoutRequest(n),r={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},c=n&&n.authority,h=n&&n.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(a,r,c,h)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(a,r,c,h))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,r){this.logger.verbose("acquireTokenPopupAsync called");const c=await k(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,W.Popup);a.popup&&ST(c.authority);const h=lr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);return c.platformBroker=h,this.config.auth.protocolMode===Mt.EAR?this.executeEarFlow(c,a,r):this.executeCodeFlow(c,a,r)}async executeCodeFlow(n,a,r){const c=n.correlationId,h=this.initializeServerTelemetryManager(fe.acquireTokenPopup),d=r||await k(Wi,T.GeneratePkceCodes,this.logger,this.performanceClient,c)(this.performanceClient,this.logger,c),g={...n,codeChallenge:d.challenge};try{const m=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,c)({serverTelemetryManager:h,requestAuthority:g.authority,requestAzureCloudOptions:g.azureCloudOptions,requestExtraQueryParameters:g.extraQueryParameters,account:g.account});if(g.httpMethod===Vi.POST)return await this.executeCodeFlowWithPost(g,a,m,d.verifier);{const y=await k(Td,T.GetAuthCodeUrl,this.logger,this.performanceClient,c)(this.config,m.authority,g,this.logger,this.performanceClient),S=this.initiateAuthRequest(y,a);this.eventHandler.emitEvent(J.POPUP_OPENED,W.Popup,{popupWindow:S},null);const _=await this.monitorPopupForHash(S,a.popupWindowParent),O=Yt(ir,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await k(Fa,T.HandleResponseCode,this.logger,this.performanceClient,c)(n,O,d.verifier,fe.acquireTokenPopup,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(m){throw a.popup?.close(),m instanceof Oe&&(m.setCorrelationId(this.correlationId),h.cacheFailedRequest(m)),m}}async executeEarFlow(n,a,r){const c=n.correlationId,h=await k(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,c)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),d=await k(ud,T.GenerateEarKey,this.logger,this.performanceClient,c)(),g=r||await k(Wi,T.GeneratePkceCodes,this.logger,this.performanceClient,c)(this.performanceClient,this.logger,c),m={...n,earJwk:d,codeChallenge:g.challenge},y=a.popup||this.openPopup("about:blank",a);(await vd(y.document,this.config,h,m,this.logger,this.performanceClient)).submit();const _=await k(this.monitorPopupForHash.bind(this),T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,c)(y,a.popupWindowParent),O=Yt(ir,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!O.ear_jwe&&O.code){const x=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,c)({serverTelemetryManager:this.initializeServerTelemetryManager(fe.acquireTokenPopup),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:h});return k(Fa,T.HandleResponseCode,this.logger,this.performanceClient,c)(m,O,g.verifier,fe.acquireTokenPopup,this.config,x,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return k(Sd,T.HandleResponseEar,this.logger,this.performanceClient,c)(m,O,fe.acquireTokenPopup,this.config,h,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,r,c){const h=n.correlationId,d=await k(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,h)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),g=a.popup||this.openPopup("about:blank",a);(await Ad(g.document,this.config,d,n,this.logger,this.performanceClient)).submit();const y=await k(this.monitorPopupForHash.bind(this),T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,h)(g,a.popupWindowParent),S=Yt(ir,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return k(Fa,T.HandleResponseCode,this.logger,this.performanceClient,h)(n,S,c,fe.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,r,c){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(J.LOGOUT_START,W.Popup,n);const h=this.initializeServerTelemetryManager(fe.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,n.account);const d=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:h,requestAuthority:r,account:n.account||void 0});try{d.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&d.authority.protocolMode===Mt.OIDC){if(this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,W.Popup,n),c){const y={apiId:fe.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=ye.getAbsoluteUrl(c,qn());await this.navigationClient.navigateInternal(S,y)}a.popup?.close();return}}const g=d.getLogoutUri(n);this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,W.Popup,n);const m=this.openPopup(g,a);if(this.eventHandler.emitEvent(J.POPUP_OPENED,W.Popup,{popupWindow:m},null),await this.monitorPopupForHash(m,a.popupWindowParent).catch(()=>{}),c){const y={apiId:fe.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},S=ye.getAbsoluteUrl(c,qn());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${S}`),await this.navigationClient.navigateInternal(S,y)}else this.logger.verbose("No main window navigation requested")}catch(d){throw a.popup?.close(),d instanceof Oe&&(d.setCorrelationId(this.correlationId),h.cacheFailedRequest(d)),this.eventHandler.emitEvent(J.LOGOUT_FAILURE,W.Popup,null,d),this.eventHandler.emitEvent(J.LOGOUT_END,W.Popup),d}this.eventHandler.emitEvent(J.LOGOUT_END,W.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii(`Navigate to: ${n}`),this.openPopup(n,a);throw this.logger.error("Navigate url is empty"),G(Tc)}monitorPopupForHash(n,a){return new Promise((r,c)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const h=setInterval(()=>{if(n.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(h),c(G(sr));return}let d="";try{d=n.location.href}catch{}if(!d||d==="about:blank")return;clearInterval(h);let g="";const m=this.config.auth.OIDCOptions.serverResponseType;n&&(m===sc.QUERY?g=n.location.search:g=n.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(g)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(n,a)})}openPopup(n,a){try{let r;if(a.popup?(r=a.popup,this.logger.verbosePii(`Navigating popup window to: ${n}`),r.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${n}`),r=this.openSizedPopup(n,a)),!r)throw G(GC);return r.focus&&r.focus(),this.currentWindow=r,a.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),G(KC)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:r,popupWindowParent:c}){const h=c.screenLeft?c.screenLeft:c.screenX,d=c.screenTop?c.screenTop:c.screenY,g=c.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=c.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let y=r.popupSize?.width,S=r.popupSize?.height,_=r.popupPosition?.top,O=r.popupPosition?.left;return(!y||y<0||y>g)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),y=Ot.POPUP_WIDTH),(!S||S<0||S>m)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),S=Ot.POPUP_HEIGHT),(!_||_<0||_>m)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),_=Math.max(0,m/2-Ot.POPUP_HEIGHT/2+d)),(!O||O<0||O>g)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),O=Math.max(0,g/2-Ot.POPUP_WIDTH/2+h)),c.open(n,a,`width=${y}, height=${S}, top=${_}, left=${O}, scrollbars=yes`)}unloadWindow(n){this.currentWindow&&this.currentWindow.close(),n.preventDefault()}cleanPopup(n,a){n.close(),a.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(n,a){return`${Ot.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${Ot.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function qb(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const u=window.performance.getEntriesByType("navigation");return(u.length?u[0]:void 0)?.type}class jb extends Wa{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,g,y,S),this.nativeStorage=m}async acquireToken(n){const a=await k(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,W.Redirect);a.platformBroker=lr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);const r=h=>{h.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(J.RESTORE_FROM_BFCACHE,W.Redirect))},c=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${c}`),this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,c,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===Mt.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a,n.onRedirectNavigate)}catch(h){throw h instanceof Oe&&h.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),h}}async executeCodeFlow(n,a){const r=n.correlationId,c=this.initializeServerTelemetryManager(fe.acquireTokenRedirect),h=await k(Wi,T.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),d={...n,codeChallenge:h.challenge};this.browserStorage.cacheAuthorizeRequest(d,h.verifier);try{if(d.httpMethod===Vi.POST)return await this.executeCodeFlowWithPost(d);{const g=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),m=await k(Td,T.GetAuthCodeUrl,this.logger,this.performanceClient,n.correlationId)(this.config,g.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(m,a)}}catch(g){throw g instanceof Oe&&(g.setCorrelationId(this.correlationId),c.cacheFailedRequest(g)),g}}async executeEarFlow(n){const a=n.correlationId,r=await k(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),c=await k(ud,T.GenerateEarKey,this.logger,this.performanceClient,a)(),h=await k(Wi,T.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,earJwk:c,codeChallenge:h.challenge};return this.browserStorage.cacheAuthorizeRequest(d,h.verifier),(await vd(document,this.config,r,d,this.logger,this.performanceClient)).submit(),new Promise((m,y)=>{setTimeout(()=>{y(G(ic,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,r=await k(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return this.browserStorage.cacheAuthorizeRequest(n),(await Ad(document,this.config,r,n,this.logger,this.performanceClient)).submit(),new Promise((h,d)=>{setTimeout(()=>{d(G(ic,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n="",a,r,c){const h=this.initializeServerTelemetryManager(fe.handleRedirectPromise);try{const[d,g]=this.getRedirectResponse(n||"");if(!d)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),qb()!=="back_forward"?c.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const m=this.browserStorage.getTemporaryCache(Je.ORIGIN_URI,!0)||H.EMPTY_STRING,y=jp(m),S=jp(window.location.href);if(y===S&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),m.indexOf("#")>-1&&V_(m),await this.handleResponse(d,a,r,h);if(this.config.auth.navigateToLoginRequestUrl){if(!gd()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Je.URL_HASH,g,!0);const _={apiId:fe.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let O=!0;if(!m||m==="null"){const x=J_();this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,x,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),O=await this.navigationClient.navigateInternal(x,_)}else this.logger.verbose(`Navigating to loginRequestUrl: ${m}`),O=await this.navigationClient.navigateInternal(m,_);if(!O)return await this.handleResponse(d,a,r,h)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(d,a,r,h);return null}catch(d){throw d instanceof Oe&&(d.setCorrelationId(this.correlationId),h.cacheFailedRequest(d)),d}}getRedirectResponse(n){this.logger.verbose("getRedirectResponseHash called");let a=n;a||(this.config.auth.OIDCOptions.serverResponseType===sc.QUERY?a=window.location.search:a=window.location.hash);let r=Fs(a);if(r){try{Rb(r,this.browserCrypto,W.Redirect)}catch(h){return h instanceof Oe&&this.logger.error(`Interaction type validation failed due to ${h.errorCode}: ${h.errorMessage}`),[null,""]}return TT(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,a]}const c=this.browserStorage.getTemporaryCache(Je.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.URL_HASH)),c&&(r=Fs(c),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,c]):[null,""]}async handleResponse(n,a,r,c){if(!n.state)throw G(nd);if(n.ear_jwe){const g=await k(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a.correlationId)({requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});return k(Sd,T.HandleResponseEar,this.logger,this.performanceClient,a.correlationId)(a,n,fe.acquireTokenRedirect,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const d=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:a.authority});return k(Fa,T.HandleResponseCode,this.logger,this.performanceClient,a.correlationId)(a,n,r,fe.acquireTokenRedirect,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n,a){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),n){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${n}`);const r={apiId:fe.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=a||this.config.auth.onRedirectNavigate;if(typeof c=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),c(n)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(n,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(n,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),G(Tc)}async logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n),r=this.initializeServerTelemetryManager(fe.logout);try{this.eventHandler.emitEvent(J.LOGOUT_START,W.Redirect,n),await this.clearCacheOnLogout(this.correlationId,a.account);const c={apiId:fe.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(h.authority.protocolMode===Mt.OIDC)try{h.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,W.Redirect,a);return}}const d=h.getLogoutUri(a);if(this.eventHandler.emitEvent(J.LOGOUT_SUCCESS,W.Redirect,a),n&&typeof n.onRedirectNavigate=="function")if(n.onRedirectNavigate(d)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),await this.navigationClient.navigateExternal(d,c);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),await this.navigationClient.navigateExternal(d,c);return}}catch(c){throw c instanceof Oe&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),this.eventHandler.emitEvent(J.LOGOUT_FAILURE,W.Redirect,null,c),this.eventHandler.emitEvent(J.LOGOUT_END,W.Redirect),c}this.eventHandler.emitEvent(J.LOGOUT_END,W.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return ye.getAbsoluteUrl(a,qn())}}async function Yb(u,n,a,r,c){if(n.addQueueMeasurement(T.SilentHandlerInitiateAuthRequest,r),!u)throw a.info("Navigate url is empty"),G(Tc);return c?k(Vb,T.SilentHandlerLoadFrame,a,n,r)(u,c,n,r):Yt(Xb,T.SilentHandlerLoadFrameSync,a,n,r)(u)}async function Qb(u,n,a,r,c){const h=_c();if(!h.contentDocument)throw"No document associated with iframe!";return(await Ad(h.contentDocument,u,n,a,r,c)).submit(),h}async function Fb(u,n,a,r,c){const h=_c();if(!h.contentDocument)throw"No document associated with iframe!";return(await vd(h.contentDocument,u,n,a,r,c)).submit(),h}async function Sy(u,n,a,r,c,h,d){return r.addQueueMeasurement(T.SilentHandlerMonitorIframeForHash,h),new Promise((g,m)=>{n<fh&&c.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${n}ms) than the default (${fh}ms). This may result in timeouts.`);const y=window.setTimeout(()=>{window.clearInterval(S),m(G(qC))},n),S=window.setInterval(()=>{let _="";const O=u.contentWindow;try{_=O?O.location.href:""}catch{}if(!_||_==="about:blank")return;let x="";O&&(d===sc.QUERY?x=O.location.search:x=O.location.hash),window.clearTimeout(y),window.clearInterval(S),g(x)},a)}).finally(()=>{Yt(Jb,T.RemoveHiddenIframe,c,r,h)(u)})}function Vb(u,n,a,r){return a.addQueueMeasurement(T.SilentHandlerLoadFrame,r),new Promise((c,h)=>{const d=_c();window.setTimeout(()=>{if(!d){h("Unable to load iframe");return}d.src=u,c(d)},n)})}function Xb(u){const n=_c();return n.src=u,n}function _c(){const u=document.createElement("iframe");return u.className="msalSilentIframe",u.style.visibility="hidden",u.style.position="absolute",u.style.width=u.style.height="0",u.style.border="0",u.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),u.setAttribute("allow","local-network-access *"),document.body.appendChild(u),u}function Jb(u){document.body===u.parentNode&&document.body.removeChild(u)}class Zb extends Wa{constructor(n,a,r,c,h,d,g,m,y,S,_){super(n,a,r,c,h,d,m,S,_),this.apiId=g,this.nativeStorage=y}async acquireToken(n){this.performanceClient.addQueueMeasurement(T.SilentIframeClientAcquireToken,n.correlationId),!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const a={...n};a.prompt?a.prompt!==ht.NONE&&a.prompt!==ht.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${a.prompt} with ${ht.NONE}`),a.prompt=ht.NONE):a.prompt=ht.NONE;const r=await k(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(a,W.Silent);return r.platformBroker=lr(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),ST(r.authority),this.config.auth.protocolMode===Mt.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(n){let a;const r=this.initializeServerTelemetryManager(this.apiId);try{return a=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await k(this.silentTokenHelper.bind(this),T.SilentIframeClientTokenHelper,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(c){if(c instanceof Oe&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),!a||!(c instanceof Oe)||c.errorCode!==Ot.INVALID_GRANT_ERROR)throw c;return this.performanceClient.addFields({retryError:c.errorCode},this.correlationId),await k(this.silentTokenHelper.bind(this),T.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const a=n.correlationId,r=await k(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),c=await k(ud,T.GenerateEarKey,this.logger,this.performanceClient,a)(),h=await k(Wi,T.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...n,earJwk:c,codeChallenge:h.challenge},g=await k(Fb,T.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,a)(this.config,r,d,this.logger,this.performanceClient),m=this.config.auth.OIDCOptions.serverResponseType,y=await k(Sy,T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(g,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,a,m),S=Yt(ir,T.DeserializeResponse,this.logger,this.performanceClient,a)(y,m,this.logger);if(!S.ear_jwe&&S.code){const _=await k(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:r});return k(Fa,T.HandleResponseCode,this.logger,this.performanceClient,a)(d,S,h.verifier,this.apiId,this.config,_,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return k(Sd,T.HandleResponseEar,this.logger,this.performanceClient,a)(d,S,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(G(vc))}async silentTokenHelper(n,a){const r=a.correlationId;this.performanceClient.addQueueMeasurement(T.SilentIframeClientTokenHelper,r);const c=await k(Wi,T.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),h={...a,codeChallenge:c.challenge};let d;if(a.httpMethod===Vi.POST)d=await k(Qb,T.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,n.authority,h,this.logger,this.performanceClient);else{const S=await k(Td,T.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,n.authority,h,this.logger,this.performanceClient);d=await k(Yb,T.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(S,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const g=this.config.auth.OIDCOptions.serverResponseType,m=await k(Sy,T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,g),y=Yt(ir,T.DeserializeResponse,this.logger,this.performanceClient,r)(m,g,this.logger);return k(Fa,T.HandleResponseCode,this.logger,this.performanceClient,r)(a,y,c.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class $b extends Wa{async acquireToken(n){this.performanceClient.addQueueMeasurement(T.SilentRefreshClientAcquireToken,n.correlationId);const a=await k(yd,T.InitializeBaseRequest,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger),r={...n,...a};n.redirectUri&&(r.redirectUri=this.getRedirectUri(n.redirectUri));const c=this.initializeServerTelemetryManager(fe.acquireTokenSilent_silentFlow),h=await this.createRefreshTokenClient({serverTelemetryManager:c,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return k(h.acquireTokenByRefreshToken.bind(h),T.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(r,fe.acquireTokenSilent_silentFlow).catch(d=>{throw d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d),d})}logout(){return Promise.reject(G(vc))}async createRefreshTokenClient(n){const a=await k(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new g_(a,this.performanceClient)}}class Wb{constructor(n,a,r,c,h){this.isBrowserEnvironment=typeof window<"u",this.config=n,this.storage=a,this.logger=r,this.cryptoObj=c,this.performanceClient=h}async loadExternalTokens(n,a,r){if(!this.isBrowserEnvironment)throw G(Ac);const c=n.correlationId||gn(),h=this.performanceClient.startMeasurement(T.LoadExternalTokens,c);try{const d=a.id_token?An(a.id_token,At):void 0,g=Sn(d||{}),m={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},y=n.authority?new mt(mt.generateAuthority(n.authority,n.azureCloudOptions),this.config.system.networkClient,this.storage,m,this.logger,n.correlationId||gn()):void 0,S=await k(this.loadAccount.bind(this),T.LoadAccount,this.logger,this.performanceClient,c)(n,r.clientInfo||a.client_info||"",c,d,y),_=await k(this.loadIdToken.bind(this),T.LoadIdToken,this.logger,this.performanceClient,c)(a,S.homeAccountId,S.environment,S.realm,c,g),O=await k(this.loadAccessToken.bind(this),T.LoadAccessToken,this.logger,this.performanceClient,c)(n,a,S.homeAccountId,S.environment,S.realm,r,c,g),x=await k(this.loadRefreshToken.bind(this),T.LoadRefreshToken,this.logger,this.performanceClient,c)(a,S.homeAccountId,S.environment,c,g);return h.end({success:!0},void 0,Ke.getAccountInfo(S)),this.generateAuthenticationResult(n,{account:S,idToken:_,accessToken:O,refreshToken:x},d,y)}catch(d){throw h.end({success:!1},d),d}}async loadAccount(n,a,r,c,h){if(this.logger.verbose("TokenCache - loading account"),n.account){const y=Ke.createFromAccountInfo(n.account);return await this.storage.setAccount(y,r,Sn(c||{}),fe.loadExternalTokens),y}else if(!h||!a&&!c)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),G($C);const d=Ke.generateHomeAccountId(a,h.authorityType,this.logger,this.cryptoObj,c),g=c?.tid,m=Jh(this.storage,h,d,At,r,c,a,h.hostnameAndPort,g,void 0,void 0,this.logger);return await this.storage.setAccount(m,r,Sn(c||{}),fe.loadExternalTokens),m}async loadIdToken(n,a,r,c,h,d){if(!n.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const g=fc(a,r,n.id_token,this.config.auth.clientId,c);return await this.storage.setIdTokenCredential(g,h,d),g}async loadAccessToken(n,a,r,c,h,d,g,m){if(a.access_token)if(a.expires_in){if(!a.scope&&(!n.scopes||!n.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const y=a.scope?$e.fromString(a.scope):new $e(n.scopes),S=d.expiresOn||a.expires_in+Nt(),_=d.extendedExpiresOn||(a.ext_expires_in||a.expires_in)+Nt(),O=gc(r,c,a.access_token,this.config.auth.clientId,h,y.printScopes(),S,_,At);return await this.storage.setAccessTokenCredential(O,g,m),O}async loadRefreshToken(n,a,r,c,h){if(!n.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const d=_C(a,r,n.refresh_token,this.config.auth.clientId,n.foci,void 0,n.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(d,c,h),d}generateAuthenticationResult(n,a,r,c){let h="",d=[],g=null,m;a?.accessToken&&(h=a.accessToken.secret,d=$e.fromString(a.accessToken.target).asArray(),g=ja(a.accessToken.expiresOn),m=ja(a.accessToken.extendedExpiresOn));const y=a.account;return{authority:c?c.canonicalAuthority:"",uniqueId:a.account.localAccountId,tenantId:a.account.realm,scopes:d,account:Ke.getAccountInfo(y),idToken:a.idToken?.secret||"",idTokenClaims:r||{},accessToken:h,fromCache:!0,expiresOn:g,correlationId:n.correlationId||"",requestId:"",extExpiresOn:m,familyId:a.refreshToken?.familyId||"",tokenType:a?.accessToken?.tokenType||"",state:n.state||"",cloudGraphHostName:y.cloudGraphHostName||"",msGraphHost:y.msGraphHost||"",fromNativeBroker:!1}}}class ew extends OC{constructor(n){super(n),this.includeRedirectUri=!1}}class tw extends Wa{constructor(n,a,r,c,h,d,g,m,y,S){super(n,a,r,c,h,d,m,y,S),this.apiId=g}async acquireToken(n){if(!n.code)throw G(WC);const a=await k(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(n,W.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const c={...a,code:n.code},h=await k(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),d=new ew(h);this.logger.verbose("Auth code client created");const g=new IT(d,this.browserStorage,c,this.logger,this.performanceClient);return await k(g.handleCodeResponseFromServer.bind(g),T.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(c){throw c instanceof Oe&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),c}}logout(){return Promise.reject(G(vc))}}function nw(u,n,a){const r=window.msal?.clientIds||[],c=r.length,h=r.filter(d=>d===u).length;h>1&&a.warning("There is already an instance of MSAL.js in the window with the same client id."),n.add({msalInstanceCount:c,sameClientIdInstanceCount:h})}function Ls(u,n,a){try{md(u)}catch(r){throw n.end({success:!1},r,a),r}}class bc{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new jn(this.logger,this.performanceClient):Ys,this.eventHandler=new _b(this.logger),this.browserStorage=this.isBrowserEnvironment?new mh(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,o_(this.config.auth)):mb(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:dt.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:dt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new mh(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Wb(this.config,this.browserStorage,this.logger,this.browserCrypto,this.performanceClient),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const r=new bc(n);return await r.initialize(a),r}trackPageVisibility(n){n&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n,a){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(J.INITIALIZE_END);return}const r=n?.correlationId||this.getRequestCorrelationId(),c=this.config.system.allowPlatformBroker,h=this.performanceClient.startMeasurement(T.InitializeClientApplication,r);if(this.eventHandler.emitEvent(J.INITIALIZE_START),!a)try{this.logMultipleInstances(h)}catch{}if(await k(this.browserStorage.initialize.bind(this.browserStorage),T.InitializeCache,this.logger,this.performanceClient,r)(r),c)try{this.platformAuthProvider=await Kb(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout,this.config.system.allowPlatformBrokerWithDOM)}catch(d){this.logger.verbose(d)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Yt(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),T.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(J.INITIALIZE_END),h.end({allowPlatformBroker:c,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("handleRedirectPromise called"),AT(this.initialized),this.isBrowserEnvironment){const a=n||"";let r=this.redirectResponse.get(a);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===Ti.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),c=this.browserStorage.getCachedNativeRequest(),h=c&&this.platformAuthProvider&&!n;let d;this.eventHandler.emitEvent(J.HANDLE_REDIRECT_START,W.Redirect);let g;try{if(h&&this.platformAuthProvider){d=this.performanceClient.startMeasurement(T.AcquireTokenRedirect,c?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),d.add({isPlatformBrokerRequest:!0});const m=new Ks(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,c.accountId,this.nativeInternalStorage,c.correlationId);g=k(m.handleRedirectPromise.bind(m),T.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(this.performanceClient,d.event.correlationId)}else{const[m,y]=this.browserStorage.getCachedRequest(),S=m.correlationId;d=this.performanceClient.startMeasurement(T.AcquireTokenRedirect,S),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const _=this.createRedirectClient(S);g=k(_.handleRedirectPromise.bind(_),T.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(n,m,y,d)}}catch(m){throw this.browserStorage.resetRequestCache(),m}return g.then(m=>(m?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(J.LOGIN_SUCCESS,W.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_SUCCESS,W.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),d.end({success:!0},void 0,m.account)):d.event.errorCode?d.end({success:!1},void 0):d.discard(),this.eventHandler.emitEvent(J.HANDLE_REDIRECT_END,W.Redirect),m)).catch(m=>{this.browserStorage.resetRequestCache();const y=m;throw r.length>0?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,W.Redirect,null,y):this.eventHandler.emitEvent(J.LOGIN_FAILURE,W.Redirect,null,y),this.eventHandler.emitEvent(J.HANDLE_REDIRECT_END,W.Redirect),d.end({success:!1},y),m})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("acquireTokenRedirect called",a);const r=this.performanceClient.startMeasurement(T.AcquireTokenPreRedirect,a);r.add({scenarioId:n.scenarioId});const c=n.onRedirectNavigate;if(c)n.onRedirectNavigate=d=>{const g=typeof c=="function"?c(d):void 0;return r.add({navigateCallbackResult:g!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,g};else{const d=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=g=>{const m=typeof d=="function"?d(g):void 0;return r.add({navigateCallbackResult:m!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,m}}const h=this.getAllAccounts().length>0;try{dy(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNIN),h?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_START,W.Redirect,n):this.eventHandler.emitEvent(J.LOGIN_START,W.Redirect,n);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?d=new Ks(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,r).catch(m=>{if(r.add({brokerErrorName:m.name,brokerErrorCode:m.errorCode}),m instanceof vn&&Ka(m))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(m instanceof Qt)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(a).acquireToken(n);throw m}):d=this.createRedirectClient(a).acquireToken(n),await d}catch(d){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(T.AcquireTokenRedirect,a).end({success:!1},d,n.account):r.end({success:!1},d,n.account),h?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,W.Redirect,null,d):this.eventHandler.emitEvent(J.LOGIN_FAILURE,W.Redirect,null,d),d}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(T.AcquireTokenPopup,a);r.add({scenarioId:n.scenarioId});try{this.logger.verbose("acquireTokenPopup called",a),Ls(this.initialized,r,n.account),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNIN)}catch(g){return Promise.reject(g)}const c=this.getAllAccounts();c.length>0?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_START,W.Popup,n):this.eventHandler.emitEvent(J.LOGIN_START,W.Popup,n);let h;const d=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?(r.add({isPlatformBrokerRequest:!0}),h=this.acquireTokenNative({...n,correlationId:a},fe.acquireTokenPopup).then(g=>(r.end({success:!0},void 0,g.account),g)).catch(g=>{if(r.add({brokerErrorName:g.name,brokerErrorCode:g.errorCode}),g instanceof vn&&Ka(g))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,d);if(g instanceof Qt)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(a).acquireToken(n,d);throw g})):h=this.createPopupClient(a).acquireToken(n,d),h.then(g=>(c.length<this.getAllAccounts().length?this.eventHandler.emitEvent(J.LOGIN_SUCCESS,W.Popup,g):this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_SUCCESS,W.Popup,g),r.end({success:!0,accessTokenSize:g.accessToken.length,idTokenSize:g.idToken.length},void 0,g.account),g)).catch(g=>(c.length>0?this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,W.Popup,null,g):this.eventHandler.emitEvent(J.LOGIN_FAILURE,W.Popup,null,g),r.end({success:!1},g,n.account),Promise.reject(g))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&(this.logger.info("Perf: Visibility change detected in ",n.event.name),n.increment({visibilityChangeCount:1}))}async ssoSilent(n){const a=this.getRequestCorrelationId(n),r={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(T.SsoSilent,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),Ls(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",a),this.eventHandler.emitEvent(J.SSO_SILENT_START,W.Silent,r);let c;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),c=this.acquireTokenNative(r,fe.ssoSilent).catch(h=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:h.name,brokerErrorCode:h.errorCode}),h instanceof vn&&Ka(h))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw h})):c=this.createSilentIframeClient(r.correlationId).acquireToken(r),c.then(h=>(this.eventHandler.emitEvent(J.SSO_SILENT_SUCCESS,W.Silent,h),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.eventHandler.emitEvent(J.SSO_SILENT_FAILURE,W.Silent,null,h),this.ssoSilentMeasurement?.end({success:!1},h,n.account),h}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("acquireTokenByCode called",a);const r=this.performanceClient.startMeasurement(T.AcquireTokenByCode,a);Ls(this.initialized,r),this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_START,W.Silent,n),r.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw G(tT);if(n.code){const c=n.code;let h=this.hybridAuthCodeResponses.get(c);return h?(this.logger.verbose("Existing acquireTokenByCode request found",a),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",a),h=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(d=>(this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_SUCCESS,W.Silent,d),this.hybridAuthCodeResponses.delete(c),r.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),d)).catch(d=>{throw this.hybridAuthCodeResponses.delete(c),this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_FAILURE,W.Silent,null,d),r.end({success:!1},d),d}),this.hybridAuthCodeResponses.set(c,h)),await h}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const c=await this.acquireTokenNative({...n,correlationId:a},fe.acquireTokenByCode,n.nativeAccountId).catch(h=>{throw h instanceof vn&&Ka(h)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:h.name,brokerErrorCode:h.errorCode}),h});return r.end({success:!0},void 0,c.account),c}else throw G(nT);else throw G(eT)}catch(c){throw this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_BY_CODE_FAILURE,W.Silent,null,c),r.end({success:!1},c),c}}async acquireTokenByCodeAsync(n){return this.logger.trace("acquireTokenByCodeAsync called",n.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(T.AcquireTokenByCodeAsync,n.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(n.correlationId).acquireToken(n).then(c=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:c.fromCache}),c)).catch(c=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},c),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(this.performanceClient.addQueueMeasurement(T.AcquireTokenFromCache,n.correlationId),a){case Tt.Default:case Tt.AccessToken:case Tt.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(n.correlationId);return k(r.acquireToken.bind(r),T.SilentCacheClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw P(Ei)}}async acquireTokenByRefreshToken(n,a){switch(this.performanceClient.addQueueMeasurement(T.AcquireTokenByRefreshToken,n.correlationId),a){case Tt.Default:case Tt.AccessTokenAndRefreshToken:case Tt.RefreshToken:case Tt.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(n.correlationId);return k(r.acquireToken.bind(r),T.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw P(Ei)}}async acquireTokenBySilentIframe(n){this.performanceClient.addQueueMeasurement(T.AcquireTokenBySilentIframe,n.correlationId);const a=this.createSilentIframeClient(n.correlationId);return k(a.acquireToken.bind(a),T.SilentIframeClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n)}async logout(n){const a=this.getRequestCorrelationId(n);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",a),this.logoutRedirect({correlationId:a,...n})}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return dy(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return md(this.initialized),this.browserStorage.setInteractionInProgress(!0,Ti.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){const a=this.getRequestCorrelationId();return pb(this.logger,this.browserStorage,this.isBrowserEnvironment,a,n)}getAccount(n){const a=this.getRequestCorrelationId();return yb(n,this.logger,this.browserStorage,a)}getAccountByUsername(n){const a=this.getRequestCorrelationId();return Cb(n,this.logger,this.browserStorage,a)}getAccountByHomeId(n){const a=this.getRequestCorrelationId();return Tb(n,this.logger,this.browserStorage,a)}getAccountByLocalId(n){const a=this.getRequestCorrelationId();return vb(n,this.logger,this.browserStorage,a)}setActiveAccount(n){const a=this.getRequestCorrelationId();Ab(n,this.browserStorage,a)}getActiveAccount(){const n=this.getRequestCorrelationId();return Sb(this.browserStorage,n)}async hydrateCache(n,a){this.logger.verbose("hydrateCache called");const r=Ke.createFromAccountInfo(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(r,n.correlationId,Sn(n.idTokenClaims),fe.hydrateCache),n.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,r,c){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw G(od);return new Ks(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(n),this.nativeInternalStorage,n.correlationId).acquireToken(n,c)}canUsePlatformBroker(n,a){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!lr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(n.prompt)switch(n.prompt){case ht.NONE:case ht.CONSENT:case ht.LOGIN:case ht.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${n.prompt} is not compatible with platform broker flow, returning false`),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new Gb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createRedirectClient(n){return new jb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentIframeClient(n){return new Zb(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentCacheClient(n){return new OT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentRefreshClient(n){return new $b(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentAuthCodeClient(n){return new tw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,fe.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,n)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return vT(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==dt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==dt.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?gn():H.EMPTY_STRING}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginRedirect called",a),this.acquireTokenRedirect({correlationId:a,...n||sy})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginPopup called",a),this.acquireTokenPopup({correlationId:a,...n||sy})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(T.AcquireTokenSilent,a);r.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),Ls(this.initialized,r,n.account),this.logger.verbose("acquireTokenSilent called",a);const c=n.account||this.getActiveAccount();if(!c)throw G(FC);return this.acquireTokenSilentDeduped(n,c,a).then(h=>(r.end({success:!0,fromCache:h.fromCache,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),{...h,state:n.state,correlationId:a})).catch(h=>{throw h instanceof Oe&&h.setCorrelationId(a),r.end({success:!1},h,c),h})}async acquireTokenSilentDeduped(n,a,r){const c=pc(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),h=JSON.stringify(c),d=this.activeSilentTokenRequests.get(h);if(typeof d>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const g=k(this.acquireTokenSilentAsync.bind(this),T.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...n,correlationId:r},a);return this.activeSilentTokenRequests.set(h,g),g.finally(()=>{this.activeSilentTokenRequests.delete(h)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),d}async acquireTokenSilentAsync(n,a){const r=()=>this.trackPageVisibility(n.correlationId);this.performanceClient.addQueueMeasurement(T.AcquireTokenSilentAsync,n.correlationId),this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_START,W.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",r);const c=await k(bb,T.InitializeSilentRequest,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),h=n.cacheLookupPolicy||Tt.Default;return this.acquireTokenSilentNoIframe(c,h).catch(async g=>{if(iw(g,h))if(this.activeIframeRequest)if(h!==Tt.Skip){const[y,S]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${S}`,c.correlationId);const _=this.performanceClient.startMeasurement(T.AwaitConcurrentIframe,c.correlationId);_.add({awaitIframeCorrelationId:S});const O=await y;if(_.end({success:O}),O)return this.logger.verbose(`Parallel iframe request with correlationId: ${S} succeeded. Retrying cache and/or RT redemption`,c.correlationId),this.acquireTokenSilentNoIframe(c,h);throw this.logger.info(`Iframe request with correlationId: ${S} failed. Interaction is required.`),g}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",c.correlationId),k(this.acquireTokenBySilentIframe.bind(this),T.AcquireTokenBySilentIframe,this.logger,this.performanceClient,c.correlationId)(c);else{let y;return this.activeIframeRequest=[new Promise(S=>{y=S}),c.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",c.correlationId),k(this.acquireTokenBySilentIframe.bind(this),T.AcquireTokenBySilentIframe,this.logger,this.performanceClient,c.correlationId)(c).then(S=>(y(!0),S)).catch(S=>{throw y(!1),S}).finally(()=>{this.activeIframeRequest=void 0})}else throw g}).then(g=>(this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_SUCCESS,W.Silent,g),this.performanceClient.addFields({fromCache:g.fromCache},n.correlationId),g)).catch(g=>{throw this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_FAILURE,W.Silent,null,g),g}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(n,a){return lr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},n.correlationId),this.acquireTokenNative(n,fe.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},n.correlationId),r instanceof vn&&Ka(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,P(Ei)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),a===Tt.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),k(this.acquireTokenFromCache.bind(this),T.AcquireTokenFromCache,this.logger,this.performanceClient,n.correlationId)(n,a).catch(r=>{if(a===Tt.AccessToken)throw r;return this.eventHandler.emitEvent(J.ACQUIRE_TOKEN_NETWORK_START,W.Silent,n),k(this.acquireTokenByRefreshToken.bind(this),T.AcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await k(Wi,T.GeneratePkceCodes,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${a?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n){const a=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(a),nw(a,n,this.logger)}}function iw(u,n){const a=!(u instanceof Qt&&u.subError!==Cc),r=u.errorCode===Ot.INVALID_GRANT_ERROR||u.errorCode===Ei,c=a&&r||u.errorCode===ec||u.errorCode===Vh,h=U_.includes(n);return c&&h}async function aw(u,n){const a=new $i(u);return await a.initialize(),bc.createController(a,n)}class _d{static async createPublicClientApplication(n){const a=await aw(n);return new _d(n,a)}constructor(n,a){this.isBroker=!1,this.controller=a||new bc(new $i(n))}async initialize(n){return this.controller.initialize(n,this.isBroker)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(n){return this.controller.getAccount(n)}getAccountByHomeId(n){return this.controller.getAccountByHomeId(n)}getAccountByLocalId(n){return this.controller.getAccountByLocalId(n)}getAccountByUsername(n){return this.controller.getAccountByUsername(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logout(n){return this.controller.logout(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const ow="81dcae7c-55a9-4e4e-86e1-e364b25fc990",rw="https://login.microsoftonline.com/common",sw="https://localhost:8443/",Wo=["User.Read","Mail.Read"],vi=new _d({auth:{clientId:ow,authority:rw,redirectUri:sw},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}});let th=null;function DT(){return th||(th=vi.initialize()),th}async function cw(){await DT();const u=vi.getAllAccounts();if(!u.length){const a=await vi.loginPopup({scopes:Wo});return(await vi.acquireTokenSilent({account:a.account,scopes:Wo})).accessToken}const n=u[0];try{return(await vi.acquireTokenSilent({account:n,scopes:Wo})).accessToken}catch(a){if(a instanceof Qt)return(await vi.acquireTokenPopup({account:n,scopes:Wo})).accessToken;throw a}}async function lw(){await DT();const u=vi.getAllAccounts();if(!u.length)return null;try{return(await vi.acquireTokenSilent({account:u[0],scopes:Wo})).accessToken}catch(n){if(n instanceof Qt)return null;throw n}}const uw="",hw=uw.replace(/\/+$/,"");async function hr(u,n,a={}){const r=`${hw}${u}`,c=await fetch(r,{...a,headers:{...a.headers||{},Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!c.ok){const h=await c.text();throw new Error(`backend ${c.status}: ${h}`)}return c.json()}function dw(u){return hr("/graph/folders",u)}function fw(u,n,a=25){const r=new URLSearchParams({folder_id:n,top:String(a)}).toString();return hr(`/graph/messages?${r}`,u)}function gw(u,n,a,r){return hr("/ingest",u,{method:"POST",body:JSON.stringify({passphrase:n,folder_id:a,message_ids:r})})}function mw(u,n,a,r=4){return hr("/query",u,{method:"POST",body:JSON.stringify({question:n,passphrase:a,n_results:r})})}function pw(u){return hr("/clear",u,{method:"POST",body:JSON.stringify({})})}function yw(u,n){return u?u.length<=n?u:u.slice(0,n)+"":""}function Cw(){const[u,n]=tt.useState("checking session..."),[a,r]=tt.useState(""),[c,h]=tt.useState(!1),[d,g]=tt.useState(""),[m,y]=tt.useState(""),S=m.length>=8,[_,O]=tt.useState([]),[x,ee]=tt.useState(""),[Q,Te]=tt.useState([]),[ve,he]=tt.useState(new Set),ge=ve.size,[Pe,ze]=tt.useState(!1),[Ge,oe]=tt.useState(!1),[nt,Ft]=tt.useState(""),[Yn,St]=tt.useState(""),[it,sn]=tt.useState([]),[Vt,Ue]=tt.useState("");async function N(z){Ue("loading folders...");const F=await dw(z);O(F.folders||[]),Ue("")}async function B(){r(""),n("checking session...");try{const z=await lw();if(!z){h(!1),g(""),n("not signed in");return}h(!0),g(z),n("signed in"),await N(z),n("ready")}catch(z){h(!1),g(""),n("error"),r(String(z?.message||z))}}async function $(){r(""),Ue("signing in...");try{const z=await cw();h(!0),g(z),n("signed in"),await N(z),n("ready")}catch(z){h(!1),g(""),n("error"),r(String(z?.message||z))}finally{Ue("")}}tt.useEffect(()=>{B().catch(()=>{})},[]);async function Ae(z){if(ee(z),Te([]),he(new Set),ze(!1),oe(!1),!!z&&!(!c||!d)){Ue("loading messages...");try{const F=await fw(d,z,25);Te(F.value||[])}catch(F){r(String(F?.message||F))}finally{Ue("")}}}function Se(z){he(F=>{const re=new Set(F);return re.has(z)?re.delete(z):re.add(z),re})}const A=tt.useMemo(()=>["You are about to store selected email content locally on this device.","The application encrypts the stored email text at rest using a passphrase you provide.","Embeddings (numeric vectors) are stored locally for semantic search.","No email content is uploaded to a remote server by this tool.","You can clear the local index at any time."].join(" "),[]);async function L(){if(!c||!d){alert("Please sign in first.");return}if(!S){alert("Passphrase must be at least 8 characters.");return}if(!x){alert("Select a folder first.");return}if(!ve.size){alert("Select at least one email.");return}Ue("ingesting (encrypting + indexing locally)..."),r("");try{await gw(d,m,x,Array.from(ve)),St("Ingestion complete. You can now ask questions."),sn([]),ze(!1),oe(!1)}catch(z){r(String(z?.message||z))}finally{Ue("")}}async function K(){if(!c||!d){alert("Please sign in first.");return}if(!S){alert("Passphrase must be at least 8 characters.");return}const z=nt.trim();if(z){Ue("querying local index..."),r("");try{const F=await mw(d,z,m,4);St(F.answer||""),sn(F.sources||[])}catch(F){r(String(F?.message||F))}finally{Ue("")}}}async function j(){if(!c||!d){alert("Please sign in first.");return}Ue("clearing local index..."),r("");try{await pw(d),St("Local index cleared."),sn([])}catch(z){r(String(z?.message||z))}finally{Ue("")}}return X.jsxs("div",{style:{fontFamily:"Segoe UI, Arial",padding:12,lineHeight:1.35},children:[X.jsx("h2",{style:{marginTop:0},children:"Outlook Privacy Assistant"}),X.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:10},children:[X.jsx("strong",{children:"Status:"})," ",u," ",Vt?` ${Vt}`:""]}),!c&&X.jsx("button",{onClick:()=>$(),children:"Sign in"}),a&&X.jsx("pre",{style:{whiteSpace:"pre-wrap",border:"1px solid #ccc",padding:8,marginTop:10},children:a}),X.jsx("hr",{}),X.jsx("h3",{children:"Local encryption passphrase"}),X.jsx("input",{type:"password",value:m,onChange:z=>y(z.target.value),placeholder:"min 8 characters",style:{width:"100%"}}),X.jsx("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:"Required to encrypt/decrypt your local email index."}),X.jsx("hr",{}),X.jsx("h3",{children:"Ingest emails"}),X.jsxs("div",{style:{marginBottom:6},children:[X.jsx("label",{style:{display:"block",fontSize:12,opacity:.85},children:"Select folder"}),X.jsxs("select",{style:{width:"100%"},value:x,onChange:z=>Ae(z.target.value),disabled:!c,children:[X.jsx("option",{value:"",children:"Select"}),_.map(z=>X.jsxs("option",{value:z.id,children:[z.displayName," ",typeof z.totalItemCount=="number"?`(${z.totalItemCount})`:""]},z.id))]})]}),X.jsx("div",{style:{fontSize:12,opacity:.8},children:"Select individual emails to ingest. The selected emails will be encrypted and stored locally."}),X.jsx("div",{style:{maxHeight:220,overflow:"auto",border:"1px solid #ddd",marginTop:8,padding:6},children:Q.length?Q.map(z=>{const F=z.from?.emailAddress?.address||"",re=ve.has(z.id);return X.jsxs("label",{style:{display:"block",padding:"6px 4px",borderBottom:"1px solid #eee"},children:[X.jsx("input",{type:"checkbox",checked:re,onChange:()=>Se(z.id)})," ",X.jsx("strong",{children:z.subject||"(no subject)"}),X.jsxs("div",{style:{fontSize:12,opacity:.85},children:[F,"  ",z.receivedDateTime||""]}),X.jsx("div",{style:{fontSize:12},children:yw(z.bodyPreview||"",180)})]},z.id)}):X.jsx("div",{style:{fontSize:12,opacity:.8,padding:6},children:x?"No messages loaded yet (or folder is empty).":"Select a folder to view messages."})}),X.jsxs("button",{style:{marginTop:10},disabled:!c||!x||ge===0,onClick:()=>ze(!0),children:["ingest selected (",ge,")"]}),Pe&&X.jsxs("div",{style:{border:"1px solid #c00",padding:10,marginTop:10,background:"#fff5f5"},children:[X.jsx("strong",{children:"Consent required"}),X.jsx("p",{style:{marginTop:8,fontSize:12},children:A}),X.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:12},children:[X.jsx("input",{type:"checkbox",checked:Ge,onChange:z=>oe(z.target.checked)})," ","I understand and consent to local encrypted storage."]}),X.jsx("button",{disabled:!Ge||!S,onClick:()=>L(),children:"confirm ingestion"})," ",X.jsx("button",{onClick:()=>ze(!1),children:"cancel"}),!S&&X.jsx("div",{style:{marginTop:8,fontSize:12,color:"#900"},children:"Passphrase must be at least 8 characters before ingestion."})]}),X.jsx("hr",{}),X.jsx("h3",{children:"Ask a question"}),X.jsx("textarea",{value:nt,onChange:z=>Ft(z.target.value),rows:3,style:{width:"100%"},placeholder:"Ask a question about your indexed emails..."}),X.jsxs("div",{style:{marginTop:8},children:[X.jsx("button",{onClick:()=>K(),disabled:!c||!S,children:"ask"})," ",X.jsx("button",{onClick:()=>j(),disabled:!c,children:"clear local index"})]}),X.jsx("h3",{style:{marginTop:14},children:"Answer"}),X.jsx("div",{style:{whiteSpace:"pre-wrap",border:"1px solid #ddd",padding:8,minHeight:70},children:Yn||"No answer yet."}),X.jsx("h3",{style:{marginTop:14},children:"Citations"}),it.length?it.map((z,F)=>X.jsxs("div",{style:{border:"1px solid #eee",padding:8,marginBottom:8},children:[X.jsx("div",{children:X.jsxs("strong",{children:["[",F+1,"] ",z.subject||"(no subject)"]})}),X.jsxs("div",{style:{fontSize:12,opacity:.8},children:[z.sender,"  ",z.received_dt," ",typeof z.score=="number"?` score: ${z.score.toFixed(4)}`:""]}),X.jsx("div",{style:{fontSize:12,marginTop:6},children:z.snippet}),X.jsx("button",{style:{marginTop:6},onClick:()=>window.open(z.weblink,"_blank","noopener,noreferrer"),children:"open email"})]},z.message_id)):X.jsx("div",{style:{fontSize:12,opacity:.8},children:"No citations."})]})}gS.createRoot(document.getElementById("root")).render(X.jsx(rS.StrictMode,{children:X.jsx(Cw,{})}));
