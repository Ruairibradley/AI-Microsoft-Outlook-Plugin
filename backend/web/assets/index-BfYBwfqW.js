(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function a(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(l){if(l.ep)return;l.ep=!0;const d=a(l);fetch(l.href,d)}})();function eC(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var xd={exports:{}},Lr={};var ey;function fA(){if(ey)return Lr;ey=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(r,l,d){var h=null;if(d!==void 0&&(h=""+d),l.key!==void 0&&(h=""+l.key),"key"in l){d={};for(var g in l)g!=="key"&&(d[g]=l[g])}else d=l;return l=d.ref,{$$typeof:u,type:r,key:h,ref:l!==void 0?l:null,props:d}}return Lr.Fragment=n,Lr.jsx=a,Lr.jsxs=a,Lr}var ty;function gA(){return ty||(ty=1,xd.exports=fA()),xd.exports}var E=gA(),Hd={exports:{}},re={};var ny;function mA(){if(ny)return re;ny=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),O=Symbol.iterator;function P(A){return A===null||typeof A!="object"?null:(A=O&&A[O]||A["@@iterator"],typeof A=="function"?A:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,Ce={};function ve(A,H,j){this.props=A,this.context=H,this.refs=Ce,this.updater=j||J}ve.prototype.isReactComponent={},ve.prototype.setState=function(A,H){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,H,"setState")},ve.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function de(){}de.prototype=ve.prototype;function Te(A,H,j){this.props=A,this.context=H,this.refs=Ce,this.updater=j||J}var Ke=Te.prototype=new de;Ke.constructor=Te,V(Ke,ve.prototype),Ke.isPureReactComponent=!0;var Qe=Array.isArray;function Je(){}var ce={H:null,A:null,T:null,S:null},ht=Object.prototype.hasOwnProperty;function It(A,H,j){var Y=j.ref;return{$$typeof:u,type:A,key:H,ref:Y!==void 0?Y:null,props:j}}function qn(A,H){return It(A.type,H,A.props)}function an(A){return typeof A=="object"&&A!==null&&A.$$typeof===u}function Ze(A){var H={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(j){return H[j]})}var kt=/\/+/g;function on(A,H){return typeof A=="object"&&A!==null&&A.key!=null?Ze(""+A.key):H.toString(36)}function Ot(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Je,Je):(A.status="pending",A.then(function(H){A.status==="pending"&&(A.status="fulfilled",A.value=H)},function(H){A.status==="pending"&&(A.status="rejected",A.reason=H)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function D(A,H,j,Y,ie){var ae=typeof A;(ae==="undefined"||ae==="boolean")&&(A=null);var oe=!1;if(A===null)oe=!0;else switch(ae){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(A.$$typeof){case u:case n:oe=!0;break;case T:return oe=A._init,D(oe(A._payload),H,j,Y,ie)}}if(oe)return ie=ie(A),oe=Y===""?"."+on(A,0):Y,Qe(ie)?(j="",oe!=null&&(j=oe.replace(kt,"$&/")+"/"),D(ie,H,j,"",function(pi){return pi})):ie!=null&&(an(ie)&&(ie=qn(ie,j+(ie.key==null||A&&A.key===ie.key?"":(""+ie.key).replace(kt,"$&/")+"/")+oe)),H.push(ie)),1;oe=0;var rt=Y===""?".":Y+":";if(Qe(A))for(var Re=0;Re<A.length;Re++)Y=A[Re],ae=rt+on(Y,Re),oe+=D(Y,H,j,ae,ie);else if(Re=P(A),typeof Re=="function")for(A=Re.call(A),Re=0;!(Y=A.next()).done;)Y=Y.value,ae=rt+on(Y,Re++),oe+=D(Y,H,j,ae,ie);else if(ae==="object"){if(typeof A.then=="function")return D(Ot(A),H,j,Y,ie);throw H=String(A),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return oe}function G(A,H,j){if(A==null)return A;var Y=[],ie=0;return D(A,Y,"","",function(ae){return H.call(j,ae,ie++)}),Y}function $(A){if(A._status===-1){var H=A._result;H=H(),H.then(function(j){(A._status===0||A._status===-1)&&(A._status=1,A._result=j)},function(j){(A._status===0||A._status===-1)&&(A._status=2,A._result=j)}),A._status===-1&&(A._status=0,A._result=H)}if(A._status===1)return A._result.default;throw A._result}var Se=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Ae={map:G,forEach:function(A,H,j){G(A,function(){H.apply(this,arguments)},j)},count:function(A){var H=0;return G(A,function(){H++}),H},toArray:function(A){return G(A,function(H){return H})||[]},only:function(A){if(!an(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return re.Activity=_,re.Children=Ae,re.Component=ve,re.Fragment=a,re.Profiler=l,re.PureComponent=Te,re.StrictMode=r,re.Suspense=m,re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,re.__COMPILER_RUNTIME={__proto__:null,c:function(A){return ce.H.useMemoCache(A)}},re.cache=function(A){return function(){return A.apply(null,arguments)}},re.cacheSignal=function(){return null},re.cloneElement=function(A,H,j){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var Y=V({},A.props),ie=A.key;if(H!=null)for(ae in H.key!==void 0&&(ie=""+H.key),H)!ht.call(H,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&H.ref===void 0||(Y[ae]=H[ae]);var ae=arguments.length-2;if(ae===1)Y.children=j;else if(1<ae){for(var oe=Array(ae),rt=0;rt<ae;rt++)oe[rt]=arguments[rt+2];Y.children=oe}return It(A.type,ie,Y)},re.createContext=function(A){return A={$$typeof:h,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:d,_context:A},A},re.createElement=function(A,H,j){var Y,ie={},ae=null;if(H!=null)for(Y in H.key!==void 0&&(ae=""+H.key),H)ht.call(H,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ie[Y]=H[Y]);var oe=arguments.length-2;if(oe===1)ie.children=j;else if(1<oe){for(var rt=Array(oe),Re=0;Re<oe;Re++)rt[Re]=arguments[Re+2];ie.children=rt}if(A&&A.defaultProps)for(Y in oe=A.defaultProps,oe)ie[Y]===void 0&&(ie[Y]=oe[Y]);return It(A,ae,ie)},re.createRef=function(){return{current:null}},re.forwardRef=function(A){return{$$typeof:g,render:A}},re.isValidElement=an,re.lazy=function(A){return{$$typeof:T,_payload:{_status:-1,_result:A},_init:$}},re.memo=function(A,H){return{$$typeof:y,type:A,compare:H===void 0?null:H}},re.startTransition=function(A){var H=ce.T,j={};ce.T=j;try{var Y=A(),ie=ce.S;ie!==null&&ie(j,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(Je,Se)}catch(ae){Se(ae)}finally{H!==null&&j.types!==null&&(H.types=j.types),ce.T=H}},re.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},re.use=function(A){return ce.H.use(A)},re.useActionState=function(A,H,j){return ce.H.useActionState(A,H,j)},re.useCallback=function(A,H){return ce.H.useCallback(A,H)},re.useContext=function(A){return ce.H.useContext(A)},re.useDebugValue=function(){},re.useDeferredValue=function(A,H){return ce.H.useDeferredValue(A,H)},re.useEffect=function(A,H){return ce.H.useEffect(A,H)},re.useEffectEvent=function(A){return ce.H.useEffectEvent(A)},re.useId=function(){return ce.H.useId()},re.useImperativeHandle=function(A,H,j){return ce.H.useImperativeHandle(A,H,j)},re.useInsertionEffect=function(A,H){return ce.H.useInsertionEffect(A,H)},re.useLayoutEffect=function(A,H){return ce.H.useLayoutEffect(A,H)},re.useMemo=function(A,H){return ce.H.useMemo(A,H)},re.useOptimistic=function(A,H){return ce.H.useOptimistic(A,H)},re.useReducer=function(A,H,j){return ce.H.useReducer(A,H,j)},re.useRef=function(A){return ce.H.useRef(A)},re.useState=function(A){return ce.H.useState(A)},re.useSyncExternalStore=function(A,H,j){return ce.H.useSyncExternalStore(A,H,j)},re.useTransition=function(){return ce.H.useTransition()},re.version="19.2.3",re}var iy;function dh(){return iy||(iy=1,Hd.exports=mA()),Hd.exports}var ne=dh();const pA=eC(ne);var Ld={exports:{}},zr={},zd={exports:{}},Pd={};var ay;function yA(){return ay||(ay=1,(function(u){function n(D,G){var $=D.length;D.push(G);e:for(;0<$;){var Se=$-1>>>1,Ae=D[Se];if(0<l(Ae,G))D[Se]=G,D[$]=Ae,$=Se;else break e}}function a(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var G=D[0],$=D.pop();if($!==G){D[0]=$;e:for(var Se=0,Ae=D.length,A=Ae>>>1;Se<A;){var H=2*(Se+1)-1,j=D[H],Y=H+1,ie=D[Y];if(0>l(j,$))Y<Ae&&0>l(ie,j)?(D[Se]=ie,D[Y]=$,Se=Y):(D[Se]=j,D[H]=$,Se=H);else if(Y<Ae&&0>l(ie,$))D[Se]=ie,D[Y]=$,Se=Y;else break e}}return G}function l(D,G){var $=D.sortIndex-G.sortIndex;return $!==0?$:D.id-G.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;u.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();u.unstable_now=function(){return h.now()-g}}var m=[],y=[],T=1,_=null,O=3,P=!1,J=!1,V=!1,Ce=!1,ve=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,Te=typeof setImmediate<"u"?setImmediate:null;function Ke(D){for(var G=a(y);G!==null;){if(G.callback===null)r(y);else if(G.startTime<=D)r(y),G.sortIndex=G.expirationTime,n(m,G);else break;G=a(y)}}function Qe(D){if(V=!1,Ke(D),!J)if(a(m)!==null)J=!0,Je||(Je=!0,Ze());else{var G=a(y);G!==null&&Ot(Qe,G.startTime-D)}}var Je=!1,ce=-1,ht=5,It=-1;function qn(){return Ce?!0:!(u.unstable_now()-It<ht)}function an(){if(Ce=!1,Je){var D=u.unstable_now();It=D;var G=!0;try{e:{J=!1,V&&(V=!1,de(ce),ce=-1),P=!0;var $=O;try{t:{for(Ke(D),_=a(m);_!==null&&!(_.expirationTime>D&&qn());){var Se=_.callback;if(typeof Se=="function"){_.callback=null,O=_.priorityLevel;var Ae=Se(_.expirationTime<=D);if(D=u.unstable_now(),typeof Ae=="function"){_.callback=Ae,Ke(D),G=!0;break t}_===a(m)&&r(m),Ke(D)}else r(m);_=a(m)}if(_!==null)G=!0;else{var A=a(y);A!==null&&Ot(Qe,A.startTime-D),G=!1}}break e}finally{_=null,O=$,P=!1}G=void 0}}finally{G?Ze():Je=!1}}}var Ze;if(typeof Te=="function")Ze=function(){Te(an)};else if(typeof MessageChannel<"u"){var kt=new MessageChannel,on=kt.port2;kt.port1.onmessage=an,Ze=function(){on.postMessage(null)}}else Ze=function(){ve(an,0)};function Ot(D,G){ce=ve(function(){D(u.unstable_now())},G)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(D){D.callback=null},u.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<D?Math.floor(1e3/D):5},u.unstable_getCurrentPriorityLevel=function(){return O},u.unstable_next=function(D){switch(O){case 1:case 2:case 3:var G=3;break;default:G=O}var $=O;O=G;try{return D()}finally{O=$}},u.unstable_requestPaint=function(){Ce=!0},u.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=O;O=D;try{return G()}finally{O=$}},u.unstable_scheduleCallback=function(D,G,$){var Se=u.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Se+$:Se):$=Se,D){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=$+Ae,D={id:T++,callback:G,priorityLevel:D,startTime:$,expirationTime:Ae,sortIndex:-1},$>Se?(D.sortIndex=$,n(y,D),a(m)===null&&D===a(y)&&(V?(de(ce),ce=-1):V=!0,Ot(Qe,$-Se))):(D.sortIndex=Ae,n(m,D),J||P||(J=!0,Je||(Je=!0,Ze()))),D},u.unstable_shouldYield=qn,u.unstable_wrapCallback=function(D){var G=O;return function(){var $=O;O=G;try{return D.apply(this,arguments)}finally{O=$}}}})(Pd)),Pd}var oy;function CA(){return oy||(oy=1,zd.exports=yA()),zd.exports}var Bd={exports:{}},_t={};var ry;function vA(){if(ry)return _t;ry=1;var u=dh();function n(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(m,y,T){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:_==null?null:""+_,children:m,containerInfo:y,implementation:T}}var h=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_t.createPortal=function(m,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return d(m,y,null,T)},_t.flushSync=function(m){var y=h.T,T=r.p;try{if(h.T=null,r.p=2,m)return m()}finally{h.T=y,r.p=T,r.d.f()}},_t.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(m,y))},_t.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},_t.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var T=y.as,_=g(T,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:O,fetchPriority:P}):T==="script"&&r.d.X(m,{crossOrigin:_,integrity:O,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},_t.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);r.d.M(m,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(m)},_t.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,_=g(T,y.crossOrigin);r.d.L(m,T,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},_t.preloadModule=function(m,y){if(typeof m=="string")if(y){var T=g(y.as,y.crossOrigin);r.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(m)},_t.requestFormReset=function(m){r.d.r(m)},_t.unstable_batchedUpdates=function(m,y){return m(y)},_t.useFormState=function(m,y,T){return h.H.useFormState(m,y,T)},_t.useFormStatus=function(){return h.H.useHostTransitionStatus()},_t.version="19.2.3",_t}var sy;function TA(){if(sy)return Bd.exports;sy=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Bd.exports=vA(),Bd.exports}var ly;function SA(){if(ly)return zr;ly=1;var u=CA(),n=dh(),a=TA();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(r(188))}function y(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,o=t;;){var s=i.return;if(s===null)break;var c=s.alternate;if(c===null){if(o=s.return,o!==null){i=o;continue}break}if(s.child===c.child){for(c=s.child;c;){if(c===i)return m(s),e;if(c===o)return m(s),t;c=c.sibling}throw Error(r(188))}if(i.return!==o.return)i=s,o=c;else{for(var f=!1,p=s.child;p;){if(p===i){f=!0,i=s,o=c;break}if(p===o){f=!0,o=s,i=c;break}p=p.sibling}if(!f){for(p=c.child;p;){if(p===i){f=!0,i=c,o=s;break}if(p===o){f=!0,o=c,i=s;break}p=p.sibling}if(!f)throw Error(r(189))}}if(i.alternate!==o)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function T(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=T(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,O=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),Ce=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),de=Symbol.for("react.consumer"),Te=Symbol.for("react.context"),Ke=Symbol.for("react.forward_ref"),Qe=Symbol.for("react.suspense"),Je=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),It=Symbol.for("react.activity"),qn=Symbol.for("react.memo_cache_sentinel"),an=Symbol.iterator;function Ze(e){return e===null||typeof e!="object"?null:(e=an&&e[an]||e["@@iterator"],typeof e=="function"?e:null)}var kt=Symbol.for("react.client.reference");function on(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===kt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V:return"Fragment";case ve:return"Profiler";case Ce:return"StrictMode";case Qe:return"Suspense";case Je:return"SuspenseList";case It:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case J:return"Portal";case Te:return e.displayName||"Context";case de:return(e._context.displayName||"Context")+".Consumer";case Ke:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:on(e.type)||"Memo";case ht:t=e._payload,e=e._init;try{return on(e(t))}catch{}}return null}var Ot=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},Se=[],Ae=-1;function A(e){return{current:e}}function H(e){0>Ae||(e.current=Se[Ae],Se[Ae]=null,Ae--)}function j(e,t){Ae++,Se[Ae]=e.current,e.current=t}var Y=A(null),ie=A(null),ae=A(null),oe=A(null);function rt(e,t){switch(j(ae,t),j(ie,e),j(Y,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ep(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ep(t),e=_p(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(Y),j(Y,e)}function Re(){H(Y),H(ie),H(ae)}function pi(e){e.memoizedState!==null&&j(oe,e);var t=Y.current,i=_p(t,e.type);t!==i&&(j(ie,e),j(Y,i))}function vn(e){ie.current===e&&(H(Y),H(ie)),oe.current===e&&(H(oe),Dr._currentValue=$)}var Ka,Mn;function Ft(e){if(Ka===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ka=t&&t[1]||"",Mn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ka+e+Mn}var oa=!1;function ra(e,t){if(!e||oa)return"";oa=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(k){var I=k}Reflect.construct(e,[],L)}else{try{L.call()}catch(k){I=k}e.call(L.prototype)}}else{try{throw Error()}catch(k){I=k}(L=e())&&typeof L.catch=="function"&&L.catch(function(){})}}catch(k){if(k&&I&&typeof k.stack=="string")return[k.stack,I.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=o.DetermineComponentFrameRoot(),f=c[0],p=c[1];if(f&&p){var C=f.split(`
`),R=p.split(`
`);for(s=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;s<R.length&&!R[s].includes("DetermineComponentFrameRoot");)s++;if(o===C.length||s===R.length)for(o=C.length-1,s=R.length-1;1<=o&&0<=s&&C[o]!==R[s];)s--;for(;1<=o&&0<=s;o--,s--)if(C[o]!==R[s]){if(o!==1||s!==1)do if(o--,s--,0>s||C[o]!==R[s]){var N=`
`+C[o].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=o&&0<=s);break}}}finally{oa=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ft(i):""}function Bo(e,t){switch(e.tag){case 26:case 27:case 5:return Ft(e.type);case 16:return Ft("Lazy");case 13:return e.child!==t&&t!==null?Ft("Suspense Fallback"):Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return ra(e.type,!1);case 11:return ra(e.type.render,!1);case 1:return ra(e.type,!0);case 31:return Ft("Activity");default:return""}}function Ga(e){try{var t="",i=null;do t+=Bo(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ja=Object.prototype.hasOwnProperty,Yn=u.unstable_scheduleCallback,yi=u.unstable_cancelCallback,Wr=u.unstable_shouldYield,wc=u.unstable_requestPaint,ut=u.unstable_now,Rc=u.unstable_getCurrentPriorityLevel,qa=u.unstable_ImmediatePriority,es=u.unstable_UserBlockingPriority,Fn=u.unstable_NormalPriority,Ic=u.unstable_LowPriority,Nn=u.unstable_IdlePriority,kc=u.log,ts=u.unstable_setDisableYieldValue,Tn=null,$e=null;function ft(e){if(typeof kc=="function"&&ts(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Tn,e)}catch{}}var je=Math.clz32?Math.clz32:as,ns=Math.log,is=Math.LN2;function as(e){return e>>>=0,e===0?32:31-(ns(e)/is|0)|0}var sa=256,Ya=262144,la=4194304;function Dn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ca(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var s=0,c=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var p=o&134217727;return p!==0?(o=p&~c,o!==0?s=Dn(o):(f&=p,f!==0?s=Dn(f):i||(i=p&~e,i!==0&&(s=Dn(i))))):(p=o&~c,p!==0?s=Dn(p):f!==0?s=Dn(f):i||(i=o&~e,i!==0&&(s=Dn(i)))),s===0?0:t!==0&&t!==s&&(t&c)===0&&(c=s&-s,i=t&-t,c>=i||c===32&&(i&4194048)!==0)?t:s}function ua(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Fa(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(){var e=la;return la<<=1,(la&62914560)===0&&(la=4194304),e}function Qn(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function da(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function os(e,t,i,o,s,c){var f=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var p=e.entanglements,C=e.expirationTimes,R=e.hiddenUpdates;for(i=f&~i;0<i;){var N=31-je(i),L=1<<N;p[N]=0,C[N]=-1;var I=R[N];if(I!==null)for(R[N]=null,N=0;N<I.length;N++){var k=I[N];k!==null&&(k.lane&=-536870913)}i&=~L}o!==0&&rs(e,o,0),c!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=c&~(f&~t))}function rs(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-je(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function ss(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-je(i),s=1<<o;s&t|e[o]&t&&(e[o]|=t),i&=~s}}function ls(e,t){var i=t&-t;return i=(i&42)!==0?1:ha(i),(i&(e.suspendedLanes|t))!==0?0:i}function ha(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Go(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function jo(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Qp(e.type))}function fa(e,t){var i=G.p;try{return G.p=e,t()}finally{G.p=i}}var Un=Math.random().toString(36).slice(2),st="__reactFiber$"+Un,Et="__reactProps$"+Un,Ci="__reactContainer$"+Un,Sn="__reactEvents$"+Un,Oc="__reactListeners$"+Un,Mc="__reactHandles$"+Un,cs="__reactResources$"+Un,ga="__reactMarker$"+Un;function qo(e){delete e[st],delete e[Et],delete e[Sn],delete e[Oc],delete e[Mc]}function vi(e){var t=e[st];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ci]||i[st]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Mp(e);e!==null;){if(i=e[st])return i;e=Mp(e)}return t}e=i,i=e.parentNode}return null}function Ti(e){if(e=e[st]||e[Ci]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ma(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function Si(e){var t=e[cs];return t||(t=e[cs]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[ga]=!0}var us=new Set,ds={};function Vn(e,t){Ai(e,t),Ai(e+"Capture",t)}function Ai(e,t){for(ds[e]=t,e=0;e<t.length;e++)us.add(t[e])}var Nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hs={},fs={};function gs(e){return ja.call(fs,e)?!0:ja.call(hs,e)?!1:Nc.test(e)?fs[e]=!0:(hs[e]=!0,!1)}function Qa(e,t,i){if(gs(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Va(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function An(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ms(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yo(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var s=o.get,c=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(f){i=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fo(e){if(!e._valueTracker){var t=ms(e)?"checked":"value";e._valueTracker=Yo(e,t,""+e[t])}}function ps(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=ms(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function x(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var K=/[\n"\\]/g;function W(e){return e.replace(K,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function et(e,t,i,o,s,c,f,p){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ht(t)):e.value!==""+Ht(t)&&(e.value=""+Ht(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Ge(e,f,Ht(t)):i!=null?Ge(e,f,Ht(i)):o!=null&&e.removeAttribute("value"),s==null&&c!=null&&(e.defaultChecked=!!c),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+Ht(p):e.removeAttribute("name")}function rn(e,t,i,o,s,c,f,p){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||i!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){Fo(e);return}i=i!=null?""+Ht(i):"",t=t!=null?""+Ht(t):i,p||t===e.value||(e.value=t),e.defaultValue=t}o=o??s,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=p?e.checked:!!o,e.defaultChecked=!!o,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Fo(e)}function Ge(e,t,i){t==="number"&&x(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Mt(e,t,i,o){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Ht(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,o&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ys(e,t,i){if(t!=null&&(t=""+Ht(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Ht(i):""}function Dc(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(r(92));if(Ot(o)){if(1<o.length)throw Error(r(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=Ht(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Fo(e)}function Ei(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Cs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qo(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||Cs.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function vs(e,t,i){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var s in t)o=t[s],t.hasOwnProperty(s)&&i[s]!==o&&Qo(e,s,o)}else for(var c in t)t.hasOwnProperty(c)&&Qo(e,c,t[c])}function gt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ts=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _i(e){return Ts.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function sn(){}var bi=null;function pa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var En=null,Xn=null;function Xo(e){var t=Ti(e);if(t&&(e=t.stateNode)){var i=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(et(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+W(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var s=o[Et]||null;if(!s)throw Error(r(90));et(o,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&ps(o)}break e;case"textarea":ys(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Mt(e,!!i.multiple,t,!1)}}}var Uc=!1;function Ef(e,t,i){if(Uc)return e(t,i);Uc=!0;try{var o=e(t);return o}finally{if(Uc=!1,(En!==null||Xn!==null)&&(sl(),En&&(t=En,e=Xn,Xn=En=null,Xo(t),e)))for(t=0;t<e.length;t++)Xo(e[t])}}function Jo(e,t){var i=e.stateNode;if(i===null)return null;var o=i[Et]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xc=!1;if(Jn)try{var Zo={};Object.defineProperty(Zo,"passive",{get:function(){xc=!0}}),window.addEventListener("test",Zo,Zo),window.removeEventListener("test",Zo,Zo)}catch{xc=!1}var wi=null,Hc=null,Ss=null;function _f(){if(Ss)return Ss;var e,t=Hc,i=t.length,o,s="value"in wi?wi.value:wi.textContent,c=s.length;for(e=0;e<i&&t[e]===s[e];e++);var f=i-e;for(o=1;o<=f&&t[i-o]===s[c-o];o++);return Ss=s.slice(e,1<o?1-o:void 0)}function As(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Es(){return!0}function bf(){return!1}function Lt(e){function t(i,o,s,c,f){this._reactName=i,this._targetInst=s,this.type=o,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(i=e[p],this[p]=i?i(c):c[p]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Es:bf,this.isPropagationStopped=bf,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),t}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_s=Lt(ya),$o=_({},ya,{view:0,detail:0}),dT=Lt($o),Lc,zc,Wo,bs=_({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wo&&(Wo&&e.type==="mousemove"?(Lc=e.screenX-Wo.screenX,zc=e.screenY-Wo.screenY):zc=Lc=0,Wo=e),Lc)},movementY:function(e){return"movementY"in e?e.movementY:zc}}),wf=Lt(bs),hT=_({},bs,{dataTransfer:0}),fT=Lt(hT),gT=_({},$o,{relatedTarget:0}),Pc=Lt(gT),mT=_({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),pT=Lt(mT),yT=_({},ya,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),CT=Lt(yT),vT=_({},ya,{data:0}),Rf=Lt(vT),TT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ST={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ET(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AT[e])?!!t[e]:!1}function Bc(){return ET}var _T=_({},$o,{key:function(e){if(e.key){var t=TT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=As(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ST[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(e){return e.type==="keypress"?As(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?As(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bT=Lt(_T),wT=_({},bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),If=Lt(wT),RT=_({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),IT=Lt(RT),kT=_({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),OT=Lt(kT),MT=_({},bs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),NT=Lt(MT),DT=_({},ya,{newState:0,oldState:0}),UT=Lt(DT),xT=[9,13,27,32],Kc=Jn&&"CompositionEvent"in window,er=null;Jn&&"documentMode"in document&&(er=document.documentMode);var HT=Jn&&"TextEvent"in window&&!er,kf=Jn&&(!Kc||er&&8<er&&11>=er),Of=" ",Mf=!1;function Nf(e,t){switch(e){case"keyup":return xT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Df(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xa=!1;function LT(e,t){switch(e){case"compositionend":return Df(t);case"keypress":return t.which!==32?null:(Mf=!0,Of);case"textInput":return e=t.data,e===Of&&Mf?null:e;default:return null}}function zT(e,t){if(Xa)return e==="compositionend"||!Kc&&Nf(e,t)?(e=_f(),Ss=Hc=wi=null,Xa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kf&&t.locale!=="ko"?null:t.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PT[e.type]:t==="textarea"}function xf(e,t,i,o){En?Xn?Xn.push(o):Xn=[o]:En=o,t=gl(t,"onChange"),0<t.length&&(i=new _s("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var tr=null,nr=null;function BT(e){yp(e,0)}function ws(e){var t=ma(e);if(ps(t))return e}function Hf(e,t){if(e==="change")return t}var Lf=!1;if(Jn){var Gc;if(Jn){var jc="oninput"in document;if(!jc){var zf=document.createElement("div");zf.setAttribute("oninput","return;"),jc=typeof zf.oninput=="function"}Gc=jc}else Gc=!1;Lf=Gc&&(!document.documentMode||9<document.documentMode)}function Pf(){tr&&(tr.detachEvent("onpropertychange",Bf),nr=tr=null)}function Bf(e){if(e.propertyName==="value"&&ws(nr)){var t=[];xf(t,nr,e,pa(e)),Ef(BT,t)}}function KT(e,t,i){e==="focusin"?(Pf(),tr=t,nr=i,tr.attachEvent("onpropertychange",Bf)):e==="focusout"&&Pf()}function GT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ws(nr)}function jT(e,t){if(e==="click")return ws(t)}function qT(e,t){if(e==="input"||e==="change")return ws(t)}function YT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:YT;function ir(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var s=i[o];if(!ja.call(t,s)||!Qt(e[s],t[s]))return!1}return!0}function Kf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gf(e,t){var i=Kf(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Kf(i)}}function jf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=x(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=x(e.document)}return t}function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var FT=Jn&&"documentMode"in document&&11>=document.documentMode,Ja=null,Yc=null,ar=null,Fc=!1;function Yf(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Fc||Ja==null||Ja!==x(o)||(o=Ja,"selectionStart"in o&&qc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ar&&ir(ar,o)||(ar=o,o=gl(Yc,"onSelect"),0<o.length&&(t=new _s("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=Ja)))}function Ca(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Za={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionrun:Ca("Transition","TransitionRun"),transitionstart:Ca("Transition","TransitionStart"),transitioncancel:Ca("Transition","TransitionCancel"),transitionend:Ca("Transition","TransitionEnd")},Qc={},Ff={};Jn&&(Ff=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function va(e){if(Qc[e])return Qc[e];if(!Za[e])return e;var t=Za[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Ff)return Qc[e]=t[i];return e}var Qf=va("animationend"),Vf=va("animationiteration"),Xf=va("animationstart"),QT=va("transitionrun"),VT=va("transitionstart"),XT=va("transitioncancel"),Jf=va("transitionend"),Zf=new Map,Vc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vc.push("scrollEnd");function _n(e,t){Zf.set(e,t),Vn(t,[e])}var Rs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ln=[],$a=0,Xc=0;function Is(){for(var e=$a,t=Xc=$a=0;t<e;){var i=ln[t];ln[t++]=null;var o=ln[t];ln[t++]=null;var s=ln[t];ln[t++]=null;var c=ln[t];if(ln[t++]=null,o!==null&&s!==null){var f=o.pending;f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s}c!==0&&$f(i,s,c)}}function ks(e,t,i,o){ln[$a++]=e,ln[$a++]=t,ln[$a++]=i,ln[$a++]=o,Xc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Jc(e,t,i,o){return ks(e,t,i,o),Os(e)}function Ta(e,t){return ks(e,null,null,t),Os(e)}function $f(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var s=!1,c=e.return;c!==null;)c.childLanes|=i,o=c.alternate,o!==null&&(o.childLanes|=i),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(s=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,s&&t!==null&&(s=31-je(i),e=c.hiddenUpdates,o=e[s],o===null?e[s]=[t]:o.push(t),t.lane=i|536870912),c):null}function Os(e){if(50<wr)throw wr=0,od=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Wa={};function JT(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,i,o){return new JT(e,t,i,o)}function Zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zn(e,t){var i=e.alternate;return i===null?(i=Vt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Wf(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ms(e,t,i,o,s,c){var f=0;if(o=e,typeof e=="function")Zc(e)&&(f=1);else if(typeof e=="string")f=tA(e,i,Y.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case It:return e=Vt(31,i,t,s),e.elementType=It,e.lanes=c,e;case V:return Sa(i.children,s,c,t);case Ce:f=8,s|=24;break;case ve:return e=Vt(12,i,t,s|2),e.elementType=ve,e.lanes=c,e;case Qe:return e=Vt(13,i,t,s),e.elementType=Qe,e.lanes=c,e;case Je:return e=Vt(19,i,t,s),e.elementType=Je,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Te:f=10;break e;case de:f=9;break e;case Ke:f=11;break e;case ce:f=14;break e;case ht:f=16,o=null;break e}f=29,i=Error(r(130,e===null?"null":typeof e,"")),o=null}return t=Vt(f,i,t,s),t.elementType=e,t.type=o,t.lanes=c,t}function Sa(e,t,i,o){return e=Vt(7,e,o,t),e.lanes=i,e}function $c(e,t,i){return e=Vt(6,e,null,t),e.lanes=i,e}function eg(e){var t=Vt(18,null,null,0);return t.stateNode=e,t}function Wc(e,t,i){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tg=new WeakMap;function cn(e,t){if(typeof e=="object"&&e!==null){var i=tg.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Ga(t)},tg.set(e,t),t)}return{value:e,source:t,stack:Ga(t)}}var eo=[],to=0,Ns=null,or=0,un=[],dn=0,Ri=null,xn=1,Hn="";function $n(e,t){eo[to++]=or,eo[to++]=Ns,Ns=e,or=t}function ng(e,t,i){un[dn++]=xn,un[dn++]=Hn,un[dn++]=Ri,Ri=e;var o=xn;e=Hn;var s=32-je(o)-1;o&=~(1<<s),i+=1;var c=32-je(t)+s;if(30<c){var f=s-s%5;c=(o&(1<<f)-1).toString(32),o>>=f,s-=f,xn=1<<32-je(t)+s|i<<s|o,Hn=c+e}else xn=1<<c|i<<s|o,Hn=e}function eu(e){e.return!==null&&($n(e,1),ng(e,1,0))}function tu(e){for(;e===Ns;)Ns=eo[--to],eo[to]=null,or=eo[--to],eo[to]=null;for(;e===Ri;)Ri=un[--dn],un[dn]=null,Hn=un[--dn],un[dn]=null,xn=un[--dn],un[dn]=null}function ig(e,t){un[dn++]=xn,un[dn++]=Hn,un[dn++]=Ri,xn=t.id,Hn=t.overflow,Ri=e}var mt=null,Le=null,pe=!1,Ii=null,hn=!1,nu=Error(r(519));function ki(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rr(cn(t,e)),nu}function ag(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[st]=e,t[Et]=o,i){case"dialog":fe("cancel",t),fe("close",t);break;case"iframe":case"object":case"embed":fe("load",t);break;case"video":case"audio":for(i=0;i<Ir.length;i++)fe(Ir[i],t);break;case"source":fe("error",t);break;case"img":case"image":case"link":fe("error",t),fe("load",t);break;case"details":fe("toggle",t);break;case"input":fe("invalid",t),rn(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":fe("invalid",t);break;case"textarea":fe("invalid",t),Dc(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||Sp(t.textContent,i)?(o.popover!=null&&(fe("beforetoggle",t),fe("toggle",t)),o.onScroll!=null&&fe("scroll",t),o.onScrollEnd!=null&&fe("scrollend",t),o.onClick!=null&&(t.onclick=sn),t=!0):t=!1,t||ki(e,!0)}function og(e){for(mt=e.return;mt;)switch(mt.tag){case 5:case 31:case 13:hn=!1;return;case 27:case 3:hn=!0;return;default:mt=mt.return}}function no(e){if(e!==mt)return!1;if(!pe)return og(e),pe=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Td(e.type,e.memoizedProps)),i=!i),i&&Le&&ki(e),og(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Le=Op(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Le=Op(e)}else t===27?(t=Le,ji(e.type)?(e=bd,bd=null,Le=e):Le=t):Le=mt?gn(e.stateNode.nextSibling):null;return!0}function Aa(){Le=mt=null,pe=!1}function iu(){var e=Ii;return e!==null&&(Kt===null?Kt=e:Kt.push.apply(Kt,e),Ii=null),e}function rr(e){Ii===null?Ii=[e]:Ii.push(e)}var au=A(null),Ea=null,Wn=null;function Oi(e,t,i){j(au,t._currentValue),t._currentValue=i}function ei(e){e._currentValue=au.current,H(au)}function ou(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function ru(e,t,i,o){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){var f=s.child;c=c.firstContext;e:for(;c!==null;){var p=c;c=s;for(var C=0;C<t.length;C++)if(p.context===t[C]){c.lanes|=i,p=c.alternate,p!==null&&(p.lanes|=i),ou(c.return,i,e),o||(f=null);break e}c=p.next}}else if(s.tag===18){if(f=s.return,f===null)throw Error(r(341));f.lanes|=i,c=f.alternate,c!==null&&(c.lanes|=i),ou(f,i,e),f=null}else f=s.child;if(f!==null)f.return=s;else for(f=s;f!==null;){if(f===e){f=null;break}if(s=f.sibling,s!==null){s.return=f.return,f=s;break}f=f.return}s=f}}function io(e,t,i,o){e=null;for(var s=t,c=!1;s!==null;){if(!c){if((s.flags&524288)!==0)c=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var f=s.alternate;if(f===null)throw Error(r(387));if(f=f.memoizedProps,f!==null){var p=s.type;Qt(s.pendingProps.value,f.value)||(e!==null?e.push(p):e=[p])}}else if(s===oe.current){if(f=s.alternate,f===null)throw Error(r(387));f.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Dr):e=[Dr])}s=s.return}e!==null&&ru(t,e,i,o),t.flags|=262144}function Ds(e){for(e=e.firstContext;e!==null;){if(!Qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){Ea=e,Wn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pt(e){return rg(Ea,e)}function Us(e,t){return Ea===null&&_a(e),rg(e,t)}function rg(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Wn===null){if(e===null)throw Error(r(308));Wn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wn=Wn.next=t;return i}var ZT=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},$T=u.unstable_scheduleCallback,WT=u.unstable_NormalPriority,tt={$$typeof:Te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function su(){return{controller:new ZT,data:new Map,refCount:0}}function sr(e){e.refCount--,e.refCount===0&&$T(WT,function(){e.controller.abort()})}var lr=null,lu=0,ao=0,oo=null;function eS(e,t){if(lr===null){var i=lr=[];lu=0,ao=dd(),oo={status:"pending",value:void 0,then:function(o){i.push(o)}}}return lu++,t.then(sg,sg),t}function sg(){if(--lu===0&&lr!==null){oo!==null&&(oo.status="fulfilled");var e=lr;lr=null,ao=0,oo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function tS(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(o.status="rejected",o.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),o}var lg=D.S;D.S=function(e,t){Ym=ut(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&eS(e,t),lg!==null&&lg(e,t)};var ba=A(null);function cu(){var e=ba.current;return e!==null?e:He.pooledCache}function xs(e,t){t===null?j(ba,ba.current):j(ba,t.pool)}function cg(){var e=cu();return e===null?null:{parent:tt._currentValue,pool:e}}var ro=Error(r(460)),uu=Error(r(474)),Hs=Error(r(542)),Ls={then:function(){}};function ug(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dg(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(sn,sn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fg(e),e;default:if(typeof t.status=="string")t.then(sn,sn);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=o}},function(o){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fg(e),e}throw Ra=t,ro}}function wa(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ra=i,ro):i}}var Ra=null;function hg(){if(Ra===null)throw Error(r(459));var e=Ra;return Ra=null,e}function fg(e){if(e===ro||e===Hs)throw Error(r(483))}var so=null,cr=0;function zs(e){var t=cr;return cr+=1,so===null&&(so=[]),dg(so,e,t)}function ur(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ps(e,t){throw t.$$typeof===O?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function gg(e){function t(b,S){if(e){var w=b.deletions;w===null?(b.deletions=[S],b.flags|=16):w.push(S)}}function i(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function o(b){for(var S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function s(b,S){return b=Zn(b,S),b.index=0,b.sibling=null,b}function c(b,S,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<S?(b.flags|=67108866,S):w):(b.flags|=67108866,S)):(b.flags|=1048576,S)}function f(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function p(b,S,w,U){return S===null||S.tag!==6?(S=$c(w,b.mode,U),S.return=b,S):(S=s(S,w),S.return=b,S)}function C(b,S,w,U){var X=w.type;return X===V?N(b,S,w.props.children,U,w.key):S!==null&&(S.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ht&&wa(X)===S.type)?(S=s(S,w.props),ur(S,w),S.return=b,S):(S=Ms(w.type,w.key,w.props,null,b.mode,U),ur(S,w),S.return=b,S)}function R(b,S,w,U){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=Wc(w,b.mode,U),S.return=b,S):(S=s(S,w.children||[]),S.return=b,S)}function N(b,S,w,U,X){return S===null||S.tag!==7?(S=Sa(w,b.mode,U,X),S.return=b,S):(S=s(S,w),S.return=b,S)}function L(b,S,w){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=$c(""+S,b.mode,w),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case P:return w=Ms(S.type,S.key,S.props,null,b.mode,w),ur(w,S),w.return=b,w;case J:return S=Wc(S,b.mode,w),S.return=b,S;case ht:return S=wa(S),L(b,S,w)}if(Ot(S)||Ze(S))return S=Sa(S,b.mode,w,null),S.return=b,S;if(typeof S.then=="function")return L(b,zs(S),w);if(S.$$typeof===Te)return L(b,Us(b,S),w);Ps(b,S)}return null}function I(b,S,w,U){var X=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return X!==null?null:p(b,S,""+w,U);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case P:return w.key===X?C(b,S,w,U):null;case J:return w.key===X?R(b,S,w,U):null;case ht:return w=wa(w),I(b,S,w,U)}if(Ot(w)||Ze(w))return X!==null?null:N(b,S,w,U,null);if(typeof w.then=="function")return I(b,S,zs(w),U);if(w.$$typeof===Te)return I(b,S,Us(b,w),U);Ps(b,w)}return null}function k(b,S,w,U,X){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return b=b.get(w)||null,p(S,b,""+U,X);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case P:return b=b.get(U.key===null?w:U.key)||null,C(S,b,U,X);case J:return b=b.get(U.key===null?w:U.key)||null,R(S,b,U,X);case ht:return U=wa(U),k(b,S,w,U,X)}if(Ot(U)||Ze(U))return b=b.get(w)||null,N(S,b,U,X,null);if(typeof U.then=="function")return k(b,S,w,zs(U),X);if(U.$$typeof===Te)return k(b,S,w,Us(S,U),X);Ps(S,U)}return null}function F(b,S,w,U){for(var X=null,Ee=null,Q=S,le=S=0,me=null;Q!==null&&le<w.length;le++){Q.index>le?(me=Q,Q=null):me=Q.sibling;var _e=I(b,Q,w[le],U);if(_e===null){Q===null&&(Q=me);break}e&&Q&&_e.alternate===null&&t(b,Q),S=c(_e,S,le),Ee===null?X=_e:Ee.sibling=_e,Ee=_e,Q=me}if(le===w.length)return i(b,Q),pe&&$n(b,le),X;if(Q===null){for(;le<w.length;le++)Q=L(b,w[le],U),Q!==null&&(S=c(Q,S,le),Ee===null?X=Q:Ee.sibling=Q,Ee=Q);return pe&&$n(b,le),X}for(Q=o(Q);le<w.length;le++)me=k(Q,b,le,w[le],U),me!==null&&(e&&me.alternate!==null&&Q.delete(me.key===null?le:me.key),S=c(me,S,le),Ee===null?X=me:Ee.sibling=me,Ee=me);return e&&Q.forEach(function(Vi){return t(b,Vi)}),pe&&$n(b,le),X}function ee(b,S,w,U){if(w==null)throw Error(r(151));for(var X=null,Ee=null,Q=S,le=S=0,me=null,_e=w.next();Q!==null&&!_e.done;le++,_e=w.next()){Q.index>le?(me=Q,Q=null):me=Q.sibling;var Vi=I(b,Q,_e.value,U);if(Vi===null){Q===null&&(Q=me);break}e&&Q&&Vi.alternate===null&&t(b,Q),S=c(Vi,S,le),Ee===null?X=Vi:Ee.sibling=Vi,Ee=Vi,Q=me}if(_e.done)return i(b,Q),pe&&$n(b,le),X;if(Q===null){for(;!_e.done;le++,_e=w.next())_e=L(b,_e.value,U),_e!==null&&(S=c(_e,S,le),Ee===null?X=_e:Ee.sibling=_e,Ee=_e);return pe&&$n(b,le),X}for(Q=o(Q);!_e.done;le++,_e=w.next())_e=k(Q,b,le,_e.value,U),_e!==null&&(e&&_e.alternate!==null&&Q.delete(_e.key===null?le:_e.key),S=c(_e,S,le),Ee===null?X=_e:Ee.sibling=_e,Ee=_e);return e&&Q.forEach(function(hA){return t(b,hA)}),pe&&$n(b,le),X}function De(b,S,w,U){if(typeof w=="object"&&w!==null&&w.type===V&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case P:e:{for(var X=w.key;S!==null;){if(S.key===X){if(X=w.type,X===V){if(S.tag===7){i(b,S.sibling),U=s(S,w.props.children),U.return=b,b=U;break e}}else if(S.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ht&&wa(X)===S.type){i(b,S.sibling),U=s(S,w.props),ur(U,w),U.return=b,b=U;break e}i(b,S);break}else t(b,S);S=S.sibling}w.type===V?(U=Sa(w.props.children,b.mode,U,w.key),U.return=b,b=U):(U=Ms(w.type,w.key,w.props,null,b.mode,U),ur(U,w),U.return=b,b=U)}return f(b);case J:e:{for(X=w.key;S!==null;){if(S.key===X)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){i(b,S.sibling),U=s(S,w.children||[]),U.return=b,b=U;break e}else{i(b,S);break}else t(b,S);S=S.sibling}U=Wc(w,b.mode,U),U.return=b,b=U}return f(b);case ht:return w=wa(w),De(b,S,w,U)}if(Ot(w))return F(b,S,w,U);if(Ze(w)){if(X=Ze(w),typeof X!="function")throw Error(r(150));return w=X.call(w),ee(b,S,w,U)}if(typeof w.then=="function")return De(b,S,zs(w),U);if(w.$$typeof===Te)return De(b,S,Us(b,w),U);Ps(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,S!==null&&S.tag===6?(i(b,S.sibling),U=s(S,w),U.return=b,b=U):(i(b,S),U=$c(w,b.mode,U),U.return=b,b=U),f(b)):i(b,S)}return function(b,S,w,U){try{cr=0;var X=De(b,S,w,U);return so=null,X}catch(Q){if(Q===ro||Q===Hs)throw Q;var Ee=Vt(29,Q,null,b.mode);return Ee.lanes=U,Ee.return=b,Ee}}}var Ia=gg(!0),mg=gg(!1),Mi=!1;function du(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ni(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Di(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(we&2)!==0){var s=o.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),o.pending=t,t=Os(e),$f(e,null,i),t}return ks(e,o,t,i),Os(e)}function dr(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,ss(e,i)}}function fu(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var s=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var f={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};c===null?s=c=f:c=c.next=f,i=i.next}while(i!==null);c===null?s=c=t:c=c.next=t}else s=c=t;i={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:c,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var gu=!1;function hr(){if(gu){var e=oo;if(e!==null)throw e}}function fr(e,t,i,o){gu=!1;var s=e.updateQueue;Mi=!1;var c=s.firstBaseUpdate,f=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var C=p,R=C.next;C.next=null,f===null?c=R:f.next=R,f=C;var N=e.alternate;N!==null&&(N=N.updateQueue,p=N.lastBaseUpdate,p!==f&&(p===null?N.firstBaseUpdate=R:p.next=R,N.lastBaseUpdate=C))}if(c!==null){var L=s.baseState;f=0,N=R=C=null,p=c;do{var I=p.lane&-536870913,k=I!==p.lane;if(k?(ge&I)===I:(o&I)===I){I!==0&&I===ao&&(gu=!0),N!==null&&(N=N.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var F=e,ee=p;I=t;var De=i;switch(ee.tag){case 1:if(F=ee.payload,typeof F=="function"){L=F.call(De,L,I);break e}L=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=ee.payload,I=typeof F=="function"?F.call(De,L,I):F,I==null)break e;L=_({},L,I);break e;case 2:Mi=!0}}I=p.callback,I!==null&&(e.flags|=64,k&&(e.flags|=8192),k=s.callbacks,k===null?s.callbacks=[I]:k.push(I))}else k={lane:I,tag:p.tag,payload:p.payload,callback:p.callback,next:null},N===null?(R=N=k,C=L):N=N.next=k,f|=I;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;k=p,p=k.next,k.next=null,s.lastBaseUpdate=k,s.shared.pending=null}}while(!0);N===null&&(C=L),s.baseState=C,s.firstBaseUpdate=R,s.lastBaseUpdate=N,c===null&&(s.shared.lanes=0),zi|=f,e.lanes=f,e.memoizedState=L}}function pg(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function yg(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)pg(i[e],t)}var lo=A(null),Bs=A(0);function Cg(e,t){e=ci,j(Bs,e),j(lo,t),ci=e|t.baseLanes}function mu(){j(Bs,ci),j(lo,lo.current)}function pu(){ci=Bs.current,H(lo),H(Bs)}var Xt=A(null),fn=null;function Ui(e){var t=e.alternate;j(Ve,Ve.current&1),j(Xt,e),fn===null&&(t===null||lo.current!==null||t.memoizedState!==null)&&(fn=e)}function yu(e){j(Ve,Ve.current),j(Xt,e),fn===null&&(fn=e)}function vg(e){e.tag===22?(j(Ve,Ve.current),j(Xt,e),fn===null&&(fn=e)):xi()}function xi(){j(Ve,Ve.current),j(Xt,Xt.current)}function Jt(e){H(Xt),fn===e&&(fn=null),H(Ve)}var Ve=A(0);function Ks(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Ed(i)||_d(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=0,se=null,Me=null,nt=null,Gs=!1,co=!1,ka=!1,js=0,gr=0,uo=null,nS=0;function qe(){throw Error(r(321))}function Cu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Qt(e[i],t[i]))return!1;return!0}function vu(e,t,i,o,s,c){return ti=c,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?nm:Uu,ka=!1,c=i(o,s),ka=!1,co&&(c=Sg(t,i,o,s)),Tg(e),c}function Tg(e){D.H=yr;var t=Me!==null&&Me.next!==null;if(ti=0,nt=Me=se=null,Gs=!1,gr=0,uo=null,t)throw Error(r(300));e===null||it||(e=e.dependencies,e!==null&&Ds(e)&&(it=!0))}function Sg(e,t,i,o){se=e;var s=0;do{if(co&&(uo=null),gr=0,co=!1,25<=s)throw Error(r(301));if(s+=1,nt=Me=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}D.H=im,c=t(i,o)}while(co);return c}function iS(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?mr(t):t,e=e.useState()[0],(Me!==null?Me.memoizedState:null)!==e&&(se.flags|=1024),t}function Tu(){var e=js!==0;return js=0,e}function Su(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Au(e){if(Gs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Gs=!1}ti=0,nt=Me=se=null,co=!1,gr=js=0,uo=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?se.memoizedState=nt=e:nt=nt.next=e,nt}function Xe(){if(Me===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=nt===null?se.memoizedState:nt.next;if(t!==null)nt=t,Me=e;else{if(e===null)throw se.alternate===null?Error(r(467)):Error(r(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},nt===null?se.memoizedState=nt=e:nt=nt.next=e}return nt}function qs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mr(e){var t=gr;return gr+=1,uo===null&&(uo=[]),e=dg(uo,e,t),t=se,(nt===null?t.memoizedState:nt.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?nm:Uu),e}function Ys(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return mr(e);if(e.$$typeof===Te)return pt(e)}throw Error(r(438,String(e)))}function Eu(e){var t=null,i=se.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=se.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=qs(),se.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=qn;return t.index++,i}function ni(e,t){return typeof t=="function"?t(e):t}function Fs(e){var t=Xe();return _u(t,Me,e)}function _u(e,t,i){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var s=e.baseQueue,c=o.pending;if(c!==null){if(s!==null){var f=s.next;s.next=c.next,c.next=f}t.baseQueue=s=c,o.pending=null}if(c=e.baseState,s===null)e.memoizedState=c;else{t=s.next;var p=f=null,C=null,R=t,N=!1;do{var L=R.lane&-536870913;if(L!==R.lane?(ge&L)===L:(ti&L)===L){var I=R.revertLane;if(I===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),L===ao&&(N=!0);else if((ti&I)===I){R=R.next,I===ao&&(N=!0);continue}else L={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},C===null?(p=C=L,f=c):C=C.next=L,se.lanes|=I,zi|=I;L=R.action,ka&&i(c,L),c=R.hasEagerState?R.eagerState:i(c,L)}else I={lane:L,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},C===null?(p=C=I,f=c):C=C.next=I,se.lanes|=L,zi|=L;R=R.next}while(R!==null&&R!==t);if(C===null?f=c:C.next=p,!Qt(c,e.memoizedState)&&(it=!0,N&&(i=oo,i!==null)))throw i;e.memoizedState=c,e.baseState=f,e.baseQueue=C,o.lastRenderedState=c}return s===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function bu(e){var t=Xe(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var o=i.dispatch,s=i.pending,c=t.memoizedState;if(s!==null){i.pending=null;var f=s=s.next;do c=e(c,f.action),f=f.next;while(f!==s);Qt(c,t.memoizedState)||(it=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),i.lastRenderedState=c}return[c,o]}function Ag(e,t,i){var o=se,s=Xe(),c=pe;if(c){if(i===void 0)throw Error(r(407));i=i()}else i=t();var f=!Qt((Me||s).memoizedState,i);if(f&&(s.memoizedState=i,it=!0),s=s.queue,Iu(bg.bind(null,o,s,e),[e]),s.getSnapshot!==t||f||nt!==null&&nt.memoizedState.tag&1){if(o.flags|=2048,ho(9,{destroy:void 0},_g.bind(null,o,s,i,t),null),He===null)throw Error(r(349));c||(ti&127)!==0||Eg(o,t,i)}return i}function Eg(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=se.updateQueue,t===null?(t=qs(),se.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function _g(e,t,i,o){t.value=i,t.getSnapshot=o,wg(t)&&Rg(e)}function bg(e,t,i){return i(function(){wg(t)&&Rg(e)})}function wg(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Qt(e,i)}catch{return!0}}function Rg(e){var t=Ta(e,2);t!==null&&Gt(t,e,2)}function wu(e){var t=Nt();if(typeof e=="function"){var i=e;if(e=i(),ka){ft(!0);try{i()}finally{ft(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:e},t}function Ig(e,t,i,o){return e.baseState=i,_u(e,Me,typeof o=="function"?o:ni)}function aS(e,t,i,o,s){if(Xs(e))throw Error(r(485));if(e=t.action,e!==null){var c={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){c.listeners.push(f)}};D.T!==null?i(!0):c.isTransition=!1,o(c),i=t.pending,i===null?(c.next=t.pending=c,kg(t,c)):(c.next=i.next,t.pending=i.next=c)}}function kg(e,t){var i=t.action,o=t.payload,s=e.state;if(t.isTransition){var c=D.T,f={};D.T=f;try{var p=i(s,o),C=D.S;C!==null&&C(f,p),Og(e,t,p)}catch(R){Ru(e,t,R)}finally{c!==null&&f.types!==null&&(c.types=f.types),D.T=c}}else try{c=i(s,o),Og(e,t,c)}catch(R){Ru(e,t,R)}}function Og(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){Mg(e,t,o)},function(o){return Ru(e,t,o)}):Mg(e,t,i)}function Mg(e,t,i){t.status="fulfilled",t.value=i,Ng(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,kg(e,i)))}function Ru(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,Ng(t),t=t.next;while(t!==o)}e.action=null}function Ng(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Dg(e,t){return t}function Ug(e,t){if(pe){var i=He.formState;if(i!==null){e:{var o=se;if(pe){if(Le){t:{for(var s=Le,c=hn;s.nodeType!==8;){if(!c){s=null;break t}if(s=gn(s.nextSibling),s===null){s=null;break t}}c=s.data,s=c==="F!"||c==="F"?s:null}if(s){Le=gn(s.nextSibling),o=s.data==="F!";break e}}ki(o)}o=!1}o&&(t=i[0])}}return i=Nt(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:t},i.queue=o,i=Wg.bind(null,se,o),o.dispatch=i,o=wu(!1),c=Du.bind(null,se,!1,o.queue),o=Nt(),s={state:t,dispatch:null,action:e,pending:null},o.queue=s,i=aS.bind(null,se,s,c,i),s.dispatch=i,o.memoizedState=e,[t,i,!1]}function xg(e){var t=Xe();return Hg(t,Me,e)}function Hg(e,t,i){if(t=_u(e,t,Dg)[0],e=Fs(ni)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=mr(t)}catch(f){throw f===ro?Hs:f}else o=t;t=Xe();var s=t.queue,c=s.dispatch;return i!==t.memoizedState&&(se.flags|=2048,ho(9,{destroy:void 0},oS.bind(null,s,i),null)),[o,c,e]}function oS(e,t){e.action=t}function Lg(e){var t=Xe(),i=Me;if(i!==null)return Hg(t,i,e);Xe(),t=t.memoizedState,i=Xe();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function ho(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=se.updateQueue,t===null&&(t=qs(),se.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function zg(){return Xe().memoizedState}function Qs(e,t,i,o){var s=Nt();se.flags|=e,s.memoizedState=ho(1|t,{destroy:void 0},i,o===void 0?null:o)}function Vs(e,t,i,o){var s=Xe();o=o===void 0?null:o;var c=s.memoizedState.inst;Me!==null&&o!==null&&Cu(o,Me.memoizedState.deps)?s.memoizedState=ho(t,c,i,o):(se.flags|=e,s.memoizedState=ho(1|t,c,i,o))}function Pg(e,t){Qs(8390656,8,e,t)}function Iu(e,t){Vs(2048,8,e,t)}function rS(e){se.flags|=4;var t=se.updateQueue;if(t===null)t=qs(),se.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Bg(e){var t=Xe().memoizedState;return rS({ref:t,nextImpl:e}),function(){if((we&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Kg(e,t){return Vs(4,2,e,t)}function Gg(e,t){return Vs(4,4,e,t)}function jg(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qg(e,t,i){i=i!=null?i.concat([e]):null,Vs(4,4,jg.bind(null,t,e),i)}function ku(){}function Yg(e,t){var i=Xe();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Cu(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Fg(e,t){var i=Xe();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Cu(t,o[1]))return o[0];if(o=e(),ka){ft(!0);try{e()}finally{ft(!1)}}return i.memoizedState=[o,t],o}function Ou(e,t,i){return i===void 0||(ti&1073741824)!==0&&(ge&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Qm(),se.lanes|=e,zi|=e,i)}function Qg(e,t,i,o){return Qt(i,t)?i:lo.current!==null?(e=Ou(e,i,o),Qt(e,t)||(it=!0),e):(ti&42)===0||(ti&1073741824)!==0&&(ge&261930)===0?(it=!0,e.memoizedState=i):(e=Qm(),se.lanes|=e,zi|=e,t)}function Vg(e,t,i,o,s){var c=G.p;G.p=c!==0&&8>c?c:8;var f=D.T,p={};D.T=p,Du(e,!1,t,i);try{var C=s(),R=D.S;if(R!==null&&R(p,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var N=tS(C,o);pr(e,t,N,Wt(e))}else pr(e,t,o,Wt(e))}catch(L){pr(e,t,{then:function(){},status:"rejected",reason:L},Wt())}finally{G.p=c,f!==null&&p.types!==null&&(f.types=p.types),D.T=f}}function sS(){}function Mu(e,t,i,o){if(e.tag!==5)throw Error(r(476));var s=Xg(e).queue;Vg(e,s,t,$,i===null?sS:function(){return Jg(e),i(o)})}function Xg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:$},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Jg(e){var t=Xg(e);t.next===null&&(t=e.alternate.memoizedState),pr(e,t.next.queue,{},Wt())}function Nu(){return pt(Dr)}function Zg(){return Xe().memoizedState}function $g(){return Xe().memoizedState}function lS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Wt();e=Ni(i);var o=Di(t,e,i);o!==null&&(Gt(o,t,i),dr(o,t,i)),t={cache:su()},e.payload=t;return}t=t.return}}function cS(e,t,i){var o=Wt();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Xs(e)?em(t,i):(i=Jc(e,t,i,o),i!==null&&(Gt(i,e,o),tm(i,t,o)))}function Wg(e,t,i){var o=Wt();pr(e,t,i,o)}function pr(e,t,i,o){var s={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xs(e))em(t,s);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,p=c(f,i);if(s.hasEagerState=!0,s.eagerState=p,Qt(p,f))return ks(e,t,s,0),He===null&&Is(),!1}catch{}if(i=Jc(e,t,s,o),i!==null)return Gt(i,e,o),tm(i,t,o),!0}return!1}function Du(e,t,i,o){if(o={lane:2,revertLane:dd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xs(e)){if(t)throw Error(r(479))}else t=Jc(e,i,o,2),t!==null&&Gt(t,e,2)}function Xs(e){var t=e.alternate;return e===se||t!==null&&t===se}function em(e,t){co=Gs=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function tm(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,ss(e,i)}}var yr={readContext:pt,use:Ys,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe};yr.useEffectEvent=qe;var nm={readContext:pt,use:Ys,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:Pg,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Qs(4194308,4,jg.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Qs(4194308,4,e,t)},useInsertionEffect:function(e,t){Qs(4,2,e,t)},useMemo:function(e,t){var i=Nt();t=t===void 0?null:t;var o=e();if(ka){ft(!0);try{e()}finally{ft(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=Nt();if(i!==void 0){var s=i(t);if(ka){ft(!0);try{i(t)}finally{ft(!1)}}}else s=t;return o.memoizedState=o.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},o.queue=e,e=e.dispatch=cS.bind(null,se,e),[o.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:function(e){e=wu(e);var t=e.queue,i=Wg.bind(null,se,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:ku,useDeferredValue:function(e,t){var i=Nt();return Ou(i,e,t)},useTransition:function(){var e=wu(!1);return e=Vg.bind(null,se,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=se,s=Nt();if(pe){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),He===null)throw Error(r(349));(ge&127)!==0||Eg(o,t,i)}s.memoizedState=i;var c={value:i,getSnapshot:t};return s.queue=c,Pg(bg.bind(null,o,c,e),[e]),o.flags|=2048,ho(9,{destroy:void 0},_g.bind(null,o,c,i,t),null),i},useId:function(){var e=Nt(),t=He.identifierPrefix;if(pe){var i=Hn,o=xn;i=(o&~(1<<32-je(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=js++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=nS++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Nu,useFormState:Ug,useActionState:Ug,useOptimistic:function(e){var t=Nt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Du.bind(null,se,!0,i),i.dispatch=t,[e,t]},useMemoCache:Eu,useCacheRefresh:function(){return Nt().memoizedState=lS.bind(null,se)},useEffectEvent:function(e){var t=Nt(),i={impl:e};return t.memoizedState=i,function(){if((we&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},Uu={readContext:pt,use:Ys,useCallback:Yg,useContext:pt,useEffect:Iu,useImperativeHandle:qg,useInsertionEffect:Kg,useLayoutEffect:Gg,useMemo:Fg,useReducer:Fs,useRef:zg,useState:function(){return Fs(ni)},useDebugValue:ku,useDeferredValue:function(e,t){var i=Xe();return Qg(i,Me.memoizedState,e,t)},useTransition:function(){var e=Fs(ni)[0],t=Xe().memoizedState;return[typeof e=="boolean"?e:mr(e),t]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:Nu,useFormState:xg,useActionState:xg,useOptimistic:function(e,t){var i=Xe();return Ig(i,Me,e,t)},useMemoCache:Eu,useCacheRefresh:$g};Uu.useEffectEvent=Bg;var im={readContext:pt,use:Ys,useCallback:Yg,useContext:pt,useEffect:Iu,useImperativeHandle:qg,useInsertionEffect:Kg,useLayoutEffect:Gg,useMemo:Fg,useReducer:bu,useRef:zg,useState:function(){return bu(ni)},useDebugValue:ku,useDeferredValue:function(e,t){var i=Xe();return Me===null?Ou(i,e,t):Qg(i,Me.memoizedState,e,t)},useTransition:function(){var e=bu(ni)[0],t=Xe().memoizedState;return[typeof e=="boolean"?e:mr(e),t]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:Nu,useFormState:Lg,useActionState:Lg,useOptimistic:function(e,t){var i=Xe();return Me!==null?Ig(i,Me,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Eu,useCacheRefresh:$g};im.useEffectEvent=Bg;function xu(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:_({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Hu={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Wt(),s=Ni(o);s.payload=t,i!=null&&(s.callback=i),t=Di(e,s,o),t!==null&&(Gt(t,e,o),dr(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Wt(),s=Ni(o);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=Di(e,s,o),t!==null&&(Gt(t,e,o),dr(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Wt(),o=Ni(i);o.tag=2,t!=null&&(o.callback=t),t=Di(e,o,i),t!==null&&(Gt(t,e,i),dr(t,e,i))}};function am(e,t,i,o,s,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,c,f):t.prototype&&t.prototype.isPureReactComponent?!ir(i,o)||!ir(s,c):!0}function om(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Hu.enqueueReplaceState(t,t.state,null)}function Oa(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=_({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}function rm(e){Rs(e)}function sm(e){console.error(e)}function lm(e){Rs(e)}function Js(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function cm(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Lu(e,t,i){return i=Ni(i),i.tag=3,i.payload={element:null},i.callback=function(){Js(e,t)},i}function um(e){return e=Ni(e),e.tag=3,e}function dm(e,t,i,o){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var c=o.value;e.payload=function(){return s(c)},e.callback=function(){cm(t,i,o)}}var f=i.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){cm(t,i,o),typeof s!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var p=o.stack;this.componentDidCatch(o.value,{componentStack:p!==null?p:""})})}function uS(e,t,i,o,s){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&io(t,i,s,!0),i=Xt.current,i!==null){switch(i.tag){case 31:case 13:return fn===null?ll():i.alternate===null&&Ye===0&&(Ye=3),i.flags&=-257,i.flags|=65536,i.lanes=s,o===Ls?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),ld(e,o,s)),!1;case 22:return i.flags|=65536,o===Ls?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),ld(e,o,s)),!1}throw Error(r(435,i.tag))}return ld(e,o,s),ll(),!1}if(pe)return t=Xt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,o!==nu&&(e=Error(r(422),{cause:o}),rr(cn(e,i)))):(o!==nu&&(t=Error(r(423),{cause:o}),rr(cn(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,o=cn(o,i),s=Lu(e.stateNode,o,s),fu(e,s),Ye!==4&&(Ye=2)),!1;var c=Error(r(520),{cause:o});if(c=cn(c,i),br===null?br=[c]:br.push(c),Ye!==4&&(Ye=2),t===null)return!0;o=cn(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=Lu(i.stateNode,o,e),fu(i,e),!1;case 1:if(t=i.type,c=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Pi===null||!Pi.has(c))))return i.flags|=65536,s&=-s,i.lanes|=s,s=um(s),dm(s,e,i,o),fu(i,s),!1}i=i.return}while(i!==null);return!1}var zu=Error(r(461)),it=!1;function yt(e,t,i,o){t.child=e===null?mg(t,null,i,o):Ia(t,e.child,i,o)}function hm(e,t,i,o,s){i=i.render;var c=t.ref;if("ref"in o){var f={};for(var p in o)p!=="ref"&&(f[p]=o[p])}else f=o;return _a(t),o=vu(e,t,i,f,c,s),p=Tu(),e!==null&&!it?(Su(e,t,s),ii(e,t,s)):(pe&&p&&eu(t),t.flags|=1,yt(e,t,o,s),t.child)}function fm(e,t,i,o,s){if(e===null){var c=i.type;return typeof c=="function"&&!Zc(c)&&c.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=c,gm(e,t,c,o,s)):(e=Ms(i.type,null,o,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Fu(e,s)){var f=c.memoizedProps;if(i=i.compare,i=i!==null?i:ir,i(f,o)&&e.ref===t.ref)return ii(e,t,s)}return t.flags|=1,e=Zn(c,o),e.ref=t.ref,e.return=t,t.child=e}function gm(e,t,i,o,s){if(e!==null){var c=e.memoizedProps;if(ir(c,o)&&e.ref===t.ref)if(it=!1,t.pendingProps=o=c,Fu(e,s))(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,ii(e,t,s)}return Pu(e,t,i,o,s)}function mm(e,t,i,o){var s=o.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|i:i,e!==null){for(o=t.child=e.child,s=0;o!==null;)s=s|o.lanes|o.childLanes,o=o.sibling;o=s&~c}else o=0,t.child=null;return pm(e,t,c,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&xs(t,c!==null?c.cachePool:null),c!==null?Cg(t,c):mu(),vg(t);else return o=t.lanes=536870912,pm(e,t,c!==null?c.baseLanes|i:i,i,o)}else c!==null?(xs(t,c.cachePool),Cg(t,c),xi(),t.memoizedState=null):(e!==null&&xs(t,null),mu(),xi());return yt(e,t,s,i),t.child}function Cr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function pm(e,t,i,o,s){var c=cu();return c=c===null?null:{parent:tt._currentValue,pool:c},t.memoizedState={baseLanes:i,cachePool:c},e!==null&&xs(t,null),mu(),vg(t),e!==null&&io(e,t,o,!0),t.childLanes=s,null}function Zs(e,t){return t=Ws({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ym(e,t,i){return Ia(t,e.child,null,i),e=Zs(t,t.pendingProps),e.flags|=2,Jt(t),t.memoizedState=null,e}function dS(e,t,i){var o=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(pe){if(o.mode==="hidden")return e=Zs(t,o),t.lanes=536870912,Cr(null,e);if(yu(t),(e=Le)?(e=kp(e,hn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ri!==null?{id:xn,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},i=eg(e),i.return=t,t.child=i,mt=t,Le=null)):e=null,e===null)throw ki(t);return t.lanes=536870912,null}return Zs(t,o)}var c=e.memoizedState;if(c!==null){var f=c.dehydrated;if(yu(t),s)if(t.flags&256)t.flags&=-257,t=ym(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(it||io(e,t,i,!1),s=(i&e.childLanes)!==0,it||s){if(o=He,o!==null&&(f=ls(o,i),f!==0&&f!==c.retryLane))throw c.retryLane=f,Ta(e,f),Gt(o,e,f),zu;ll(),t=ym(e,t,i)}else e=c.treeContext,Le=gn(f.nextSibling),mt=t,pe=!0,Ii=null,hn=!1,e!==null&&ig(t,e),t=Zs(t,o),t.flags|=4096;return t}return e=Zn(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function $s(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Pu(e,t,i,o,s){return _a(t),i=vu(e,t,i,o,void 0,s),o=Tu(),e!==null&&!it?(Su(e,t,s),ii(e,t,s)):(pe&&o&&eu(t),t.flags|=1,yt(e,t,i,s),t.child)}function Cm(e,t,i,o,s,c){return _a(t),t.updateQueue=null,i=Sg(t,o,i,s),Tg(e),o=Tu(),e!==null&&!it?(Su(e,t,c),ii(e,t,c)):(pe&&o&&eu(t),t.flags|=1,yt(e,t,i,c),t.child)}function vm(e,t,i,o,s){if(_a(t),t.stateNode===null){var c=Wa,f=i.contextType;typeof f=="object"&&f!==null&&(c=pt(f)),c=new i(o,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Hu,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=o,c.state=t.memoizedState,c.refs={},du(t),f=i.contextType,c.context=typeof f=="object"&&f!==null?pt(f):Wa,c.state=t.memoizedState,f=i.getDerivedStateFromProps,typeof f=="function"&&(xu(t,i,f,o),c.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(f=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),f!==c.state&&Hu.enqueueReplaceState(c,c.state,null),fr(t,o,c,s),hr(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){c=t.stateNode;var p=t.memoizedProps,C=Oa(i,p);c.props=C;var R=c.context,N=i.contextType;f=Wa,typeof N=="object"&&N!==null&&(f=pt(N));var L=i.getDerivedStateFromProps;N=typeof L=="function"||typeof c.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,N||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p||R!==f)&&om(t,c,o,f),Mi=!1;var I=t.memoizedState;c.state=I,fr(t,o,c,s),hr(),R=t.memoizedState,p||I!==R||Mi?(typeof L=="function"&&(xu(t,i,L,o),R=t.memoizedState),(C=Mi||am(t,i,C,o,I,R,f))?(N||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=R),c.props=o,c.state=R,c.context=f,o=C):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{c=t.stateNode,hu(e,t),f=t.memoizedProps,N=Oa(i,f),c.props=N,L=t.pendingProps,I=c.context,R=i.contextType,C=Wa,typeof R=="object"&&R!==null&&(C=pt(R)),p=i.getDerivedStateFromProps,(R=typeof p=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==L||I!==C)&&om(t,c,o,C),Mi=!1,I=t.memoizedState,c.state=I,fr(t,o,c,s),hr();var k=t.memoizedState;f!==L||I!==k||Mi||e!==null&&e.dependencies!==null&&Ds(e.dependencies)?(typeof p=="function"&&(xu(t,i,p,o),k=t.memoizedState),(N=Mi||am(t,i,N,o,I,k,C)||e!==null&&e.dependencies!==null&&Ds(e.dependencies))?(R||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(o,k,C),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(o,k,C)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=k),c.props=o,c.state=k,c.context=C,o=N):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),o=!1)}return c=o,$s(e,t),o=(t.flags&128)!==0,c||o?(c=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&o?(t.child=Ia(t,e.child,null,s),t.child=Ia(t,null,i,s)):yt(e,t,i,s),t.memoizedState=c.state,e=t.child):e=ii(e,t,s),e}function Tm(e,t,i,o){return Aa(),t.flags|=256,yt(e,t,i,o),t.child}var Bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ku(e){return{baseLanes:e,cachePool:cg()}}function Gu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=$t),e}function Sm(e,t,i){var o=t.pendingProps,s=!1,c=(t.flags&128)!==0,f;if((f=c)||(f=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),f&&(s=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(pe){if(s?Ui(t):xi(),(e=Le)?(e=kp(e,hn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ri!==null?{id:xn,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},i=eg(e),i.return=t,t.child=i,mt=t,Le=null)):e=null,e===null)throw ki(t);return _d(e)?t.lanes=32:t.lanes=536870912,null}var p=o.children;return o=o.fallback,s?(xi(),s=t.mode,p=Ws({mode:"hidden",children:p},s),o=Sa(o,s,i,null),p.return=t,o.return=t,p.sibling=o,t.child=p,o=t.child,o.memoizedState=Ku(i),o.childLanes=Gu(e,f,i),t.memoizedState=Bu,Cr(null,o)):(Ui(t),ju(t,p))}var C=e.memoizedState;if(C!==null&&(p=C.dehydrated,p!==null)){if(c)t.flags&256?(Ui(t),t.flags&=-257,t=qu(e,t,i)):t.memoizedState!==null?(xi(),t.child=e.child,t.flags|=128,t=null):(xi(),p=o.fallback,s=t.mode,o=Ws({mode:"visible",children:o.children},s),p=Sa(p,s,i,null),p.flags|=2,o.return=t,p.return=t,o.sibling=p,t.child=o,Ia(t,e.child,null,i),o=t.child,o.memoizedState=Ku(i),o.childLanes=Gu(e,f,i),t.memoizedState=Bu,t=Cr(null,o));else if(Ui(t),_d(p)){if(f=p.nextSibling&&p.nextSibling.dataset,f)var R=f.dgst;f=R,o=Error(r(419)),o.stack="",o.digest=f,rr({value:o,source:null,stack:null}),t=qu(e,t,i)}else if(it||io(e,t,i,!1),f=(i&e.childLanes)!==0,it||f){if(f=He,f!==null&&(o=ls(f,i),o!==0&&o!==C.retryLane))throw C.retryLane=o,Ta(e,o),Gt(f,e,o),zu;Ed(p)||ll(),t=qu(e,t,i)}else Ed(p)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Le=gn(p.nextSibling),mt=t,pe=!0,Ii=null,hn=!1,e!==null&&ig(t,e),t=ju(t,o.children),t.flags|=4096);return t}return s?(xi(),p=o.fallback,s=t.mode,C=e.child,R=C.sibling,o=Zn(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,R!==null?p=Zn(R,p):(p=Sa(p,s,i,null),p.flags|=2),p.return=t,o.return=t,o.sibling=p,t.child=o,Cr(null,o),o=t.child,p=e.child.memoizedState,p===null?p=Ku(i):(s=p.cachePool,s!==null?(C=tt._currentValue,s=s.parent!==C?{parent:C,pool:C}:s):s=cg(),p={baseLanes:p.baseLanes|i,cachePool:s}),o.memoizedState=p,o.childLanes=Gu(e,f,i),t.memoizedState=Bu,Cr(e.child,o)):(Ui(t),i=e.child,e=i.sibling,i=Zn(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=i,t.memoizedState=null,i)}function ju(e,t){return t=Ws({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ws(e,t){return e=Vt(22,e,null,t),e.lanes=0,e}function qu(e,t,i){return Ia(t,e.child,null,i),e=ju(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Am(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),ou(e.return,t,i)}function Yu(e,t,i,o,s,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:s,treeForkCount:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=i,f.tailMode=s,f.treeForkCount=c)}function Em(e,t,i){var o=t.pendingProps,s=o.revealOrder,c=o.tail;o=o.children;var f=Ve.current,p=(f&2)!==0;if(p?(f=f&1|2,t.flags|=128):f&=1,j(Ve,f),yt(e,t,o,i),o=pe?or:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Am(e,i,t);else if(e.tag===19)Am(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&Ks(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),Yu(t,!1,s,i,c,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ks(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}Yu(t,!0,i,null,c,o);break;case"together":Yu(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function ii(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),zi|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(io(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=Zn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Zn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Fu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ds(e)))}function hS(e,t,i){switch(t.tag){case 3:rt(t,t.stateNode.containerInfo),Oi(t,tt,e.memoizedState.cache),Aa();break;case 27:case 5:pi(t);break;case 4:rt(t,t.stateNode.containerInfo);break;case 10:Oi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,yu(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Ui(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Sm(e,t,i):(Ui(t),e=ii(e,t,i),e!==null?e.sibling:null);Ui(t);break;case 19:var s=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(io(e,t,i,!1),o=(i&t.childLanes)!==0),s){if(o)return Em(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),j(Ve,Ve.current),o)break;return null;case 22:return t.lanes=0,mm(e,t,i,t.pendingProps);case 24:Oi(t,tt,e.memoizedState.cache)}return ii(e,t,i)}function _m(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)it=!0;else{if(!Fu(e,i)&&(t.flags&128)===0)return it=!1,hS(e,t,i);it=(e.flags&131072)!==0}else it=!1,pe&&(t.flags&1048576)!==0&&ng(t,or,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=wa(t.elementType),t.type=e,typeof e=="function")Zc(e)?(o=Oa(e,o),t.tag=1,t=vm(null,t,e,o,i)):(t.tag=0,t=Pu(null,t,e,o,i));else{if(e!=null){var s=e.$$typeof;if(s===Ke){t.tag=11,t=hm(null,t,e,o,i);break e}else if(s===ce){t.tag=14,t=fm(null,t,e,o,i);break e}}throw t=on(e)||e,Error(r(306,t,""))}}return t;case 0:return Pu(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,s=Oa(o,t.pendingProps),vm(e,t,o,s,i);case 3:e:{if(rt(t,t.stateNode.containerInfo),e===null)throw Error(r(387));o=t.pendingProps;var c=t.memoizedState;s=c.element,hu(e,t),fr(t,o,null,i);var f=t.memoizedState;if(o=f.cache,Oi(t,tt,o),o!==c.cache&&ru(t,[tt],i,!0),hr(),o=f.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Tm(e,t,o,i);break e}else if(o!==s){s=cn(Error(r(424)),t),rr(s),t=Tm(e,t,o,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Le=gn(e.firstChild),mt=t,pe=!0,Ii=null,hn=!0,i=mg(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Aa(),o===s){t=ii(e,t,i);break e}yt(e,t,o,i)}t=t.child}return t;case 26:return $s(e,t),e===null?(i=xp(t.type,null,t.pendingProps,null))?t.memoizedState=i:pe||(i=t.type,e=t.pendingProps,o=ml(ae.current).createElement(i),o[st]=t,o[Et]=e,Ct(o,i,e),We(o),t.stateNode=o):t.memoizedState=xp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pi(t),e===null&&pe&&(o=t.stateNode=Np(t.type,t.pendingProps,ae.current),mt=t,hn=!0,s=Le,ji(t.type)?(bd=s,Le=gn(o.firstChild)):Le=s),yt(e,t,t.pendingProps.children,i),$s(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&pe&&((s=o=Le)&&(o=GS(o,t.type,t.pendingProps,hn),o!==null?(t.stateNode=o,mt=t,Le=gn(o.firstChild),hn=!1,s=!0):s=!1),s||ki(t)),pi(t),s=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,o=c.children,Td(s,c)?o=null:f!==null&&Td(s,f)&&(t.flags|=32),t.memoizedState!==null&&(s=vu(e,t,iS,null,null,i),Dr._currentValue=s),$s(e,t),yt(e,t,o,i),t.child;case 6:return e===null&&pe&&((e=i=Le)&&(i=jS(i,t.pendingProps,hn),i!==null?(t.stateNode=i,mt=t,Le=null,e=!0):e=!1),e||ki(t)),null;case 13:return Sm(e,t,i);case 4:return rt(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Ia(t,null,o,i):yt(e,t,o,i),t.child;case 11:return hm(e,t,t.type,t.pendingProps,i);case 7:return yt(e,t,t.pendingProps,i),t.child;case 8:return yt(e,t,t.pendingProps.children,i),t.child;case 12:return yt(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,Oi(t,t.type,o.value),yt(e,t,o.children,i),t.child;case 9:return s=t.type._context,o=t.pendingProps.children,_a(t),s=pt(s),o=o(s),t.flags|=1,yt(e,t,o,i),t.child;case 14:return fm(e,t,t.type,t.pendingProps,i);case 15:return gm(e,t,t.type,t.pendingProps,i);case 19:return Em(e,t,i);case 31:return dS(e,t,i);case 22:return mm(e,t,i,t.pendingProps);case 24:return _a(t),o=pt(tt),e===null?(s=cu(),s===null&&(s=He,c=su(),s.pooledCache=c,c.refCount++,c!==null&&(s.pooledCacheLanes|=i),s=c),t.memoizedState={parent:o,cache:s},du(t),Oi(t,tt,s)):((e.lanes&i)!==0&&(hu(e,t),fr(t,null,null,i),hr()),s=e.memoizedState,c=t.memoizedState,s.parent!==o?(s={parent:o,cache:o},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Oi(t,tt,o)):(o=c.cache,Oi(t,tt,o),o!==s.cache&&ru(t,[tt],i,!0))),yt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ai(e){e.flags|=4}function Qu(e,t,i,o,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(Zm())e.flags|=8192;else throw Ra=Ls,uu}else e.flags&=-16777217}function bm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Bp(t))if(Zm())e.flags|=8192;else throw Ra=Ls,uu}function el(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ko():536870912,e.lanes|=t,po|=t)}function vr(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags&65011712,o|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function fS(e,t,i){var o=t.pendingProps;switch(tu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return ze(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),ei(tt),Re(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(no(t)?ai(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,iu())),ze(t),null;case 26:var s=t.type,c=t.memoizedState;return e===null?(ai(t),c!==null?(ze(t),bm(t,c)):(ze(t),Qu(t,s,null,o,i))):c?c!==e.memoizedState?(ai(t),ze(t),bm(t,c)):(ze(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&ai(t),ze(t),Qu(t,s,e,o,i)),null;case 27:if(vn(t),i=ae.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ai(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return ze(t),null}e=Y.current,no(t)?ag(t):(e=Np(s,o,i),t.stateNode=e,ai(t))}return ze(t),null;case 5:if(vn(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ai(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return ze(t),null}if(c=Y.current,no(t))ag(t);else{var f=ml(ae.current);switch(c){case 1:c=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:c=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":c=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":c=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":c=f.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof o.is=="string"?f.createElement("select",{is:o.is}):f.createElement("select"),o.multiple?c.multiple=!0:o.size&&(c.size=o.size);break;default:c=typeof o.is=="string"?f.createElement(s,{is:o.is}):f.createElement(s)}}c[st]=t,c[Et]=o;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)c.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=c;e:switch(Ct(c,s,o),s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ai(t)}}return ze(t),Qu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&ai(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(r(166));if(e=ae.current,no(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,s=mt,s!==null)switch(s.tag){case 27:case 5:o=s.memoizedProps}e[st]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Sp(e.nodeValue,i)),e||ki(t,!0)}else e=ml(e).createTextNode(o),e[st]=t,t.stateNode=e}return ze(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=no(t),i!==null){if(e===null){if(!o)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[st]=t}else Aa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ze(t),e=!1}else i=iu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Jt(t),t):(Jt(t),null);if((t.flags&128)!==0)throw Error(r(558))}return ze(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=no(t),o!==null&&o.dehydrated!==null){if(e===null){if(!s)throw Error(r(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));s[st]=t}else Aa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ze(t),s=!1}else s=iu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Jt(t),t):(Jt(t),null)}return Jt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,s=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(s=o.alternate.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==s&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),el(t,t.updateQueue),ze(t),null);case 4:return Re(),e===null&&md(t.stateNode.containerInfo),ze(t),null;case 10:return ei(t.type),ze(t),null;case 19:if(H(Ve),o=t.memoizedState,o===null)return ze(t),null;if(s=(t.flags&128)!==0,c=o.rendering,c===null)if(s)vr(o,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=Ks(e),c!==null){for(t.flags|=128,vr(o,!1),e=c.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Wf(i,e),i=i.sibling;return j(Ve,Ve.current&1|2),pe&&$n(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&ut()>ol&&(t.flags|=128,s=!0,vr(o,!1),t.lanes=4194304)}else{if(!s)if(e=Ks(c),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),vr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!pe)return ze(t),null}else 2*ut()-o.renderingStartTime>ol&&i!==536870912&&(t.flags|=128,s=!0,vr(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(e=o.last,e!==null?e.sibling=c:t.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ut(),e.sibling=null,i=Ve.current,j(Ve,s?i&1|2:i&1),pe&&$n(t,o.treeForkCount),e):(ze(t),null);case 22:case 23:return Jt(t),pu(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),i=t.updateQueue,i!==null&&el(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&H(ba),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ei(tt),ze(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function gS(e,t){switch(tu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ei(tt),Re(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vn(t),null;case 31:if(t.memoizedState!==null){if(Jt(t),t.alternate===null)throw Error(r(340));Aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Jt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Ve),null;case 4:return Re(),null;case 10:return ei(t.type),null;case 22:case 23:return Jt(t),pu(),e!==null&&H(ba),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ei(tt),null;case 25:return null;default:return null}}function wm(e,t){switch(tu(t),t.tag){case 3:ei(tt),Re();break;case 26:case 27:case 5:vn(t);break;case 4:Re();break;case 31:t.memoizedState!==null&&Jt(t);break;case 13:Jt(t);break;case 19:H(Ve);break;case 10:ei(t.type);break;case 22:case 23:Jt(t),pu(),e!==null&&H(ba);break;case 24:ei(tt)}}function Tr(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&e)===e){o=void 0;var c=i.create,f=i.inst;o=c(),f.destroy=o}i=i.next}while(i!==s)}}catch(p){ke(t,t.return,p)}}function Hi(e,t,i){try{var o=t.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var c=s.next;o=c;do{if((o.tag&e)===e){var f=o.inst,p=f.destroy;if(p!==void 0){f.destroy=void 0,s=t;var C=i,R=p;try{R()}catch(N){ke(s,C,N)}}}o=o.next}while(o!==c)}}catch(N){ke(t,t.return,N)}}function Rm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{yg(t,i)}catch(o){ke(e,e.return,o)}}}function Im(e,t,i){i.props=Oa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){ke(e,t,o)}}function Sr(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(s){ke(e,t,s)}}function Ln(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(s){ke(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){ke(e,t,s)}else i.current=null}function km(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(s){ke(e,e.return,s)}}function Vu(e,t,i){try{var o=e.stateNode;HS(o,e.type,i,t),o[Et]=t}catch(s){ke(e,e.return,s)}}function Om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ji(e.type)||e.tag===4}function Xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ji(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ju(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=sn));else if(o!==4&&(o===27&&ji(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Ju(e,t,i),e=e.sibling;e!==null;)Ju(e,t,i),e=e.sibling}function tl(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&ji(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(tl(e,t,i),e=e.sibling;e!==null;)tl(e,t,i),e=e.sibling}function Mm(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ct(t,o,i),t[st]=e,t[Et]=i}catch(c){ke(e,e.return,c)}}var oi=!1,at=!1,Zu=!1,Nm=typeof WeakSet=="function"?WeakSet:Set,dt=null;function mS(e,t){if(e=e.containerInfo,Cd=Al,e=qf(e),qc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var s=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var f=0,p=-1,C=-1,R=0,N=0,L=e,I=null;t:for(;;){for(var k;L!==i||s!==0&&L.nodeType!==3||(p=f+s),L!==c||o!==0&&L.nodeType!==3||(C=f+o),L.nodeType===3&&(f+=L.nodeValue.length),(k=L.firstChild)!==null;)I=L,L=k;for(;;){if(L===e)break t;if(I===i&&++R===s&&(p=f),I===c&&++N===o&&(C=f),(k=L.nextSibling)!==null)break;L=I,I=L.parentNode}L=k}i=p===-1||C===-1?null:{start:p,end:C}}else i=null}i=i||{start:0,end:0}}else i=null;for(vd={focusedElem:e,selectionRange:i},Al=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){switch(t=dt,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)s=e[i],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,i=t,s=c.memoizedProps,c=c.memoizedState,o=i.stateNode;try{var F=Oa(i.type,s);e=o.getSnapshotBeforeUpdate(F,c),o.__reactInternalSnapshotBeforeUpdate=e}catch(ee){ke(i,i.return,ee)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Ad(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ad(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}}function Dm(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:si(e,i),o&4&&Tr(5,i);break;case 1:if(si(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(f){ke(i,i.return,f)}else{var s=Oa(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){ke(i,i.return,f)}}o&64&&Rm(i),o&512&&Sr(i,i.return);break;case 3:if(si(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{yg(e,t)}catch(f){ke(i,i.return,f)}}break;case 27:t===null&&o&4&&Mm(i);case 26:case 5:si(e,i),t===null&&o&4&&km(i),o&512&&Sr(i,i.return);break;case 12:si(e,i);break;case 31:si(e,i),o&4&&Hm(e,i);break;case 13:si(e,i),o&4&&Lm(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=_S.bind(null,i),qS(e,i))));break;case 22:if(o=i.memoizedState!==null||oi,!o){t=t!==null&&t.memoizedState!==null||at,s=oi;var c=at;oi=o,(at=t)&&!c?li(e,i,(i.subtreeFlags&8772)!==0):si(e,i),oi=s,at=c}break;case 30:break;default:si(e,i)}}function Um(e){var t=e.alternate;t!==null&&(e.alternate=null,Um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pe=null,zt=!1;function ri(e,t,i){for(i=i.child;i!==null;)xm(e,t,i),i=i.sibling}function xm(e,t,i){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Tn,i)}catch{}switch(i.tag){case 26:at||Ln(i,t),ri(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:at||Ln(i,t);var o=Pe,s=zt;ji(i.type)&&(Pe=i.stateNode,zt=!1),ri(e,t,i),Or(i.stateNode),Pe=o,zt=s;break;case 5:at||Ln(i,t);case 6:if(o=Pe,s=zt,Pe=null,ri(e,t,i),Pe=o,zt=s,Pe!==null)if(zt)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(i.stateNode)}catch(c){ke(i,t,c)}else try{Pe.removeChild(i.stateNode)}catch(c){ke(i,t,c)}break;case 18:Pe!==null&&(zt?(e=Pe,Rp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),_o(e)):Rp(Pe,i.stateNode));break;case 4:o=Pe,s=zt,Pe=i.stateNode.containerInfo,zt=!0,ri(e,t,i),Pe=o,zt=s;break;case 0:case 11:case 14:case 15:Hi(2,i,t),at||Hi(4,i,t),ri(e,t,i);break;case 1:at||(Ln(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&Im(i,t,o)),ri(e,t,i);break;case 21:ri(e,t,i);break;case 22:at=(o=at)||i.memoizedState!==null,ri(e,t,i),at=o;break;default:ri(e,t,i)}}function Hm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{_o(e)}catch(i){ke(t,t.return,i)}}}function Lm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_o(e)}catch(i){ke(t,t.return,i)}}function pS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nm),t;default:throw Error(r(435,e.tag))}}function nl(e,t){var i=pS(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var s=bS.bind(null,e,o);o.then(s,s)}})}function Pt(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var s=i[o],c=e,f=t,p=f;e:for(;p!==null;){switch(p.tag){case 27:if(ji(p.type)){Pe=p.stateNode,zt=!1;break e}break;case 5:Pe=p.stateNode,zt=!1;break e;case 3:case 4:Pe=p.stateNode.containerInfo,zt=!0;break e}p=p.return}if(Pe===null)throw Error(r(160));xm(c,f,s),Pe=null,zt=!1,c=s.alternate,c!==null&&(c.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)zm(t,e),t=t.sibling}var bn=null;function zm(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pt(t,e),Bt(e),o&4&&(Hi(3,e,e.return),Tr(3,e),Hi(5,e,e.return));break;case 1:Pt(t,e),Bt(e),o&512&&(at||i===null||Ln(i,i.return)),o&64&&oi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var s=bn;if(Pt(t,e),Bt(e),o&512&&(at||i===null||Ln(i,i.return)),o&4){var c=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(o){case"title":c=s.getElementsByTagName("title")[0],(!c||c[ga]||c[st]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=s.createElement(o),s.head.insertBefore(c,s.querySelector("head > title"))),Ct(c,o,i),c[st]=e,We(c),o=c;break e;case"link":var f=zp("link","href",s).get(o+(i.href||""));if(f){for(var p=0;p<f.length;p++)if(c=f[p],c.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&c.getAttribute("rel")===(i.rel==null?null:i.rel)&&c.getAttribute("title")===(i.title==null?null:i.title)&&c.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){f.splice(p,1);break t}}c=s.createElement(o),Ct(c,o,i),s.head.appendChild(c);break;case"meta":if(f=zp("meta","content",s).get(o+(i.content||""))){for(p=0;p<f.length;p++)if(c=f[p],c.getAttribute("content")===(i.content==null?null:""+i.content)&&c.getAttribute("name")===(i.name==null?null:i.name)&&c.getAttribute("property")===(i.property==null?null:i.property)&&c.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&c.getAttribute("charset")===(i.charSet==null?null:i.charSet)){f.splice(p,1);break t}}c=s.createElement(o),Ct(c,o,i),s.head.appendChild(c);break;default:throw Error(r(468,o))}c[st]=e,We(c),o=c}e.stateNode=o}else Pp(s,e.type,e.stateNode);else e.stateNode=Lp(s,o,e.memoizedProps);else c!==o?(c===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):c.count--,o===null?Pp(s,e.type,e.stateNode):Lp(s,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Vu(e,e.memoizedProps,i.memoizedProps)}break;case 27:Pt(t,e),Bt(e),o&512&&(at||i===null||Ln(i,i.return)),i!==null&&o&4&&Vu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Pt(t,e),Bt(e),o&512&&(at||i===null||Ln(i,i.return)),e.flags&32){s=e.stateNode;try{Ei(s,"")}catch(F){ke(e,e.return,F)}}o&4&&e.stateNode!=null&&(s=e.memoizedProps,Vu(e,s,i!==null?i.memoizedProps:s)),o&1024&&(Zu=!0);break;case 6:if(Pt(t,e),Bt(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(F){ke(e,e.return,F)}}break;case 3:if(Cl=null,s=bn,bn=pl(t.containerInfo),Pt(t,e),bn=s,Bt(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{_o(t.containerInfo)}catch(F){ke(e,e.return,F)}Zu&&(Zu=!1,Pm(e));break;case 4:o=bn,bn=pl(e.stateNode.containerInfo),Pt(t,e),Bt(e),bn=o;break;case 12:Pt(t,e),Bt(e);break;case 31:Pt(t,e),Bt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,nl(e,o)));break;case 13:Pt(t,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(al=ut()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,nl(e,o)));break;case 22:s=e.memoizedState!==null;var C=i!==null&&i.memoizedState!==null,R=oi,N=at;if(oi=R||s,at=N||C,Pt(t,e),at=N,oi=R,Bt(e),o&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||C||oi||at||Ma(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){C=i=t;try{if(c=C.stateNode,s)f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{p=C.stateNode;var L=C.memoizedProps.style,I=L!=null&&L.hasOwnProperty("display")?L.display:null;p.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(F){ke(C,C.return,F)}}}else if(t.tag===6){if(i===null){C=t;try{C.stateNode.nodeValue=s?"":C.memoizedProps}catch(F){ke(C,C.return,F)}}}else if(t.tag===18){if(i===null){C=t;try{var k=C.stateNode;s?Ip(k,!0):Ip(C.stateNode,!1)}catch(F){ke(C,C.return,F)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,nl(e,i))));break;case 19:Pt(t,e),Bt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,nl(e,o)));break;case 30:break;case 21:break;default:Pt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if(Om(o)){i=o;break}o=o.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var s=i.stateNode,c=Xu(e);tl(e,c,s);break;case 5:var f=i.stateNode;i.flags&32&&(Ei(f,""),i.flags&=-33);var p=Xu(e);tl(e,p,f);break;case 3:case 4:var C=i.stateNode.containerInfo,R=Xu(e);Ju(e,R,C);break;default:throw Error(r(161))}}catch(N){ke(e,e.return,N)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Pm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function si(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Dm(e,t.alternate,t),t=t.sibling}function Ma(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Hi(4,t,t.return),Ma(t);break;case 1:Ln(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Im(t,t.return,i),Ma(t);break;case 27:Or(t.stateNode);case 26:case 5:Ln(t,t.return),Ma(t);break;case 22:t.memoizedState===null&&Ma(t);break;case 30:Ma(t);break;default:Ma(t)}e=e.sibling}}function li(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,s=e,c=t,f=c.flags;switch(c.tag){case 0:case 11:case 15:li(s,c,i),Tr(4,c);break;case 1:if(li(s,c,i),o=c,s=o.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(R){ke(o,o.return,R)}if(o=c,s=o.updateQueue,s!==null){var p=o.stateNode;try{var C=s.shared.hiddenCallbacks;if(C!==null)for(s.shared.hiddenCallbacks=null,s=0;s<C.length;s++)pg(C[s],p)}catch(R){ke(o,o.return,R)}}i&&f&64&&Rm(c),Sr(c,c.return);break;case 27:Mm(c);case 26:case 5:li(s,c,i),i&&o===null&&f&4&&km(c),Sr(c,c.return);break;case 12:li(s,c,i);break;case 31:li(s,c,i),i&&f&4&&Hm(s,c);break;case 13:li(s,c,i),i&&f&4&&Lm(s,c);break;case 22:c.memoizedState===null&&li(s,c,i),Sr(c,c.return);break;case 30:break;default:li(s,c,i)}t=t.sibling}}function $u(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&sr(i))}function Wu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sr(e))}function wn(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bm(e,t,i,o),t=t.sibling}function Bm(e,t,i,o){var s=t.flags;switch(t.tag){case 0:case 11:case 15:wn(e,t,i,o),s&2048&&Tr(9,t);break;case 1:wn(e,t,i,o);break;case 3:wn(e,t,i,o),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sr(e)));break;case 12:if(s&2048){wn(e,t,i,o),e=t.stateNode;try{var c=t.memoizedProps,f=c.id,p=c.onPostCommit;typeof p=="function"&&p(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){ke(t,t.return,C)}}else wn(e,t,i,o);break;case 31:wn(e,t,i,o);break;case 13:wn(e,t,i,o);break;case 23:break;case 22:c=t.stateNode,f=t.alternate,t.memoizedState!==null?c._visibility&2?wn(e,t,i,o):Ar(e,t):c._visibility&2?wn(e,t,i,o):(c._visibility|=2,fo(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),s&2048&&$u(f,t);break;case 24:wn(e,t,i,o),s&2048&&Wu(t.alternate,t);break;default:wn(e,t,i,o)}}function fo(e,t,i,o,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,f=t,p=i,C=o,R=f.flags;switch(f.tag){case 0:case 11:case 15:fo(c,f,p,C,s),Tr(8,f);break;case 23:break;case 22:var N=f.stateNode;f.memoizedState!==null?N._visibility&2?fo(c,f,p,C,s):Ar(c,f):(N._visibility|=2,fo(c,f,p,C,s)),s&&R&2048&&$u(f.alternate,f);break;case 24:fo(c,f,p,C,s),s&&R&2048&&Wu(f.alternate,f);break;default:fo(c,f,p,C,s)}t=t.sibling}}function Ar(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,s=o.flags;switch(o.tag){case 22:Ar(i,o),s&2048&&$u(o.alternate,o);break;case 24:Ar(i,o),s&2048&&Wu(o.alternate,o);break;default:Ar(i,o)}t=t.sibling}}var Er=8192;function go(e,t,i){if(e.subtreeFlags&Er)for(e=e.child;e!==null;)Km(e,t,i),e=e.sibling}function Km(e,t,i){switch(e.tag){case 26:go(e,t,i),e.flags&Er&&e.memoizedState!==null&&nA(i,bn,e.memoizedState,e.memoizedProps);break;case 5:go(e,t,i);break;case 3:case 4:var o=bn;bn=pl(e.stateNode.containerInfo),go(e,t,i),bn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Er,Er=16777216,go(e,t,i),Er=o):go(e,t,i));break;default:go(e,t,i)}}function Gm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function _r(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];dt=o,qm(o,e)}Gm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jm(e),e=e.sibling}function jm(e){switch(e.tag){case 0:case 11:case 15:_r(e),e.flags&2048&&Hi(9,e,e.return);break;case 3:_r(e);break;case 12:_r(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,il(e)):_r(e);break;default:_r(e)}}function il(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];dt=o,qm(o,e)}Gm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Hi(8,t,t.return),il(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,il(t));break;default:il(t)}e=e.sibling}}function qm(e,t){for(;dt!==null;){var i=dt;switch(i.tag){case 0:case 11:case 15:Hi(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:sr(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,dt=o;else e:for(i=e;dt!==null;){o=dt;var s=o.sibling,c=o.return;if(Um(o),o===i){dt=null;break e}if(s!==null){s.return=c,dt=s;break e}dt=c}}}var yS={getCacheForType:function(e){var t=pt(tt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return pt(tt).controller.signal}},CS=typeof WeakMap=="function"?WeakMap:Map,we=0,He=null,he=null,ge=0,Ie=0,Zt=null,Li=!1,mo=!1,ed=!1,ci=0,Ye=0,zi=0,Na=0,td=0,$t=0,po=0,br=null,Kt=null,nd=!1,al=0,Ym=0,ol=1/0,rl=null,Pi=null,lt=0,Bi=null,yo=null,ui=0,id=0,ad=null,Fm=null,wr=0,od=null;function Wt(){return(we&2)!==0&&ge!==0?ge&-ge:D.T!==null?dd():jo()}function Qm(){if($t===0)if((ge&536870912)===0||pe){var e=Ya;Ya<<=1,(Ya&3932160)===0&&(Ya=262144),$t=e}else $t=536870912;return e=Xt.current,e!==null&&(e.flags|=32),$t}function Gt(e,t,i){(e===He&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(Co(e,0),Ki(e,ge,$t,!1)),da(e,i),((we&2)===0||e!==He)&&(e===He&&((we&2)===0&&(Na|=i),Ye===4&&Ki(e,ge,$t,!1)),zn(e))}function Vm(e,t,i){if((we&6)!==0)throw Error(r(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||ua(e,t),s=o?SS(e,t):sd(e,t,!0),c=o;do{if(s===0){mo&&!o&&Ki(e,t,0,!1);break}else{if(i=e.current.alternate,c&&!vS(i)){s=sd(e,t,!1),c=!1;continue}if(s===2){if(c=t,e.errorRecoveryDisabledLanes&c)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var p=e;s=br;var C=p.current.memoizedState.isDehydrated;if(C&&(Co(p,f).flags|=256),f=sd(p,f,!1),f!==2){if(ed&&!C){p.errorRecoveryDisabledLanes|=c,Na|=c,s=4;break e}c=Kt,Kt=s,c!==null&&(Kt===null?Kt=c:Kt.push.apply(Kt,c))}s=f}if(c=!1,s!==2)continue}}if(s===1){Co(e,0),Ki(e,t,0,!0);break}e:{switch(o=e,c=s,c){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Ki(o,t,$t,!Li);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(s=al+300-ut(),10<s)){if(Ki(o,t,$t,!Li),ca(o,0,!0)!==0)break e;ui=t,o.timeoutHandle=bp(Xm.bind(null,o,i,Kt,rl,nd,t,$t,Na,po,Li,c,"Throttled",-0,0),s);break e}Xm(o,i,Kt,rl,nd,t,$t,Na,po,Li,c,null,-0,0)}}break}while(!0);zn(e)}function Xm(e,t,i,o,s,c,f,p,C,R,N,L,I,k){if(e.timeoutHandle=-1,L=t.subtreeFlags,L&8192||(L&16785408)===16785408){L={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sn},Km(t,c,L);var F=(c&62914560)===c?al-ut():(c&4194048)===c?Ym-ut():0;if(F=iA(L,F),F!==null){ui=c,e.cancelPendingCommit=F(ip.bind(null,e,t,c,i,o,s,f,p,C,N,L,null,I,k)),Ki(e,c,f,!R);return}}ip(e,t,c,i,o,s,f,p,C)}function vS(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var s=i[o],c=s.getSnapshot;s=s.value;try{if(!Qt(c(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ki(e,t,i,o){t&=~td,t&=~Na,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var s=t;0<s;){var c=31-je(s),f=1<<c;o[c]=-1,s&=~f}i!==0&&rs(e,i,t)}function sl(){return(we&6)===0?(Rr(0),!1):!0}function rd(){if(he!==null){if(Ie===0)var e=he.return;else e=he,Wn=Ea=null,Au(e),so=null,cr=0,e=he;for(;e!==null;)wm(e.alternate,e),e=e.return;he=null}}function Co(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,PS(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ui=0,rd(),He=e,he=i=Zn(e.current,null),ge=t,Ie=0,Zt=null,Li=!1,mo=ua(e,t),ed=!1,po=$t=td=Na=zi=Ye=0,Kt=br=null,nd=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var s=31-je(o),c=1<<s;t|=e[s],o&=~c}return ci=t,Is(),i}function Jm(e,t){se=null,D.H=yr,t===ro||t===Hs?(t=hg(),Ie=3):t===uu?(t=hg(),Ie=4):Ie=t===zu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Zt=t,he===null&&(Ye=1,Js(e,cn(t,e.current)))}function Zm(){var e=Xt.current;return e===null?!0:(ge&4194048)===ge?fn===null:(ge&62914560)===ge||(ge&536870912)!==0?e===fn:!1}function $m(){var e=D.H;return D.H=yr,e===null?yr:e}function Wm(){var e=D.A;return D.A=yS,e}function ll(){Ye=4,Li||(ge&4194048)!==ge&&Xt.current!==null||(mo=!0),(zi&134217727)===0&&(Na&134217727)===0||He===null||Ki(He,ge,$t,!1)}function sd(e,t,i){var o=we;we|=2;var s=$m(),c=Wm();(He!==e||ge!==t)&&(rl=null,Co(e,t)),t=!1;var f=Ye;e:do try{if(Ie!==0&&he!==null){var p=he,C=Zt;switch(Ie){case 8:rd(),f=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(t=!0);var R=Ie;if(Ie=0,Zt=null,vo(e,p,C,R),i&&mo){f=0;break e}break;default:R=Ie,Ie=0,Zt=null,vo(e,p,C,R)}}TS(),f=Ye;break}catch(N){Jm(e,N)}while(!0);return t&&e.shellSuspendCounter++,Wn=Ea=null,we=o,D.H=s,D.A=c,he===null&&(He=null,ge=0,Is()),f}function TS(){for(;he!==null;)ep(he)}function SS(e,t){var i=we;we|=2;var o=$m(),s=Wm();He!==e||ge!==t?(rl=null,ol=ut()+500,Co(e,t)):mo=ua(e,t);e:do try{if(Ie!==0&&he!==null){t=he;var c=Zt;t:switch(Ie){case 1:Ie=0,Zt=null,vo(e,t,c,1);break;case 2:case 9:if(ug(c)){Ie=0,Zt=null,tp(t);break}t=function(){Ie!==2&&Ie!==9||He!==e||(Ie=7),zn(e)},c.then(t,t);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:ug(c)?(Ie=0,Zt=null,tp(t)):(Ie=0,Zt=null,vo(e,t,c,7));break;case 5:var f=null;switch(he.tag){case 26:f=he.memoizedState;case 5:case 27:var p=he;if(f?Bp(f):p.stateNode.complete){Ie=0,Zt=null;var C=p.sibling;if(C!==null)he=C;else{var R=p.return;R!==null?(he=R,cl(R)):he=null}break t}}Ie=0,Zt=null,vo(e,t,c,5);break;case 6:Ie=0,Zt=null,vo(e,t,c,6);break;case 8:rd(),Ye=6;break e;default:throw Error(r(462))}}AS();break}catch(N){Jm(e,N)}while(!0);return Wn=Ea=null,D.H=o,D.A=s,we=i,he!==null?0:(He=null,ge=0,Is(),Ye)}function AS(){for(;he!==null&&!Wr();)ep(he)}function ep(e){var t=_m(e.alternate,e,ci);e.memoizedProps=e.pendingProps,t===null?cl(e):he=t}function tp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Cm(i,t,t.pendingProps,t.type,void 0,ge);break;case 11:t=Cm(i,t,t.pendingProps,t.type.render,t.ref,ge);break;case 5:Au(t);default:wm(i,t),t=he=Wf(t,ci),t=_m(i,t,ci)}e.memoizedProps=e.pendingProps,t===null?cl(e):he=t}function vo(e,t,i,o){Wn=Ea=null,Au(t),so=null,cr=0;var s=t.return;try{if(uS(e,s,t,i,ge)){Ye=1,Js(e,cn(i,e.current)),he=null;return}}catch(c){if(s!==null)throw he=s,c;Ye=1,Js(e,cn(i,e.current)),he=null;return}t.flags&32768?(pe||o===1?e=!0:mo||(ge&536870912)!==0?e=!1:(Li=e=!0,(o===2||o===9||o===3||o===6)&&(o=Xt.current,o!==null&&o.tag===13&&(o.flags|=16384))),np(t,e)):cl(t)}function cl(e){var t=e;do{if((t.flags&32768)!==0){np(t,Li);return}e=t.return;var i=fS(t.alternate,t,ci);if(i!==null){he=i;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);Ye===0&&(Ye=5)}function np(e,t){do{var i=gS(e.alternate,e);if(i!==null){i.flags&=32767,he=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){he=e;return}he=e=i}while(e!==null);Ye=6,he=null}function ip(e,t,i,o,s,c,f,p,C){e.cancelPendingCommit=null;do ul();while(lt!==0);if((we&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(c=t.lanes|t.childLanes,c|=Xc,os(e,i,c,f,p,C),e===He&&(he=He=null,ge=0),yo=t,Bi=e,ui=i,id=c,ad=s,Fm=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wS(Fn,function(){return lp(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=D.T,D.T=null,s=G.p,G.p=2,f=we,we|=4;try{mS(e,t,i)}finally{we=f,G.p=s,D.T=o}}lt=1,ap(),op(),rp()}}function ap(){if(lt===1){lt=0;var e=Bi,t=yo,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=D.T,D.T=null;var o=G.p;G.p=2;var s=we;we|=4;try{zm(t,e);var c=vd,f=qf(e.containerInfo),p=c.focusedElem,C=c.selectionRange;if(f!==p&&p&&p.ownerDocument&&jf(p.ownerDocument.documentElement,p)){if(C!==null&&qc(p)){var R=C.start,N=C.end;if(N===void 0&&(N=R),"selectionStart"in p)p.selectionStart=R,p.selectionEnd=Math.min(N,p.value.length);else{var L=p.ownerDocument||document,I=L&&L.defaultView||window;if(I.getSelection){var k=I.getSelection(),F=p.textContent.length,ee=Math.min(C.start,F),De=C.end===void 0?ee:Math.min(C.end,F);!k.extend&&ee>De&&(f=De,De=ee,ee=f);var b=Gf(p,ee),S=Gf(p,De);if(b&&S&&(k.rangeCount!==1||k.anchorNode!==b.node||k.anchorOffset!==b.offset||k.focusNode!==S.node||k.focusOffset!==S.offset)){var w=L.createRange();w.setStart(b.node,b.offset),k.removeAllRanges(),ee>De?(k.addRange(w),k.extend(S.node,S.offset)):(w.setEnd(S.node,S.offset),k.addRange(w))}}}}for(L=[],k=p;k=k.parentNode;)k.nodeType===1&&L.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<L.length;p++){var U=L[p];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}Al=!!Cd,vd=Cd=null}finally{we=s,G.p=o,D.T=i}}e.current=t,lt=2}}function op(){if(lt===2){lt=0;var e=Bi,t=yo,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=D.T,D.T=null;var o=G.p;G.p=2;var s=we;we|=4;try{Dm(e,t.alternate,t)}finally{we=s,G.p=o,D.T=i}}lt=3}}function rp(){if(lt===4||lt===3){lt=0,wc();var e=Bi,t=yo,i=ui,o=Fm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?lt=5:(lt=0,yo=Bi=null,sp(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Pi=null),Go(i),t=t.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Tn,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=D.T,s=G.p,G.p=2,D.T=null;try{for(var c=e.onRecoverableError,f=0;f<o.length;f++){var p=o[f];c(p.value,{componentStack:p.stack})}}finally{D.T=t,G.p=s}}(ui&3)!==0&&ul(),zn(e),s=e.pendingLanes,(i&261930)!==0&&(s&42)!==0?e===od?wr++:(wr=0,od=e):wr=0,Rr(0)}}function sp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,sr(t)))}function ul(){return ap(),op(),rp(),lp()}function lp(){if(lt!==5)return!1;var e=Bi,t=id;id=0;var i=Go(ui),o=D.T,s=G.p;try{G.p=32>i?32:i,D.T=null,i=ad,ad=null;var c=Bi,f=ui;if(lt=0,yo=Bi=null,ui=0,(we&6)!==0)throw Error(r(331));var p=we;if(we|=4,jm(c.current),Bm(c,c.current,f,i),we=p,Rr(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Tn,c)}catch{}return!0}finally{G.p=s,D.T=o,sp(e,t)}}function cp(e,t,i){t=cn(i,t),t=Lu(e.stateNode,t,2),e=Di(e,t,2),e!==null&&(da(e,2),zn(e))}function ke(e,t,i){if(e.tag===3)cp(e,e,i);else for(;t!==null;){if(t.tag===3){cp(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Pi===null||!Pi.has(o))){e=cn(i,e),i=um(2),o=Di(t,i,2),o!==null&&(dm(i,o,t,e),da(o,2),zn(o));break}}t=t.return}}function ld(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new CS;var s=new Set;o.set(t,s)}else s=o.get(t),s===void 0&&(s=new Set,o.set(t,s));s.has(i)||(ed=!0,s.add(i),e=ES.bind(null,e,t,i),t.then(e,e))}function ES(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,He===e&&(ge&i)===i&&(Ye===4||Ye===3&&(ge&62914560)===ge&&300>ut()-al?(we&2)===0&&Co(e,0):td|=i,po===ge&&(po=0)),zn(e)}function up(e,t){t===0&&(t=Ko()),e=Ta(e,t),e!==null&&(da(e,t),zn(e))}function _S(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),up(e,i)}function bS(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(t),up(e,i)}function wS(e,t){return Yn(e,t)}var dl=null,To=null,cd=!1,hl=!1,ud=!1,Gi=0;function zn(e){e!==To&&e.next===null&&(To===null?dl=To=e:To=To.next=e),hl=!0,cd||(cd=!0,IS())}function Rr(e,t){if(!ud&&hl){ud=!0;do for(var i=!1,o=dl;o!==null;){if(e!==0){var s=o.pendingLanes;if(s===0)var c=0;else{var f=o.suspendedLanes,p=o.pingedLanes;c=(1<<31-je(42|e)+1)-1,c&=s&~(f&~p),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(i=!0,gp(o,c))}else c=ge,c=ca(o,o===He?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(c&3)===0||ua(o,c)||(i=!0,gp(o,c));o=o.next}while(i);ud=!1}}function RS(){dp()}function dp(){hl=cd=!1;var e=0;Gi!==0&&zS()&&(e=Gi);for(var t=ut(),i=null,o=dl;o!==null;){var s=o.next,c=hp(o,t);c===0?(o.next=null,i===null?dl=s:i.next=s,s===null&&(To=i)):(i=o,(e!==0||(c&3)!==0)&&(hl=!0)),o=s}lt!==0&&lt!==5||Rr(e),Gi!==0&&(Gi=0)}function hp(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,s=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var f=31-je(c),p=1<<f,C=s[f];C===-1?((p&i)===0||(p&o)!==0)&&(s[f]=Fa(p,t)):C<=t&&(e.expiredLanes|=p),c&=~p}if(t=He,i=ge,i=ca(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&yi(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ua(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&yi(o),Go(i)){case 2:case 8:i=es;break;case 32:i=Fn;break;case 268435456:i=Nn;break;default:i=Fn}return o=fp.bind(null,e),i=Yn(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&yi(o),e.callbackPriority=2,e.callbackNode=null,2}function fp(e,t){if(lt!==0&&lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ul()&&e.callbackNode!==i)return null;var o=ge;return o=ca(e,e===He?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Vm(e,o,t),hp(e,ut()),e.callbackNode!=null&&e.callbackNode===i?fp.bind(null,e):null)}function gp(e,t){if(ul())return null;Vm(e,t,!0)}function IS(){BS(function(){(we&6)!==0?Yn(qa,RS):dp()})}function dd(){if(Gi===0){var e=ao;e===0&&(e=sa,sa<<=1,(sa&261888)===0&&(sa=256)),Gi=e}return Gi}function mp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_i(""+e)}function pp(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function kS(e,t,i,o,s){if(t==="submit"&&i&&i.stateNode===s){var c=mp((s[Et]||null).action),f=o.submitter;f&&(t=(t=f[Et]||null)?mp(t.formAction):f.getAttribute("formAction"),t!==null&&(c=t,f=null));var p=new _s("action","action",null,o,s);e.push({event:p,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Gi!==0){var C=f?pp(s,f):new FormData(s);Mu(i,{pending:!0,data:C,method:s.method,action:c},null,C)}}else typeof c=="function"&&(p.preventDefault(),C=f?pp(s,f):new FormData(s),Mu(i,{pending:!0,data:C,method:s.method,action:c},c,C))},currentTarget:s}]})}}for(var hd=0;hd<Vc.length;hd++){var fd=Vc[hd],OS=fd.toLowerCase(),MS=fd[0].toUpperCase()+fd.slice(1);_n(OS,"on"+MS)}_n(Qf,"onAnimationEnd"),_n(Vf,"onAnimationIteration"),_n(Xf,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(QT,"onTransitionRun"),_n(VT,"onTransitionStart"),_n(XT,"onTransitionCancel"),_n(Jf,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ir));function yp(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],s=o.event;o=o.listeners;e:{var c=void 0;if(t)for(var f=o.length-1;0<=f;f--){var p=o[f],C=p.instance,R=p.currentTarget;if(p=p.listener,C!==c&&s.isPropagationStopped())break e;c=p,s.currentTarget=R;try{c(s)}catch(N){Rs(N)}s.currentTarget=null,c=C}else for(f=0;f<o.length;f++){if(p=o[f],C=p.instance,R=p.currentTarget,p=p.listener,C!==c&&s.isPropagationStopped())break e;c=p,s.currentTarget=R;try{c(s)}catch(N){Rs(N)}s.currentTarget=null,c=C}}}}function fe(e,t){var i=t[Sn];i===void 0&&(i=t[Sn]=new Set);var o=e+"__bubble";i.has(o)||(Cp(t,e,2,!1),i.add(o))}function gd(e,t,i){var o=0;t&&(o|=4),Cp(i,e,o,t)}var fl="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[fl]){e[fl]=!0,us.forEach(function(i){i!=="selectionchange"&&(NS.has(i)||gd(i,!1,e),gd(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fl]||(t[fl]=!0,gd("selectionchange",!1,t))}}function Cp(e,t,i,o){switch(Qp(t)){case 2:var s=rA;break;case 8:s=sA;break;default:s=Od}i=s.bind(null,t,i,e),s=void 0,!xc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),o?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function pd(e,t,i,o,s){var c=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var p=o.stateNode.containerInfo;if(p===s)break;if(f===4)for(f=o.return;f!==null;){var C=f.tag;if((C===3||C===4)&&f.stateNode.containerInfo===s)return;f=f.return}for(;p!==null;){if(f=vi(p),f===null)return;if(C=f.tag,C===5||C===6||C===26||C===27){o=c=f;continue e}p=p.parentNode}}o=o.return}Ef(function(){var R=c,N=pa(i),L=[];e:{var I=Zf.get(e);if(I!==void 0){var k=_s,F=e;switch(e){case"keypress":if(As(i)===0)break e;case"keydown":case"keyup":k=bT;break;case"focusin":F="focus",k=Pc;break;case"focusout":F="blur",k=Pc;break;case"beforeblur":case"afterblur":k=Pc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=fT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=IT;break;case Qf:case Vf:case Xf:k=pT;break;case Jf:k=OT;break;case"scroll":case"scrollend":k=dT;break;case"wheel":k=NT;break;case"copy":case"cut":case"paste":k=CT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=If;break;case"toggle":case"beforetoggle":k=UT}var ee=(t&4)!==0,De=!ee&&(e==="scroll"||e==="scrollend"),b=ee?I!==null?I+"Capture":null:I;ee=[];for(var S=R,w;S!==null;){var U=S;if(w=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||w===null||b===null||(U=Jo(S,b),U!=null&&ee.push(kr(S,U,w))),De)break;S=S.return}0<ee.length&&(I=new k(I,F,null,i,N),L.push({event:I,listeners:ee}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",I&&i!==bi&&(F=i.relatedTarget||i.fromElement)&&(vi(F)||F[Ci]))break e;if((k||I)&&(I=N.window===N?N:(I=N.ownerDocument)?I.defaultView||I.parentWindow:window,k?(F=i.relatedTarget||i.toElement,k=R,F=F?vi(F):null,F!==null&&(De=d(F),ee=F.tag,F!==De||ee!==5&&ee!==27&&ee!==6)&&(F=null)):(k=null,F=R),k!==F)){if(ee=wf,U="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(ee=If,U="onPointerLeave",b="onPointerEnter",S="pointer"),De=k==null?I:ma(k),w=F==null?I:ma(F),I=new ee(U,S+"leave",k,i,N),I.target=De,I.relatedTarget=w,U=null,vi(N)===R&&(ee=new ee(b,S+"enter",F,i,N),ee.target=w,ee.relatedTarget=De,U=ee),De=U,k&&F)t:{for(ee=DS,b=k,S=F,w=0,U=b;U;U=ee(U))w++;U=0;for(var X=S;X;X=ee(X))U++;for(;0<w-U;)b=ee(b),w--;for(;0<U-w;)S=ee(S),U--;for(;w--;){if(b===S||S!==null&&b===S.alternate){ee=b;break t}b=ee(b),S=ee(S)}ee=null}else ee=null;k!==null&&vp(L,I,k,ee,!1),F!==null&&De!==null&&vp(L,De,F,ee,!0)}}e:{if(I=R?ma(R):window,k=I.nodeName&&I.nodeName.toLowerCase(),k==="select"||k==="input"&&I.type==="file")var Ee=Hf;else if(Uf(I))if(Lf)Ee=qT;else{Ee=GT;var Q=KT}else k=I.nodeName,!k||k.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?R&&gt(R.elementType)&&(Ee=Hf):Ee=jT;if(Ee&&(Ee=Ee(e,R))){xf(L,Ee,i,N);break e}Q&&Q(e,I,R),e==="focusout"&&R&&I.type==="number"&&R.memoizedProps.value!=null&&Ge(I,"number",I.value)}switch(Q=R?ma(R):window,e){case"focusin":(Uf(Q)||Q.contentEditable==="true")&&(Ja=Q,Yc=R,ar=null);break;case"focusout":ar=Yc=Ja=null;break;case"mousedown":Fc=!0;break;case"contextmenu":case"mouseup":case"dragend":Fc=!1,Yf(L,i,N);break;case"selectionchange":if(FT)break;case"keydown":case"keyup":Yf(L,i,N)}var le;if(Kc)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Xa?Nf(e,i)&&(me="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(me="onCompositionStart");me&&(kf&&i.locale!=="ko"&&(Xa||me!=="onCompositionStart"?me==="onCompositionEnd"&&Xa&&(le=_f()):(wi=N,Hc="value"in wi?wi.value:wi.textContent,Xa=!0)),Q=gl(R,me),0<Q.length&&(me=new Rf(me,e,null,i,N),L.push({event:me,listeners:Q}),le?me.data=le:(le=Df(i),le!==null&&(me.data=le)))),(le=HT?LT(e,i):zT(e,i))&&(me=gl(R,"onBeforeInput"),0<me.length&&(Q=new Rf("onBeforeInput","beforeinput",null,i,N),L.push({event:Q,listeners:me}),Q.data=le)),kS(L,e,R,i,N)}yp(L,t)})}function kr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function gl(e,t){for(var i=t+"Capture",o=[];e!==null;){var s=e,c=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||c===null||(s=Jo(e,i),s!=null&&o.unshift(kr(e,s,c)),s=Jo(e,t),s!=null&&o.push(kr(e,s,c))),e.tag===3)return o;e=e.return}return[]}function DS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vp(e,t,i,o,s){for(var c=t._reactName,f=[];i!==null&&i!==o;){var p=i,C=p.alternate,R=p.stateNode;if(p=p.tag,C!==null&&C===o)break;p!==5&&p!==26&&p!==27||R===null||(C=R,s?(R=Jo(i,c),R!=null&&f.unshift(kr(i,R,C))):s||(R=Jo(i,c),R!=null&&f.push(kr(i,R,C)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var US=/\r\n?/g,xS=/\u0000|\uFFFD/g;function Tp(e){return(typeof e=="string"?e:""+e).replace(US,`
`).replace(xS,"")}function Sp(e,t){return t=Tp(t),Tp(e)===t}function Ne(e,t,i,o,s,c){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||Ei(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&Ei(e,""+o);break;case"className":Va(e,"class",o);break;case"tabIndex":Va(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(e,i,o);break;case"style":vs(e,o,c);break;case"data":if(t!=="object"){Va(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=_i(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(i==="formAction"?(t!=="input"&&Ne(e,t,"name",s.name,s,null),Ne(e,t,"formEncType",s.formEncType,s,null),Ne(e,t,"formMethod",s.formMethod,s,null),Ne(e,t,"formTarget",s.formTarget,s,null)):(Ne(e,t,"encType",s.encType,s,null),Ne(e,t,"method",s.method,s,null),Ne(e,t,"target",s.target,s,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=_i(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=sn);break;case"onScroll":o!=null&&fe("scroll",e);break;case"onScrollEnd":o!=null&&fe("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=_i(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":fe("beforetoggle",e),fe("toggle",e),Qa(e,"popover",o);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Qa(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Vo.get(i)||i,Qa(e,i,o))}}function yd(e,t,i,o,s,c){switch(i){case"style":vs(e,o,c);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(i=o.__html,i!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof o=="string"?Ei(e,o):(typeof o=="number"||typeof o=="bigint")&&Ei(e,""+o);break;case"onScroll":o!=null&&fe("scroll",e);break;case"onScrollEnd":o!=null&&fe("scrollend",e);break;case"onClick":o!=null&&(e.onclick=sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ds.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),c=e[Et]||null,c=c!=null?c[i]:null,typeof c=="function"&&e.removeEventListener(t,c,s),typeof o=="function")){typeof c!="function"&&c!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,s);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):Qa(e,i,o)}}}function Ct(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fe("error",e),fe("load",e);var o=!1,s=!1,c;for(c in i)if(i.hasOwnProperty(c)){var f=i[c];if(f!=null)switch(c){case"src":o=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ne(e,t,c,f,i,null)}}s&&Ne(e,t,"srcSet",i.srcSet,i,null),o&&Ne(e,t,"src",i.src,i,null);return;case"input":fe("invalid",e);var p=c=f=s=null,C=null,R=null;for(o in i)if(i.hasOwnProperty(o)){var N=i[o];if(N!=null)switch(o){case"name":s=N;break;case"type":f=N;break;case"checked":C=N;break;case"defaultChecked":R=N;break;case"value":c=N;break;case"defaultValue":p=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(137,t));break;default:Ne(e,t,o,N,i,null)}}rn(e,c,p,C,R,f,s,!1);return;case"select":fe("invalid",e),o=f=c=null;for(s in i)if(i.hasOwnProperty(s)&&(p=i[s],p!=null))switch(s){case"value":c=p;break;case"defaultValue":f=p;break;case"multiple":o=p;default:Ne(e,t,s,p,i,null)}t=c,i=f,e.multiple=!!o,t!=null?Mt(e,!!o,t,!1):i!=null&&Mt(e,!!o,i,!0);return;case"textarea":fe("invalid",e),c=s=o=null;for(f in i)if(i.hasOwnProperty(f)&&(p=i[f],p!=null))switch(f){case"value":o=p;break;case"defaultValue":s=p;break;case"children":c=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:Ne(e,t,f,p,i,null)}Dc(e,o,s,c);return;case"option":for(C in i)i.hasOwnProperty(C)&&(o=i[C],o!=null)&&(C==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Ne(e,t,C,o,i,null));return;case"dialog":fe("beforetoggle",e),fe("toggle",e),fe("cancel",e),fe("close",e);break;case"iframe":case"object":fe("load",e);break;case"video":case"audio":for(o=0;o<Ir.length;o++)fe(Ir[o],e);break;case"image":fe("error",e),fe("load",e);break;case"details":fe("toggle",e);break;case"embed":case"source":case"link":fe("error",e),fe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in i)if(i.hasOwnProperty(R)&&(o=i[R],o!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ne(e,t,R,o,i,null)}return;default:if(gt(t)){for(N in i)i.hasOwnProperty(N)&&(o=i[N],o!==void 0&&yd(e,t,N,o,i,void 0));return}}for(p in i)i.hasOwnProperty(p)&&(o=i[p],o!=null&&Ne(e,t,p,o,i,null))}function HS(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,c=null,f=null,p=null,C=null,R=null,N=null;for(k in i){var L=i[k];if(i.hasOwnProperty(k)&&L!=null)switch(k){case"checked":break;case"value":break;case"defaultValue":C=L;default:o.hasOwnProperty(k)||Ne(e,t,k,null,o,L)}}for(var I in o){var k=o[I];if(L=i[I],o.hasOwnProperty(I)&&(k!=null||L!=null))switch(I){case"type":c=k;break;case"name":s=k;break;case"checked":R=k;break;case"defaultChecked":N=k;break;case"value":f=k;break;case"defaultValue":p=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(137,t));break;default:k!==L&&Ne(e,t,I,k,o,L)}}et(e,f,p,C,R,N,c,s);return;case"select":k=f=p=I=null;for(c in i)if(C=i[c],i.hasOwnProperty(c)&&C!=null)switch(c){case"value":break;case"multiple":k=C;default:o.hasOwnProperty(c)||Ne(e,t,c,null,o,C)}for(s in o)if(c=o[s],C=i[s],o.hasOwnProperty(s)&&(c!=null||C!=null))switch(s){case"value":I=c;break;case"defaultValue":p=c;break;case"multiple":f=c;default:c!==C&&Ne(e,t,s,c,o,C)}t=p,i=f,o=k,I!=null?Mt(e,!!i,I,!1):!!o!=!!i&&(t!=null?Mt(e,!!i,t,!0):Mt(e,!!i,i?[]:"",!1));return;case"textarea":k=I=null;for(p in i)if(s=i[p],i.hasOwnProperty(p)&&s!=null&&!o.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Ne(e,t,p,null,o,s)}for(f in o)if(s=o[f],c=i[f],o.hasOwnProperty(f)&&(s!=null||c!=null))switch(f){case"value":I=s;break;case"defaultValue":k=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(r(91));break;default:s!==c&&Ne(e,t,f,s,o,c)}ys(e,I,k);return;case"option":for(var F in i)I=i[F],i.hasOwnProperty(F)&&I!=null&&!o.hasOwnProperty(F)&&(F==="selected"?e.selected=!1:Ne(e,t,F,null,o,I));for(C in o)I=o[C],k=i[C],o.hasOwnProperty(C)&&I!==k&&(I!=null||k!=null)&&(C==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":Ne(e,t,C,I,o,k));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in i)I=i[ee],i.hasOwnProperty(ee)&&I!=null&&!o.hasOwnProperty(ee)&&Ne(e,t,ee,null,o,I);for(R in o)if(I=o[R],k=i[R],o.hasOwnProperty(R)&&I!==k&&(I!=null||k!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,t));break;default:Ne(e,t,R,I,o,k)}return;default:if(gt(t)){for(var De in i)I=i[De],i.hasOwnProperty(De)&&I!==void 0&&!o.hasOwnProperty(De)&&yd(e,t,De,void 0,o,I);for(N in o)I=o[N],k=i[N],!o.hasOwnProperty(N)||I===k||I===void 0&&k===void 0||yd(e,t,N,I,o,k);return}}for(var b in i)I=i[b],i.hasOwnProperty(b)&&I!=null&&!o.hasOwnProperty(b)&&Ne(e,t,b,null,o,I);for(L in o)I=o[L],k=i[L],!o.hasOwnProperty(L)||I===k||I==null&&k==null||Ne(e,t,L,I,o,k)}function Ap(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var s=i[o],c=s.transferSize,f=s.initiatorType,p=s.duration;if(c&&p&&Ap(f)){for(f=0,p=s.responseEnd,o+=1;o<i.length;o++){var C=i[o],R=C.startTime;if(R>p)break;var N=C.transferSize,L=C.initiatorType;N&&Ap(L)&&(C=C.responseEnd,f+=N*(C<p?1:(p-R)/(C-R)))}if(--o,t+=8*(c+f)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Cd=null,vd=null;function ml(e){return e.nodeType===9?e:e.ownerDocument}function Ep(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _p(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sd=null;function zS(){var e=window.event;return e&&e.type==="popstate"?e===Sd?!1:(Sd=e,!0):(Sd=null,!1)}var bp=typeof setTimeout=="function"?setTimeout:void 0,PS=typeof clearTimeout=="function"?clearTimeout:void 0,wp=typeof Promise=="function"?Promise:void 0,BS=typeof queueMicrotask=="function"?queueMicrotask:typeof wp<"u"?function(e){return wp.resolve(null).then(e).catch(KS)}:bp;function KS(e){setTimeout(function(){throw e})}function ji(e){return e==="head"}function Rp(e,t){var i=t,o=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(s),_o(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")Or(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Or(i);for(var c=i.firstChild;c;){var f=c.nextSibling,p=c.nodeName;c[ga]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&c.rel.toLowerCase()==="stylesheet"||i.removeChild(c),c=f}}else i==="body"&&Or(e.ownerDocument.body);i=s}while(i);_o(t)}function Ip(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Ad(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ad(i),qo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function GS(e,t,i,o){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ga])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=gn(e.nextSibling),e===null)break}return null}function jS(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=gn(e.nextSibling),e===null))return null;return e}function kp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=gn(e.nextSibling),e===null))return null;return e}function Ed(e){return e.data==="$?"||e.data==="$~"}function _d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function qS(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var bd=null;function Op(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return gn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Mp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Np(e,t,i){switch(t=ml(i),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Or(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qo(e)}var mn=new Map,Dp=new Set;function pl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var di=G.d;G.d={f:YS,r:FS,D:QS,C:VS,L:XS,m:JS,X:$S,S:ZS,M:WS};function YS(){var e=di.f(),t=sl();return e||t}function FS(e){var t=Ti(e);t!==null&&t.tag===5&&t.type==="form"?Jg(t):di.r(e)}var So=typeof document>"u"?null:document;function Up(e,t,i){var o=So;if(o&&typeof t=="string"&&t){var s=W(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),Dp.has(s)||(Dp.add(s),e={rel:e,crossOrigin:i,href:t},o.querySelector(s)===null&&(t=o.createElement("link"),Ct(t,"link",e),We(t),o.head.appendChild(t)))}}function QS(e){di.D(e),Up("dns-prefetch",e,null)}function VS(e,t){di.C(e,t),Up("preconnect",e,t)}function XS(e,t,i){di.L(e,t,i);var o=So;if(o&&e&&t){var s='link[rel="preload"][as="'+W(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+W(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+W(i.imageSizes)+'"]')):s+='[href="'+W(e)+'"]';var c=s;switch(t){case"style":c=Ao(e);break;case"script":c=Eo(e)}mn.has(c)||(e=_({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),mn.set(c,e),o.querySelector(s)!==null||t==="style"&&o.querySelector(Mr(c))||t==="script"&&o.querySelector(Nr(c))||(t=o.createElement("link"),Ct(t,"link",e),We(t),o.head.appendChild(t)))}}function JS(e,t){di.m(e,t);var i=So;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+W(o)+'"][href="'+W(e)+'"]',c=s;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Eo(e)}if(!mn.has(c)&&(e=_({rel:"modulepreload",href:e},t),mn.set(c,e),i.querySelector(s)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Nr(c)))return}o=i.createElement("link"),Ct(o,"link",e),We(o),i.head.appendChild(o)}}}function ZS(e,t,i){di.S(e,t,i);var o=So;if(o&&e){var s=Si(o).hoistableStyles,c=Ao(e);t=t||"default";var f=s.get(c);if(!f){var p={loading:0,preload:null};if(f=o.querySelector(Mr(c)))p.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},i),(i=mn.get(c))&&wd(e,i);var C=f=o.createElement("link");We(C),Ct(C,"link",e),C._p=new Promise(function(R,N){C.onload=R,C.onerror=N}),C.addEventListener("load",function(){p.loading|=1}),C.addEventListener("error",function(){p.loading|=2}),p.loading|=4,yl(f,t,o)}f={type:"stylesheet",instance:f,count:1,state:p},s.set(c,f)}}}function $S(e,t){di.X(e,t);var i=So;if(i&&e){var o=Si(i).hoistableScripts,s=Eo(e),c=o.get(s);c||(c=i.querySelector(Nr(s)),c||(e=_({src:e,async:!0},t),(t=mn.get(s))&&Rd(e,t),c=i.createElement("script"),We(c),Ct(c,"link",e),i.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},o.set(s,c))}}function WS(e,t){di.M(e,t);var i=So;if(i&&e){var o=Si(i).hoistableScripts,s=Eo(e),c=o.get(s);c||(c=i.querySelector(Nr(s)),c||(e=_({src:e,async:!0,type:"module"},t),(t=mn.get(s))&&Rd(e,t),c=i.createElement("script"),We(c),Ct(c,"link",e),i.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},o.set(s,c))}}function xp(e,t,i,o){var s=(s=ae.current)?pl(s):null;if(!s)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Ao(i.href),i=Si(s).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ao(i.href);var c=Si(s).hoistableStyles,f=c.get(e);if(f||(s=s.ownerDocument||s,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,f),(c=s.querySelector(Mr(e)))&&!c._p&&(f.instance=c,f.state.loading=5),mn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},mn.set(e,i),c||eA(s,e,i,f.state))),t&&o===null)throw Error(r(528,""));return f}if(t&&o!==null)throw Error(r(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Eo(i),i=Si(s).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ao(e){return'href="'+W(e)+'"'}function Mr(e){return'link[rel="stylesheet"]['+e+"]"}function Hp(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function eA(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Ct(t,"link",i),We(t),e.head.appendChild(t))}function Eo(e){return'[src="'+W(e)+'"]'}function Nr(e){return"script[async]"+e}function Lp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+W(i.href)+'"]');if(o)return t.instance=o,We(o),o;var s=_({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),We(o),Ct(o,"style",s),yl(o,i.precedence,e),t.instance=o;case"stylesheet":s=Ao(i.href);var c=e.querySelector(Mr(s));if(c)return t.state.loading|=4,t.instance=c,We(c),c;o=Hp(i),(s=mn.get(s))&&wd(o,s),c=(e.ownerDocument||e).createElement("link"),We(c);var f=c;return f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),Ct(c,"link",o),t.state.loading|=4,yl(c,i.precedence,e),t.instance=c;case"script":return c=Eo(i.src),(s=e.querySelector(Nr(c)))?(t.instance=s,We(s),s):(o=i,(s=mn.get(c))&&(o=_({},i),Rd(o,s)),e=e.ownerDocument||e,s=e.createElement("script"),We(s),Ct(s,"link",o),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,yl(o,i.precedence,e));return t.instance}function yl(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=o.length?o[o.length-1]:null,c=s,f=0;f<o.length;f++){var p=o[f];if(p.dataset.precedence===t)c=p;else if(c!==s)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function wd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Cl=null;function zp(e,t,i){if(Cl===null){var o=new Map,s=Cl=new Map;s.set(i,o)}else s=Cl,o=s.get(i),o||(o=new Map,s.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var c=i[s];if(!(c[ga]||c[st]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var f=c.getAttribute(t)||"";f=e+f;var p=o.get(f);p?p.push(c):o.set(f,[c])}}return o}function Pp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function tA(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Bp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function nA(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var s=Ao(o.href),c=t.querySelector(Mr(s));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=vl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=c,We(c);return}c=t.ownerDocument||t,o=Hp(o),(s=mn.get(s))&&wd(o,s),c=c.createElement("link"),We(c);var f=c;f._p=new Promise(function(p,C){f.onload=p,f.onerror=C}),Ct(c,"link",o),i.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=vl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Id=0;function iA(e,t){return e.stylesheets&&e.count===0&&Sl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Sl(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Id===0&&(Id=62500*LS());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Sl(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Id?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(s)}}:null}function vl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tl=null;function Sl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tl=new Map,t.forEach(aA,e),Tl=null,vl.call(e))}function aA(e,t){if(!(t.state.loading&4)){var i=Tl.get(e);if(i)var o=i.get(null);else{i=new Map,Tl.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<s.length;c++){var f=s[c];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(i.set(f.dataset.precedence,f),o=f)}o&&i.set(null,o)}s=t.instance,f=s.getAttribute("data-precedence"),c=i.get(f)||o,c===o&&i.set(null,s),i.set(f,s),this.count++,o=vl.bind(this),s.addEventListener("load",o),s.addEventListener("error",o),c?c.parentNode.insertBefore(s,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Dr={$$typeof:Te,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function oA(e,t,i,o,s,c,f,p,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qn(0),this.hiddenUpdates=Qn(null),this.identifierPrefix=o,this.onUncaughtError=s,this.onCaughtError=c,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Kp(e,t,i,o,s,c,f,p,C,R,N,L){return e=new oA(e,t,i,f,C,R,N,L,p),t=1,c===!0&&(t|=24),c=Vt(3,null,null,t),e.current=c,c.stateNode=e,t=su(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:o,isDehydrated:i,cache:t},du(c),e}function Gp(e){return e?(e=Wa,e):Wa}function jp(e,t,i,o,s,c){s=Gp(s),o.context===null?o.context=s:o.pendingContext=s,o=Ni(t),o.payload={element:i},c=c===void 0?null:c,c!==null&&(o.callback=c),i=Di(e,o,t),i!==null&&(Gt(i,e,t),dr(i,e,t))}function qp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function kd(e,t){qp(e,t),(e=e.alternate)&&qp(e,t)}function Yp(e){if(e.tag===13||e.tag===31){var t=Ta(e,67108864);t!==null&&Gt(t,e,67108864),kd(e,67108864)}}function Fp(e){if(e.tag===13||e.tag===31){var t=Wt();t=ha(t);var i=Ta(e,t);i!==null&&Gt(i,e,t),kd(e,t)}}var Al=!0;function rA(e,t,i,o){var s=D.T;D.T=null;var c=G.p;try{G.p=2,Od(e,t,i,o)}finally{G.p=c,D.T=s}}function sA(e,t,i,o){var s=D.T;D.T=null;var c=G.p;try{G.p=8,Od(e,t,i,o)}finally{G.p=c,D.T=s}}function Od(e,t,i,o){if(Al){var s=Md(o);if(s===null)pd(e,t,o,El,i),Vp(e,o);else if(cA(s,e,t,i,o))o.stopPropagation();else if(Vp(e,o),t&4&&-1<lA.indexOf(e)){for(;s!==null;){var c=Ti(s);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=Dn(c.pendingLanes);if(f!==0){var p=c;for(p.pendingLanes|=2,p.entangledLanes|=2;f;){var C=1<<31-je(f);p.entanglements[1]|=C,f&=~C}zn(c),(we&6)===0&&(ol=ut()+500,Rr(0))}}break;case 31:case 13:p=Ta(c,2),p!==null&&Gt(p,c,2),sl(),kd(c,2)}if(c=Md(o),c===null&&pd(e,t,o,El,i),c===s)break;s=c}s!==null&&o.stopPropagation()}else pd(e,t,o,null,i)}}function Md(e){return e=pa(e),Nd(e)}var El=null;function Nd(e){if(El=null,e=vi(e),e!==null){var t=d(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=h(t),e!==null)return e;e=null}else if(i===31){if(e=g(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return El=e,null}function Qp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rc()){case qa:return 2;case es:return 8;case Fn:case Ic:return 32;case Nn:return 268435456;default:return 32}default:return 32}}var Dd=!1,qi=null,Yi=null,Fi=null,Ur=new Map,xr=new Map,Qi=[],lA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vp(e,t){switch(e){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":Ur.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xr.delete(t.pointerId)}}function Hr(e,t,i,o,s,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:c,targetContainers:[s]},t!==null&&(t=Ti(t),t!==null&&Yp(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cA(e,t,i,o,s){switch(t){case"focusin":return qi=Hr(qi,e,t,i,o,s),!0;case"dragenter":return Yi=Hr(Yi,e,t,i,o,s),!0;case"mouseover":return Fi=Hr(Fi,e,t,i,o,s),!0;case"pointerover":var c=s.pointerId;return Ur.set(c,Hr(Ur.get(c)||null,e,t,i,o,s)),!0;case"gotpointercapture":return c=s.pointerId,xr.set(c,Hr(xr.get(c)||null,e,t,i,o,s)),!0}return!1}function Xp(e){var t=vi(e.target);if(t!==null){var i=d(t);if(i!==null){if(t=i.tag,t===13){if(t=h(i),t!==null){e.blockedOn=t,fa(e.priority,function(){Fp(i)});return}}else if(t===31){if(t=g(i),t!==null){e.blockedOn=t,fa(e.priority,function(){Fp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Md(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);bi=o,i.target.dispatchEvent(o),bi=null}else return t=Ti(i),t!==null&&Yp(t),e.blockedOn=i,!1;t.shift()}return!0}function Jp(e,t,i){_l(e)&&i.delete(t)}function uA(){Dd=!1,qi!==null&&_l(qi)&&(qi=null),Yi!==null&&_l(Yi)&&(Yi=null),Fi!==null&&_l(Fi)&&(Fi=null),Ur.forEach(Jp),xr.forEach(Jp)}function bl(e,t){e.blockedOn===t&&(e.blockedOn=null,Dd||(Dd=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,uA)))}var wl=null;function Zp(e){wl!==e&&(wl=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){wl===e&&(wl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],s=e[t+2];if(typeof o!="function"){if(Nd(o||i)===null)continue;break}var c=Ti(i);c!==null&&(e.splice(t,3),t-=3,Mu(c,{pending:!0,data:s,method:i.method,action:o},o,s))}}))}function _o(e){function t(C){return bl(C,e)}qi!==null&&bl(qi,e),Yi!==null&&bl(Yi,e),Fi!==null&&bl(Fi,e),Ur.forEach(t),xr.forEach(t);for(var i=0;i<Qi.length;i++){var o=Qi[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Qi.length&&(i=Qi[0],i.blockedOn===null);)Xp(i),i.blockedOn===null&&Qi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var s=i[o],c=i[o+1],f=s[Et]||null;if(typeof c=="function")f||Zp(i);else if(f){var p=null;if(c&&c.hasAttribute("formAction")){if(s=c,f=c[Et]||null)p=f.formAction;else if(Nd(s)!==null)continue}else p=f.action;typeof p=="function"?i[o+1]=p:(i.splice(o,3),o-=3),Zp(i)}}}function $p(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(f){return s=f})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function Ud(e){this._internalRoot=e}Rl.prototype.render=Ud.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var i=t.current,o=Wt();jp(i,o,e,t,null,null)},Rl.prototype.unmount=Ud.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jp(e.current,2,null,e,null,null),sl(),t[Ci]=null}};function Rl(e){this._internalRoot=e}Rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=jo();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Qi.length&&t!==0&&t<Qi[i].priority;i++);Qi.splice(i,0,e),i===0&&Xp(e)}};var Wp=n.version;if(Wp!=="19.2.3")throw Error(r(527,Wp,"19.2.3"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(t),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var dA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{Tn=Il.inject(dA),$e=Il}catch{}}return zr.createRoot=function(e,t){if(!l(e))throw Error(r(299));var i=!1,o="",s=rm,c=sm,f=lm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Kp(e,1,!1,null,null,i,o,null,s,c,f,$p),e[Ci]=t.current,md(e),new Ud(t)},zr.hydrateRoot=function(e,t,i){if(!l(e))throw Error(r(299));var o=!1,s="",c=rm,f=sm,p=lm,C=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(c=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(p=i.onRecoverableError),i.formState!==void 0&&(C=i.formState)),t=Kp(e,1,!0,t,i??null,o,s,C,c,f,p,$p),t.context=Gp(null),i=t.current,o=Wt(),o=ha(o),s=Ni(o),s.callback=null,Di(i,s,o),i=o,t.current.lanes=i,da(t,i),zn(t),e[Ci]=t.current,md(e),new Rl(t)},zr.version="19.2.3",zr}var cy;function AA(){if(cy)return Ld.exports;cy=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Ld.exports=SA(),Ld.exports}var EA=AA();const _A=eC(EA);const z={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},$i={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Ua={GET:"GET",POST:"POST"},Ho=[z.OPENID_SCOPE,z.PROFILE_SCOPE,z.OFFLINE_ACCESS_SCOPE],uy=[...Ho,z.EMAIL_SCOPE],Ut={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},dy={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Wi={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},kl={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},St={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},hh={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},rc={QUERY:"query",FRAGMENT:"fragment"},bA={QUERY:"query"},tC={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Ol={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Fr={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Tt={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},fh="appmetadata",wA="client_info",Kl="1",Gl={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},en={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},vt={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Oe={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Gr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},hy={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},bo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Kd={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Da={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},RA={Pop:"pop"},nC=300;const jl="unexpected_error",IA="post_request_failed";const fy={[jl]:"Unexpected error in authentication.",[IA]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class xe extends Error{constructor(n,a,r){const l=a?`${n}: ${a}`:n;super(l),Object.setPrototypeOf(this,xe.prototype),this.errorCode=n||z.EMPTY_STRING,this.errorMessage=a||z.EMPTY_STRING,this.subError=r||z.EMPTY_STRING,this.name="AuthError"}setCorrelationId(n){this.correlationId=n}}function Jd(u,n){return new xe(u,n?`${fy[u]} ${n}`:fy[u])}const gh="client_info_decoding_error",iC="client_info_empty_error",mh="token_parsing_error",aC="null_or_empty_token",fi="endpoints_resolution_error",oC="network_error",rC="openid_config_error",sC="hash_not_deserialized",Uo="invalid_state",lC="state_mismatch",Zd="state_not_found",cC="nonce_mismatch",ph="auth_time_not_found",uC="max_age_transpired",kA="multiple_matching_tokens",OA="multiple_matching_accounts",dC="multiple_matching_appMetadata",hC="request_cannot_be_made",fC="cannot_remove_empty_scope",gC="cannot_append_scopeset",$d="empty_input_scopeset",MA="device_code_polling_cancelled",NA="device_code_expired",DA="device_code_unknown_error",yh="no_account_in_silent_request",mC="invalid_cache_record",Ch="invalid_cache_environment",Wd="no_account_found",eh="no_crypto_object",UA="unexpected_credential_type",xA="invalid_assertion",HA="invalid_client_credential",ea="token_refresh_required",LA="user_timeout_reached",pC="token_claims_cnf_required_for_signedjwt",yC="authorization_code_missing_from_server_response",CC="binding_key_not_removed",vC="end_session_endpoint_not_supported",vh="key_id_missing",zA="no_network_connectivity",PA="user_canceled",BA="missing_tenant_id_error",ue="method_not_implemented",KA="nested_app_auth_bridge_disabled",GA="platform_broker_error";const gy={[gh]:"The client info could not be parsed/decoded correctly",[iC]:"The client info was empty",[mh]:"Token cannot be parsed",[aC]:"The token is null or empty",[fi]:"Endpoints cannot be resolved",[oC]:"Network request failed",[rC]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[sC]:"The hash parameters could not be deserialized",[Uo]:"State was not the expected format",[lC]:"State mismatch error",[Zd]:"State not found",[cC]:"Nonce mismatch error",[ph]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[uC]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[kA]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[OA]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[dC]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[hC]:"Token request cannot be made without authorization code or refresh token.",[fC]:"Cannot remove null or empty scope from ScopeSet",[gC]:"Cannot append ScopeSet",[$d]:"Empty input ScopeSet cannot be processed",[MA]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[NA]:"Device code is expired.",[DA]:"Device code stopped polling for unknown reasons.",[yh]:"Please pass an account object, silent flow is not supported without account information",[mC]:"Cache record object was null or undefined.",[Ch]:"Invalid environment when attempting to create cache entry",[Wd]:"No account found in cache for given key.",[eh]:"No crypto object detected.",[UA]:"Unexpected credential type.",[xA]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[HA]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ea]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[LA]:"User defined timeout for device code polling reached",[pC]:"Cannot generate a POP jwt if the token_claims are not populated",[yC]:"Server response does not contain an authorization code to proceed",[CC]:"Could not remove the credential's binding key from storage.",[vC]:"The provided authority does not support logout",[vh]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[zA]:"No network connectivity. Check your internet connection.",[PA]:"User cancelled the flow.",[BA]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ue]:"This method has not been implemented",[KA]:"The nested app auth bridge is disabled",[GA]:"An error occurred in the native broker. See the platformBrokerError property for details."};class Th extends xe{constructor(n,a){super(n,a?`${gy[n]}: ${a}`:gy[n]),this.name="ClientAuthError",Object.setPrototypeOf(this,Th.prototype)}}function B(u,n){return new Th(u,n)}const ql={createNewGuid:()=>{throw B(ue)},base64Decode:()=>{throw B(ue)},base64Encode:()=>{throw B(ue)},base64UrlEncode:()=>{throw B(ue)},encodeKid:()=>{throw B(ue)},async getPublicKeyThumbprint(){throw B(ue)},async removeTokenBindingKey(){throw B(ue)},async clearKeystore(){throw B(ue)},async signJwt(){throw B(ue)},async hashString(){throw B(ue)}};var Be;(function(u){u[u.Error=0]="Error",u[u.Warning=1]="Warning",u[u.Info=2]="Info",u[u.Verbose=3]="Verbose",u[u.Trace=4]="Trace"})(Be||(Be={}));class ia{constructor(n,a,r){this.level=Be.Info;const l=()=>{},d=n||ia.createDefaultLoggerOptions();this.localCallback=d.loggerCallback||l,this.piiLoggingEnabled=d.piiLoggingEnabled||!1,this.level=typeof d.logLevel=="number"?d.logLevel:Be.Info,this.correlationId=d.correlationId||z.EMPTY_STRING,this.packageName=a||z.EMPTY_STRING,this.packageVersion=r||z.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Be.Info}}clone(n,a,r){return new ia({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},n,a)}logMessage(n,a){if(a.logLevel>this.level||!this.piiLoggingEnabled&&a.containsPii)return;const d=`${`[${new Date().toUTCString()}] : [${a.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Be[a.logLevel]} - ${n}`;this.executeCallback(a.logLevel,d,a.containsPii||!1)}executeCallback(n,a,r){this.localCallback&&this.localCallback(n,a,r)}error(n,a){this.logMessage(n,{logLevel:Be.Error,containsPii:!1,correlationId:a||z.EMPTY_STRING})}errorPii(n,a){this.logMessage(n,{logLevel:Be.Error,containsPii:!0,correlationId:a||z.EMPTY_STRING})}warning(n,a){this.logMessage(n,{logLevel:Be.Warning,containsPii:!1,correlationId:a||z.EMPTY_STRING})}warningPii(n,a){this.logMessage(n,{logLevel:Be.Warning,containsPii:!0,correlationId:a||z.EMPTY_STRING})}info(n,a){this.logMessage(n,{logLevel:Be.Info,containsPii:!1,correlationId:a||z.EMPTY_STRING})}infoPii(n,a){this.logMessage(n,{logLevel:Be.Info,containsPii:!0,correlationId:a||z.EMPTY_STRING})}verbose(n,a){this.logMessage(n,{logLevel:Be.Verbose,containsPii:!1,correlationId:a||z.EMPTY_STRING})}verbosePii(n,a){this.logMessage(n,{logLevel:Be.Verbose,containsPii:!0,correlationId:a||z.EMPTY_STRING})}trace(n,a){this.logMessage(n,{logLevel:Be.Trace,containsPii:!1,correlationId:a||z.EMPTY_STRING})}tracePii(n,a){this.logMessage(n,{logLevel:Be.Trace,containsPii:!0,correlationId:a||z.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const TC="@azure/msal-common",Sh="15.14.0";const Ah={None:"none"};const SC="redirect_uri_empty",jA="claims_request_parsing_error",AC="authority_uri_insecure",Br="url_parse_error",EC="empty_url_error",_C="empty_input_scopes_error",Eh="invalid_claims",bC="token_request_empty",wC="logout_request_empty",qA="invalid_code_challenge_method",_h="pkce_params_missing",bh="invalid_cloud_discovery_metadata",RC="invalid_authority_metadata",IC="untrusted_authority",sc="missing_ssh_jwk",kC="missing_ssh_kid",YA="missing_nonce_authentication_header",FA="invalid_authentication_header",OC="cannot_set_OIDCOptions",MC="cannot_allow_platform_broker",NC="authority_mismatch",DC="invalid_request_method_for_EAR",UC="invalid_authorize_post_body_parameters",xC="invalid_platform_broker_configuration";const QA={[SC]:"A redirect URI is required for all calls, and none has been set.",[jA]:"Could not parse the given claims request object.",[AC]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Br]:"URL could not be parsed into appropriate segments.",[EC]:"URL was empty or null.",[_C]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Eh]:"Given claims parameter must be a stringified JSON object.",[bC]:"Token request was empty and not found in cache.",[wC]:"The logout request was null or undefined.",[qA]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[_h]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[bh]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[RC]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[IC]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[sc]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[kC]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[YA]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[FA]:"Invalid authentication header provided",[OC]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[MC]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[NC]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[UC]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[DC]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[xC]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."};class wh extends xe{constructor(n){super(n,QA[n]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,wh.prototype)}}function Ue(u){return new wh(u)}class tn{static isEmptyObj(n){if(n)try{const a=JSON.parse(n);return Object.keys(a).length===0}catch{}return!0}static startsWith(n,a){return n.indexOf(a)===0}static endsWith(n,a){return n.length>=a.length&&n.lastIndexOf(a)===n.length-a.length}static queryStringToObject(n){const a={},r=n.split("&"),l=d=>decodeURIComponent(d.replace(/\+/g," "));return r.forEach(d=>{if(d.trim()){const[h,g]=d.split(/=(.+)/g,2);h&&g&&(a[l(h)]=l(g))}}),a}static trimArrayEntries(n){return n.map(a=>a.trim())}static removeEmptyStringsFromArray(n){return n.filter(a=>!!a)}static jsonParseHelper(n){try{return JSON.parse(n)}catch{return null}}static matchPattern(n,a){return new RegExp(n.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(a)}}class ct{constructor(n){const a=n?tn.trimArrayEntries([...n]):[],r=a?tn.removeEmptyStringsFromArray(a):[];if(!r||!r.length)throw Ue(_C);this.scopes=new Set,r.forEach(l=>this.scopes.add(l))}static fromString(n){const r=(n||z.EMPTY_STRING).split(" ");return new ct(r)}static createSearchScopes(n){const a=n&&n.length>0?n:[...Ho],r=new ct(a);return r.containsOnlyOIDCScopes()?r.removeScope(z.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(n){const a=this.printScopesLowerCase().split(" "),r=new ct(a);return n?r.scopes.has(n.toLowerCase()):!1}containsScopeSet(n){return!n||n.scopes.size<=0?!1:this.scopes.size>=n.scopes.size&&n.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let n=0;return uy.forEach(a=>{this.containsScope(a)&&(n+=1)}),this.scopes.size===n}appendScope(n){n&&this.scopes.add(n.trim())}appendScopes(n){try{n.forEach(a=>this.appendScope(a))}catch{throw B(gC)}}removeScope(n){if(!n)throw B(fC);this.scopes.delete(n.trim())}removeOIDCScopes(){uy.forEach(n=>{this.scopes.delete(n)})}unionScopeSets(n){if(!n)throw B($d);const a=new Set;return n.scopes.forEach(r=>a.add(r.toLowerCase())),this.scopes.forEach(r=>a.add(r.toLowerCase())),a}intersectingScopeSets(n){if(!n)throw B($d);n.containsOnlyOIDCScopes()||n.removeOIDCScopes();const a=this.unionScopeSets(n),r=n.getScopeCount(),l=this.getScopeCount();return a.size<l+r}getScopeCount(){return this.scopes.size}asArray(){const n=[];return this.scopes.forEach(a=>n.push(a)),n}printScopes(){return this.scopes?this.asArray().join(" "):z.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Yl(u,n){if(!u)throw B(iC);try{const a=n(u);return JSON.parse(a)}catch{throw B(gh)}}function Io(u){if(!u)throw B(gh);const n=u.split(Fr.CLIENT_INFO_SEPARATOR,2);return{uid:n[0],utid:n.length<2?z.EMPTY_STRING:n[1]}}function my(u,n){return!!u&&!!n&&u===n.split(".")[1]}function lc(u,n,a,r){if(r){const{oid:l,sub:d,tid:h,name:g,tfp:m,acr:y,preferred_username:T,upn:_,login_hint:O}=r,P=h||m||y||"";return{tenantId:P,localAccountId:l||d||"",name:g,username:T||_||"",loginHint:O,isHomeTenant:my(P,u)}}else return{tenantId:a,localAccountId:n,username:"",isHomeTenant:my(a,u)}}function Rh(u,n,a,r){let l=u;if(n){const{isHomeTenant:d,...h}=n;l={...u,...h}}if(a){const{isHomeTenant:d,...h}=lc(u.homeAccountId,u.localAccountId,u.tenantId,a);return l={...l,...h,idTokenClaims:a,idToken:r},l}return l}const In={Default:0,Adfs:1,Dsts:2,Ciam:3};function Ih(u){return u&&(u.tid||u.tfp||u.acr)||null}const qt={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class Fe{static getAccountInfo(n){return{homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:n.username,localAccountId:n.localAccountId,loginHint:n.loginHint,name:n.name,nativeAccountId:n.nativeAccountId,authorityType:n.authorityType,tenantProfiles:new Map((n.tenantProfiles||[]).map(a=>[a.tenantId,a])),dataBoundary:n.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(n,a,r){const l=new Fe;a.authorityType===In.Adfs?l.authorityType=Ol.ADFS_ACCOUNT_TYPE:a.protocolMode===qt.OIDC?l.authorityType=Ol.GENERIC_ACCOUNT_TYPE:l.authorityType=Ol.MSSTS_ACCOUNT_TYPE;let d;n.clientInfo&&r&&(d=Yl(n.clientInfo,r),d.xms_tdbr&&(l.dataBoundary=d.xms_tdbr==="EU"?"EU":"None")),l.clientInfo=n.clientInfo,l.homeAccountId=n.homeAccountId,l.nativeAccountId=n.nativeAccountId;const h=n.environment||a&&a.getPreferredCache();if(!h)throw B(Ch);l.environment=h,l.realm=d?.utid||Ih(n.idTokenClaims)||"",l.localAccountId=d?.uid||n.idTokenClaims?.oid||n.idTokenClaims?.sub||"";const g=n.idTokenClaims?.preferred_username||n.idTokenClaims?.upn,m=n.idTokenClaims?.emails?n.idTokenClaims.emails[0]:null;if(l.username=g||m||"",l.loginHint=n.idTokenClaims?.login_hint,l.name=n.idTokenClaims?.name||"",l.cloudGraphHostName=n.cloudGraphHostName,l.msGraphHost=n.msGraphHost,n.tenantProfiles)l.tenantProfiles=n.tenantProfiles;else{const y=lc(n.homeAccountId,l.localAccountId,l.realm,n.idTokenClaims);l.tenantProfiles=[y]}return l}static createFromAccountInfo(n,a,r){const l=new Fe;return l.authorityType=n.authorityType||Ol.GENERIC_ACCOUNT_TYPE,l.homeAccountId=n.homeAccountId,l.localAccountId=n.localAccountId,l.nativeAccountId=n.nativeAccountId,l.realm=n.tenantId,l.environment=n.environment,l.username=n.username,l.name=n.name,l.loginHint=n.loginHint,l.cloudGraphHostName=a,l.msGraphHost=r,l.tenantProfiles=Array.from(n.tenantProfiles?.values()||[]),l.dataBoundary=n.dataBoundary,l}static generateHomeAccountId(n,a,r,l,d){if(!(a===In.Adfs||a===In.Dsts)){if(n)try{const h=Yl(n,l.base64Decode);if(h.uid&&h.utid)return`${h.uid}.${h.utid}`}catch{}r.warning("No client info in response")}return d?.sub||""}static isAccountEntity(n){return n?n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("realm")&&n.hasOwnProperty("localAccountId")&&n.hasOwnProperty("username")&&n.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(n,a,r){if(!n||!a)return!1;let l=!0;if(r){const d=n.idTokenClaims||{},h=a.idTokenClaims||{};l=d.iat===h.iat&&d.nonce===h.nonce}return n.homeAccountId===a.homeAccountId&&n.localAccountId===a.localAccountId&&n.username===a.username&&n.tenantId===a.tenantId&&n.loginHint===a.loginHint&&n.environment===a.environment&&n.nativeAccountId===a.nativeAccountId&&l}}function Kn(u,n){const a=VA(u);try{const r=n(a);return JSON.parse(r)}catch{throw B(mh)}}function Gn(u){if(!u.signin_state)return!1;const n=["kmsi","dvc_dmjd"];return u.signin_state.some(r=>n.includes(r.trim().toLowerCase()))}function VA(u){if(!u)throw B(aC);const a=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(u);if(!a||a.length<4)throw B(mh);return a[2]}function HC(u,n){if(n===0||Date.now()-3e5>u+n)throw B(uC)}function py(u){if(!u)return u;let n=u.toLowerCase();return tn.endsWith(n,"?")?n=n.slice(0,-1):tn.endsWith(n,"?/")&&(n=n.slice(0,-2)),tn.endsWith(n,"/")||(n+="/"),n}function LC(u){return u.startsWith("#/")?u.substring(2):u.startsWith("#")||u.startsWith("?")?u.substring(1):u}function Fl(u){if(!u||u.indexOf("=")<0)return null;try{const n=LC(u),a=Object.fromEntries(new URLSearchParams(n));if(a.code||a.ear_jwe||a.error||a.error_description||a.state)return a}catch{throw B(sC)}return null}function Qr(u,n=!0,a){const r=new Array;return u.forEach((l,d)=>{!n&&a&&d in a?r.push(`${d}=${l}`):r.push(`${d}=${encodeURIComponent(l)}`)}),r.join("&")}function yy(u){if(!u)return u;const n=u.split("#")[0];try{const a=new URL(n),r=a.origin+a.pathname+a.search;return py(r)}catch{return py(n)}}class be{get urlString(){return this._urlString}constructor(n){if(this._urlString=n,!this._urlString)throw Ue(EC);n.includes("#")||(this._urlString=be.canonicalizeUri(n))}static canonicalizeUri(n){if(n){let a=n.toLowerCase();return tn.endsWith(a,"?")?a=a.slice(0,-1):tn.endsWith(a,"?/")&&(a=a.slice(0,-2)),tn.endsWith(a,"/")||(a+="/"),a}return n}validateAsUri(){let n;try{n=this.getUrlComponents()}catch{throw Ue(Br)}if(!n.HostNameAndPort||!n.PathSegments)throw Ue(Br);if(!n.Protocol||n.Protocol.toLowerCase()!=="https:")throw Ue(AC)}static appendQueryString(n,a){return a?n.indexOf("?")<0?`${n}?${a}`:`${n}&${a}`:n}static removeHashFromUrl(n){return be.canonicalizeUri(n.split("#")[0])}replaceTenantPath(n){const a=this.getUrlComponents(),r=a.PathSegments;return n&&r.length!==0&&(r[0]===Wi.COMMON||r[0]===Wi.ORGANIZATIONS)&&(r[0]=n),be.constructAuthorityUriFromObject(a)}getUrlComponents(){const n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=this.urlString.match(n);if(!a)throw Ue(Br);const r={Protocol:a[1],HostNameAndPort:a[4],AbsolutePath:a[5],QueryString:a[7]};let l=r.AbsolutePath.split("/");return l=l.filter(d=>d&&d.length>0),r.PathSegments=l,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(n){const a=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=n.match(a);if(!r)throw Ue(Br);return r[2]}static getAbsoluteUrl(n,a){if(n[0]===z.FORWARD_SLASH){const l=new be(a).getUrlComponents();return l.Protocol+"//"+l.HostNameAndPort+n}return n}static constructAuthorityUriFromObject(n){return new be(n.Protocol+"//"+n.HostNameAndPort+"/"+n.PathSegments.join("/"))}static hashContainsKnownProperties(n){return!!Fl(n)}}const zC={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Cy=zC.endpointMetadata,kh=zC.instanceDiscoveryMetadata,PC=new Set;kh.metadata.forEach(u=>{u.aliases.forEach(n=>{PC.add(n)})});function XA(u,n){let a;const r=u.canonicalAuthority;if(r){const l=new be(r).getUrlComponents().HostNameAndPort;a=vy(l,u.cloudDiscoveryMetadata?.metadata,en.CONFIG,n)||vy(l,kh.metadata,en.HARDCODED_VALUES,n)||u.knownAuthorities}return a||[]}function vy(u,n,a,r){if(r?.trace(`getAliasesFromMetadata called with source: ${a}`),u&&n){const l=Ql(n,u);if(l)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${a}, returning aliases`),l.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${a}`)}return null}function JA(u){return Ql(kh.metadata,u)}function Ql(u,n){for(let a=0;a<u.length;a++){const r=u[a];if(r.aliases.includes(n))return r}return null}const Vl="cache_quota_exceeded",Oh="cache_error_unknown";const Gd={[Vl]:"Exceeded cache storage capacity.",[Oh]:"Unexpected error occurred when using cache storage."};class ko extends xe{constructor(n,a){const r=a||(Gd[n]?Gd[n]:Gd[Oh]);super(`${n}: ${r}`),Object.setPrototypeOf(this,ko.prototype),this.name="CacheError",this.errorCode=n,this.errorMessage=r}}function th(u){return u instanceof Error?u.name==="QuotaExceededError"||u.name==="NS_ERROR_DOM_QUOTA_REACHED"||u.message.includes("exceeded the quota")?new ko(Vl):new ko(u.name,u.message):new ko(Oh)}class nh{constructor(n,a,r,l,d){this.clientId=n,this.cryptoImpl=a,this.commonLogger=r.clone(TC,Sh),this.staticAuthorityOptions=d,this.performanceClient=l}getAllAccounts(n,a){return this.buildTenantProfiles(this.getAccountsFilteredBy(n,a),a,n)}getAccountInfoFilteredBy(n,a){if(Object.keys(n).length===0||Object.values(n).every(l=>!l))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(n,a);return r.length>1?r.sort(d=>d.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(n,a){const r=this.getAccountsFilteredBy(n,a);return r.length>0?Fe.getAccountInfo(r[0]):null}buildTenantProfiles(n,a,r){return n.flatMap(l=>this.getTenantProfilesFromAccountEntity(l,a,r?.tenantId,r))}getTenantedAccountInfoByFilter(n,a,r,l,d){let h=null,g;if(d&&!this.tenantProfileMatchesFilter(r,d))return null;const m=this.getIdToken(n,l,a,r.tenantId);return m&&(g=Kn(m.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(g,d))?null:(h=Rh(n,r,g,m?.secret),h)}getTenantProfilesFromAccountEntity(n,a,r,l){const d=Fe.getAccountInfo(n);let h=d.tenantProfiles||new Map;const g=this.getTokenKeys();if(r){const y=h.get(r);if(y)h=new Map([[r,y]]);else return[]}const m=[];return h.forEach(y=>{const T=this.getTenantedAccountInfoByFilter(d,g,y,a,l);T&&m.push(T)}),m}tenantProfileMatchesFilter(n,a){return!(a.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(n,a.localAccountId)||a.name&&n.name!==a.name||a.isHomeTenant!==void 0&&n.isHomeTenant!==a.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(n,a){return!(a&&(a.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(n,a.localAccountId)||a.loginHint&&!this.matchLoginHintFromTokenClaims(n,a.loginHint)||a.username&&!this.matchUsername(n.preferred_username,a.username)||a.name&&!this.matchName(n,a.name)||a.sid&&!this.matchSid(n,a.sid)))}async saveCacheRecord(n,a,r,l,d){if(!n)throw B(mC);try{n.account&&await this.setAccount(n.account,a,r,l),n.idToken&&d?.idToken!==!1&&await this.setIdTokenCredential(n.idToken,a,r),n.accessToken&&d?.accessToken!==!1&&await this.saveAccessToken(n.accessToken,a,r),n.refreshToken&&d?.refreshToken!==!1&&await this.setRefreshTokenCredential(n.refreshToken,a,r),n.appMetadata&&this.setAppMetadata(n.appMetadata,a)}catch(h){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),h instanceof xe?h:th(h)}}async saveAccessToken(n,a,r){const l={clientId:n.clientId,credentialType:n.credentialType,environment:n.environment,homeAccountId:n.homeAccountId,realm:n.realm,tokenType:n.tokenType,requestedClaimsHash:n.requestedClaimsHash},d=this.getTokenKeys(),h=ct.fromString(n.target);d.accessToken.forEach(g=>{if(!this.accessTokenKeyMatchesFilter(g,l,!1))return;const m=this.getAccessTokenCredential(g,a);m&&this.credentialMatchesFilter(m,l)&&ct.fromString(m.target).intersectingScopeSets(h)&&this.removeAccessToken(g,a)}),await this.setAccessTokenCredential(n,a,r)}getAccountsFilteredBy(n,a){const r=this.getAccountKeys(),l=[];return r.forEach(d=>{const h=this.getAccount(d,a);if(!h||n.homeAccountId&&!this.matchHomeAccountId(h,n.homeAccountId)||n.username&&!this.matchUsername(h.username,n.username)||n.environment&&!this.matchEnvironment(h,n.environment)||n.realm&&!this.matchRealm(h,n.realm)||n.nativeAccountId&&!this.matchNativeAccountId(h,n.nativeAccountId)||n.authorityType&&!this.matchAuthorityType(h,n.authorityType))return;const g={localAccountId:n?.localAccountId,name:n?.name},m=h.tenantProfiles?.filter(y=>this.tenantProfileMatchesFilter(y,g));m&&m.length===0||l.push(h)}),l}credentialMatchesFilter(n,a){return!(a.clientId&&!this.matchClientId(n,a.clientId)||a.userAssertionHash&&!this.matchUserAssertionHash(n,a.userAssertionHash)||typeof a.homeAccountId=="string"&&!this.matchHomeAccountId(n,a.homeAccountId)||a.environment&&!this.matchEnvironment(n,a.environment)||a.realm&&!this.matchRealm(n,a.realm)||a.credentialType&&!this.matchCredentialType(n,a.credentialType)||a.familyId&&!this.matchFamilyId(n,a.familyId)||a.target&&!this.matchTarget(n,a.target)||(a.requestedClaimsHash||n.requestedClaimsHash)&&n.requestedClaimsHash!==a.requestedClaimsHash||n.credentialType===Tt.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(a.tokenType&&!this.matchTokenType(n,a.tokenType)||a.tokenType===Oe.SSH&&a.keyId&&!this.matchKeyId(n,a.keyId)))}getAppMetadataFilteredBy(n){const a=this.getKeys(),r={};return a.forEach(l=>{if(!this.isAppMetadata(l))return;const d=this.getAppMetadata(l);d&&(n.environment&&!this.matchEnvironment(d,n.environment)||n.clientId&&!this.matchClientId(d,n.clientId)||(r[l]=d))}),r}getAuthorityMetadataByAlias(n){const a=this.getAuthorityMetadataKeys();let r=null;return a.forEach(l=>{if(!this.isAuthorityMetadata(l)||l.indexOf(this.clientId)===-1)return;const d=this.getAuthorityMetadata(l);d&&d.aliases.indexOf(n)!==-1&&(r=d)}),r}removeAllAccounts(n){this.getAllAccounts({},n).forEach(r=>{this.removeAccount(r,n)})}removeAccount(n,a){this.removeAccountContext(n,a);const r=this.getAccountKeys(),l=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);r.filter(l).forEach(d=>{this.removeItem(d,a),this.performanceClient.incrementFields({accountsRemoved:1},a)})}removeAccountContext(n,a){const r=this.getTokenKeys(),l=d=>d.includes(n.homeAccountId)&&d.includes(n.environment);r.idToken.filter(l).forEach(d=>{this.removeIdToken(d,a)}),r.accessToken.filter(l).forEach(d=>{this.removeAccessToken(d,a)}),r.refreshToken.filter(l).forEach(d=>{this.removeRefreshToken(d,a)})}removeAccessToken(n,a){const r=this.getAccessTokenCredential(n,a);if(this.removeItem(n,a),this.performanceClient.incrementFields({accessTokensRemoved:1},a),!r||r.credentialType.toLowerCase()!==Tt.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Oe.POP)return;const l=r.keyId;l&&this.cryptoImpl.removeTokenBindingKey(l).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${l}`,a),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},a)})}removeAppMetadata(n){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,n)}),!0}getIdToken(n,a,r,l,d){this.commonLogger.trace("CacheManager - getIdToken called");const h={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:Tt.ID_TOKEN,clientId:this.clientId,realm:l},g=this.getIdTokensByFilter(h,a,r),m=g.size;if(m<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(m>1){let y=g;if(!l){const T=new Map;g.forEach((O,P)=>{O.realm===n.tenantId&&T.set(P,O)});const _=T.size;if(_<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),g.values().next().value;if(_===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),T.values().next().value;y=T}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),y.forEach((T,_)=>{this.removeIdToken(_,a)}),d&&a&&d.addFields({multiMatchedID:g.size},a),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),g.values().next().value}getIdTokensByFilter(n,a,r){const l=r&&r.idToken||this.getTokenKeys().idToken,d=new Map;return l.forEach(h=>{if(!this.idTokenKeyMatchesFilter(h,{clientId:this.clientId,...n}))return;const g=this.getIdTokenCredential(h,a);g&&this.credentialMatchesFilter(g,n)&&d.set(h,g)}),d}idTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}removeIdToken(n,a){this.removeItem(n,a)}removeRefreshToken(n,a){this.removeItem(n,a)}getAccessToken(n,a,r,l){const d=a.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",d);const h=ct.createSearchScopes(a.scopes),g=a.authenticationScheme||Oe.BEARER,m=g.toLowerCase()!==Oe.BEARER.toLowerCase()?Tt.ACCESS_TOKEN_WITH_AUTH_SCHEME:Tt.ACCESS_TOKEN,y={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:m,clientId:this.clientId,realm:l||n.tenantId,target:h,tokenType:g,keyId:a.sshKid,requestedClaimsHash:a.requestedClaimsHash},T=r&&r.accessToken||this.getTokenKeys().accessToken,_=[];T.forEach(P=>{if(this.accessTokenKeyMatchesFilter(P,y,!0)){const J=this.getAccessTokenCredential(P,d);J&&this.credentialMatchesFilter(J,y)&&_.push(J)}});const O=_.length;return O<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",d),null):O>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",d),_.forEach(P=>{this.removeAccessToken(this.generateCredentialKey(P),d)}),this.performanceClient.addFields({multiMatchedAT:_.length},d),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",d),_[0])}accessTokenKeyMatchesFilter(n,a,r){const l=n.toLowerCase();if(a.clientId&&l.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&l.indexOf(a.homeAccountId.toLowerCase())===-1||a.realm&&l.indexOf(a.realm.toLowerCase())===-1||a.requestedClaimsHash&&l.indexOf(a.requestedClaimsHash.toLowerCase())===-1)return!1;if(a.target){const d=a.target.asArray();for(let h=0;h<d.length;h++){if(r&&!l.includes(d[h].toLowerCase()))return!1;if(!r&&l.includes(d[h].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(n,a){const r=this.getTokenKeys(),l=[];return r.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,n,!0))return;const h=this.getAccessTokenCredential(d,a);h&&this.credentialMatchesFilter(h,n)&&l.push(h)}),l}getRefreshToken(n,a,r,l,d){this.commonLogger.trace("CacheManager - getRefreshToken called");const h=a?Kl:void 0,g={homeAccountId:n.homeAccountId,environment:n.environment,credentialType:Tt.REFRESH_TOKEN,clientId:this.clientId,familyId:h},m=l&&l.refreshToken||this.getTokenKeys().refreshToken,y=[];m.forEach(_=>{if(this.refreshTokenKeyMatchesFilter(_,g)){const O=this.getRefreshTokenCredential(_,r);O&&this.credentialMatchesFilter(O,g)&&y.push(O)}});const T=y.length;return T<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(T>1&&d&&r&&d.addFields({multiMatchedRT:T},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),y[0])}refreshTokenKeyMatchesFilter(n,a){const r=n.toLowerCase();return!(a.familyId&&r.indexOf(a.familyId.toLowerCase())===-1||!a.familyId&&a.clientId&&r.indexOf(a.clientId.toLowerCase())===-1||a.homeAccountId&&r.indexOf(a.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(n){const a={environment:n,clientId:this.clientId},r=this.getAppMetadataFilteredBy(a),l=Object.keys(r).map(h=>r[h]),d=l.length;if(d<1)return null;if(d>1)throw B(dC);return l[0]}isAppMetadataFOCI(n){const a=this.readAppMetadataFromCache(n);return!!(a&&a.familyId===Kl)}matchHomeAccountId(n,a){return typeof n.homeAccountId=="string"&&a===n.homeAccountId}matchLocalAccountIdFromTokenClaims(n,a){const r=n.oid||n.sub;return a===r}matchLocalAccountIdFromTenantProfile(n,a){return n.localAccountId===a}matchName(n,a){return a.toLowerCase()===n.name?.toLowerCase()}matchUsername(n,a){return!!(n&&typeof n=="string"&&a?.toLowerCase()===n.toLowerCase())}matchUserAssertionHash(n,a){return!!(n.userAssertionHash&&a===n.userAssertionHash)}matchEnvironment(n,a){if(this.staticAuthorityOptions){const l=XA(this.staticAuthorityOptions,this.commonLogger);if(l.includes(a)&&l.includes(n.environment))return!0}const r=this.getAuthorityMetadataByAlias(a);return!!(r&&r.aliases.indexOf(n.environment)>-1)}matchCredentialType(n,a){return n.credentialType&&a.toLowerCase()===n.credentialType.toLowerCase()}matchClientId(n,a){return!!(n.clientId&&a===n.clientId)}matchFamilyId(n,a){return!!(n.familyId&&a===n.familyId)}matchRealm(n,a){return n.realm?.toLowerCase()===a.toLowerCase()}matchNativeAccountId(n,a){return!!(n.nativeAccountId&&a===n.nativeAccountId)}matchLoginHintFromTokenClaims(n,a){return n.login_hint===a||n.preferred_username===a||n.upn===a}matchSid(n,a){return n.sid===a}matchAuthorityType(n,a){return!!(n.authorityType&&a.toLowerCase()===n.authorityType.toLowerCase())}matchTarget(n,a){return n.credentialType!==Tt.ACCESS_TOKEN&&n.credentialType!==Tt.ACCESS_TOKEN_WITH_AUTH_SCHEME||!n.target?!1:ct.fromString(n.target).containsScopeSet(a)}matchTokenType(n,a){return!!(n.tokenType&&n.tokenType===a)}matchKeyId(n,a){return!!(n.keyId&&n.keyId===a)}isAppMetadata(n){return n.indexOf(fh)!==-1}isAuthorityMetadata(n){return n.indexOf(Gl.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(n){return`${Gl.CACHE_KEY}-${this.clientId}-${n}`}static toObject(n,a){for(const r in a)n[r]=a[r];return n}}class ZA extends nh{async setAccount(){throw B(ue)}getAccount(){throw B(ue)}async setIdTokenCredential(){throw B(ue)}getIdTokenCredential(){throw B(ue)}async setAccessTokenCredential(){throw B(ue)}getAccessTokenCredential(){throw B(ue)}async setRefreshTokenCredential(){throw B(ue)}getRefreshTokenCredential(){throw B(ue)}setAppMetadata(){throw B(ue)}getAppMetadata(){throw B(ue)}setServerTelemetry(){throw B(ue)}getServerTelemetry(){throw B(ue)}setAuthorityMetadata(){throw B(ue)}getAuthorityMetadata(){throw B(ue)}getAuthorityMetadataKeys(){throw B(ue)}setThrottlingCache(){throw B(ue)}getThrottlingCache(){throw B(ue)}removeItem(){throw B(ue)}getKeys(){throw B(ue)}getAccountKeys(){throw B(ue)}getTokenKeys(){throw B(ue)}generateCredentialKey(){throw B(ue)}generateAccountKey(){throw B(ue)}}const v={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse",LoadExternalTokens:"LoadExternalTokens",LoadAccount:"loadAccount",LoadIdToken:"loadIdToken",LoadAccessToken:"loadAccessToken",LoadRefreshToken:"loadRefreshToken"},$A={InProgress:1};class Ty{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class BC{generateId(){return"callback-id"}startMeasurement(n,a){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:$A.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:n,startTimeMs:Date.now(),correlationId:a||""},measurement:new Ty}}startPerformanceMeasurement(){return new Ty}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const KC={tokenRenewalOffsetSeconds:nC,preventCorsPreflight:!1},WA={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Be.Info,correlationId:z.EMPTY_STRING},eE={claimsBasedCachingEnabled:!1},tE={async sendGetRequestAsync(){throw B(ue)},async sendPostRequestAsync(){throw B(ue)}},nE={sku:z.SKU,version:Sh,cpu:z.EMPTY_STRING,os:z.EMPTY_STRING},iE={clientSecret:z.EMPTY_STRING,clientAssertion:void 0},aE={azureCloudInstance:Ah.None,tenant:`${z.DEFAULT_COMMON_TENANT}`},oE={application:{appName:"",appVersion:""}};function rE({authOptions:u,systemOptions:n,loggerOptions:a,cacheOptions:r,storageInterface:l,networkInterface:d,cryptoInterface:h,clientCredentials:g,libraryInfo:m,telemetry:y,serverTelemetryManager:T,persistencePlugin:_,serializableCache:O}){const P={...WA,...a};return{authOptions:sE(u),systemOptions:{...KC,...n},loggerOptions:P,cacheOptions:{...eE,...r},storageInterface:l||new ZA(u.clientId,ql,new ia(P),new BC),networkInterface:d||tE,cryptoInterface:h||ql,clientCredentials:g||iE,libraryInfo:{...nE,...m},telemetry:{...oE,...y},serverTelemetryManager:T||null,persistencePlugin:_||null,serializableCache:O||null}}function sE(u){return{clientCapabilities:[],azureCloudOptions:aE,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...u}}function GC(u){return u.authOptions.authority.options.protocolMode===qt.OIDC}const kn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};const xa="client_id",jC="redirect_uri",lE="response_type",cE="response_mode",uE="grant_type",dE="claims",hE="scope",fE="refresh_token",gE="state",mE="nonce",pE="prompt",yE="code",CE="code_challenge",vE="code_challenge_method",TE="code_verifier",SE="client-request-id",AE="x-client-SKU",EE="x-client-VER",_E="x-client-OS",bE="x-client-CPU",wE="x-client-current-telemetry",RE="x-client-last-telemetry",IE="x-ms-lib-capability",kE="x-app-name",OE="x-app-ver",ME="post_logout_redirect_uri",NE="id_token_hint",DE="client_secret",UE="client_assertion",xE="client_assertion_type",qC="token_type",YC="req_cnf",Sy="return_spa_code",HE="nativebroker",LE="logout_hint",zE="sid",PE="login_hint",BE="domain_hint",KE="x-client-xtra-sku",Xl="brk_client_id",Jl="brk_redirect_uri",ih="instance_aware",GE="ear_jwk",jE="ear_jwe_crypto";function cc(u,n,a){if(!n)return;const r=u.get(xa);r&&u.has(Xl)&&a?.addFields({embeddedClientId:r,embeddedRedirectUri:u.get(jC)},n)}function Mh(u,n){u.set(lE,n)}function qE(u,n){u.set(cE,n||bA.QUERY)}function YE(u){u.set(HE,"1")}function Nh(u,n,a=!0,r=Ho){a&&!r.includes("openid")&&!n.includes("openid")&&r.push("openid");const l=a?[...n||[],...r]:n||[],d=new ct(l);u.set(hE,d.printScopes())}function Dh(u,n){u.set(xa,n)}function Uh(u,n){u.set(jC,n)}function FE(u,n){u.set(ME,n)}function QE(u,n){u.set(NE,n)}function VE(u,n){u.set(BE,n)}function Ml(u,n){u.set(PE,n)}function Zl(u,n){u.set(Ut.CCS_HEADER,`UPN:${n}`)}function jr(u,n){u.set(Ut.CCS_HEADER,`Oid:${n.uid}@${n.utid}`)}function Ay(u,n){u.set(zE,n)}function xh(u,n,a){const r=e_(n,a);try{JSON.parse(r)}catch{throw Ue(Eh)}u.set(dE,r)}function Hh(u,n){u.set(SE,n)}function Lh(u,n){u.set(AE,n.sku),u.set(EE,n.version),n.os&&u.set(_E,n.os),n.cpu&&u.set(bE,n.cpu)}function zh(u,n){n?.appName&&u.set(kE,n.appName),n?.appVersion&&u.set(OE,n.appVersion)}function XE(u,n){u.set(pE,n)}function FC(u,n){n&&u.set(gE,n)}function JE(u,n){u.set(mE,n)}function Ph(u,n,a){if(n&&a)u.set(CE,n),u.set(vE,a);else throw Ue(_h)}function ZE(u,n){u.set(yE,n)}function $E(u,n){u.set(fE,n)}function WE(u,n){u.set(TE,n)}function QC(u,n){u.set(DE,n)}function VC(u,n){n&&u.set(UE,n)}function XC(u,n){n&&u.set(xE,n)}function JC(u,n){u.set(uE,n)}function Bh(u){u.set(wA,"1")}function ZC(u){u.has(ih)||u.set(ih,"true")}function ta(u,n){Object.entries(n).forEach(([a,r])=>{!u.has(a)&&r&&u.set(a,r)})}function e_(u,n){let a;if(!u)a={};else try{a=JSON.parse(u)}catch{throw Ue(Eh)}return n&&n.length>0&&(a.hasOwnProperty(kl.ACCESS_TOKEN)||(a[kl.ACCESS_TOKEN]={}),a[kl.ACCESS_TOKEN][kl.XMS_CC]={values:n}),JSON.stringify(a)}function Kh(u,n){n&&(u.set(qC,Oe.POP),u.set(YC,n))}function $C(u,n){n&&(u.set(qC,Oe.SSH),u.set(YC,n))}function WC(u,n){u.set(wE,n.generateCurrentRequestHeaderValue()),u.set(RE,n.generateLastRequestHeaderValue())}function ev(u){u.set(IE,Gr.X_MS_LIB_CAPABILITY_VALUE)}function t_(u,n){u.set(LE,n)}function uc(u,n,a){u.has(Xl)||u.set(Xl,n),u.has(Jl)||u.set(Jl,a)}function n_(u,n){u.set(GE,encodeURIComponent(n)),u.set(jE,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function i_(u,n){Object.entries(n).forEach(([a,r])=>{r&&u.set(a,r)})}function a_(u){return u.hasOwnProperty("authorization_endpoint")&&u.hasOwnProperty("token_endpoint")&&u.hasOwnProperty("issuer")&&u.hasOwnProperty("jwks_uri")}function o_(u){return u.hasOwnProperty("tenant_discovery_endpoint")&&u.hasOwnProperty("metadata")}function r_(u){return u.hasOwnProperty("error")&&u.hasOwnProperty("error_description")}const nn=(u,n,a,r,l)=>(...d)=>{a.trace(`Executing function ${n}`);const h=r?.startMeasurement(n,l);if(l){const g=n+"CallCount";r?.incrementFields({[g]:1},l)}try{const g=u(...d);return h?.end({success:!0}),a.trace(`Returning result from ${n}`),g}catch(g){a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw h?.end({success:!1},g),g}},M=(u,n,a,r,l)=>(...d)=>{a.trace(`Executing function ${n}`);const h=r?.startMeasurement(n,l);if(l){const g=n+"CallCount";r?.incrementFields({[g]:1},l)}return r?.setPreQueueTime(n,l),u(...d).then(g=>(a.trace(`Returning result from ${n}`),h?.end({success:!0}),g)).catch(g=>{a.trace(`Error occurred in ${n}`);try{a.trace(JSON.stringify(g))}catch{a.trace("Unable to print error message.")}throw h?.end({success:!1},g),g})};class dc{constructor(n,a,r,l){this.networkInterface=n,this.logger=a,this.performanceClient=r,this.correlationId=l}async detectRegion(n,a){this.performanceClient?.addQueueMeasurement(v.RegionDiscoveryDetectRegion,this.correlationId);let r=n;if(r)a.region_source=bo.ENVIRONMENT_VARIABLE;else{const l=dc.IMDS_OPTIONS;try{const d=await M(this.getRegionFromIMDS.bind(this),v.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(z.IMDS_VERSION,l);if(d.status===$i.SUCCESS&&(r=d.body,a.region_source=bo.IMDS),d.status===$i.BAD_REQUEST){const h=await M(this.getCurrentVersion.bind(this),v.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(l);if(!h)return a.region_source=bo.FAILED_AUTO_DETECTION,null;const g=await M(this.getRegionFromIMDS.bind(this),v.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(h,l);g.status===$i.SUCCESS&&(r=g.body,a.region_source=bo.IMDS)}}catch{return a.region_source=bo.FAILED_AUTO_DETECTION,null}}return r||(a.region_source=bo.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(n,a){return this.performanceClient?.addQueueMeasurement(v.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${z.IMDS_ENDPOINT}?api-version=${n}&format=text`,a,z.IMDS_TIMEOUT)}async getCurrentVersion(n){this.performanceClient?.addQueueMeasurement(v.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const a=await this.networkInterface.sendGetRequestAsync(`${z.IMDS_ENDPOINT}?format=json`,n);return a.status===$i.BAD_REQUEST&&a.body&&a.body["newest-versions"]&&a.body["newest-versions"].length>0?a.body["newest-versions"][0]:null}catch{return null}}}dc.IMDS_OPTIONS={headers:{Metadata:"true"}};function Yt(){return Math.round(new Date().getTime()/1e3)}function Ey(u){return u.getTime()/1e3}function Oo(u){return u?new Date(Number(u)*1e3):new Date}function $l(u,n){const a=Number(u)||0;return Yt()+n>a}function _y(u,n){const a=Number(u)+n*24*60*60*1e3;return Date.now()>a}function s_(u){return Number(u)>Yt()}function hc(u,n,a,r,l){return{credentialType:Tt.ID_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,realm:l,lastUpdatedAt:Date.now().toString()}}function fc(u,n,a,r,l,d,h,g,m,y,T,_,O,P,J){const V={homeAccountId:u,credentialType:Tt.ACCESS_TOKEN,secret:a,cachedAt:Yt().toString(),expiresOn:h.toString(),extendedExpiresOn:g.toString(),environment:n,clientId:r,realm:l,target:d,tokenType:T||Oe.BEARER,lastUpdatedAt:Date.now().toString()};if(_&&(V.userAssertionHash=_),y&&(V.refreshOn=y.toString()),P&&(V.requestedClaims=P,V.requestedClaimsHash=J),V.tokenType?.toLowerCase()!==Oe.BEARER.toLowerCase())switch(V.credentialType=Tt.ACCESS_TOKEN_WITH_AUTH_SCHEME,V.tokenType){case Oe.POP:const Ce=Kn(a,m);if(!Ce?.cnf?.kid)throw B(pC);V.keyId=Ce.cnf.kid;break;case Oe.SSH:V.keyId=O}return V}function tv(u,n,a,r,l,d,h){const g={credentialType:Tt.REFRESH_TOKEN,homeAccountId:u,environment:n,clientId:r,secret:a,lastUpdatedAt:Date.now().toString()};return d&&(g.userAssertionHash=d),l&&(g.familyId=l),h&&(g.expiresOn=h.toString()),g}function gc(u){return u.hasOwnProperty("homeAccountId")&&u.hasOwnProperty("environment")&&u.hasOwnProperty("credentialType")&&u.hasOwnProperty("clientId")&&u.hasOwnProperty("secret")}function by(u){return u?gc(u)&&u.hasOwnProperty("realm")&&u.hasOwnProperty("target")&&(u.credentialType===Tt.ACCESS_TOKEN||u.credentialType===Tt.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function l_(u){return u?gc(u)&&u.hasOwnProperty("realm")&&u.credentialType===Tt.ID_TOKEN:!1}function wy(u){return u?gc(u)&&u.credentialType===Tt.REFRESH_TOKEN:!1}function c_(u,n){const a=u.indexOf(vt.CACHE_KEY)===0;let r=!0;return n&&(r=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),a&&r}function u_(u,n){let a=!1;u&&(a=u.indexOf(Gr.THROTTLING_PREFIX)===0);let r=!0;return n&&(r=n.hasOwnProperty("throttleTime")),a&&r}function d_({environment:u,clientId:n}){return[fh,u,n].join(Fr.CACHE_KEY_SEPARATOR).toLowerCase()}function h_(u,n){return n?u.indexOf(fh)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment"):!1}function f_(u,n){return n?u.indexOf(Gl.CACHE_KEY)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri"):!1}function Ry(){return Yt()+Gl.REFRESH_TIME_SECONDS}function Nl(u,n,a){u.authorization_endpoint=n.authorization_endpoint,u.token_endpoint=n.token_endpoint,u.end_session_endpoint=n.end_session_endpoint,u.issuer=n.issuer,u.endpointsFromNetwork=a,u.jwks_uri=n.jwks_uri}function jd(u,n,a){u.aliases=n.aliases,u.preferred_cache=n.preferred_cache,u.preferred_network=n.preferred_network,u.aliasesFromNetwork=a}function Iy(u){return u.expiresAt<=Yt()}class wt{constructor(n,a,r,l,d,h,g,m){this.canonicalAuthority=n,this._canonicalAuthority.validateAsUri(),this.networkInterface=a,this.cacheManager=r,this.authorityOptions=l,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=d,this.performanceClient=g,this.correlationId=h,this.managedIdentity=m||!1,this.regionDiscovery=new dc(a,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(n){if(n.HostNameAndPort.endsWith(z.CIAM_AUTH_URL))return In.Ciam;const a=n.PathSegments;if(a.length)switch(a[0].toLowerCase()){case z.ADFS:return In.Adfs;case z.DSTS:return In.Dsts}return In.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(n){this._canonicalAuthority=new be(n),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw B(fi)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw B(fi)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw B(fi)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw B(vC);return this.replacePath(this.metadata.end_session_endpoint)}else throw B(fi)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw B(fi)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw B(fi)}canReplaceTenant(n){return n.PathSegments.length===1&&!wt.reservedTenantDomains.has(n.PathSegments[0])&&this.getAuthorityType(n)===In.Default&&this.protocolMode!==qt.OIDC}replaceTenant(n){return n.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(n){let a=n;const l=new be(this.metadata.canonical_authority).getUrlComponents(),d=l.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((g,m)=>{let y=d[m];if(m===0&&this.canReplaceTenant(l)){const T=new be(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];y!==T&&(this.logger.verbose(`Replacing tenant domain name ${y} with id ${T}`),y=T)}g!==y&&(a=a.replace(`/${y}/`,`/${g}/`))}),this.replaceTenant(a)}get defaultOpenIdConfigurationEndpoint(){const n=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===In.Adfs||this.protocolMode===qt.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(n)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(v.AuthorityResolveEndpointsAsync,this.correlationId);const n=this.getCurrentMetadataEntity(),a=await M(this.updateCloudDiscoveryMetadata.bind(this),v.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const r=await M(this.updateEndpointMetadata.bind(this),v.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,a,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:a,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return n||(n={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Ry(),jwks_uri:""}),n}updateCachedMetadata(n,a,r){a!==en.CACHE&&r?.source!==en.CACHE&&(n.expiresAt=Ry(),n.canonical_authority=this.canonicalAuthority);const l=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache);this.cacheManager.setAuthorityMetadata(l,n),this.metadata=n}async updateEndpointMetadata(n){this.performanceClient?.addQueueMeasurement(v.AuthorityUpdateEndpointMetadata,this.correlationId);const a=this.updateEndpointMetadataFromLocalSources(n);if(a){if(a.source===en.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&a.metadata){const l=await M(this.updateMetadataWithRegionalInformation.bind(this),v.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(a.metadata);Nl(n,l,!1),n.canonical_authority=this.canonicalAuthority}return a.source}let r=await M(this.getEndpointMetadataFromNetwork.bind(this),v.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await M(this.updateMetadataWithRegionalInformation.bind(this),v.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Nl(n,r,!0),en.NETWORK;throw B(rC,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(n){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const a=this.getEndpointMetadataFromConfig();if(a)return this.logger.verbose("Found endpoint metadata in authority configuration"),Nl(n,a,!1),{source:en.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const l=this.getEndpointMetadataFromHardcodedValues();if(l)return Nl(n,l,!1),{source:en.HARDCODED_VALUES,metadata:l};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=Iy(n);return this.isAuthoritySameType(n)&&n.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:en.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(n){return new be(n.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Ue(RC)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(v.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const n={},a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{const r=await this.networkInterface.sendGetRequestAsync(a,n);return a_(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Cy?Cy[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(n){this.performanceClient?.addQueueMeasurement(v.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const a=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(a){if(a!==z.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Kd.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=a,wt.replaceWithRegionalInformation(n,a);const r=await M(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),v.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Kd.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,wt.replaceWithRegionalInformation(n,r);this.regionDiscoveryMetadata.region_outcome=Kd.AUTO_DETECTION_REQUESTED_FAILED}return n}async updateCloudDiscoveryMetadata(n){this.performanceClient?.addQueueMeasurement(v.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const a=this.updateCloudDiscoveryMetadataFromLocalSources(n);if(a)return a;const r=await M(this.getCloudDiscoveryMetadataFromNetwork.bind(this),v.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return jd(n,r,!0),en.NETWORK;throw Ue(IC)}updateCloudDiscoveryMetadataFromLocalSources(n){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||z.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||z.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${n.canonical_authority||z.NOT_APPLICABLE}`);const a=this.getCloudDiscoveryMetadataFromConfig();if(a)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),jd(n,a,!1),en.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const l=JA(this.hostnameAndPort);if(l)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),jd(n,l,!1),en.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=Iy(n);return this.isAuthoritySameType(n)&&n.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),en.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===In.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),wt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const n=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),a=Ql(n.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),a)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),a;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ue(bh)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),wt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(v.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const n=`${z.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,a={};let r=null;try{const l=await this.networkInterface.sendGetRequestAsync(n,a);let d,h;if(o_(l.body))d=l.body,h=d.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${d.tenant_discovery_endpoint}`);else if(r_(l.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${l.status}`),d=l.body,d.error===z.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${d.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${d.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),h=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Ql(h,this.hostnameAndPort)}catch(l){if(l instanceof xe)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${l.errorCode}
Error Description: ${l.errorMessage}`);else{const d=l;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${d.name}
Error Description: ${d.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=wt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&be.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(n,a){let r;if(a&&a.azureCloudInstance!==Ah.None){const l=a.tenant?a.tenant:z.DEFAULT_COMMON_TENANT;r=`${a.azureCloudInstance}/${l}/`}return r||n}static createCloudDiscoveryMetadataFromHost(n){return{preferred_network:n,preferred_cache:n,aliases:[n]}}getPreferredCache(){if(this.managedIdentity)return z.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw B(fi)}isAlias(n){return this.metadata.aliases.indexOf(n)>-1}isAliasOfKnownMicrosoftAuthority(n){return PC.has(n)}static isPublicCloudAuthority(n){return z.KNOWN_PUBLIC_CLOUDS.indexOf(n)>=0}static buildRegionalAuthorityString(n,a,r){const l=new be(n);l.validateAsUri();const d=l.getUrlComponents();let h=`${a}.${d.HostNameAndPort}`;this.isPublicCloudAuthority(d.HostNameAndPort)&&(h=`${a}.${z.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const g=be.constructAuthorityUriFromObject({...l.getUrlComponents(),HostNameAndPort:h}).urlString;return r?`${g}?${r}`:g}static replaceWithRegionalInformation(n,a){const r={...n};return r.authorization_endpoint=wt.buildRegionalAuthorityString(r.authorization_endpoint,a),r.token_endpoint=wt.buildRegionalAuthorityString(r.token_endpoint,a),r.end_session_endpoint&&(r.end_session_endpoint=wt.buildRegionalAuthorityString(r.end_session_endpoint,a)),r}static transformCIAMAuthority(n){let a=n;const l=new be(n).getUrlComponents();if(l.PathSegments.length===0&&l.HostNameAndPort.endsWith(z.CIAM_AUTH_URL)){const d=l.HostNameAndPort.split(".")[0];a=`${a}${d}${z.AAD_TENANT_DOMAIN_SUFFIX}`}return a}}wt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Wi.COMMON,Wi.CONSUMERS,Wi.ORGANIZATIONS]);function g_(u){const r=new be(u).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case Wi.COMMON:case Wi.ORGANIZATIONS:case Wi.CONSUMERS:return;default:return r}}function nv(u){return u.endsWith(z.FORWARD_SLASH)?u:`${u}${z.FORWARD_SLASH}`}function m_(u){const n=u.cloudDiscoveryMetadata;let a;if(n)try{a=JSON.parse(n)}catch{throw Ue(bh)}return{canonicalAuthority:u.authority?nv(u.authority):void 0,knownAuthorities:u.knownAuthorities,cloudDiscoveryMetadata:a}}async function iv(u,n,a,r,l,d,h){h?.addQueueMeasurement(v.AuthorityFactoryCreateDiscoveredInstance,d);const g=wt.transformCIAMAuthority(nv(u)),m=new wt(g,n,a,r,l,d,h);try{return await M(m.resolveEndpointsAsync.bind(m),v.AuthorityResolveEndpointsAsync,l,h,d)(),m}catch{throw B(fi)}}class Ba extends xe{constructor(n,a,r,l,d){super(n,a,r),this.name="ServerError",this.errorNo=l,this.status=d,Object.setPrototypeOf(this,Ba.prototype)}}function mc(u,n,a){return{clientId:u,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:a,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid,embeddedClientId:n.embeddedClientId||n.tokenBodyParameters?.clientId}}class Pn{static generateThrottlingStorageKey(n){return`${Gr.THROTTLING_PREFIX}.${JSON.stringify(n)}`}static preProcess(n,a,r){const l=Pn.generateThrottlingStorageKey(a),d=n.getThrottlingCache(l);if(d){if(d.throttleTime<Date.now()){n.removeItem(l,r);return}throw new Ba(d.errorCodes?.join(" ")||z.EMPTY_STRING,d.errorMessage,d.subError)}}static postProcess(n,a,r,l){if(Pn.checkResponseStatus(r)||Pn.checkResponseForRetryAfter(r)){const d={throttleTime:Pn.calculateThrottleTime(parseInt(r.headers[Ut.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};n.setThrottlingCache(Pn.generateThrottlingStorageKey(a),d,l)}}static checkResponseStatus(n){return n.status===429||n.status>=500&&n.status<600}static checkResponseForRetryAfter(n){return n.headers?n.headers.hasOwnProperty(Ut.RETRY_AFTER)&&(n.status<200||n.status>=300):!1}static calculateThrottleTime(n){const a=n<=0?0:n,r=Date.now()/1e3;return Math.floor(Math.min(r+(a||Gr.DEFAULT_THROTTLE_TIME_SECONDS),r+Gr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(n,a,r,l){const d=mc(a,r,l),h=this.generateThrottlingStorageKey(d);n.removeItem(h,r.correlationId)}}class pc extends xe{constructor(n,a,r){super(n.errorCode,n.errorMessage,n.subError),Object.setPrototypeOf(this,pc.prototype),this.name="NetworkError",this.error=n,this.httpStatus=a,this.responseHeaders=r}}function Kr(u,n,a,r){return u.errorMessage=`${u.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new pc(u,n,a)}class Gh{constructor(n,a){this.config=rE(n),this.logger=new ia(this.config.loggerOptions,TC,Sh),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=a}createTokenRequestHeaders(n){const a={};if(a[Ut.CONTENT_TYPE]=z.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case kn.HOME_ACCOUNT_ID:try{const r=Io(n.credential);a[Ut.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case kn.UPN:a[Ut.CCS_HEADER]=`UPN: ${n.credential}`;break}return a}async executePostToTokenEndpoint(n,a,r,l,d,h){h&&this.performanceClient?.addQueueMeasurement(h,d);const g=await this.sendPostRequest(l,n,{body:a,headers:r},d);return this.config.serverTelemetryManager&&g.status<500&&g.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),g}async sendPostRequest(n,a,r,l){Pn.preProcess(this.cacheManager,n,l);let d;try{d=await M(this.networkClient.sendPostRequestAsync.bind(this.networkClient),v.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,l)(a,r);const h=d.headers||{};this.performanceClient?.addFields({refreshTokenSize:d.body.refresh_token?.length||0,httpVerToken:h[Ut.X_MS_HTTP_VERSION]||"",requestId:h[Ut.X_MS_REQUEST_ID]||""},l)}catch(h){if(h instanceof pc){const g=h.responseHeaders;throw g&&this.performanceClient?.addFields({httpVerToken:g[Ut.X_MS_HTTP_VERSION]||"",requestId:g[Ut.X_MS_REQUEST_ID]||"",contentTypeHeader:g[Ut.CONTENT_TYPE]||void 0,contentLengthHeader:g[Ut.CONTENT_LENGTH]||void 0,httpStatus:h.httpStatus},l),h.error}throw h instanceof xe?h:B(oC)}return Pn.postProcess(this.cacheManager,n,d,l),d}async updateAuthority(n,a){this.performanceClient?.addQueueMeasurement(v.UpdateTokenEndpointAuthority,a);const r=`https://${n}/${this.authority.tenant}/`,l=await iv(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,a,this.performanceClient);this.authority=l}createTokenQueryParameters(n){const a=new Map;return n.embeddedClientId&&uc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenQueryParameters&&ta(a,n.tokenQueryParameters),Hh(a,n.correlationId),cc(a,n.correlationId,this.performanceClient),Qr(a)}}const Wl="no_tokens_found",av="native_account_unavailable",jh="refresh_token_expired",qh="ux_not_allowed",p_="interaction_required",y_="consent_required",C_="login_required",yc="bad_token";const ky=[p_,y_,C_,yc,qh],v_=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],T_={[Wl]:"No refresh token found in the cache. Please sign-in.",[av]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[jh]:"Refresh token has expired.",[yc]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[qh]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Cn extends xe{constructor(n,a,r,l,d,h,g,m){super(n,a,r),Object.setPrototypeOf(this,Cn.prototype),this.timestamp=l||z.EMPTY_STRING,this.traceId=d||z.EMPTY_STRING,this.correlationId=h||z.EMPTY_STRING,this.claims=g||z.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=m}}function ov(u,n,a){const r=!!u&&ky.indexOf(u)>-1,l=!!a&&v_.indexOf(a)>-1,d=!!n&&ky.some(h=>n.indexOf(h)>-1);return r||d||l}function ec(u){return new Cn(u,T_[u])}class Lo{static setRequestState(n,a,r){const l=Lo.generateLibraryState(n,r);return a?`${l}${z.RESOURCE_DELIM}${a}`:l}static generateLibraryState(n,a){if(!n)throw B(eh);const r={id:n.createNewGuid()};a&&(r.meta=a);const l=JSON.stringify(r);return n.base64Encode(l)}static parseRequestState(n,a){if(!n)throw B(eh);if(!a)throw B(Uo);try{const r=a.split(z.RESOURCE_DELIM),l=r[0],d=r.length>1?r.slice(1).join(z.RESOURCE_DELIM):z.EMPTY_STRING,h=n.base64Decode(l),g=JSON.parse(h);return{userRequestState:d||z.EMPTY_STRING,libraryState:g}}catch{throw B(Uo)}}}const S_={SW:"sw"};class xo{constructor(n,a){this.cryptoUtils=n,this.performanceClient=a}async generateCnf(n,a){this.performanceClient?.addQueueMeasurement(v.PopTokenGenerateCnf,n.correlationId);const r=await M(this.generateKid.bind(this),v.PopTokenGenerateCnf,a,this.performanceClient,n.correlationId)(n),l=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:l}}async generateKid(n){return this.performanceClient?.addQueueMeasurement(v.PopTokenGenerateKid,n.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(n),xms_ksl:S_.SW}}async signPopToken(n,a,r){return this.signPayload(n,a,r)}async signPayload(n,a,r,l){const{resourceRequestMethod:d,resourceRequestUri:h,shrClaims:g,shrNonce:m,shrOptions:y}=r,_=(h?new be(h):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:n,ts:Yt(),m:d?.toUpperCase(),u:_?.HostNameAndPort,nonce:m||this.cryptoUtils.createNewGuid(),p:_?.AbsolutePath,q:_?.QueryString?[[],_.QueryString]:void 0,client_claims:g||void 0,...l},a,y,r.correlationId)}}class A_{constructor(n,a){this.cache=n,this.hasChanged=a}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Ha{constructor(n,a,r,l,d,h,g){this.clientId=n,this.cacheStorage=a,this.cryptoObj=r,this.logger=l,this.serializableCache=d,this.persistencePlugin=h,this.performanceClient=g}validateTokenResponse(n,a){if(n.error||n.error_description||n.suberror){const r=`Error(s): ${n.error_codes||z.NOT_AVAILABLE} - Timestamp: ${n.timestamp||z.NOT_AVAILABLE} - Description: ${n.error_description||z.NOT_AVAILABLE} - Correlation ID: ${n.correlation_id||z.NOT_AVAILABLE} - Trace ID: ${n.trace_id||z.NOT_AVAILABLE}`,l=n.error_codes?.length?n.error_codes[0]:void 0,d=new Ba(n.error,r,n.suberror,l,n.status);if(a&&n.status&&n.status>=$i.SERVER_ERROR_RANGE_START&&n.status<=$i.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${d}`);return}else if(a&&n.status&&n.status>=$i.CLIENT_ERROR_RANGE_START&&n.status<=$i.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${d}`);return}throw ov(n.error,n.error_description,n.suberror)?new Cn(n.error,n.error_description,n.suberror,n.timestamp||z.EMPTY_STRING,n.trace_id||z.EMPTY_STRING,n.correlation_id||z.EMPTY_STRING,n.claims||z.EMPTY_STRING,l):d}}async handleServerTokenResponse(n,a,r,l,d,h,g,m,y,T){this.performanceClient?.addQueueMeasurement(v.HandleServerTokenResponse,n.correlation_id);let _;if(n.id_token){if(_=Kn(n.id_token||z.EMPTY_STRING,this.cryptoObj.base64Decode),h&&h.nonce&&_.nonce!==h.nonce)throw B(cC);if(l.maxAge||l.maxAge===0){const V=_.auth_time;if(!V)throw B(ph);HC(V,l.maxAge)}}this.homeAccountIdentifier=Fe.generateHomeAccountId(n.client_info||z.EMPTY_STRING,a.authorityType,this.logger,this.cryptoObj,_);let O;h&&h.state&&(O=Lo.parseRequestState(this.cryptoObj,h.state)),n.key_id=n.key_id||l.sshKid||void 0;const P=this.generateCacheRecord(n,a,r,l,_,g,h);let J;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),J=new A_(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(J)),m&&!y&&P.account){const V=this.cacheStorage.generateAccountKey(Fe.getAccountInfo(P.account));if(!this.cacheStorage.getAccount(V,l.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Ha.generateAuthenticationResult(this.cryptoObj,a,P,!1,l,_,O,void 0,T)}await this.cacheStorage.saveCacheRecord(P,l.correlationId,Gn(_||{}),d,l.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&J&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(J))}return Ha.generateAuthenticationResult(this.cryptoObj,a,P,!1,l,_,O,n,T)}generateCacheRecord(n,a,r,l,d,h,g){const m=a.getPreferredCache();if(!m)throw B(Ch);const y=Ih(d);let T,_;n.id_token&&d&&(T=hc(this.homeAccountIdentifier,m,n.id_token,this.clientId,y||""),_=Yh(this.cacheStorage,a,this.homeAccountIdentifier,this.cryptoObj.base64Decode,l.correlationId,d,n.client_info,m,y,g,void 0,this.logger));let O=null;if(n.access_token){const V=n.scope?ct.fromString(n.scope):new ct(l.scopes||[]),Ce=(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,ve=(typeof n.ext_expires_in=="string"?parseInt(n.ext_expires_in,10):n.ext_expires_in)||0,de=(typeof n.refresh_in=="string"?parseInt(n.refresh_in,10):n.refresh_in)||void 0,Te=r+Ce,Ke=Te+ve,Qe=de&&de>0?r+de:void 0;O=fc(this.homeAccountIdentifier,m,n.access_token,this.clientId,y||a.tenant||"",V.printScopes(),Te,Ke,this.cryptoObj.base64Decode,Qe,n.token_type,h,n.key_id,l.claims,l.requestedClaimsHash)}let P=null;if(n.refresh_token){let V;if(n.refresh_token_expires_in){const Ce=typeof n.refresh_token_expires_in=="string"?parseInt(n.refresh_token_expires_in,10):n.refresh_token_expires_in;V=r+Ce,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:V},l.correlationId)}P=tv(this.homeAccountIdentifier,m,n.refresh_token,this.clientId,n.foci,h,V)}let J=null;return n.foci&&(J={clientId:this.clientId,environment:m,familyId:n.foci}),{account:_,idToken:T,accessToken:O,refreshToken:P,appMetadata:J}}static async generateAuthenticationResult(n,a,r,l,d,h,g,m,y){let T=z.EMPTY_STRING,_=[],O=null,P,J,V=z.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Oe.POP&&!d.popKid){const Te=new xo(n),{secret:Ke,keyId:Qe}=r.accessToken;if(!Qe)throw B(vh);T=await Te.signPopToken(Ke,Qe,d)}else T=r.accessToken.secret;_=ct.fromString(r.accessToken.target).asArray(),O=Oo(r.accessToken.expiresOn),P=Oo(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(J=Oo(r.accessToken.refreshOn))}r.appMetadata&&(V=r.appMetadata.familyId===Kl?Kl:"");const Ce=h?.oid||h?.sub||"",ve=h?.tid||"";m?.spa_accountid&&r.account&&(r.account.nativeAccountId=m?.spa_accountid);const de=r.account?Rh(Fe.getAccountInfo(r.account),void 0,h,r.idToken?.secret):null;return{authority:a.canonicalAuthority,uniqueId:Ce,tenantId:ve,scopes:_,account:de,idToken:r?.idToken?.secret||"",idTokenClaims:h||{},accessToken:T,fromCache:l,expiresOn:O,extExpiresOn:P,refreshOn:J,correlationId:d.correlationId,requestId:y||z.EMPTY_STRING,familyId:V,tokenType:r.accessToken?.tokenType||z.EMPTY_STRING,state:g?g.userRequestState:z.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||z.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||z.EMPTY_STRING,code:m?.spa_code,fromNativeBroker:!1}}}function Yh(u,n,a,r,l,d,h,g,m,y,T,_){_?.verbose("setCachedAccount called");const P=u.getAccountKeys().find(de=>de.startsWith(a));let J=null;P&&(J=u.getAccount(P,l));const V=J||Fe.createAccount({homeAccountId:a,idTokenClaims:d,clientInfo:h,environment:g,cloudGraphHostName:y?.cloud_graph_host_name,msGraphHost:y?.msgraph_host,nativeAccountId:T},n,r),Ce=V.tenantProfiles||[],ve=m||V.realm;if(ve&&!Ce.find(de=>de.tenantId===ve)){const de=lc(a,V.localAccountId,ve,d);Ce.push(de)}return V.tenantProfiles=Ce,V}async function rv(u,n,a){return typeof u=="string"?u:u({clientId:n,tokenEndpoint:a})}class sv extends Gh{constructor(n,a){super(n,a),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(n,a,r){if(this.performanceClient?.addQueueMeasurement(v.AuthClientAcquireToken,n.correlationId),!n.code)throw B(hC);const l=Yt(),d=await M(this.executeTokenRequest.bind(this),v.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(this.authority,n),h=d.headers?.[Ut.X_MS_REQUEST_ID],g=new Ha(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return g.validateTokenResponse(d.body),M(g.handleServerTokenResponse.bind(g),v.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(d.body,this.authority,l,n,a,r,void 0,void 0,void 0,h)}getLogoutUri(n){if(!n)throw Ue(wC);const a=this.createLogoutUrlQueryString(n);return be.appendQueryString(this.authority.endSessionEndpoint,a)}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(v.AuthClientExecuteTokenRequest,a.correlationId);const r=this.createTokenQueryParameters(a),l=be.appendQueryString(n.tokenEndpoint,r),d=await M(this.createTokenRequestBody.bind(this),v.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,a.correlationId)(a);let h;if(a.clientInfo)try{const y=Yl(a.clientInfo,this.cryptoUtils.base64Decode);h={credential:`${y.uid}${Fr.CLIENT_INFO_SEPARATOR}${y.utid}`,type:kn.HOME_ACCOUNT_ID}}catch(y){this.logger.verbose("Could not parse client info for CCS Header: "+y)}const g=this.createTokenRequestHeaders(h||a.ccsCredential),m=mc(this.config.authOptions.clientId,a);return M(this.executePostToTokenEndpoint.bind(this),v.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,a.correlationId)(l,d,g,m,a.correlationId,v.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(v.AuthClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(Dh(a,n.embeddedClientId||n.tokenBodyParameters?.[xa]||this.config.authOptions.clientId),this.includeRedirectUri)Uh(a,n.redirectUri);else if(!n.redirectUri)throw Ue(SC);if(Nh(a,n.scopes,!0,this.oidcDefaultScopes),ZE(a,n.code),Lh(a,this.config.libraryInfo),zh(a,this.config.telemetry.application),ev(a),this.serverTelemetryManager&&!GC(this.config)&&WC(a,this.serverTelemetryManager),n.codeVerifier&&WE(a,n.codeVerifier),this.config.clientCredentials.clientSecret&&QC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const l=this.config.clientCredentials.clientAssertion;VC(a,await rv(l.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),XC(a,l.assertionType)}if(JC(a,tC.AUTHORIZATION_CODE_GRANT),Bh(a),n.authenticationScheme===Oe.POP){const l=new xo(this.cryptoUtils,this.performanceClient);let d;n.popKid?d=this.cryptoUtils.encodeKid(n.popKid):d=(await M(l.generateCnf.bind(l),v.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Kh(a,d)}else if(n.authenticationScheme===Oe.SSH)if(n.sshJwk)$C(a,n.sshJwk);else throw Ue(sc);(!tn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&xh(a,n.claims,this.config.authOptions.clientCapabilities);let r;if(n.clientInfo)try{const l=Yl(n.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${l.uid}${Fr.CLIENT_INFO_SEPARATOR}${l.utid}`,type:kn.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}else r=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case kn.HOME_ACCOUNT_ID:try{const l=Io(r.credential);jr(a,l)}catch(l){this.logger.verbose("Could not parse home account ID for CCS Header: "+l)}break;case kn.UPN:Zl(a,r.credential);break}return n.embeddedClientId&&uc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&ta(a,n.tokenBodyParameters),n.enableSpaAuthorizationCode&&(!n.tokenBodyParameters||!n.tokenBodyParameters[Sy])&&ta(a,{[Sy]:"1"}),cc(a,n.correlationId,this.performanceClient),Qr(a)}createLogoutUrlQueryString(n){const a=new Map;return n.postLogoutRedirectUri&&FE(a,n.postLogoutRedirectUri),n.correlationId&&Hh(a,n.correlationId),n.idTokenHint&&QE(a,n.idTokenHint),n.state&&FC(a,n.state),n.logoutHint&&t_(a,n.logoutHint),n.extraQueryParameters&&ta(a,n.extraQueryParameters),this.config.authOptions.instanceAware&&ZC(a),Qr(a,this.config.authOptions.encodeExtraQueryParams,n.extraQueryParameters)}}const E_=300;class __ extends Gh{constructor(n,a){super(n,a)}async acquireToken(n,a){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientAcquireToken,n.correlationId);const r=Yt(),l=await M(this.executeTokenRequest.bind(this),v.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,n.correlationId)(n,this.authority),d=l.headers?.[Ut.X_MS_REQUEST_ID],h=new Ha(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return h.validateTokenResponse(l.body),M(h.handleServerTokenResponse.bind(h),v.HandleServerTokenResponse,this.logger,this.performanceClient,n.correlationId)(l.body,this.authority,r,n,a,void 0,void 0,!0,n.forceCache,d)}async acquireTokenByRefreshToken(n,a){if(!n)throw Ue(bC);if(this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientAcquireTokenByRefreshToken,n.correlationId),!n.account)throw B(yh);if(this.cacheManager.isAppMetadataFOCI(n.account.environment))try{return await M(this.acquireTokenWithCachedRefreshToken.bind(this),v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!0,a)}catch(l){const d=l instanceof Cn&&l.errorCode===Wl,h=l instanceof Ba&&l.errorCode===hy.INVALID_GRANT_ERROR&&l.subError===hy.CLIENT_MISMATCH_ERROR;if(d||h)return M(this.acquireTokenWithCachedRefreshToken.bind(this),v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a);throw l}return M(this.acquireTokenWithCachedRefreshToken.bind(this),v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,!1,a)}async acquireTokenWithCachedRefreshToken(n,a,r){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId);const l=nn(this.cacheManager.getRefreshToken.bind(this.cacheManager),v.CacheManagerGetRefreshToken,this.logger,this.performanceClient,n.correlationId)(n.account,a,n.correlationId,void 0,this.performanceClient);if(!l)throw ec(Wl);if(l.expiresOn){const h=n.refreshTokenExpirationOffsetSeconds||E_;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(l.expiresOn),rtOffsetSeconds:h},n.correlationId),$l(l.expiresOn,h))throw ec(jh)}const d={...n,refreshToken:l.secret,authenticationScheme:n.authenticationScheme||Oe.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:kn.HOME_ACCOUNT_ID}};try{return await M(this.acquireToken.bind(this),v.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(d,r)}catch(h){if(h instanceof Cn&&h.subError===yc){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const g=this.cacheManager.generateCredentialKey(l);this.cacheManager.removeRefreshToken(g,n.correlationId)}throw h}}async executeTokenRequest(n,a){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),l=be.appendQueryString(a.tokenEndpoint,r),d=await M(this.createTokenRequestBody.bind(this),v.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n),h=this.createTokenRequestHeaders(n.ccsCredential),g=mc(this.config.authOptions.clientId,n);return M(this.executePostToTokenEndpoint.bind(this),v.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(l,d,h,g,n.correlationId,v.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(n){this.performanceClient?.addQueueMeasurement(v.RefreshTokenClientCreateTokenRequestBody,n.correlationId);const a=new Map;if(Dh(a,n.embeddedClientId||n.tokenBodyParameters?.[xa]||this.config.authOptions.clientId),n.redirectUri&&Uh(a,n.redirectUri),Nh(a,n.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),JC(a,tC.REFRESH_TOKEN_GRANT),Bh(a),Lh(a,this.config.libraryInfo),zh(a,this.config.telemetry.application),ev(a),this.serverTelemetryManager&&!GC(this.config)&&WC(a,this.serverTelemetryManager),$E(a,n.refreshToken),this.config.clientCredentials.clientSecret&&QC(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;VC(a,await rv(r.assertion,this.config.authOptions.clientId,n.resourceRequestUri)),XC(a,r.assertionType)}if(n.authenticationScheme===Oe.POP){const r=new xo(this.cryptoUtils,this.performanceClient);let l;n.popKid?l=this.cryptoUtils.encodeKid(n.popKid):l=(await M(r.generateCnf.bind(r),v.PopTokenGenerateCnf,this.logger,this.performanceClient,n.correlationId)(n,this.logger)).reqCnfString,Kh(a,l)}else if(n.authenticationScheme===Oe.SSH)if(n.sshJwk)$C(a,n.sshJwk);else throw Ue(sc);if((!tn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&xh(a,n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case kn.HOME_ACCOUNT_ID:try{const r=Io(n.ccsCredential.credential);jr(a,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case kn.UPN:Zl(a,n.ccsCredential.credential);break}return n.embeddedClientId&&uc(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),n.tokenBodyParameters&&ta(a,n.tokenBodyParameters),cc(a,n.correlationId,this.performanceClient),Qr(a)}}class b_ extends Gh{constructor(n,a){super(n,a)}async acquireCachedToken(n){this.performanceClient?.addQueueMeasurement(v.SilentFlowClientAcquireCachedToken,n.correlationId);let a=Da.NOT_APPLICABLE;if(n.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!tn.isEmptyObj(n.claims))throw this.setCacheOutcome(Da.FORCE_REFRESH_OR_CLAIMS,n.correlationId),B(ea);if(!n.account)throw B(yh);const r=n.account.tenantId||g_(n.authority),l=this.cacheManager.getTokenKeys(),d=this.cacheManager.getAccessToken(n.account,n,l,r);if(d){if(s_(d.cachedAt)||$l(d.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Da.CACHED_ACCESS_TOKEN_EXPIRED,n.correlationId),B(ea);d.refreshOn&&$l(d.refreshOn,0)&&(a=Da.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Da.NO_CACHED_ACCESS_TOKEN,n.correlationId),B(ea);const h=n.authority||this.authority.getPreferredCache(),g={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(n.account),n.correlationId),accessToken:d,idToken:this.cacheManager.getIdToken(n.account,n.correlationId,l,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(h)};return this.setCacheOutcome(a,n.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await M(this.generateResultFromCacheRecord.bind(this),v.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,n.correlationId)(g,n),a]}setCacheOutcome(n,a){this.serverTelemetryManager?.setCacheOutcome(n),this.performanceClient?.addFields({cacheOutcome:n},a),n!==Da.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${n}`)}async generateResultFromCacheRecord(n,a){this.performanceClient?.addQueueMeasurement(v.SilentFlowClientGenerateResultFromCacheRecord,a.correlationId);let r;if(n.idToken&&(r=Kn(n.idToken.secret,this.config.cryptoInterface.base64Decode)),a.maxAge||a.maxAge===0){const l=r?.auth_time;if(!l)throw B(ph);HC(l,a.maxAge)}return Ha.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,a,r)}}const w_={sendGetRequestAsync:()=>Promise.reject(B(ue)),sendPostRequestAsync:()=>Promise.reject(B(ue))};function R_(u,n,a,r){const l=n.correlationId,d=new Map;Dh(d,n.embeddedClientId||n.extraQueryParameters?.[xa]||u.clientId);const h=[...n.scopes||[],...n.extraScopesToConsent||[]];if(Nh(d,h,!0,u.authority.options.OIDCOptions?.defaultScopes),Uh(d,n.redirectUri),Hh(d,l),qE(d,n.responseMode),Bh(d),n.prompt&&(XE(d,n.prompt),r?.addFields({prompt:n.prompt},l)),n.domainHint&&(VE(d,n.domainHint),r?.addFields({domainHintFromRequest:!0},l)),n.prompt!==St.SELECT_ACCOUNT)if(n.sid&&n.prompt===St.NONE)a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Ay(d,n.sid),r?.addFields({sidFromRequest:!0},l);else if(n.account){const g=O_(n.account);let m=M_(n.account);if(m&&n.domainHint&&(a.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),m=null),m){a.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ml(d,m),r?.addFields({loginHintFromClaim:!0},l);try{const y=Io(n.account.homeAccountId);jr(d,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(g&&n.prompt===St.NONE){a.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Ay(d,g),r?.addFields({sidFromClaim:!0},l);try{const y=Io(n.account.homeAccountId);jr(d,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(n.loginHint)a.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ml(d,n.loginHint),Zl(d,n.loginHint),r?.addFields({loginHintFromRequest:!0},l);else if(n.account.username){a.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ml(d,n.account.username),r?.addFields({loginHintFromUpn:!0},l);try{const y=Io(n.account.homeAccountId);jr(d,y)}catch{a.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else n.loginHint&&(a.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ml(d,n.loginHint),Zl(d,n.loginHint),r?.addFields({loginHintFromRequest:!0},l));else a.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return n.nonce&&JE(d,n.nonce),n.state&&FC(d,n.state),(n.claims||u.clientCapabilities&&u.clientCapabilities.length>0)&&xh(d,n.claims,u.clientCapabilities),n.embeddedClientId&&uc(d,u.clientId,u.redirectUri),u.instanceAware&&(!n.extraQueryParameters||!Object.keys(n.extraQueryParameters).includes(ih))&&ZC(d),d}function Fh(u,n,a,r){const l=Qr(n,a,r);return be.appendQueryString(u.authorizationEndpoint,l)}function I_(u,n){if(lv(u,n),!u.code)throw B(yC);return u}function lv(u,n){if(!u.state||!n)throw u.state?B(Zd,"Cached State"):B(Zd,"Server State");let a,r;try{a=decodeURIComponent(u.state)}catch{throw B(Uo,u.state)}try{r=decodeURIComponent(n)}catch{throw B(Uo,u.state)}if(a!==r)throw B(lC);if(u.error||u.error_description||u.suberror){const l=k_(u);throw ov(u.error,u.error_description,u.suberror)?new Cn(u.error||"",u.error_description,u.suberror,u.timestamp||"",u.trace_id||"",u.correlation_id||"",u.claims||"",l):new Ba(u.error||"",u.error_description,u.suberror,l)}}function k_(u){const n="code=",a=u.error_uri?.lastIndexOf(n);return a&&a>=0?u.error_uri?.substring(a+n.length):void 0}function O_(u){return u.idTokenClaims?.sid||null}function M_(u){return u.loginHint||u.idTokenClaims?.login_hint||null}const Oy=",",cv="|";function N_(u){const{skus:n,libraryName:a,libraryVersion:r,extensionName:l,extensionVersion:d}=u,h=new Map([[0,[a,r]],[2,[l,d]]]);let g=[];if(n?.length){if(g=n.split(Oy),g.length<4)return n}else g=Array.from({length:4},()=>cv);return h.forEach((m,y)=>{m.length===2&&m[0]?.length&&m[1]?.length&&D_({skuArr:g,index:y,skuName:m[0],skuVersion:m[1]})}),g.join(Oy)}function D_(u){const{skuArr:n,index:a,skuName:r,skuVersion:l}=u;a>=n.length||(n[a]=[r,l].join(cv))}class Vr{constructor(n,a){this.cacheOutcome=Da.NOT_APPLICABLE,this.cacheManager=a,this.apiId=n.apiId,this.correlationId=n.correlationId,this.wrapperSKU=n.wrapperSKU||z.EMPTY_STRING,this.wrapperVer=n.wrapperVer||z.EMPTY_STRING,this.telemetryCacheKey=vt.CACHE_KEY+Fr.CACHE_KEY_SEPARATOR+n.clientId}generateCurrentRequestHeaderValue(){const n=`${this.apiId}${vt.VALUE_SEPARATOR}${this.cacheOutcome}`,a=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&a.push(`broker_error=${r}`);const l=a.join(vt.VALUE_SEPARATOR),d=this.getRegionDiscoveryFields(),h=[n,d].join(vt.VALUE_SEPARATOR);return[vt.SCHEMA_VERSION,h,l].join(vt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const n=this.getLastRequests(),a=Vr.maxErrorsToSend(n),r=n.failedRequests.slice(0,2*a).join(vt.VALUE_SEPARATOR),l=n.errors.slice(0,a).join(vt.VALUE_SEPARATOR),d=n.errors.length,h=a<d?vt.OVERFLOW_TRUE:vt.OVERFLOW_FALSE,g=[d,h].join(vt.VALUE_SEPARATOR);return[vt.SCHEMA_VERSION,n.cacheHits,r,l,g].join(vt.CATEGORY_SEPARATOR)}cacheFailedRequest(n){const a=this.getLastRequests();a.errors.length>=vt.MAX_CACHED_ERRORS&&(a.failedRequests.shift(),a.failedRequests.shift(),a.errors.shift()),a.failedRequests.push(this.apiId,this.correlationId),n instanceof Error&&n&&n.toString()?n instanceof xe?n.subError?a.errors.push(n.subError):n.errorCode?a.errors.push(n.errorCode):a.errors.push(n.toString()):a.errors.push(n.toString()):a.errors.push(vt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}incrementCacheHits(){const n=this.getLastRequests();return n.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId),n.cacheHits}getLastRequests(){const n={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||n}clearTelemetryCache(){const n=this.getLastRequests(),a=Vr.maxErrorsToSend(n),r=n.errors.length;if(a===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const l={failedRequests:n.failedRequests.slice(a*2),errors:n.errors.slice(a),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,l,this.correlationId)}}static maxErrorsToSend(n){let a,r=0,l=0;const d=n.errors.length;for(a=0;a<d;a++){const h=n.failedRequests[2*a]||z.EMPTY_STRING,g=n.failedRequests[2*a+1]||z.EMPTY_STRING,m=n.errors[a]||z.EMPTY_STRING;if(l+=h.toString().length+g.toString().length+m.length+3,l<vt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const n=[];return n.push(this.regionUsed||z.EMPTY_STRING),n.push(this.regionSource||z.EMPTY_STRING),n.push(this.regionOutcome||z.EMPTY_STRING),n.join(",")}updateRegionDiscoveryMetadata(n){this.regionUsed=n.region_used,this.regionSource=n.region_source,this.regionOutcome=n.region_outcome}setCacheOutcome(n){this.cacheOutcome=n}setNativeBrokerErrorCode(n){const a=this.getLastRequests();a.nativeBrokerErrorCode=n,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const n=this.getLastRequests();delete n.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}static makeExtraSkuString(n){return N_(n)}}const uv="missing_kid_error",dv="missing_alg_error";const U_={[uv]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[dv]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Qh extends xe{constructor(n,a){super(n,a),this.name="JoseHeaderError",Object.setPrototypeOf(this,Qh.prototype)}}function My(u){return new Qh(u,U_[u])}class Vh{constructor(n){this.typ=n.typ,this.alg=n.alg,this.kid=n.kid}static getShrHeaderString(n){if(!n.kid)throw My(uv);if(!n.alg)throw My(dv);const a=new Vh({typ:n.typ||RA.Pop,kid:n.kid,alg:n.alg});return JSON.stringify(a)}}const Xh="pkce_not_created",Jh="ear_jwk_empty",hv="ear_jwe_empty",ah="crypto_nonexistent",Cc="empty_navigate_uri",fv="hash_empty_error",Zh="no_state_in_hash",gv="hash_does_not_contain_known_properties",mv="unable_to_parse_state",pv="state_interaction_type_mismatch",yv="interaction_in_progress",Cv="popup_window_error",vv="empty_window_error",Xr="user_cancelled",x_="monitor_popup_timeout",Tv="monitor_window_timeout",Sv="redirect_in_iframe",Av="block_iframe_reload",Ev="block_nested_popups",H_="iframe_closed_prematurely",vc="silent_logout_unsupported",_v="no_account_error",L_="silent_prompt_value_error",bv="no_token_request_cache_error",wv="unable_to_parse_token_request_cache_error",z_="auth_request_not_set_error",P_="invalid_cache_type",Tc="non_browser_environment",wo="database_not_open",tc="no_network_connectivity",Rv="post_request_failed",Iv="get_request_failed",oh="failed_to_parse_response",kv="unable_to_load_token",$h="crypto_key_not_found",Ov="auth_code_required",Mv="auth_code_or_nativeAccountId_required",Nv="spa_code_and_nativeAccountId_present",Wh="database_unavailable",Dv="unable_to_acquire_token_from_native_platform",Uv="native_handshake_timeout",xv="native_extension_not_installed",ef="native_connection_not_established",qr="uninitialized_public_client_application",Hv="native_prompt_not_supported",Lv="invalid_base64_string",zv="invalid_pop_token_request",Pv="failed_to_build_headers",Bv="failed_to_parse_headers",Hl="failed_to_decrypt_ear_response",nc="timed_out";const hi="For more visit: aka.ms/msaljs/browser-errors",B_={[Xh]:"The PKCE code challenge and verifier could not be generated.",[Jh]:"No EAR encryption key provided. This is unexpected.",[hv]:"Server response does not contain ear_jwe property. This is unexpected.",[ah]:"The crypto object or function is not available.",[Cc]:"Navigation URI is empty. Please check stack trace for more info.",[fv]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${hi}`,[Zh]:"Hash does not contain state. Please verify that the request originated from msal.",[gv]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${hi}`,[mv]:"Unable to parse state. Please verify that the request originated from msal.",[pv]:"Hash contains state but the interaction type does not match the caller.",[yv]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${hi}`,[Cv]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[vv]:"window.open returned null or undefined window object.",[Xr]:"User cancelled the flow.",[x_]:`Token acquisition in popup failed due to timeout.  ${hi}`,[Tv]:`Token acquisition in iframe failed due to timeout.  ${hi}`,[Sv]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Av]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${hi}`,[Ev]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[H_]:"The iframe being monitored was closed prematurely.",[vc]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[_v]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[L_]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[bv]:"No token request found in cache.",[wv]:"The cached token request could not be parsed.",[z_]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[P_]:"Invalid cache type",[Tc]:"Login and token requests are not supported in non-browser environments.",[wo]:"Database is not open!",[tc]:"No network connectivity. Check your internet connection.",[Rv]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Iv]:"Network request failed. Please check the network trace to determine root cause.",[oh]:"Failed to parse network response. Check network trace.",[kv]:"Error loading token to cache.",[$h]:"Cryptographic Key or Keypair not found in browser storage.",[Ov]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Mv]:"An authorization code or nativeAccountId must be provided to this flow.",[Nv]:"Request cannot contain both spa code and native account id.",[Wh]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Dv]:`Unable to acquire token from native platform.  ${hi}`,[Uv]:"Timed out while attempting to establish connection to browser extension",[xv]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[ef]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${hi}`,[qr]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${hi}`,[Hv]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Lv]:"Invalid base64 encoded string.",[zv]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Pv]:"Failed to build request headers object.",[Bv]:"Failed to parse response headers",[Hl]:"Failed to decrypt ear response",[nc]:"The request timed out."};class $r extends xe{constructor(n,a){super(n,B_[n],a),Object.setPrototypeOf(this,$r.prototype),this.name="BrowserAuthError"}}function q(u,n){return new $r(u,n)}const jt={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},pn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Pr={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},At={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Ny={GET:"GET",POST:"POST"},Zi={SIGNIN:"signin",SIGNOUT:"signout"},ot={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Dl={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ye={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962,hydrateCache:963,loadExternalTokens:964},Dy={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"},K_=u=>typeof u=="number"&&u in Dy?Dy[u]:"unknown";var te;(function(u){u.Redirect="redirect",u.Popup="popup",u.Silent="silent",u.None="none"})(te||(te={}));const Uy={scopes:Ho},Kv="jwk",rh="msal.db",G_=1,j_=`${rh}.keys`,Dt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},q_=[Dt.Default,Dt.Skip,Dt.RefreshTokenAndNetwork];function Ul(u){return encodeURIComponent(Jr(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function aa(u){return Gv(u).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jr(u){return Gv(new TextEncoder().encode(u))}function Gv(u){const n=Array.from(u,a=>String.fromCodePoint(a)).join("");return btoa(n)}function xt(u){return new TextDecoder().decode(na(u))}function na(u){let n=u.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw q(Lv)}const a=atob(n);return Uint8Array.from(a,r=>r.codePointAt(0)||0)}const Y_="RSASSA-PKCS1-v1_5",zo="AES-GCM",jv="HKDF",tf="SHA-256",F_=2048,Q_=new Uint8Array([1,0,1]),xy="0123456789abcdef",Hy=new Uint32Array(1),nf="raw",qv="encrypt",af="decrypt",V_="deriveKey",X_="crypto_subtle_undefined",of={name:Y_,hash:tf,modulusLength:F_,publicExponent:Q_};function J_(u){if(!window)throw q(Tc);if(!window.crypto)throw q(ah);if(!u&&!window.crypto.subtle)throw q(ah,X_)}async function Yv(u,n,a){n?.addQueueMeasurement(v.Sha256Digest,a);const l=new TextEncoder().encode(u);return window.crypto.subtle.digest(tf,l)}function Z_(u){return window.crypto.getRandomValues(u)}function qd(){return window.crypto.getRandomValues(Hy),Hy[0]}function On(){const u=Date.now(),n=qd()*1024+(qd()&1023),a=new Uint8Array(16),r=Math.trunc(n/2**30),l=n&2**30-1,d=qd();a[0]=u/2**40,a[1]=u/2**32,a[2]=u/2**24,a[3]=u/2**16,a[4]=u/2**8,a[5]=u,a[6]=112|r>>>8,a[7]=r,a[8]=128|l>>>24,a[9]=l>>>16,a[10]=l>>>8,a[11]=l,a[12]=d>>>24,a[13]=d>>>16,a[14]=d>>>8,a[15]=d;let h="";for(let g=0;g<a.length;g++)h+=xy.charAt(a[g]>>>4),h+=xy.charAt(a[g]&15),(g===3||g===5||g===7||g===9)&&(h+="-");return h}async function $_(u,n){return window.crypto.subtle.generateKey(of,u,n)}async function Yd(u){return window.crypto.subtle.exportKey(Kv,u)}async function W_(u,n,a){return window.crypto.subtle.importKey(Kv,u,of,n,a)}async function eb(u,n){return window.crypto.subtle.sign(of,u,n)}async function rf(){const u=await Fv(),a={alg:"dir",kty:"oct",k:aa(new Uint8Array(u))};return Jr(JSON.stringify(a))}async function tb(u){const n=xt(u),r=JSON.parse(n).k,l=na(r);return window.crypto.subtle.importKey(nf,l,zo,!1,[af])}async function nb(u,n){const a=n.split(".");if(a.length!==5)throw q(Hl,"jwe_length");const r=await tb(u).catch(()=>{throw q(Hl,"import_key")});try{const l=new TextEncoder().encode(a[0]),d=na(a[2]),h=na(a[3]),g=na(a[4]),m=g.byteLength*8,y=new Uint8Array(h.length+g.length);y.set(h),y.set(g,h.length);const T=await window.crypto.subtle.decrypt({name:zo,iv:d,tagLength:m,additionalData:l},r,y);return new TextDecoder().decode(T)}catch{throw q(Hl,"decrypt")}}async function Fv(){const u=await window.crypto.subtle.generateKey({name:zo,length:256},!0,[qv,af]);return window.crypto.subtle.exportKey(nf,u)}async function Ly(u){return window.crypto.subtle.importKey(nf,u,jv,!1,[V_])}async function Qv(u,n,a){return window.crypto.subtle.deriveKey({name:jv,salt:n,hash:tf,info:new TextEncoder().encode(a)},u,{name:zo,length:256},!1,[qv,af])}async function ib(u,n,a){const r=new TextEncoder().encode(n),l=window.crypto.getRandomValues(new Uint8Array(16)),d=await Qv(u,l,a),h=await window.crypto.subtle.encrypt({name:zo,iv:new Uint8Array(12)},d,r);return{data:aa(new Uint8Array(h)),nonce:aa(l)}}async function zy(u,n,a,r){const l=na(r),d=await Qv(u,na(n),a),h=await window.crypto.subtle.decrypt({name:zo,iv:new Uint8Array(12)},d,l);return new TextDecoder().decode(h)}async function Vv(u){const n=await Yv(u),a=new Uint8Array(n);return aa(a)}const Sc="storage_not_supported",Xv="stubbed_public_client_application_called",sf="in_mem_redirect_unavailable";const Ll={[Sc]:"Given storage configuration option was not supported.",[Xv]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[sf]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Ll[Sc],Ll[Xv],Ll[sf];class lf extends xe{constructor(n,a){super(n,a),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,lf.prototype)}}function cf(u){return new lf(u,Ll[u])}function Jv(u){u.location.hash="",typeof u.history.replaceState=="function"&&u.history.replaceState(null,"",`${u.location.origin}${u.location.pathname}${u.location.search}`)}function ab(u){const n=u.split("#");n.shift(),window.location.hash=n.length>0?n.join("#"):""}function uf(){return window.parent!==window}function ob(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${jt.POPUP_NAME_PREFIX}.`)===0}function gi(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function rb(){const n=new be(window.location.href).getUrlComponents();return`${n.Protocol}//${n.HostNameAndPort}/`}function sb(){if(be.hashContainsKnownProperties(window.location.hash)&&uf())throw q(Av)}function lb(u){if(uf()&&!u)throw q(Sv)}function cb(){if(ob())throw q(Ev)}function Zv(){if(typeof window>"u")throw q(Tc)}function $v(u){if(!u)throw q(qr)}function df(u){Zv(),sb(),cb(),$v(u)}function Py(u,n){if(df(u),lb(n.system.allowRedirectInIframe),n.cache.cacheLocation===At.MemoryStorage&&!n.cache.storeAuthStateInCookie)throw cf(sf)}function Wv(u){const n=document.createElement("link");n.rel="preconnect",n.href=new URL(u).origin,n.crossOrigin="anonymous",document.head.appendChild(n),window.setTimeout(()=>{try{document.head.removeChild(n)}catch{}},1e4)}function ub(){return On()}class ic{navigateInternal(n,a){return ic.defaultNavigateWindow(n,a)}navigateExternal(n,a){return ic.defaultNavigateWindow(n,a)}static defaultNavigateWindow(n,a){return a.noHistory?window.location.replace(n):window.location.assign(n),new Promise((r,l)=>{setTimeout(()=>{l(q(nc,"failed_to_redirect"))},a.timeout)})}}class db{async sendGetRequestAsync(n,a){let r,l={},d=0;const h=By(a);try{r=await fetch(n,{method:Ny.GET,headers:h})}catch(g){throw Kr(q(window.navigator.onLine?Iv:tc),void 0,void 0,g)}l=Ky(r.headers);try{return d=r.status,{headers:l,body:await r.json(),status:d}}catch(g){throw Kr(q(oh),d,l,g)}}async sendPostRequestAsync(n,a){const r=a&&a.body||"",l=By(a);let d,h=0,g={};try{d=await fetch(n,{method:Ny.POST,headers:l,body:r})}catch(m){throw Kr(q(window.navigator.onLine?Rv:tc),void 0,void 0,m)}g=Ky(d.headers);try{return h=d.status,{headers:g,body:await d.json(),status:h}}catch(m){throw Kr(q(oh),h,g,m)}}}function By(u){try{const n=new Headers;if(!(u&&u.headers))return n;const a=u.headers;return Object.entries(a).forEach(([r,l])=>{n.append(r,l)}),n}catch(n){throw Kr(q(Pv),void 0,void 0,n)}}function Ky(u){try{const n={};return u.forEach((a,r)=>{n[r]=a}),n}catch{throw q(Bv)}}const hb=6e4,sh=1e4,fb=3e4,eT=2e3;function gb({auth:u,cache:n,system:a,telemetry:r},l){const d={clientId:z.EMPTY_STRING,authority:`${z.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:z.EMPTY_STRING,authorityMetadata:z.EMPTY_STRING,redirectUri:typeof window<"u"?gi():"",postLogoutRedirectUri:z.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:qt.AAD,OIDCOptions:{serverResponseType:rc.FRAGMENT,defaultScopes:[z.OPENID_SCOPE,z.PROFILE_SCOPE,z.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Ah.None,tenant:z.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},h={cacheLocation:At.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:At.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(n&&n.cacheLocation===At.LocalStorage),claimsBasedCachingEnabled:!1},g={loggerCallback:()=>{},logLevel:Be.Info,piiLoggingEnabled:!1},y={...{...KC,loggerOptions:g,networkClient:l?new db:w_,navigationClient:new ic,loadFrameTimeout:0,windowHashTimeout:a?.loadFrameTimeout||hb,iframeHashTimeout:a?.loadFrameTimeout||sh,navigateFrameWait:0,redirectNavigationTimeout:fb,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,allowPlatformBrokerWithDOM:!1,nativeBrokerHandshakeTimeout:a?.nativeBrokerHandshakeTimeout||eT,pollIntervalMilliseconds:jt.DEFAULT_POLL_INTERVAL_MS},...a,loggerOptions:a?.loggerOptions||g},T={application:{appName:z.EMPTY_STRING,appVersion:z.EMPTY_STRING},client:new BC};if(u?.protocolMode!==qt.OIDC&&u?.OIDCOptions&&new ia(y.loggerOptions).warning(JSON.stringify(Ue(OC))),u?.protocolMode&&u.protocolMode===qt.OIDC&&y?.allowPlatformBroker)throw Ue(MC);return{auth:{...d,...u,OIDCOptions:{...d.OIDCOptions,...u?.OIDCOptions}},cache:{...h,...n},system:y,telemetry:{...T,...r}}}const mb="@azure/msal-browser",La="4.28.0";const Rt="msal",tT="browser",Gy="|",bt=2,zl=2,pb=`${Rt}.${tT}.log.level`,yb=`${Rt}.${tT}.log.pii`,jy=`${Rt}.version`,qy="account.keys",Yy="token.keys";function Mo(u=zl){return u<1?`${Rt}.${qy}`:`${Rt}.${u}.${qy}`}function No(u,n=bt){return n<1?`${Rt}.${Yy}.${u}`:`${Rt}.${n}.${Yy}.${u}`}class hf{static loggerCallback(n,a){switch(n){case Be.Error:console.error(a);return;case Be.Info:console.info(a);return;case Be.Verbose:console.debug(a);return;case Be.Warning:console.warn(a);return;default:console.log(a);return}}constructor(n){this.browserEnvironment=typeof window<"u",this.config=gb(n,this.browserEnvironment);let a;try{a=window[At.SessionStorage]}catch{}const r=a?.getItem(pb),l=a?.getItem(yb)?.toLowerCase(),d=l==="true"?!0:l==="false"?!1:void 0,h={...this.config.system.loggerOptions},g=r&&Object.keys(Be).includes(r)?Be[r]:void 0;g&&(h.loggerCallback=hf.loggerCallback,h.logLevel=g),d!==void 0&&(h.piiLoggingEnabled=d),this.logger=new ia(h,mb,La),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class za extends hf{getModuleName(){return za.MODULE_NAME}getId(){return za.ID}async initialize(){return this.available=typeof window<"u",this.available}}za.MODULE_NAME="";za.ID="StandardOperatingContext";class Cb{constructor(){this.dbName=rh,this.version=G_,this.tableName=j_,this.dbOpen=!1}async open(){return new Promise((n,a)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",l=>{l.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",l=>{const d=l;this.db=d.target.result,this.dbOpen=!0,n()}),r.addEventListener("error",()=>a(q(Wh)))})}closeConnection(){const n=this.db;n&&this.dbOpen&&(n.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(q(wo));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(n);h.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result)}),h.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async setItem(n,a){return await this.validateDbIsOpen(),new Promise((r,l)=>{if(!this.db)return l(q(wo));const g=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(a,n);g.addEventListener("success",()=>{this.closeConnection(),r()}),g.addEventListener("error",m=>{this.closeConnection(),l(m)})})}async removeItem(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(q(wo));const h=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(n);h.addEventListener("success",()=>{this.closeConnection(),a()}),h.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(q(wo));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();d.addEventListener("success",h=>{const g=h;this.closeConnection(),n(g.target.result)}),d.addEventListener("error",h=>{this.closeConnection(),a(h)})})}async containsKey(n){return await this.validateDbIsOpen(),new Promise((a,r)=>{if(!this.db)return r(q(wo));const h=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(n);h.addEventListener("success",g=>{const m=g;this.closeConnection(),a(m.target.result===1)}),h.addEventListener("error",g=>{this.closeConnection(),r(g)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((n,a)=>{const r=window.indexedDB.deleteDatabase(rh),l=setTimeout(()=>a(!1),200);r.addEventListener("success",()=>(clearTimeout(l),n(!0))),r.addEventListener("blocked",()=>(clearTimeout(l),n(!0))),r.addEventListener("error",()=>(clearTimeout(l),a(!1)))})}}class Ac{constructor(){this.cache=new Map}async initialize(){}getItem(n){return this.cache.get(n)||null}getUserData(n){return this.getItem(n)}setItem(n,a){this.cache.set(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){this.cache.delete(n)}getKeys(){const n=[];return this.cache.forEach((a,r)=>{n.push(r)}),n}containsKey(n){return this.cache.has(n)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class vb{constructor(n){this.inMemoryCache=new Ac,this.indexedDBCache=new Cb,this.logger=n}handleDatabaseAccessError(n){if(n instanceof $r&&n.errorCode===Wh)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw n}async getItem(n){const a=this.inMemoryCache.getItem(n);if(!a)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(n)}catch(r){this.handleDatabaseAccessError(r)}return a}async setItem(n,a){this.inMemoryCache.setItem(n,a);try{await this.indexedDBCache.setItem(n,a)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(n){this.inMemoryCache.removeItem(n);try{await this.indexedDBCache.removeItem(n)}catch(a){this.handleDatabaseAccessError(a)}}async getKeys(){const n=this.inMemoryCache.getKeys();if(n.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(a){this.handleDatabaseAccessError(a)}return n}async containsKey(n){const a=this.inMemoryCache.containsKey(n);if(!a)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(n)}catch(r){this.handleDatabaseAccessError(r)}return a}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const n=await this.indexedDBCache.deleteDatabase();return n&&this.logger.verbose("Persistent keystore deleted"),n}catch(n){return this.handleDatabaseAccessError(n),!1}}}class mi{constructor(n,a,r){this.logger=n,J_(r??!1),this.cache=new vb(this.logger),this.performanceClient=a}createNewGuid(){return On()}base64Encode(n){return Jr(n)}base64Decode(n){return xt(n)}base64UrlEncode(n){return Ul(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}async getPublicKeyThumbprint(n){const a=this.performanceClient?.startMeasurement(v.CryptoOptsGetPublicKeyThumbprint,n.correlationId),r=await $_(mi.EXTRACTABLE,mi.POP_KEY_USAGES),l=await Yd(r.publicKey),d={e:l.e,kty:l.kty,n:l.n},h=Fy(d),g=await this.hashString(h),m=await Yd(r.privateKey),y=await W_(m,!1,["sign"]);return await this.cache.setItem(g,{privateKey:y,publicKey:r.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri}),a&&a.end({success:!0}),g}async removeTokenBindingKey(n){if(await this.cache.removeItem(n),await this.cache.containsKey(n))throw B(CC)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(n){return n instanceof Error?this.logger.error(`Clearing keystore failed with error: ${n.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(n,a,r,l){const d=this.performanceClient?.startMeasurement(v.CryptoOptsSignJwt,l),h=await this.cache.getItem(a);if(!h)throw q($h);const g=await Yd(h.publicKey),m=Fy(g),y=Ul(JSON.stringify({kid:a})),T=Vh.getShrHeaderString({...r?.header,alg:g.alg,kid:y}),_=Ul(T);n.cnf={jwk:JSON.parse(m)};const O=Ul(JSON.stringify(n)),P=`${_}.${O}`,V=new TextEncoder().encode(P),Ce=await eb(h.privateKey,V),ve=aa(new Uint8Array(Ce)),de=`${P}.${ve}`;return d&&d.end({success:!0}),de}async hashString(n){return Vv(n)}}mi.POP_KEY_USAGES=["sign","verify"];mi.EXTRACTABLE=!0;function Fy(u){return JSON.stringify(u,Object.keys(u).sort())}const Tb=1440*60*1e3,lh={Lax:"Lax",None:"None"};class nT{initialize(){return Promise.resolve()}getItem(n){const a=`${encodeURIComponent(n)}`,r=document.cookie.split(";");for(let l=0;l<r.length;l++){const d=r[l],[h,...g]=decodeURIComponent(d).trim().split("="),m=g.join("=");if(h===a)return m}return""}getUserData(){throw B(ue)}setItem(n,a,r,l=!0,d=lh.Lax){let h=`${encodeURIComponent(n)}=${encodeURIComponent(a)};path=/;SameSite=${d};`;if(r){const g=Sb(r);h+=`expires=${g};`}(l||d===lh.None)&&(h+="Secure;"),document.cookie=h}async setUserData(){return Promise.reject(B(ue))}removeItem(n){this.setItem(n,"",-1)}getKeys(){const n=document.cookie.split(";"),a=[];return n.forEach(r=>{const l=decodeURIComponent(r).trim().split("=");a.push(l[0])}),a}containsKey(n){return this.getKeys().includes(n)}decryptData(){return Promise.resolve(null)}}function Sb(u){const n=new Date;return new Date(n.getTime()+u*Tb).toUTCString()}function Ji(u,n){const a=u.getItem(Mo(n));return a?JSON.parse(a):[]}function Rn(u,n,a){const r=n.getItem(No(u,a));if(r){const l=JSON.parse(r);if(l&&l.hasOwnProperty("idToken")&&l.hasOwnProperty("accessToken")&&l.hasOwnProperty("refreshToken"))return l}return{idToken:[],accessToken:[],refreshToken:[]}}function Pl(u){return u.hasOwnProperty("id")&&u.hasOwnProperty("nonce")&&u.hasOwnProperty("data")}const Qy="msal.cache.encryption",Ab="msal.broadcast.cache";class Eb{constructor(n,a,r){if(!window.localStorage)throw cf(Sc);this.memoryStorage=new Ac,this.initialized=!1,this.clientId=n,this.logger=a,this.performanceClient=r,this.broadcast=new BroadcastChannel(Ab)}async initialize(n){const a=new nT,r=a.getItem(Qy);let l={key:"",id:""};if(r)try{l=JSON.parse(r)}catch{}if(l.key&&l.id){const d=nn(na,v.Base64Decode,this.logger,this.performanceClient,n)(l.key);this.encryptionCookie={id:l.id,key:await M(Ly,v.GenerateHKDF,this.logger,this.performanceClient,n)(d)}}else{const d=On(),h=await M(Fv,v.GenerateBaseKey,this.logger,this.performanceClient,n)(),g=nn(aa,v.UrlEncodeArr,this.logger,this.performanceClient,n)(new Uint8Array(h));this.encryptionCookie={id:d,key:await M(Ly,v.GenerateHKDF,this.logger,this.performanceClient,n)(h)};const m={id:d,key:g};a.setItem(Qy,JSON.stringify(m),0,!0,lh.None)}await M(this.importExistingCache.bind(this),v.ImportExistingCache,this.logger,this.performanceClient,n)(n),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(n){return window.localStorage.getItem(n)}getUserData(n){if(!this.initialized)throw q(qr);return this.memoryStorage.getItem(n)}async decryptData(n,a,r){if(!this.initialized||!this.encryptionCookie)throw q(qr);if(a.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const l=await M(zy,v.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a.nonce,this.getContext(n),a.data);if(!l)return null;try{return{...JSON.parse(l),lastUpdatedAt:a.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(n,a){window.localStorage.setItem(n,a)}async setUserData(n,a,r,l,d){if(!this.initialized||!this.encryptionCookie)throw q(qr);if(d)this.setItem(n,a);else{const{data:h,nonce:g}=await M(ib,v.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a,this.getContext(n)),m={id:this.encryptionCookie.id,nonce:g,data:h,lastUpdatedAt:l};this.setItem(n,JSON.stringify(m))}this.memoryStorage.setItem(n,a),this.broadcast.postMessage({key:n,value:a,context:this.getContext(n)})}removeItem(n){this.memoryStorage.containsKey(n)&&(this.memoryStorage.removeItem(n),this.broadcast.postMessage({key:n,value:null,context:this.getContext(n)})),window.localStorage.removeItem(n)}getKeys(){return Object.keys(window.localStorage)}containsKey(n){return window.localStorage.hasOwnProperty(n)}clear(){this.memoryStorage.clear(),Ji(this).forEach(r=>this.removeItem(r));const a=Rn(this.clientId,this);a.idToken.forEach(r=>this.removeItem(r)),a.accessToken.forEach(r=>this.removeItem(r)),a.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Rt)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(n){if(!this.encryptionCookie)return;let a=Ji(this);a=await this.importArray(a,n),a.length?this.setItem(Mo(),JSON.stringify(a)):this.removeItem(Mo());const r=Rn(this.clientId,this);r.idToken=await this.importArray(r.idToken,n),r.accessToken=await this.importArray(r.accessToken,n),r.refreshToken=await this.importArray(r.refreshToken,n),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(No(this.clientId),JSON.stringify(r)):this.removeItem(No(this.clientId))}async getItemFromEncryptedCache(n,a){if(!this.encryptionCookie)return null;const r=this.getItem(n);if(!r)return null;let l;try{l=JSON.parse(r)}catch{return null}return Pl(l)?l.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},a),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},a),M(zy,v.Decrypt,this.logger,this.performanceClient,a)(this.encryptionCookie.key,l.nonce,this.getContext(n),l.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},a),r)}async importArray(n,a){const r=[],l=[];return n.forEach(d=>{const h=this.getItemFromEncryptedCache(d,a).then(g=>{g?(this.memoryStorage.setItem(d,g),r.push(d)):this.removeItem(d)});l.push(h)}),await Promise.all(l),r}getContext(n){let a="";return n.includes(this.clientId)&&(a=this.clientId),a}updateCache(n){this.logger.trace("Updating internal cache from broadcast event");const a=this.performanceClient.startMeasurement(v.LocalStorageUpdated);a.add({isBackground:!0});const{key:r,value:l,context:d}=n.data;if(!r){this.logger.error("Broadcast event missing key"),a.end({success:!1,errorCode:"noKey"});return}if(d&&d!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${d}`),a.end({success:!1,errorCode:"contextMismatch"});return}l?(this.memoryStorage.setItem(r,l),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),a.end({success:!0})}}class _b{constructor(){if(!window.sessionStorage)throw cf(Sc)}async initialize(){}getItem(n){return window.sessionStorage.getItem(n)}getUserData(n){return this.getItem(n)}setItem(n,a){window.sessionStorage.setItem(n,a)}async setUserData(n,a){this.setItem(n,a)}removeItem(n){window.sessionStorage.removeItem(n)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(n){return window.sessionStorage.hasOwnProperty(n)}decryptData(){return Promise.resolve(null)}}const Z={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function Xi(u,n){const a=u.indexOf(n);a>-1&&u.splice(a,1)}class ch extends nh{constructor(n,a,r,l,d,h,g){super(n,r,l,d,g),this.cacheConfig=a,this.logger=l,this.internalStorage=new Ac,this.browserStorage=Vy(n,a.cacheLocation,l,d),this.temporaryCacheStorage=Vy(n,a.temporaryCacheLocation,l,d),this.cookieStorage=new nT,this.eventHandler=h}async initialize(n){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},n),await this.browserStorage.initialize(n),await this.migrateExistingCache(n),this.trackVersionChanges(n)}async migrateExistingCache(n){let a=Ji(this.browserStorage),r=Rn(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:a.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},n);for(let d=0;d<zl;d++){const h=d;await this.removeStaleAccounts(d,h,n)}for(let d=0;d<bt;d++){const h=d;await this.migrateIdTokens(d,h,n)}const l=this.getKMSIValues();for(let d=0;d<bt;d++)await this.migrateAccessTokens(d,l,n),await this.migrateRefreshTokens(d,l,n);a=Ji(this.browserStorage),r=Rn(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:a.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},n)}async updateOldEntry(n,a){const r=this.browserStorage.getItem(n),l=this.validateAndParseJson(r||"");if(!l)return this.browserStorage.removeItem(n),null;if(!l.lastUpdatedAt)l.lastUpdatedAt=Date.now().toString(),this.setItem(n,JSON.stringify(l),a);else if(_y(l.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null;const d=Pl(l)?await this.browserStorage.decryptData(n,l,a):l;return!d||!gc(d)?(this.performanceClient.incrementFields({invalidCacheCount:1},a),null):(by(d)||wy(d))&&d.expiresOn&&$l(d.expiresOn,nC)?(this.browserStorage.removeItem(n),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a),null):d}async removeStaleAccounts(n,a,r){const l=Ji(this.browserStorage,n);if(l.length!==0){for(const d of[...l]){this.performanceClient.incrementFields({oldAcntCount:1},r);const h=this.browserStorage.getItem(d),g=this.validateAndParseJson(h||"");if(!g){Xi(l,d);continue}if(g.lastUpdatedAt)_y(g.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(d,g,a,r),Xi(l,d));else{g.lastUpdatedAt=Date.now().toString(),this.setItem(d,JSON.stringify(g),r);continue}}this.setAccountKeys(l,r,n)}}async removeAccountOldSchema(n,a,r,l){const h=(Pl(a)?await this.browserStorage.decryptData(n,a,l):a)?.homeAccountId;if(h){const g=this.getTokenKeys(r);[...g.idToken].filter(m=>m.includes(h)).forEach(m=>{this.browserStorage.removeItem(m),Xi(g.idToken,m)}),[...g.accessToken].filter(m=>m.includes(h)).forEach(m=>{this.browserStorage.removeItem(m),Xi(g.accessToken,m)}),[...g.refreshToken].filter(m=>m.includes(h)).forEach(m=>{this.browserStorage.removeItem(m),Xi(g.refreshToken,m)}),this.setTokenKeys(g,l,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},l),this.browserStorage.removeItem(n)}getKMSIValues(){const n={},a=this.getTokenKeys().idToken;for(const r of a){const l=this.browserStorage.getUserData(r);if(l){const d=JSON.parse(l),h=Kn(d.secret,xt);h&&(n[d.homeAccountId]=Gn(h))}}return n}async migrateIdTokens(n,a,r){const l=Rn(this.clientId,this.browserStorage,n);if(l.idToken.length===0)return;const d=Rn(this.clientId,this.browserStorage,bt),h=Ji(this.browserStorage),g=Ji(this.browserStorage,a);for(const m of[...l.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const y=await this.updateOldEntry(m,r);if(!y){Xi(l.idToken,m);continue}const T=h.find(de=>de.includes(y.homeAccountId)),_=g.find(de=>de.includes(y.homeAccountId));let O=null;if(T)O=this.getAccount(T,r);else if(_){const de=this.browserStorage.getItem(_),Te=this.validateAndParseJson(de||"");O=Te&&Pl(Te)?await this.browserStorage.decryptData(_,Te,r):Te}if(!O){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const P=Kn(y.secret,xt),J=this.generateCredentialKey(y),V=this.getIdTokenCredential(J,r),Ce=Object.keys(P).includes("signin_state"),ve=V&&Object.keys(Kn(V.secret,xt)||{}).includes("signin_state");if(!V||y.lastUpdatedAt>V.lastUpdatedAt&&(Ce||!ve)){const de=O.tenantProfiles||[],Te=Ih(P)||O.realm;if(Te&&!de.find(Je=>Je.tenantId===Te)){const Je=lc(O.homeAccountId,O.localAccountId,Te,P);de.push(Je)}O.tenantProfiles=de;const Ke=this.generateAccountKey(Fe.getAccountInfo(O)),Qe=Gn(P);await this.setUserData(Ke,JSON.stringify(O),r,O.lastUpdatedAt,Qe),h.includes(Ke)||h.push(Ke),await this.setUserData(J,JSON.stringify(y),r,y.lastUpdatedAt,Qe),this.performanceClient.incrementFields({migratedITCount:1},r),d.idToken.push(J)}}this.setTokenKeys(l,r,n),this.setTokenKeys(d,r),this.setAccountKeys(h,r)}async migrateAccessTokens(n,a,r){const l=Rn(this.clientId,this.browserStorage,n);if(l.accessToken.length===0)return;const d=Rn(this.clientId,this.browserStorage,bt);for(const h of[...l.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const g=await this.updateOldEntry(h,r);if(!g){Xi(l.accessToken,h);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!d.accessToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r),d.accessToken.push(m);else{const T=this.getAccessTokenCredential(m,r);(!T||g.lastUpdatedAt>T.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(l,r,n),this.setTokenKeys(d,r)}async migrateRefreshTokens(n,a,r){const l=Rn(this.clientId,this.browserStorage,n);if(l.refreshToken.length===0)return;const d=Rn(this.clientId,this.browserStorage,bt);for(const h of[...l.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const g=await this.updateOldEntry(h,r);if(!g){Xi(l.refreshToken,h);continue}if(!Object.keys(a).includes(g.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const m=this.generateCredentialKey(g),y=a[g.homeAccountId];if(!d.refreshToken.includes(m))await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r),d.refreshToken.push(m);else{const T=this.getRefreshTokenCredential(m,r);(!T||g.lastUpdatedAt>T.lastUpdatedAt)&&(await this.setUserData(m,JSON.stringify(g),r,g.lastUpdatedAt,y),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(l,r,n),this.setTokenKeys(d,r)}trackVersionChanges(n){const a=this.browserStorage.getItem(jy);a&&(this.logger.info(`MSAL.js was last initialized by version: ${a}`),this.performanceClient.addFields({previousLibraryVersion:a},n)),a!==La&&this.setItem(jy,La,n)}validateAndParseJson(n){if(!n)return null;try{const a=JSON.parse(n);return a&&typeof a=="object"?a:null}catch{return null}}setItem(n,a,r){const l=new Array(bt+1).fill(0),d=[],h=20;for(let g=0;g<=h;g++)try{if(this.browserStorage.setItem(n,a),g>0)for(let m=0;m<=bt;m++){const y=l.slice(0,m).reduce((_,O)=>_+O,0);if(y>=g)break;const T=g>y+l[m]?y+l[m]:g;g>y&&l[m]>0&&this.removeAccessTokenKeys(d.slice(y,T),r,m)}break}catch(m){const y=th(m);if(y.errorCode===Vl&&g<h){if(!d.length)for(let T=0;T<=bt;T++)if(n===No(this.clientId,T)){const _=JSON.parse(a).accessToken;d.push(..._),l[T]=_.length}else{const _=this.getTokenKeys(T).accessToken;d.push(..._),l[T]=_.length}if(d.length<=g)throw y;this.removeAccessToken(d[g],r,!1)}else throw y}}async setUserData(n,a,r,l,d){const h=new Array(bt+1).fill(0),g=[],m=20;for(let y=0;y<=m;y++)try{if(await M(this.browserStorage.setUserData.bind(this.browserStorage),v.SetUserData,this.logger,this.performanceClient)(n,a,r,l,d),y>0)for(let T=0;T<=bt;T++){const _=h.slice(0,T).reduce((P,J)=>P+J,0);if(_>=y)break;const O=y>_+h[T]?_+h[T]:y;y>_&&h[T]>0&&this.removeAccessTokenKeys(g.slice(_,O),r,T)}break}catch(T){const _=th(T);if(_.errorCode===Vl&&y<m){if(!g.length)for(let O=0;O<=bt;O++){const P=this.getTokenKeys(O).accessToken;g.push(...P),h[O]=P.length}if(g.length<=y)throw _;this.removeAccessToken(g[y],r,!1)}else throw _}}getAccount(n,a){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(n);if(!r)return this.removeAccountKeyFromMap(n,a),null;const l=this.validateAndParseJson(r);return!l||!Fe.isAccountEntity(l)?null:(this.performanceClient.addFields({accountCachedBy:K_(l.cachedByApiId)},a),nh.toObject(new Fe,l))}async setAccount(n,a,r,l){this.logger.trace("BrowserCacheManager.setAccount called");const d=this.generateAccountKey(Fe.getAccountInfo(n)),h=Date.now().toString();n.lastUpdatedAt=h,n.cachedByApiId=l,await this.setUserData(d,JSON.stringify(n),a,h,r);const g=this.addAccountKeyToMap(d,a);this.performanceClient.addFields({kmsi:r},a),this.cacheConfig.cacheLocation===At.LocalStorage&&g&&this.eventHandler.emitEvent(Z.ACCOUNT_ADDED,void 0,Fe.getAccountInfo(n))}getAccountKeys(){return Ji(this.browserStorage)}setAccountKeys(n,a,r=zl){n.length===0?this.removeItem(Mo(r)):this.setItem(Mo(r),JSON.stringify(n),a)}addAccountKeyToMap(n,a){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${n}`);const r=this.getAccountKeys();return r.indexOf(n)===-1?(r.push(n),this.setItem(Mo(),JSON.stringify(r),a),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(n,a){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${n}`);const r=this.getAccountKeys(),l=r.indexOf(n);l>-1?(r.splice(l,1),this.setAccountKeys(r,a),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(n,a){const r=this.getActiveAccount(a);r?.homeAccountId===n.homeAccountId&&r?.environment===n.environment&&this.setActiveAccount(null,a),super.removeAccount(n,a),this.removeAccountKeyFromMap(this.generateAccountKey(n),a),this.browserStorage.getKeys().forEach(l=>{l.includes(n.homeAccountId)&&l.includes(n.environment)&&this.browserStorage.removeItem(l)}),this.cacheConfig.cacheLocation===At.LocalStorage&&this.eventHandler.emitEvent(Z.ACCOUNT_REMOVED,void 0,n)}removeIdToken(n,a){super.removeIdToken(n,a);const r=this.getTokenKeys(),l=r.idToken.indexOf(n);l>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(l,1),this.setTokenKeys(r,a))}removeAccessToken(n,a,r=!0){super.removeAccessToken(n,a),r&&this.removeAccessTokenKeys([n],a)}removeAccessTokenKeys(n,a,r=bt){this.logger.trace("removeAccessTokenKey called");const l=this.getTokenKeys(r);let d=0;if(n.forEach(h=>{const g=l.accessToken.indexOf(h);g>-1&&(l.accessToken.splice(g,1),d++)}),d>0){this.logger.info(`removed ${d} accessToken keys from tokenKeys map`),this.setTokenKeys(l,a,r);return}}removeRefreshToken(n,a){super.removeRefreshToken(n,a);const r=this.getTokenKeys(),l=r.refreshToken.indexOf(n);l>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(l,1),this.setTokenKeys(r,a))}getTokenKeys(n=bt){return Rn(this.clientId,this.browserStorage,n)}setTokenKeys(n,a,r=bt){if(n.idToken.length===0&&n.accessToken.length===0&&n.refreshToken.length===0){this.removeItem(No(this.clientId,r));return}else this.setItem(No(this.clientId,r),JSON.stringify(n),a)}getIdTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(n,a),null;const l=this.validateAndParseJson(r);return!l||!l_(l)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),l)}async setIdTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const l=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(l,JSON.stringify(n),a,d,r);const h=this.getTokenKeys();h.idToken.indexOf(l)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),h.idToken.push(l),this.setTokenKeys(h,a))}getAccessTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([n],a),null;const l=this.validateAndParseJson(r);return!l||!by(l)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),l)}async setAccessTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const l=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(l,JSON.stringify(n),a,d,r);const h=this.getTokenKeys(),g=h.accessToken.indexOf(l);g!==-1&&h.accessToken.splice(g,1),this.logger.trace(`access token ${g===-1?"added to":"updated in"} map`),h.accessToken.push(l),this.setTokenKeys(h,a)}getRefreshTokenCredential(n,a){const r=this.browserStorage.getUserData(n);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(n,a),null;const l=this.validateAndParseJson(r);return!l||!wy(l)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),l)}async setRefreshTokenCredential(n,a,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const l=this.generateCredentialKey(n),d=Date.now().toString();n.lastUpdatedAt=d,await this.setUserData(l,JSON.stringify(n),a,d,r);const h=this.getTokenKeys();h.refreshToken.indexOf(l)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),h.refreshToken.push(l),this.setTokenKeys(h,a))}getAppMetadata(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!h_(n,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(n,a){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=d_(n);this.setItem(r,JSON.stringify(n),a)}getServerTelemetry(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!c_(n,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(n,a,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(n,JSON.stringify(a),r)}getAuthorityMetadata(n){const a=this.internalStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(a);return r&&f_(n,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(a=>this.isAuthorityMetadata(a))}setWrapperMetadata(n,a){this.internalStorage.setItem(Dl.WRAPPER_SKU,n),this.internalStorage.setItem(Dl.WRAPPER_VER,a)}getWrapperMetadata(){const n=this.internalStorage.getItem(Dl.WRAPPER_SKU)||z.EMPTY_STRING,a=this.internalStorage.getItem(Dl.WRAPPER_VER)||z.EMPTY_STRING;return[n,a]}setAuthorityMetadata(n,a){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(n,JSON.stringify(a))}getActiveAccount(n){const a=this.generateCacheKey(dy.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(a);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const l=this.validateAndParseJson(r);return l?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:l.homeAccountId,localAccountId:l.localAccountId,tenantId:l.tenantId},n)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(n,a){const r=this.generateCacheKey(dy.ACTIVE_ACCOUNT_FILTERS);if(n){this.logger.verbose("setActiveAccount: Active account set");const l={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId,lastUpdatedAt:Yt().toString()};this.setItem(r,JSON.stringify(l),a)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Z.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(n){const a=this.browserStorage.getItem(n);if(!a)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(a);return!r||!u_(n,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(n,a,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(n,JSON.stringify(a),r)}getTemporaryCache(n,a){const r=a?this.generateCacheKey(n):n;if(this.cacheConfig.storeAuthStateInCookie){const d=this.cookieStorage.getItem(r);if(d)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),d}const l=this.temporaryCacheStorage.getItem(r);if(!l){if(this.cacheConfig.cacheLocation===At.LocalStorage){const d=this.browserStorage.getItem(r);if(d)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),d}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),l}setTemporaryCache(n,a,r){const l=r?this.generateCacheKey(n):n;this.temporaryCacheStorage.setItem(l,a),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(l,a,void 0,this.cacheConfig.secureCookies))}removeItem(n){this.browserStorage.removeItem(n)}removeTemporaryItem(n){this.temporaryCacheStorage.removeItem(n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(n))}getKeys(){return this.browserStorage.getKeys()}clear(n){this.removeAllAccounts(n),this.removeAppMetadata(n),this.temporaryCacheStorage.getKeys().forEach(a=>{(a.indexOf(Rt)!==-1||a.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(a)}),this.browserStorage.getKeys().forEach(a=>{(a.indexOf(Rt)!==-1||a.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(a)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(n){this.performanceClient.addQueueMeasurement(v.ClearTokensAndKeysWithClaims,n);const a=this.getTokenKeys();let r=0;a.accessToken.forEach(l=>{const d=this.getAccessTokenCredential(l,n);d?.requestedClaimsHash&&l.includes(d.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(l,n),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(n){return tn.startsWith(n,Rt)?n:`${Rt}.${this.clientId}.${n}`}generateCredentialKey(n){const a=n.credentialType===Tt.REFRESH_TOKEN&&n.familyId||n.clientId,r=n.tokenType&&n.tokenType.toLowerCase()!==Oe.BEARER.toLowerCase()?n.tokenType.toLowerCase():"";return[`${Rt}.${bt}`,n.homeAccountId,n.environment,n.credentialType,a,n.realm||"",n.target||"",n.requestedClaimsHash||"",r].join(Gy).toLowerCase()}generateAccountKey(n){const a=n.homeAccountId.split(".")[1];return[`${Rt}.${zl}`,n.homeAccountId,n.environment,a||n.tenantId||""].join(Gy).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(ot.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(ot.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(ot.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(ot.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(ot.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(n,a){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Jr(JSON.stringify(n));if(this.setTemporaryCache(ot.REQUEST_PARAMS,r,!0),a){const l=Jr(a);this.setTemporaryCache(ot.VERIFIER,l,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(ot.REQUEST_PARAMS,!0);if(!n)throw q(bv);const a=this.getTemporaryCache(ot.VERIFIER,!0);let r,l="";try{r=JSON.parse(xt(n)),a&&(l=xt(a))}catch(d){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${d}`),q(wv)}return[r,l]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const n=this.getTemporaryCache(ot.NATIVE_REQUEST,!0);if(!n)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const a=this.validateAndParseJson(n);return a||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(n){const a=this.getInteractionInProgress()?.clientId;return n?a===this.clientId:!!a}getInteractionInProgress(){const n=`${Rt}.${ot.INTERACTION_STATUS_KEY}`,a=this.getTemporaryCache(n,!1);try{return a?JSON.parse(a):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(n),this.resetRequestCache(),Jv(window),null}}setInteractionInProgress(n,a=Zi.SIGNIN){const r=`${Rt}.${ot.INTERACTION_STATUS_KEY}`;if(n){if(this.getInteractionInProgress())throw q(yv);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:a}),!1)}else!n&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(n,a){const r=hc(n.account?.homeAccountId,n.account?.environment,n.idToken,this.clientId,n.tenantId);let l;a.claims&&(l=await this.cryptoImpl.hashString(a.claims));const d=fc(n.account?.homeAccountId,n.account.environment,n.accessToken,this.clientId,n.tenantId,n.scopes.join(" "),n.expiresOn?Ey(n.expiresOn):0,n.extExpiresOn?Ey(n.extExpiresOn):0,xt,void 0,n.tokenType,void 0,a.sshKid,a.claims,l),h={idToken:r,accessToken:d};return this.saveCacheRecord(h,n.correlationId,Gn(Kn(n.idToken,xt)),ye.hydrateCache)}async saveCacheRecord(n,a,r,l,d){try{await super.saveCacheRecord(n,a,r,l,d)}catch(h){if(h instanceof ko&&this.performanceClient&&a)try{const g=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:g.refreshToken.length,cacheIdCount:g.idToken.length,cacheAtCount:g.accessToken.length},a)}catch{}throw h}}}function Vy(u,n,a,r){try{switch(n){case At.LocalStorage:return new Eb(u,a,r);case At.SessionStorage:return new _b;case At.MemoryStorage:default:break}}catch(l){a.error(l)}return new Ac}const bb=(u,n,a,r)=>{const l={cacheLocation:At.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:At.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new ch(u,l,ql,n,a,r)};function wb(u,n,a,r,l){return u.verbose("getAllAccounts called"),a?n.getAllAccounts(l||{},r):[]}function Rb(u,n,a,r){const l=a.getAccountInfoFilteredBy(u,r);return l?(n.verbose("getAccount: Account matching provided filter found, returning"),l):(n.verbose("getAccount: No matching account found, returning null"),null)}function Ib(u,n,a,r){if(n.trace("getAccountByUsername called"),!u)return n.warning("getAccountByUsername: No username provided"),null;const l=a.getAccountInfoFilteredBy({username:u},r);return l?(n.verbose("getAccountByUsername: Account matching username found, returning"),n.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${u}`),l):(n.verbose("getAccountByUsername: No matching account found, returning null"),null)}function kb(u,n,a,r){if(n.trace("getAccountByHomeId called"),!u)return n.warning("getAccountByHomeId: No homeAccountId provided"),null;const l=a.getAccountInfoFilteredBy({homeAccountId:u},r);return l?(n.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),n.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${u}`),l):(n.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function Ob(u,n,a,r){if(n.trace("getAccountByLocalId called"),!u)return n.warning("getAccountByLocalId: No localAccountId provided"),null;const l=a.getAccountInfoFilteredBy({localAccountId:u},r);return l?(n.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),n.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${u}`),l):(n.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Mb(u,n,a){n.setActiveAccount(u,a)}function Nb(u,n){return u.getActiveAccount(n)}const Db="msal.broadcast.event";class Ub{constructor(n){this.eventCallbacks=new Map,this.logger=n||new ia({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Db)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(n,a,r){if(typeof window<"u"){const l=r||ub();return this.eventCallbacks.has(l)?(this.logger.error(`Event callback with id: ${l} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(l,[n,a||[]]),this.logger.verbose(`Event callback registered with id: ${l}`),l)}return null}removeEventCallback(n){this.eventCallbacks.delete(n),this.logger.verbose(`Event callback ${n} removed.`)}emitEvent(n,a,r,l){const d={eventType:n,interactionType:a||null,payload:r||null,error:l||null,timestamp:Date.now()};switch(n){case Z.ACCOUNT_ADDED:case Z.ACCOUNT_REMOVED:case Z.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(d);break;default:this.invokeCallbacks(d);break}}invokeCallbacks(n){this.eventCallbacks.forEach(([a,r],l)=>{(r.length===0||r.includes(n.eventType))&&(this.logger.verbose(`Emitting event to callback ${l}: ${n.eventType}`),a.apply(null,[n]))})}invokeCrossTabCallbacks(n){const a=n.data;this.invokeCallbacks(a)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class iT{constructor(n,a,r,l,d,h,g,m,y){this.config=n,this.browserStorage=a,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=d,this.navigationClient=h,this.platformAuthProvider=m,this.correlationId=y||On(),this.logger=l.clone(jt.MSAL_SKU,La,this.correlationId),this.performanceClient=g}async clearCacheOnLogout(n,a){if(a)try{this.browserStorage.removeAccount(a,n),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(n),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(n){this.logger.verbose("getRedirectUri called");const a=n||this.config.auth.redirectUri;return be.getAbsoluteUrl(a,gi())}initializeServerTelemetryManager(n,a){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:n,forceRefresh:a||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Vr(r,this.browserStorage)}async getDiscoveredAuthority(n){const{account:a}=n,r=n.requestExtraQueryParameters&&n.requestExtraQueryParameters.hasOwnProperty("instance_aware")?n.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(v.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const l={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},d=n.requestAuthority||this.config.auth.authority,h=r?.length?r==="true":this.config.auth.instanceAware,g=a&&h?this.config.auth.authority.replace(be.getDomainFromUrl(d),a.environment):d,m=wt.generateAuthority(g,n.requestAzureCloudOptions||this.config.auth.azureCloudOptions),y=await M(iv,v.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(m,this.config.system.networkClient,this.browserStorage,l,this.logger,this.correlationId,this.performanceClient);if(a&&!y.isAlias(a.environment))throw Ue(NC);return y}}async function ff(u,n,a,r){a.addQueueMeasurement(v.InitializeBaseRequest,u.correlationId);const l=u.authority||n.auth.authority,d=[...u&&u.scopes||[]],h={...u,correlationId:u.correlationId,authority:l,scopes:d};if(!h.authenticationScheme)h.authenticationScheme=Oe.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(h.authenticationScheme===Oe.SSH){if(!u.sshJwk)throw Ue(sc);if(!u.sshKid)throw Ue(kC)}r.verbose(`Authentication Scheme set to "${h.authenticationScheme}" as configured in Auth request`)}return n.cache.claimsBasedCachingEnabled&&u.claims&&!tn.isEmptyObj(u.claims)&&(h.requestedClaimsHash=await Vv(u.claims)),h}async function xb(u,n,a,r,l){r.addQueueMeasurement(v.InitializeSilentRequest,u.correlationId);const d=await M(ff,v.InitializeBaseRequest,l,r,u.correlationId)(u,a,r,l);return{...u,...d,account:n,forceRefresh:u.forceRefresh||!1}}function aT(u,n){let a;const r=u.httpMethod;if(n===qt.EAR){if(a=r||Ua.POST,a!==Ua.POST)throw Ue(DC)}else a=r||Ua.GET;if(u.authorizePostBodyParameters&&a!==Ua.POST)throw Ue(UC);return a}class Po extends iT{initializeLogoutRequest(n){this.logger.verbose("initializeLogoutRequest called",n?.correlationId);const a={correlationId:this.correlationId||On(),...n};if(n)if(n.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(n.account){const r=this.getLogoutHintFromIdTokenClaims(n.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),a.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!n||n.postLogoutRedirectUri!==null?n&&n.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",a.correlationId),a.postLogoutRedirectUri=be.getAbsoluteUrl(n.postLogoutRedirectUri,gi())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",a.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",a.correlationId),a.postLogoutRedirectUri=be.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,gi())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",a.correlationId),a.postLogoutRedirectUri=be.getAbsoluteUrl(gi(),gi())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",a.correlationId),a}getLogoutHintFromIdTokenClaims(n){const a=n.idTokenClaims;if(a){if(a.login_hint)return a.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(n){this.performanceClient.addQueueMeasurement(v.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const a=await M(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(n);return new sv(a,this.performanceClient)}async getClientConfiguration(n){const{serverTelemetryManager:a,requestAuthority:r,requestAzureCloudOptions:l,requestExtraQueryParameters:d,account:h}=n;this.performanceClient.addQueueMeasurement(v.StandardInteractionClientGetClientConfiguration,this.correlationId);const g=n.authority||await M(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:l,requestExtraQueryParameters:d,account:h}),m=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:g,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:m.loggerCallback,piiLoggingEnabled:m.piiLoggingEnabled,logLevel:m.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:a,libraryInfo:{sku:jt.MSAL_SKU,version:La,cpu:z.EMPTY_STRING,os:z.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(n,a){this.performanceClient.addQueueMeasurement(v.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(n.redirectUri),l={interactionType:a},d=Lo.setRequestState(this.browserCrypto,n&&n.state||z.EMPTY_STRING,l),g={...await M(ff,v.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...n,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:d,nonce:n.nonce||On(),responseMode:this.config.auth.OIDCOptions.serverResponseType},m={...g,httpMethod:aT(g,this.config.auth.protocolMode)};if(n.loginHint||n.sid)return m;const y=n.account||this.browserStorage.getActiveAccount(this.correlationId);return y&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${y.homeAccountId}`,this.correlationId),m.account=y),m}}function Hb(u,n){if(!n)return null;try{return Lo.parseRequestState(u,n).libraryState.meta}catch{throw B(Uo)}}function Yr(u,n,a){const r=Fl(u);if(!r)throw LC(u)?(a.error(`A ${n} is present in the iframe but it does not contain known properties. It's likely that the ${n} has been replaced by code running on the redirectUri page.`),a.errorPii(`The ${n} detected is: ${u}`),q(gv)):(a.error(`The request has returned to the redirectUri but a ${n} is not present. It's likely that the ${n} has been removed or the page has been redirected by code running on the redirectUri page.`),q(fv));return r}function Lb(u,n,a){if(!u.state)throw q(Zh);const r=Hb(n,u.state);if(!r)throw q(mv);if(r.interactionType!==a)throw q(pv)}class oT{constructor(n,a,r,l,d){this.authModule=n,this.browserStorage=a,this.authCodeRequest=r,this.logger=l,this.performanceClient=d}async handleCodeResponse(n,a,r){this.performanceClient.addQueueMeasurement(v.HandleCodeResponse,a.correlationId);let l;try{l=I_(n,a.state)}catch(d){throw d instanceof Ba&&d.subError===Xr?q(Xr):d}return M(this.handleCodeResponseFromServer.bind(this),v.HandleCodeResponseFromServer,this.logger,this.performanceClient,a.correlationId)(l,a,r)}async handleCodeResponseFromServer(n,a,r,l=!0){if(this.performanceClient.addQueueMeasurement(v.HandleCodeResponseFromServer,a.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=n.code,n.cloud_instance_host_name&&await M(this.authModule.updateAuthority.bind(this.authModule),v.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,a.correlationId)(n.cloud_instance_host_name,a.correlationId),l&&(n.nonce=a.nonce||void 0),n.state=a.state,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{const h=this.createCcsCredentials(a);h&&(this.authCodeRequest.ccsCredential=h)}return await M(this.authModule.acquireToken.bind(this.authModule),v.AuthClientAcquireToken,this.logger,this.performanceClient,a.correlationId)(this.authCodeRequest,r,n)}createCcsCredentials(n){return n.account?{credential:n.account.homeAccountId,type:kn.HOME_ACCOUNT_ID}:n.loginHint?{credential:n.loginHint,type:kn.UPN}:null}}const zb="ContentError",Pb="PageException",rT="user_switch";const Bb="USER_INTERACTION_REQUIRED",Kb="USER_CANCEL",Gb="NO_NETWORK",jb="DISABLED",qb="ACCOUNT_UNAVAILABLE",Yb="UX_NOT_ALLOWED";const Fb=-2147186943,Qb={[rT]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Bn extends xe{constructor(n,a,r){super(n,a),Object.setPrototypeOf(this,Bn.prototype),this.name="NativeAuthError",this.ext=r}}function Ro(u){if(u.ext&&u.ext.status&&u.ext.status===jb||u.ext&&u.ext.error&&u.ext.error===Fb)return!0;switch(u.errorCode){case zb:case Pb:return!0;default:return!1}}function ac(u,n,a){if(a&&a.status)switch(a.status){case qb:return ec(av);case Bb:return new Cn(u,n);case Kb:return q(Xr);case Gb:return q(tc);case Yb:return ec(qh)}return new Bn(u,Qb[u]||n,a)}class sT extends Po{async acquireToken(n){this.performanceClient.addQueueMeasurement(v.SilentCacheClientAcquireToken,n.correlationId);const a=this.initializeServerTelemetryManager(ye.acquireTokenSilent_silentFlow),r=await M(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,account:n.account}),l=new b_(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const h=(await M(l.acquireCachedToken.bind(l),v.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,n.correlationId)(n))[0];return this.performanceClient.addFields({fromCache:!0},n.correlationId),h}catch(d){throw d instanceof $r&&d.errorCode===$h&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),d}}logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n);return this.clearCacheOnLogout(a.correlationId,a?.account)}}class Bl extends iT{constructor(n,a,r,l,d,h,g,m,y,T,_,O){super(n,a,r,l,d,h,m,y,O),this.apiId=g,this.accountId=T,this.platformAuthProvider=y,this.nativeStorageManager=_,this.silentCacheClient=new sT(n,this.nativeStorageManager,r,l,d,h,m,y,O);const P=this.platformAuthProvider.getExtensionName();this.skus=Vr.makeExtraSkuString({libraryName:jt.MSAL_SKU,libraryVersion:La,extensionName:P,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(n){n.extraParameters={...n.extraParameters,[KE]:this.skus}}async acquireToken(n,a){this.performanceClient.addQueueMeasurement(v.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(v.NativeInteractionClientAcquireToken,this.correlationId),l=Yt(),d=this.initializeServerTelemetryManager(this.apiId);try{const h=await this.initializeNativeRequest(n);try{const m=await this.acquireTokensFromCache(this.accountId,h);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),m}catch(m){if(a===Dt.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),m;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const g=await this.platformAuthProvider.sendMessage(h);return await this.handleNativeResponse(g,h,l).then(m=>(r.end({success:!0,isNativeBroker:!0,requestId:m.requestId}),d.clearNativeBrokerErrorCode(),m)).catch(m=>{throw r.end({success:!1,errorCode:m.errorCode,subErrorCode:m.subError}),m})}catch(h){throw h instanceof Bn&&d.setNativeBrokerErrorCode(h.errorCode),r.end({success:!1}),h}}createSilentCacheRequest(n,a){return{authority:n.authority,correlationId:this.correlationId,scopes:ct.fromString(n.scope).asArray(),account:a,forceRefresh:!1}}async acquireTokensFromCache(n,a){if(!n)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),B(Wd);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:n},this.correlationId);if(!r)throw B(Wd);try{const l=this.createSilentCacheRequest(a,r),d=await this.silentCacheClient.acquireToken(l),h={...r,idTokenClaims:d?.idTokenClaims,idToken:d?.idToken};return{...d,account:h}}catch(l){throw l}}async acquireTokenRedirect(n,a){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=n;delete r.onRedirectNavigate;const l=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(l)}catch(g){if(g instanceof Bn&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(g.errorCode),Ro(g)))throw g}this.browserStorage.setTemporaryCache(ot.NATIVE_REQUEST,JSON.stringify(l),!0);const d={apiId:ye.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},h=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(n.redirectUri);a.end({success:!0}),await this.navigationClient.navigateExternal(h,d)}async handleRedirectPromise(n,a){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),n&&a&&n?.addFields({errorCode:"no_cached_request"},a),null;const{prompt:l,...d}=r;l&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ot.NATIVE_REQUEST));const h=Yt();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const g=await this.platformAuthProvider.sendMessage(d),m=await this.handleNativeResponse(g,d,h);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),m}catch(g){throw g}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(n,a,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const l=Kn(n.id_token,xt),d=this.createHomeAccountIdentifier(n,l),h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:a.accountId},this.correlationId)?.homeAccountId;if(a.extraParameters?.child_client_id&&n.account.id!==a.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(d!==h&&n.account.id!==a.accountId)throw ac(rT);const g=await this.getDiscoveredAuthority({requestAuthority:a.authority}),m=Yh(this.browserStorage,g,d,xt,this.correlationId,l,n.client_info,void 0,l.tid,void 0,n.account.id,this.logger);n.expires_in=Number(n.expires_in);const y=await this.generateAuthenticationResult(n,a,l,m,g.canonicalAuthority,r);return await this.cacheAccount(m,this.correlationId,Gn(l)),await this.cacheNativeTokens(n,a,d,l,n.access_token,y.tenantId,r),y}createHomeAccountIdentifier(n,a){return Fe.generateHomeAccountId(n.client_info||z.EMPTY_STRING,In.Default,this.logger,this.browserCrypto,a)}generateScopes(n,a){return a?ct.fromString(a):ct.fromString(n)}async generatePopAccessToken(n,a){if(a.tokenType===Oe.POP&&a.signPopToken){if(n.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),n.shr;const r=new xo(this.browserCrypto),l={resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,shrNonce:a.shrNonce};if(!a.keyId)throw B(vh);return r.signPopToken(n.access_token,a.keyId,l)}else return n.access_token}async generateAuthenticationResult(n,a,r,l,d,h){const g=this.addTelemetryFromNativeResponse(n.properties.MATS),m=this.generateScopes(a.scope,n.scope),y=n.account.properties||{},T=y.UID||r.oid||r.sub||z.EMPTY_STRING,_=y.TenantId||r.tid||z.EMPTY_STRING,O=Rh(Fe.getAccountInfo(l),void 0,r,n.id_token);O.nativeAccountId!==n.account.id&&(O.nativeAccountId=n.account.id);const P=await this.generatePopAccessToken(n,a),J=a.tokenType===Oe.POP?Oe.POP:Oe.BEARER;return{authority:d,uniqueId:T,tenantId:_,scopes:m.asArray(),account:O,idToken:n.id_token,idTokenClaims:r,accessToken:P,fromCache:g?this.isResponseFromCache(g):!1,expiresOn:Oo(h+n.expires_in),tokenType:J,correlationId:this.correlationId,state:n.state,fromNativeBroker:!0}}async cacheAccount(n,a,r){await this.browserStorage.setAccount(n,this.correlationId,r,this.apiId),this.browserStorage.removeAccountContext(Fe.getAccountInfo(n),a)}cacheNativeTokens(n,a,r,l,d,h,g){const m=hc(r,a.authority,n.id_token||"",a.clientId,l.tid||""),y=a.tokenType===Oe.POP?z.SHR_NONCE_VALIDITY:(typeof n.expires_in=="string"?parseInt(n.expires_in,10):n.expires_in)||0,T=g+y,_=this.generateScopes(n.scope,a.scope),O=fc(r,a.authority,d,a.clientId,l.tid||h,_.printScopes(),T,0,xt,void 0,a.tokenType,void 0,a.keyId),P={idToken:m,accessToken:O};return this.nativeStorageManager.saveCacheRecord(P,this.correlationId,Gn(l),this.apiId,a.storeInCache)}getExpiresInValue(n,a){return n===Oe.POP?z.SHR_NONCE_VALIDITY:(typeof a=="string"?parseInt(a,10):a)||0}addTelemetryFromNativeResponse(n){const a=this.getMATSFromResponse(n);return a?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:a.broker_version,matsAccountJoinOnStart:a.account_join_on_start,matsAccountJoinOnEnd:a.account_join_on_end,matsDeviceJoin:a.device_join,matsPromptBehavior:a.prompt_behavior,matsApiErrorCode:a.api_error_code,matsUiVisible:a.ui_visible,matsSilentCode:a.silent_code,matsSilentBiSubCode:a.silent_bi_sub_code,matsSilentMessage:a.silent_message,matsSilentStatus:a.silent_status,matsHttpStatus:a.http_status,matsHttpEventCount:a.http_event_count},this.correlationId),a):null}getMATSFromResponse(n){if(n)try{return JSON.parse(n)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(n){return typeof n.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!n.is_cached}async initializeNativeRequest(n){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const a=await this.getCanonicalAuthority(n),{scopes:r,...l}=n,d=new ct(r||[]);d.appendScopes(Ho);const h={...l,accountId:this.accountId,clientId:this.config.auth.clientId,authority:a.urlString,scope:d.printScopes(),redirectUri:this.getRedirectUri(n.redirectUri),prompt:this.getPrompt(n.prompt),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...n.extraQueryParameters,...n.tokenQueryParameters},extendedExpiryToken:!1,keyId:n.popKid};if(h.signPopToken&&n.popKid)throw q(zv);if(this.handleExtraBrokerParams(h),h.extraParameters=h.extraParameters||{},h.extraParameters.telemetry=pn.MATS_TELEMETRY,n.authenticationScheme===Oe.POP){const g={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce},m=new xo(this.browserCrypto);let y;if(h.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:h.keyId})),h.signPopToken=!1;else{const T=await M(m.generateCnf.bind(m),v.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(g,this.logger);y=T.reqCnfString,h.keyId=T.kid,h.signPopToken=!0}h.reqCnf=y}return this.addRequestSKUs(h),h}async getCanonicalAuthority(n){const a=n.authority||this.config.auth.authority;n.account&&await this.getDiscoveredAuthority({requestAuthority:a,requestAzureCloudOptions:n.azureCloudOptions,account:n.account});const r=new be(a);return r.validateAsUri(),r}getPrompt(n){switch(this.apiId){case ye.ssoSilent:case ye.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),St.NONE}if(!n){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(n){case St.NONE:case St.CONSENT:case St.LOGIN:case St.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),n;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${n} is not compatible with native flow`),q(Hv)}}handleExtraBrokerParams(n){const a=n.extraParameters&&n.extraParameters.hasOwnProperty(Xl)&&n.extraParameters.hasOwnProperty(Jl)&&n.extraParameters.hasOwnProperty(xa);if(!n.embeddedClientId&&!a)return;let r="";const l=n.redirectUri;n.embeddedClientId?(n.redirectUri=this.config.auth.redirectUri,r=n.embeddedClientId):n.extraParameters&&(n.redirectUri=n.extraParameters[Jl],r=n.extraParameters[xa]),n.extraParameters={child_client_id:r,child_redirect_uri:l},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:l},this.correlationId)}}async function gf(u,n,a,r,l){const d=R_({...u.auth,authority:n},a,r,l);if(Lh(d,{sku:jt.MSAL_SKU,version:La,os:"",cpu:""}),u.auth.protocolMode!==qt.OIDC&&zh(d,u.telemetry.application),a.platformBroker&&(YE(d),l.addFields({isPlatformAuthorizeRequest:!0},a.correlationId),a.authenticationScheme===Oe.POP)){const h=new mi(r,l),g=new xo(h);let m;a.popKid?m=h.encodeKid(a.popKid):m=(await M(g.generateCnf.bind(g),v.PopTokenGenerateCnf,r,l,a.correlationId)(a,r)).reqCnfString,Kh(d,m)}return cc(d,a.correlationId,l),d}async function mf(u,n,a,r,l){if(!a.codeChallenge)throw Ue(_h);const d=await M(gf,v.GetStandardParams,r,l,a.correlationId)(u,n,a,r,l);return Mh(d,hh.CODE),Ph(d,a.codeChallenge,z.S256_CODE_CHALLENGE_METHOD),ta(d,a.extraQueryParameters||{}),Fh(n,d,u.auth.encodeExtraQueryParams,a.extraQueryParameters)}async function pf(u,n,a,r,l,d){if(!r.earJwk)throw q(Jh);const h=await gf(n,a,r,l,d);Mh(h,hh.IDTOKEN_TOKEN_REFRESHTOKEN),n_(h,r.earJwk),Ph(h,r.codeChallenge,z.S256_CODE_CHALLENGE_METHOD);const g=new Map;ta(g,r.extraQueryParameters||{});const m=Fh(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return lT(u,m,h)}async function yf(u,n,a,r,l,d){const h=await gf(n,a,r,l,d);Mh(h,hh.CODE),Ph(h,r.codeChallenge,r.codeChallengeMethod||z.S256_CODE_CHALLENGE_METHOD),i_(h,r.authorizePostBodyParameters||{});const g=new Map;ta(g,r.extraQueryParameters||{});const m=Fh(a,g,n.auth.encodeExtraQueryParams,r.extraQueryParameters);return lT(u,m,h)}function lT(u,n,a){const r=u.createElement("form");return r.method="post",r.action=n,a.forEach((l,d)=>{const h=u.createElement("input");h.hidden=!0,h.name=d,h.value=l,r.appendChild(h)}),u.body.appendChild(r),r}async function cT(u,n,a,r,l,d,h,g,m,y){if(g.verbose("Account id found, calling WAM for token"),!y)throw q(ef);const T=new mi(g,m),_=new Bl(r,l,T,g,h,r.system.navigationClient,a,m,y,n,d,u.correlationId),{userRequestState:O}=Lo.parseRequestState(T,u.state);return M(_.acquireToken.bind(_),v.NativeInteractionClientAcquireToken,g,m,u.correlationId)({...u,state:O,prompt:void 0})}async function Do(u,n,a,r,l,d,h,g,m,y,T,_){if(Pn.removeThrottle(h,l.auth.clientId,u),n.accountId)return M(cT,v.HandleResponsePlatformBroker,y,T,u.correlationId)(u,n.accountId,r,l,h,g,m,y,T,_);const O={...u,code:n.code||"",codeVerifier:a},P=new oT(d,h,O,y,T);return await M(P.handleCodeResponse.bind(P),v.HandleCodeResponse,y,T,u.correlationId)(n,u,r)}async function Cf(u,n,a,r,l,d,h,g,m,y,T){if(Pn.removeThrottle(d,r.auth.clientId,u),lv(n,u.state),!n.ear_jwe)throw q(hv);if(!u.earJwk)throw q(Jh);const _=JSON.parse(await M(nb,v.DecryptEarResponse,m,y,u.correlationId)(u.earJwk,n.ear_jwe));if(_.accountId)return M(cT,v.HandleResponsePlatformBroker,m,y,u.correlationId)(u,_.accountId,a,r,d,h,g,m,y,T);const O=new Ha(r.auth.clientId,d,new mi(m,y),m,null,null,y);O.validateTokenResponse(_);const P={code:"",state:u.state,nonce:u.nonce,client_info:_.client_info,cloud_graph_host_name:_.cloud_graph_host_name,cloud_instance_host_name:_.cloud_instance_host_name,cloud_instance_name:_.cloud_instance_name,msgraph_host:_.msgraph_host};return await M(O.handleServerTokenResponse.bind(O),v.HandleServerTokenResponse,m,y,u.correlationId)(_,l,Yt(),u,a,P,void 0,void 0,void 0,void 0)}const Vb=32;async function Pa(u,n,a){u.addQueueMeasurement(v.GeneratePkceCodes,a);const r=nn(Xb,v.GenerateCodeVerifier,n,u,a)(u,n,a),l=await M(Jb,v.GenerateCodeChallengeFromVerifier,n,u,a)(r,u,n,a);return{verifier:r,challenge:l}}function Xb(u,n,a){try{const r=new Uint8Array(Vb);return nn(Z_,v.GetRandomValues,n,u,a)(r),aa(r)}catch{throw q(Xh)}}async function Jb(u,n,a,r){n.addQueueMeasurement(v.GenerateCodeChallengeFromVerifier,r);try{const l=await M(Yv,v.Sha256Digest,a,n,r)(u,n,r);return aa(new Uint8Array(l))}catch{throw q(Xh)}}class oc{constructor(n,a,r,l){this.logger=n,this.handshakeTimeoutMs=a,this.extensionId=l,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(v.NativeMessageHandlerHandshake),this.platformAuthType=pn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(n){this.logger.trace(this.platformAuthType+" - sendMessage called.");const a={method:Pr.GetToken,request:n},r={channel:pn.CHANNEL_ID,extensionId:this.extensionId,responseId:On(),body:a};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const l=await new Promise((h,g)=>{this.resolvers.set(r.responseId,{resolve:h,reject:g})});return this.validatePlatformBrokerResponse(l)}static async createProvider(n,a,r){n.trace("PlatformAuthExtensionHandler - createProvider called.");try{const l=new oc(n,a,r,pn.PREFERRED_EXTENSION_ID);return await l.sendHandshakeRequest(),l}catch{const d=new oc(n,a,r);return await d.sendHandshakeRequest(),d}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const n={channel:pn.CHANNEL_ID,extensionId:this.extensionId,responseId:On(),body:{method:Pr.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=a=>{this.onChannelMessage(a)},window.postMessage(n,window.origin,[this.messageChannel.port2]),new Promise((a,r)=>{this.handshakeResolvers.set(n.responseId,{resolve:a,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(q(Uv)),this.handshakeResolvers.delete(n.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(n){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),n.source!==window)return;const a=n.data;if(!(!a.channel||a.channel!==pn.CHANNEL_ID)&&!(a.extensionId&&a.extensionId!==this.extensionId)&&a.body.method===Pr.HandshakeRequest){const r=this.handshakeResolvers.get(a.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${a.responseId}`);return}this.logger.verbose(a.extensionId?`Extension with id: ${a.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(q(xv))}}onChannelMessage(n){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const a=n.data,r=this.resolvers.get(a.responseId),l=this.handshakeResolvers.get(a.responseId);try{const d=a.body.method;if(d===Pr.Response){if(!r)return;const h=a.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(h)}`),h.status!=="Success")r.reject(ac(h.code,h.description,h.ext));else if(h.result)h.result.code&&h.result.description?r.reject(ac(h.result.code,h.result.description,h.result.ext)):r.resolve(h.result);else throw Jd(jl,"Event does not contain result.");this.resolvers.delete(a.responseId)}else if(d===Pr.HandshakeResponse){if(!l){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${a.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=a.extensionId,this.extensionVersion=a.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),l.resolve(),this.handshakeResolvers.delete(a.responseId)}}catch(d){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${d}`),this.logger.errorPii(`Unable to parse ${n}`),r?r.reject(d):l&&l.reject(d)}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw Jd(jl,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===pn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class vf{constructor(n,a,r){this.logger=n,this.performanceClient=a,this.correlationId=r,this.platformAuthType=pn.PLATFORM_DOM_PROVIDER}static async createProvider(n,a,r){if(n.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(pn.MICROSOFT_ENTRA_BROKERID))?.includes(pn.PLATFORM_DOM_APIS))return n.trace("Platform auth api available in DOM"),new vf(n,a,r)}getExtensionId(){return pn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return pn.DOM_API_NAME}async sendMessage(n){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const a=this.initializePlatformDOMRequest(n),r=await window.navigator.platformAuthentication.executeGetToken(a);return this.validatePlatformBrokerResponse(r)}catch(a){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),a}}initializePlatformDOMRequest(n){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:a,clientId:r,authority:l,scope:d,redirectUri:h,correlationId:g,state:m,storeInCache:y,embeddedClientId:T,extraParameters:_,...O}=n,P=this.getDOMExtraParams(O);return{accountId:a,brokerId:this.getExtensionId(),authority:l,clientId:r,correlationId:g||this.correlationId,extraParameters:{..._,...P},isSecurityTokenService:!1,redirectUri:h,scope:d,state:m,storeInCache:y,embeddedClientId:T}}validatePlatformBrokerResponse(n){if(n.hasOwnProperty("isSuccess")){if(n.hasOwnProperty("accessToken")&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("clientInfo")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scopes")&&n.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(n);if(n.hasOwnProperty("error")){const a=n;if(a.isSuccess===!1&&a.error&&a.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),ac(a.error.code,a.error.description,{error:parseInt(a.error.errorCode),protocol_error:a.error.protocolError,status:a.error.status,properties:a.error.properties})}}throw Jd(jl,"Response missing expected properties.")}convertToPlatformBrokerResponse(n){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:n.accessToken,id_token:n.idToken,client_info:n.clientInfo,account:n.account,expires_in:n.expiresIn,scope:n.scopes,state:n.state||"",properties:n.properties||{},extendedLifetimeToken:n.extendedLifetimeToken??!1,shr:n.proofOfPossessionPayload}}getDOMExtraParams(n){return{...Object.entries(n).reduce((l,[d,h])=>(l[d]=String(h),l),{})}}}async function Zb(u,n,a,r,l){u.trace("getPlatformAuthProvider called",a),u.trace("Has client allowed platform auth via DOM API: "+l);let d;try{l&&(d=await vf.createProvider(u,n,a)),d||(u.trace("Platform auth via DOM API not available, checking for extension"),d=await oc.createProvider(u,r||eT,n))}catch(h){u.trace("Platform auth not available",h)}return d}function Zr(u,n,a,r){if(n.trace("isPlatformAuthAllowed called"),!u.system.allowPlatformBroker&&u.system.allowPlatformBrokerWithDOM)throw Ue(xC);if(!u.system.allowPlatformBroker)return n.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!a)return n.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Oe.BEARER:case Oe.POP:return n.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return n.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class $b extends Po{constructor(n,a,r,l,d,h,g,m,y,T){super(n,a,r,l,d,h,g,y,T),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=m,this.eventHandler=d}acquireToken(n,a){let r;try{if(r={popupName:this.generatePopupName(n.scopes||Ho,n.authority||this.config.auth.authority),popupWindowAttributes:n.popupWindowAttributes||{},popupWindowParent:n.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(n,r,a);{const d={...n,httpMethod:aT(n,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(d,r,a)}}catch(l){return Promise.reject(l)}}logout(n){try{this.logger.verbose("logoutPopup called");const a=this.initializeLogoutRequest(n),r={popupName:this.generateLogoutPopupName(a),popupWindowAttributes:n?.popupWindowAttributes||{},popupWindowParent:n?.popupWindowParent??window},l=n&&n.authority,d=n&&n.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(a,r,l,d)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(a,r,l,d))}catch(a){return Promise.reject(a)}}async acquireTokenPopupAsync(n,a,r){this.logger.verbose("acquireTokenPopupAsync called");const l=await M(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,te.Popup);a.popup&&Wv(l.authority);const d=Zr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);return l.platformBroker=d,this.config.auth.protocolMode===qt.EAR?this.executeEarFlow(l,a,r):this.executeCodeFlow(l,a,r)}async executeCodeFlow(n,a,r){const l=n.correlationId,d=this.initializeServerTelemetryManager(ye.acquireTokenPopup),h=r||await M(Pa,v.GeneratePkceCodes,this.logger,this.performanceClient,l)(this.performanceClient,this.logger,l),g={...n,codeChallenge:h.challenge};try{const m=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,l)({serverTelemetryManager:d,requestAuthority:g.authority,requestAzureCloudOptions:g.azureCloudOptions,requestExtraQueryParameters:g.extraQueryParameters,account:g.account});if(g.httpMethod===Ua.POST)return await this.executeCodeFlowWithPost(g,a,m,h.verifier);{const y=await M(mf,v.GetAuthCodeUrl,this.logger,this.performanceClient,l)(this.config,m.authority,g,this.logger,this.performanceClient),T=this.initiateAuthRequest(y,a);this.eventHandler.emitEvent(Z.POPUP_OPENED,te.Popup,{popupWindow:T},null);const _=await this.monitorPopupForHash(T,a.popupWindowParent),O=nn(Yr,v.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await M(Do,v.HandleResponseCode,this.logger,this.performanceClient,l)(n,O,h.verifier,ye.acquireTokenPopup,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(m){throw a.popup?.close(),m instanceof xe&&(m.setCorrelationId(this.correlationId),d.cacheFailedRequest(m)),m}}async executeEarFlow(n,a,r){const l=n.correlationId,d=await M(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,l)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),h=await M(rf,v.GenerateEarKey,this.logger,this.performanceClient,l)(),g=r||await M(Pa,v.GeneratePkceCodes,this.logger,this.performanceClient,l)(this.performanceClient,this.logger,l),m={...n,earJwk:h,codeChallenge:g.challenge},y=a.popup||this.openPopup("about:blank",a);(await pf(y.document,this.config,d,m,this.logger,this.performanceClient)).submit();const _=await M(this.monitorPopupForHash.bind(this),v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,l)(y,a.popupWindowParent),O=nn(Yr,v.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(_,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!O.ear_jwe&&O.code){const P=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,l)({serverTelemetryManager:this.initializeServerTelemetryManager(ye.acquireTokenPopup),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:d});return M(Do,v.HandleResponseCode,this.logger,this.performanceClient,l)(m,O,g.verifier,ye.acquireTokenPopup,this.config,P,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return M(Cf,v.HandleResponseEar,this.logger,this.performanceClient,l)(m,O,ye.acquireTokenPopup,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(n,a,r,l){const d=n.correlationId,h=await M(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,d)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),g=a.popup||this.openPopup("about:blank",a);(await yf(g.document,this.config,h,n,this.logger,this.performanceClient)).submit();const y=await M(this.monitorPopupForHash.bind(this),v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,d)(g,a.popupWindowParent),T=nn(Yr,v.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return M(Do,v.HandleResponseCode,this.logger,this.performanceClient,d)(n,T,l,ye.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(n,a,r,l){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Z.LOGOUT_START,te.Popup,n);const d=this.initializeServerTelemetryManager(ye.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,n.account);const h=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:d,requestAuthority:r,account:n.account||void 0});try{h.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId&&n.postLogoutRedirectUri&&h.authority.protocolMode===qt.OIDC){if(this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,te.Popup,n),l){const y={apiId:ye.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},T=be.getAbsoluteUrl(l,gi());await this.navigationClient.navigateInternal(T,y)}a.popup?.close();return}}const g=h.getLogoutUri(n);this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,te.Popup,n);const m=this.openPopup(g,a);if(this.eventHandler.emitEvent(Z.POPUP_OPENED,te.Popup,{popupWindow:m},null),await this.monitorPopupForHash(m,a.popupWindowParent).catch(()=>{}),l){const y={apiId:ye.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},T=be.getAbsoluteUrl(l,gi());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${T}`),await this.navigationClient.navigateInternal(T,y)}else this.logger.verbose("No main window navigation requested")}catch(h){throw a.popup?.close(),h instanceof xe&&(h.setCorrelationId(this.correlationId),d.cacheFailedRequest(h)),this.eventHandler.emitEvent(Z.LOGOUT_FAILURE,te.Popup,null,h),this.eventHandler.emitEvent(Z.LOGOUT_END,te.Popup),h}this.eventHandler.emitEvent(Z.LOGOUT_END,te.Popup)}initiateAuthRequest(n,a){if(n)return this.logger.infoPii(`Navigate to: ${n}`),this.openPopup(n,a);throw this.logger.error("Navigate url is empty"),q(Cc)}monitorPopupForHash(n,a){return new Promise((r,l)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const d=setInterval(()=>{if(n.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(d),l(q(Xr));return}let h="";try{h=n.location.href}catch{}if(!h||h==="about:blank")return;clearInterval(d);let g="";const m=this.config.auth.OIDCOptions.serverResponseType;n&&(m===rc.QUERY?g=n.location.search:g=n.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(g)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(n,a)})}openPopup(n,a){try{let r;if(a.popup?(r=a.popup,this.logger.verbosePii(`Navigating popup window to: ${n}`),r.location.assign(n)):typeof a.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${n}`),r=this.openSizedPopup(n,a)),!r)throw q(vv);return r.focus&&r.focus(),this.currentWindow=r,a.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),q(Cv)}}openSizedPopup(n,{popupName:a,popupWindowAttributes:r,popupWindowParent:l}){const d=l.screenLeft?l.screenLeft:l.screenX,h=l.screenTop?l.screenTop:l.screenY,g=l.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=l.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let y=r.popupSize?.width,T=r.popupSize?.height,_=r.popupPosition?.top,O=r.popupPosition?.left;return(!y||y<0||y>g)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),y=jt.POPUP_WIDTH),(!T||T<0||T>m)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),T=jt.POPUP_HEIGHT),(!_||_<0||_>m)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),_=Math.max(0,m/2-jt.POPUP_HEIGHT/2+h)),(!O||O<0||O>g)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),O=Math.max(0,g/2-jt.POPUP_WIDTH/2+d)),l.open(n,a,`width=${y}, height=${T}, top=${_}, left=${O}, scrollbars=yes`)}unloadWindow(n){this.currentWindow&&this.currentWindow.close(),n.preventDefault()}cleanPopup(n,a){n.close(),a.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(n,a){return`${jt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n.join("-")}.${a}.${this.correlationId}`}generateLogoutPopupName(n){const a=n.account&&n.account.homeAccountId;return`${jt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${a}.${this.correlationId}`}}function Wb(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const u=window.performance.getEntriesByType("navigation");return(u.length?u[0]:void 0)?.type}class ew extends Po{constructor(n,a,r,l,d,h,g,m,y,T){super(n,a,r,l,d,h,g,y,T),this.nativeStorage=m}async acquireToken(n){const a=await M(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(n,te.Redirect);a.platformBroker=Zr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme);const r=d=>{d.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Z.RESTORE_FROM_BFCACHE,te.Redirect))},l=this.getRedirectStartPage(n.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${l}`),this.browserStorage.setTemporaryCache(ot.ORIGIN_URI,l,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===qt.EAR?await this.executeEarFlow(a):await this.executeCodeFlow(a,n.onRedirectNavigate)}catch(d){throw d instanceof xe&&d.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),d}}async executeCodeFlow(n,a){const r=n.correlationId,l=this.initializeServerTelemetryManager(ye.acquireTokenRedirect),d=await M(Pa,v.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),h={...n,codeChallenge:d.challenge};this.browserStorage.cacheAuthorizeRequest(h,d.verifier);try{if(h.httpMethod===Ua.POST)return await this.executeCodeFlowWithPost(h);{const g=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:l,requestAuthority:h.authority,requestAzureCloudOptions:h.azureCloudOptions,requestExtraQueryParameters:h.extraQueryParameters,account:h.account}),m=await M(mf,v.GetAuthCodeUrl,this.logger,this.performanceClient,n.correlationId)(this.config,g.authority,h,this.logger,this.performanceClient);return await this.initiateAuthRequest(m,a)}}catch(g){throw g instanceof xe&&(g.setCorrelationId(this.correlationId),l.cacheFailedRequest(g)),g}}async executeEarFlow(n){const a=n.correlationId,r=await M(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),l=await M(rf,v.GenerateEarKey,this.logger,this.performanceClient,a)(),d=await M(Pa,v.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),h={...n,earJwk:l,codeChallenge:d.challenge};return this.browserStorage.cacheAuthorizeRequest(h,d.verifier),(await pf(document,this.config,r,h,this.logger,this.performanceClient)).submit(),new Promise((m,y)=>{setTimeout(()=>{y(q(nc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(n){const a=n.correlationId,r=await M(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return this.browserStorage.cacheAuthorizeRequest(n),(await yf(document,this.config,r,n,this.logger,this.performanceClient)).submit(),new Promise((d,h)=>{setTimeout(()=>{h(q(nc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(n="",a,r,l){const d=this.initializeServerTelemetryManager(ye.handleRedirectPromise);try{const[h,g]=this.getRedirectResponse(n||"");if(!h)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),Wb()!=="back_forward"?l.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const m=this.browserStorage.getTemporaryCache(ot.ORIGIN_URI,!0)||z.EMPTY_STRING,y=yy(m),T=yy(window.location.href);if(y===T&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),m.indexOf("#")>-1&&ab(m),await this.handleResponse(h,a,r,d);if(this.config.auth.navigateToLoginRequestUrl){if(!uf()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(ot.URL_HASH,g,!0);const _={apiId:ye.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let O=!0;if(!m||m==="null"){const P=rb();this.browserStorage.setTemporaryCache(ot.ORIGIN_URI,P,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),O=await this.navigationClient.navigateInternal(P,_)}else this.logger.verbose(`Navigating to loginRequestUrl: ${m}`),O=await this.navigationClient.navigateInternal(m,_);if(!O)return await this.handleResponse(h,a,r,d)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(h,a,r,d);return null}catch(h){throw h instanceof xe&&(h.setCorrelationId(this.correlationId),d.cacheFailedRequest(h)),h}}getRedirectResponse(n){this.logger.verbose("getRedirectResponseHash called");let a=n;a||(this.config.auth.OIDCOptions.serverResponseType===rc.QUERY?a=window.location.search:a=window.location.hash);let r=Fl(a);if(r){try{Lb(r,this.browserCrypto,te.Redirect)}catch(d){return d instanceof xe&&this.logger.error(`Interaction type validation failed due to ${d.errorCode}: ${d.errorMessage}`),[null,""]}return Jv(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,a]}const l=this.browserStorage.getTemporaryCache(ot.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ot.URL_HASH)),l&&(r=Fl(l),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,l]):[null,""]}async handleResponse(n,a,r,l){if(!n.state)throw q(Zh);if(n.ear_jwe){const g=await M(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a.correlationId)({requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});return M(Cf,v.HandleResponseEar,this.logger,this.performanceClient,a.correlationId)(a,n,ye.acquireTokenRedirect,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const h=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:l,requestAuthority:a.authority});return M(Do,v.HandleResponseCode,this.logger,this.performanceClient,a.correlationId)(a,n,r,ye.acquireTokenRedirect,this.config,h,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(n,a){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),n){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${n}`);const r={apiId:ye.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},l=a||this.config.auth.onRedirectNavigate;if(typeof l=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),l(n)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(n,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(n,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),q(Cc)}async logout(n){this.logger.verbose("logoutRedirect called");const a=this.initializeLogoutRequest(n),r=this.initializeServerTelemetryManager(ye.logout);try{this.eventHandler.emitEvent(Z.LOGOUT_START,te.Redirect,n),await this.clearCacheOnLogout(this.correlationId,a.account);const l={apiId:ye.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n&&n.authority,requestExtraQueryParameters:n?.extraQueryParameters,account:n&&n.account||void 0});if(d.authority.protocolMode===qt.OIDC)try{d.authority.endSessionEndpoint}catch{if(a.account?.homeAccountId){this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,te.Redirect,a);return}}const h=d.getLogoutUri(a);if(this.eventHandler.emitEvent(Z.LOGOUT_SUCCESS,te.Redirect,a),n&&typeof n.onRedirectNavigate=="function")if(n.onRedirectNavigate(h)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Zi.SIGNOUT),await this.navigationClient.navigateExternal(h,l);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Zi.SIGNOUT),await this.navigationClient.navigateExternal(h,l);return}}catch(l){throw l instanceof xe&&(l.setCorrelationId(this.correlationId),r.cacheFailedRequest(l)),this.eventHandler.emitEvent(Z.LOGOUT_FAILURE,te.Redirect,null,l),this.eventHandler.emitEvent(Z.LOGOUT_END,te.Redirect),l}this.eventHandler.emitEvent(Z.LOGOUT_END,te.Redirect)}getRedirectStartPage(n){const a=n||window.location.href;return be.getAbsoluteUrl(a,gi())}}async function tw(u,n,a,r,l){if(n.addQueueMeasurement(v.SilentHandlerInitiateAuthRequest,r),!u)throw a.info("Navigate url is empty"),q(Cc);return l?M(aw,v.SilentHandlerLoadFrame,a,n,r)(u,l,n,r):nn(ow,v.SilentHandlerLoadFrameSync,a,n,r)(u)}async function nw(u,n,a,r,l){const d=Ec();if(!d.contentDocument)throw"No document associated with iframe!";return(await yf(d.contentDocument,u,n,a,r,l)).submit(),d}async function iw(u,n,a,r,l){const d=Ec();if(!d.contentDocument)throw"No document associated with iframe!";return(await pf(d.contentDocument,u,n,a,r,l)).submit(),d}async function Xy(u,n,a,r,l,d,h){return r.addQueueMeasurement(v.SilentHandlerMonitorIframeForHash,d),new Promise((g,m)=>{n<sh&&l.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${n}ms) than the default (${sh}ms). This may result in timeouts.`);const y=window.setTimeout(()=>{window.clearInterval(T),m(q(Tv))},n),T=window.setInterval(()=>{let _="";const O=u.contentWindow;try{_=O?O.location.href:""}catch{}if(!_||_==="about:blank")return;let P="";O&&(h===rc.QUERY?P=O.location.search:P=O.location.hash),window.clearTimeout(y),window.clearInterval(T),g(P)},a)}).finally(()=>{nn(rw,v.RemoveHiddenIframe,l,r,d)(u)})}function aw(u,n,a,r){return a.addQueueMeasurement(v.SilentHandlerLoadFrame,r),new Promise((l,d)=>{const h=Ec();window.setTimeout(()=>{if(!h){d("Unable to load iframe");return}h.src=u,l(h)},n)})}function ow(u){const n=Ec();return n.src=u,n}function Ec(){const u=document.createElement("iframe");return u.className="msalSilentIframe",u.style.visibility="hidden",u.style.position="absolute",u.style.width=u.style.height="0",u.style.border="0",u.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),u.setAttribute("allow","local-network-access *"),document.body.appendChild(u),u}function rw(u){document.body===u.parentNode&&document.body.removeChild(u)}class sw extends Po{constructor(n,a,r,l,d,h,g,m,y,T,_){super(n,a,r,l,d,h,m,T,_),this.apiId=g,this.nativeStorage=y}async acquireToken(n){this.performanceClient.addQueueMeasurement(v.SilentIframeClientAcquireToken,n.correlationId),!n.loginHint&&!n.sid&&(!n.account||!n.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const a={...n};a.prompt?a.prompt!==St.NONE&&a.prompt!==St.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${a.prompt} with ${St.NONE}`),a.prompt=St.NONE):a.prompt=St.NONE;const r=await M(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(a,te.Silent);return r.platformBroker=Zr(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),Wv(r.authority),this.config.auth.protocolMode===qt.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(n){let a;const r=this.initializeServerTelemetryManager(this.apiId);try{return a=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await M(this.silentTokenHelper.bind(this),v.SilentIframeClientTokenHelper,this.logger,this.performanceClient,n.correlationId)(a,n)}catch(l){if(l instanceof xe&&(l.setCorrelationId(this.correlationId),r.cacheFailedRequest(l)),!a||!(l instanceof xe)||l.errorCode!==jt.INVALID_GRANT_ERROR)throw l;return this.performanceClient.addFields({retryError:l.errorCode},this.correlationId),await M(this.silentTokenHelper.bind(this),v.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(a,n)}}async executeEarFlow(n){const a=n.correlationId,r=await M(this.getDiscoveredAuthority.bind(this),v.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),l=await M(rf,v.GenerateEarKey,this.logger,this.performanceClient,a)(),d=await M(Pa,v.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),h={...n,earJwk:l,codeChallenge:d.challenge},g=await M(iw,v.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,a)(this.config,r,h,this.logger,this.performanceClient),m=this.config.auth.OIDCOptions.serverResponseType,y=await M(Xy,v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(g,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,a,m),T=nn(Yr,v.DeserializeResponse,this.logger,this.performanceClient,a)(y,m,this.logger);if(!T.ear_jwe&&T.code){const _=await M(this.createAuthCodeClient.bind(this),v.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account,authority:r});return M(Do,v.HandleResponseCode,this.logger,this.performanceClient,a)(h,T,d.verifier,this.apiId,this.config,_,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return M(Cf,v.HandleResponseEar,this.logger,this.performanceClient,a)(h,T,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(q(vc))}async silentTokenHelper(n,a){const r=a.correlationId;this.performanceClient.addQueueMeasurement(v.SilentIframeClientTokenHelper,r);const l=await M(Pa,v.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),d={...a,codeChallenge:l.challenge};let h;if(a.httpMethod===Ua.POST)h=await M(nw,v.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,n.authority,d,this.logger,this.performanceClient);else{const T=await M(mf,v.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,n.authority,d,this.logger,this.performanceClient);h=await M(tw,v.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(T,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const g=this.config.auth.OIDCOptions.serverResponseType,m=await M(Xy,v.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(h,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,g),y=nn(Yr,v.DeserializeResponse,this.logger,this.performanceClient,r)(m,g,this.logger);return M(Do,v.HandleResponseCode,this.logger,this.performanceClient,r)(a,y,l.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class lw extends Po{async acquireToken(n){this.performanceClient.addQueueMeasurement(v.SilentRefreshClientAcquireToken,n.correlationId);const a=await M(ff,v.InitializeBaseRequest,this.logger,this.performanceClient,n.correlationId)(n,this.config,this.performanceClient,this.logger),r={...n,...a};n.redirectUri&&(r.redirectUri=this.getRedirectUri(n.redirectUri));const l=this.initializeServerTelemetryManager(ye.acquireTokenSilent_silentFlow),d=await this.createRefreshTokenClient({serverTelemetryManager:l,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return M(d.acquireTokenByRefreshToken.bind(d),v.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(r,ye.acquireTokenSilent_silentFlow).catch(h=>{throw h.setCorrelationId(this.correlationId),l.cacheFailedRequest(h),h})}logout(){return Promise.reject(q(vc))}async createRefreshTokenClient(n){const a=await M(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n.serverTelemetryManager,requestAuthority:n.authorityUrl,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return new __(a,this.performanceClient)}}class cw{constructor(n,a,r,l,d){this.isBrowserEnvironment=typeof window<"u",this.config=n,this.storage=a,this.logger=r,this.cryptoObj=l,this.performanceClient=d}async loadExternalTokens(n,a,r){if(!this.isBrowserEnvironment)throw q(Tc);const l=n.correlationId||On(),d=this.performanceClient.startMeasurement(v.LoadExternalTokens,l);try{const h=a.id_token?Kn(a.id_token,xt):void 0,g=Gn(h||{}),m={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},y=n.authority?new wt(wt.generateAuthority(n.authority,n.azureCloudOptions),this.config.system.networkClient,this.storage,m,this.logger,n.correlationId||On()):void 0,T=await M(this.loadAccount.bind(this),v.LoadAccount,this.logger,this.performanceClient,l)(n,r.clientInfo||a.client_info||"",l,h,y),_=await M(this.loadIdToken.bind(this),v.LoadIdToken,this.logger,this.performanceClient,l)(a,T.homeAccountId,T.environment,T.realm,l,g),O=await M(this.loadAccessToken.bind(this),v.LoadAccessToken,this.logger,this.performanceClient,l)(n,a,T.homeAccountId,T.environment,T.realm,r,l,g),P=await M(this.loadRefreshToken.bind(this),v.LoadRefreshToken,this.logger,this.performanceClient,l)(a,T.homeAccountId,T.environment,l,g);return d.end({success:!0},void 0,Fe.getAccountInfo(T)),this.generateAuthenticationResult(n,{account:T,idToken:_,accessToken:O,refreshToken:P},h,y)}catch(h){throw d.end({success:!1},h),h}}async loadAccount(n,a,r,l,d){if(this.logger.verbose("TokenCache - loading account"),n.account){const y=Fe.createFromAccountInfo(n.account);return await this.storage.setAccount(y,r,Gn(l||{}),ye.loadExternalTokens),y}else if(!d||!a&&!l)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),q(kv);const h=Fe.generateHomeAccountId(a,d.authorityType,this.logger,this.cryptoObj,l),g=l?.tid,m=Yh(this.storage,d,h,xt,r,l,a,d.hostnameAndPort,g,void 0,void 0,this.logger);return await this.storage.setAccount(m,r,Gn(l||{}),ye.loadExternalTokens),m}async loadIdToken(n,a,r,l,d,h){if(!n.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const g=hc(a,r,n.id_token,this.config.auth.clientId,l);return await this.storage.setIdTokenCredential(g,d,h),g}async loadAccessToken(n,a,r,l,d,h,g,m){if(a.access_token)if(a.expires_in){if(!a.scope&&(!n.scopes||!n.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const y=a.scope?ct.fromString(a.scope):new ct(n.scopes),T=h.expiresOn||a.expires_in+Yt(),_=h.extendedExpiresOn||(a.ext_expires_in||a.expires_in)+Yt(),O=fc(r,l,a.access_token,this.config.auth.clientId,d,y.printScopes(),T,_,xt);return await this.storage.setAccessTokenCredential(O,g,m),O}async loadRefreshToken(n,a,r,l,d){if(!n.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const h=tv(a,r,n.refresh_token,this.config.auth.clientId,n.foci,void 0,n.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(h,l,d),h}generateAuthenticationResult(n,a,r,l){let d="",h=[],g=null,m;a?.accessToken&&(d=a.accessToken.secret,h=ct.fromString(a.accessToken.target).asArray(),g=Oo(a.accessToken.expiresOn),m=Oo(a.accessToken.extendedExpiresOn));const y=a.account;return{authority:l?l.canonicalAuthority:"",uniqueId:a.account.localAccountId,tenantId:a.account.realm,scopes:h,account:Fe.getAccountInfo(y),idToken:a.idToken?.secret||"",idTokenClaims:r||{},accessToken:d,fromCache:!0,expiresOn:g,correlationId:n.correlationId||"",requestId:"",extExpiresOn:m,familyId:a.refreshToken?.familyId||"",tokenType:a?.accessToken?.tokenType||"",state:n.state||"",cloudGraphHostName:y.cloudGraphHostName||"",msGraphHost:y.msGraphHost||"",fromNativeBroker:!1}}}class uw extends sv{constructor(n){super(n),this.includeRedirectUri=!1}}class dw extends Po{constructor(n,a,r,l,d,h,g,m,y,T){super(n,a,r,l,d,h,m,y,T),this.apiId=g}async acquireToken(n){if(!n.code)throw q(Ov);const a=await M(this.initializeAuthorizationRequest.bind(this),v.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,n.correlationId)(n,te.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const l={...a,code:n.code},d=await M(this.getClientConfiguration.bind(this),v.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),h=new uw(d);this.logger.verbose("Auth code client created");const g=new oT(h,this.browserStorage,l,this.logger,this.performanceClient);return await M(g.handleCodeResponseFromServer.bind(g),v.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},a,this.apiId,!1)}catch(l){throw l instanceof xe&&(l.setCorrelationId(this.correlationId),r.cacheFailedRequest(l)),l}}logout(){return Promise.reject(q(vc))}}function hw(u,n,a){const r=window.msal?.clientIds||[],l=r.length,d=r.filter(h=>h===u).length;d>1&&a.warning("There is already an instance of MSAL.js in the window with the same client id."),n.add({msalInstanceCount:l,sameClientIdInstanceCount:d})}function xl(u,n,a){try{df(u)}catch(r){throw n.end({success:!1},r,a),r}}class _c{constructor(n){this.operatingContext=n,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=n.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new mi(this.logger,this.performanceClient):ql,this.eventHandler=new Ub(this.logger),this.browserStorage=this.isBrowserEnvironment?new ch(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,m_(this.config.auth)):bb(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const a={cacheLocation:At.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:At.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new ch(this.config.auth.clientId,a,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new cw(this.config,this.browserStorage,this.logger,this.browserCrypto,this.performanceClient),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(n,a){const r=new _c(n);return await r.initialize(a),r}trackPageVisibility(n){n&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},n))}async initialize(n,a){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Z.INITIALIZE_END);return}const r=n?.correlationId||this.getRequestCorrelationId(),l=this.config.system.allowPlatformBroker,d=this.performanceClient.startMeasurement(v.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Z.INITIALIZE_START),!a)try{this.logMultipleInstances(d)}catch{}if(await M(this.browserStorage.initialize.bind(this.browserStorage),v.InitializeCache,this.logger,this.performanceClient,r)(r),l)try{this.platformAuthProvider=await Zb(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout,this.config.system.allowPlatformBrokerWithDOM)}catch(h){this.logger.verbose(h)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),nn(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),v.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Z.INITIALIZE_END),d.end({allowPlatformBroker:l,success:!0})}async handleRedirectPromise(n){if(this.logger.verbose("handleRedirectPromise called"),$v(this.initialized),this.isBrowserEnvironment){const a=n||"";let r=this.redirectResponse.get(a);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(n),this.redirectResponse.set(a,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(n){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===Zi.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),l=this.browserStorage.getCachedNativeRequest(),d=l&&this.platformAuthProvider&&!n;let h;this.eventHandler.emitEvent(Z.HANDLE_REDIRECT_START,te.Redirect);let g;try{if(d&&this.platformAuthProvider){h=this.performanceClient.startMeasurement(v.AcquireTokenRedirect,l?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),h.add({isPlatformBrokerRequest:!0});const m=new Bl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ye.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,l.accountId,this.nativeInternalStorage,l.correlationId);g=M(m.handleRedirectPromise.bind(m),v.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,h.event.correlationId)(this.performanceClient,h.event.correlationId)}else{const[m,y]=this.browserStorage.getCachedRequest(),T=m.correlationId;h=this.performanceClient.startMeasurement(v.AcquireTokenRedirect,T),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const _=this.createRedirectClient(T);g=M(_.handleRedirectPromise.bind(_),v.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,h.event.correlationId)(n,m,y,h)}}catch(m){throw this.browserStorage.resetRequestCache(),m}return g.then(m=>(m?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Z.LOGIN_SUCCESS,te.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_SUCCESS,te.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),h.end({success:!0},void 0,m.account)):h.event.errorCode?h.end({success:!1},void 0):h.discard(),this.eventHandler.emitEvent(Z.HANDLE_REDIRECT_END,te.Redirect),m)).catch(m=>{this.browserStorage.resetRequestCache();const y=m;throw r.length>0?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,te.Redirect,null,y):this.eventHandler.emitEvent(Z.LOGIN_FAILURE,te.Redirect,null,y),this.eventHandler.emitEvent(Z.HANDLE_REDIRECT_END,te.Redirect),h.end({success:!1},y),m})}async acquireTokenRedirect(n){const a=this.getRequestCorrelationId(n);this.logger.verbose("acquireTokenRedirect called",a);const r=this.performanceClient.startMeasurement(v.AcquireTokenPreRedirect,a);r.add({scenarioId:n.scenarioId});const l=n.onRedirectNavigate;if(l)n.onRedirectNavigate=h=>{const g=typeof l=="function"?l(h):void 0;return r.add({navigateCallbackResult:g!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,g};else{const h=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=g=>{const m=typeof h=="function"?h(g):void 0;return r.add({navigateCallbackResult:m!==!1}),r.event=r.end({success:!0},void 0,n.account)||r.event,m}}const d=this.getAllAccounts().length>0;try{Py(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Zi.SIGNIN),d?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_START,te.Redirect,n):this.eventHandler.emitEvent(Z.LOGIN_START,te.Redirect,n);let h;return this.platformAuthProvider&&this.canUsePlatformBroker(n)?h=new Bl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ye.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(n),this.nativeInternalStorage,a).acquireTokenRedirect(n,r).catch(m=>{if(r.add({brokerErrorName:m.name,brokerErrorCode:m.errorCode}),m instanceof Bn&&Ro(m))return this.platformAuthProvider=void 0,this.createRedirectClient(a).acquireToken(n);if(m instanceof Cn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(a).acquireToken(n);throw m}):h=this.createRedirectClient(a).acquireToken(n),await h}catch(h){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(v.AcquireTokenRedirect,a).end({success:!1},h,n.account):r.end({success:!1},h,n.account),d?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,te.Redirect,null,h):this.eventHandler.emitEvent(Z.LOGIN_FAILURE,te.Redirect,null,h),h}}acquireTokenPopup(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(v.AcquireTokenPopup,a);r.add({scenarioId:n.scenarioId});try{this.logger.verbose("acquireTokenPopup called",a),xl(this.initialized,r,n.account),this.browserStorage.setInteractionInProgress(!0,Zi.SIGNIN)}catch(g){return Promise.reject(g)}const l=this.getAllAccounts();l.length>0?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_START,te.Popup,n):this.eventHandler.emitEvent(Z.LOGIN_START,te.Popup,n);let d;const h=this.getPreGeneratedPkceCodes(a);return this.canUsePlatformBroker(n)?(r.add({isPlatformBrokerRequest:!0}),d=this.acquireTokenNative({...n,correlationId:a},ye.acquireTokenPopup).then(g=>(r.end({success:!0},void 0,g.account),g)).catch(g=>{if(r.add({brokerErrorName:g.name,brokerErrorCode:g.errorCode}),g instanceof Bn&&Ro(g))return this.platformAuthProvider=void 0,this.createPopupClient(a).acquireToken(n,h);if(g instanceof Cn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(a).acquireToken(n,h);throw g})):d=this.createPopupClient(a).acquireToken(n,h),d.then(g=>(l.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Z.LOGIN_SUCCESS,te.Popup,g):this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_SUCCESS,te.Popup,g),r.end({success:!0,accessTokenSize:g.accessToken.length,idTokenSize:g.idToken.length},void 0,g.account),g)).catch(g=>(l.length>0?this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,te.Popup,null,g):this.eventHandler.emitEvent(Z.LOGIN_FAILURE,te.Popup,null,g),r.end({success:!1},g,n.account),Promise.reject(g))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(a)})}trackPageVisibilityWithMeasurement(){const n=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;n&&(this.logger.info("Perf: Visibility change detected in ",n.event.name),n.increment({visibilityChangeCount:1}))}async ssoSilent(n){const a=this.getRequestCorrelationId(n),r={...n,prompt:n.prompt,correlationId:a};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(v.SsoSilent,a),this.ssoSilentMeasurement?.add({scenarioId:n.scenarioId}),xl(this.initialized,this.ssoSilentMeasurement,n.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",a),this.eventHandler.emitEvent(Z.SSO_SILENT_START,te.Silent,r);let l;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),l=this.acquireTokenNative(r,ye.ssoSilent).catch(d=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:d.name,brokerErrorCode:d.errorCode}),d instanceof Bn&&Ro(d))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw d})):l=this.createSilentIframeClient(r.correlationId).acquireToken(r),l.then(d=>(this.eventHandler.emitEvent(Z.SSO_SILENT_SUCCESS,te.Silent,d),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),d)).catch(d=>{throw this.eventHandler.emitEvent(Z.SSO_SILENT_FAILURE,te.Silent,null,d),this.ssoSilentMeasurement?.end({success:!1},d,n.account),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(n){const a=this.getRequestCorrelationId(n);this.logger.trace("acquireTokenByCode called",a);const r=this.performanceClient.startMeasurement(v.AcquireTokenByCode,a);xl(this.initialized,r),this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_START,te.Silent,n),r.add({scenarioId:n.scenarioId});try{if(n.code&&n.nativeAccountId)throw q(Nv);if(n.code){const l=n.code;let d=this.hybridAuthCodeResponses.get(l);return d?(this.logger.verbose("Existing acquireTokenByCode request found",a),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",a),d=this.acquireTokenByCodeAsync({...n,correlationId:a}).then(h=>(this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_SUCCESS,te.Silent,h),this.hybridAuthCodeResponses.delete(l),r.end({success:!0,accessTokenSize:h.accessToken.length,idTokenSize:h.idToken.length},void 0,h.account),h)).catch(h=>{throw this.hybridAuthCodeResponses.delete(l),this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_FAILURE,te.Silent,null,h),r.end({success:!1},h),h}),this.hybridAuthCodeResponses.set(l,d)),await d}else if(n.nativeAccountId)if(this.canUsePlatformBroker(n,n.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const l=await this.acquireTokenNative({...n,correlationId:a},ye.acquireTokenByCode,n.nativeAccountId).catch(d=>{throw d instanceof Bn&&Ro(d)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:d.name,brokerErrorCode:d.errorCode}),d});return r.end({success:!0},void 0,l.account),l}else throw q(Dv);else throw q(Mv)}catch(l){throw this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_BY_CODE_FAILURE,te.Silent,null,l),r.end({success:!1},l),l}}async acquireTokenByCodeAsync(n){return this.logger.trace("acquireTokenByCodeAsync called",n.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(v.AcquireTokenByCodeAsync,n.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(n.correlationId).acquireToken(n).then(l=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:l.fromCache}),l)).catch(l=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},l),l}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(n,a){switch(this.performanceClient.addQueueMeasurement(v.AcquireTokenFromCache,n.correlationId),a){case Dt.Default:case Dt.AccessToken:case Dt.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(n.correlationId);return M(r.acquireToken.bind(r),v.SilentCacheClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw B(ea)}}async acquireTokenByRefreshToken(n,a){switch(this.performanceClient.addQueueMeasurement(v.AcquireTokenByRefreshToken,n.correlationId),a){case Dt.Default:case Dt.AccessTokenAndRefreshToken:case Dt.RefreshToken:case Dt.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(n.correlationId);return M(r.acquireToken.bind(r),v.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n);default:throw B(ea)}}async acquireTokenBySilentIframe(n){this.performanceClient.addQueueMeasurement(v.AcquireTokenBySilentIframe,n.correlationId);const a=this.createSilentIframeClient(n.correlationId);return M(a.acquireToken.bind(a),v.SilentIframeClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(n)}async logout(n){const a=this.getRequestCorrelationId(n);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",a),this.logoutRedirect({correlationId:a,...n})}async logoutRedirect(n){const a=this.getRequestCorrelationId(n);return Py(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Zi.SIGNOUT),this.createRedirectClient(a).logout(n)}logoutPopup(n){try{const a=this.getRequestCorrelationId(n);return df(this.initialized),this.browserStorage.setInteractionInProgress(!0,Zi.SIGNOUT),this.createPopupClient(a).logout(n).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(a){return Promise.reject(a)}}async clearCache(n){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const a=this.getRequestCorrelationId(n);return this.createSilentCacheClient(a).logout(n)}getAllAccounts(n){const a=this.getRequestCorrelationId();return wb(this.logger,this.browserStorage,this.isBrowserEnvironment,a,n)}getAccount(n){const a=this.getRequestCorrelationId();return Rb(n,this.logger,this.browserStorage,a)}getAccountByUsername(n){const a=this.getRequestCorrelationId();return Ib(n,this.logger,this.browserStorage,a)}getAccountByHomeId(n){const a=this.getRequestCorrelationId();return kb(n,this.logger,this.browserStorage,a)}getAccountByLocalId(n){const a=this.getRequestCorrelationId();return Ob(n,this.logger,this.browserStorage,a)}setActiveAccount(n){const a=this.getRequestCorrelationId();Mb(n,this.browserStorage,a)}getActiveAccount(){const n=this.getRequestCorrelationId();return Nb(this.browserStorage,n)}async hydrateCache(n,a){this.logger.verbose("hydrateCache called");const r=Fe.createFromAccountInfo(n.account,n.cloudGraphHostName,n.msGraphHost);return await this.browserStorage.setAccount(r,n.correlationId,Gn(n.idTokenClaims),ye.hydrateCache),n.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(n,a)):this.browserStorage.hydrateCache(n,a)}async acquireTokenNative(n,a,r,l){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw q(ef);return new Bl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,a,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(n),this.nativeInternalStorage,n.correlationId).acquireToken(n,l)}canUsePlatformBroker(n,a){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Zr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(n.prompt)switch(n.prompt){case St.NONE:case St.CONSENT:case St.LOGIN:case St.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${n.prompt} is not compatible with platform broker flow, returning false`),!1}return!a&&!this.getNativeAccountId(n)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(n){const a=n.account||this.getAccount({loginHint:n.loginHint,sid:n.sid})||this.getActiveAccount();return a&&a.nativeAccountId||""}createPopupClient(n){return new $b(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createRedirectClient(n){return new ew(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentIframeClient(n){return new sw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ye.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,n)}createSilentCacheClient(n){return new sT(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentRefreshClient(n){return new lw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,n)}createSilentAuthCodeClient(n){return new dw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ye.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,n)}addEventCallback(n,a){return this.eventHandler.addEventCallback(n,a)}removeEventCallback(n){this.eventHandler.removeEventCallback(n)}addPerformanceCallback(n){return Zv(),this.performanceClient.addPerformanceCallback(n)}removePerformanceCallback(n){return this.performanceClient.removePerformanceCallback(n)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==At.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==At.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(n){this.logger=n}initializeWrapperLibrary(n,a){this.browserStorage.setWrapperMetadata(n,a)}setNavigationClient(n){this.navigationClient=n}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(n){return n?.correlationId?n.correlationId:this.isBrowserEnvironment?On():z.EMPTY_STRING}async loginRedirect(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginRedirect called",a),this.acquireTokenRedirect({correlationId:a,...n||Uy})}loginPopup(n){const a=this.getRequestCorrelationId(n);return this.logger.verbose("loginPopup called",a),this.acquireTokenPopup({correlationId:a,...n||Uy})}async acquireTokenSilent(n){const a=this.getRequestCorrelationId(n),r=this.performanceClient.startMeasurement(v.AcquireTokenSilent,a);r.add({cacheLookupPolicy:n.cacheLookupPolicy,scenarioId:n.scenarioId}),xl(this.initialized,r,n.account),this.logger.verbose("acquireTokenSilent called",a);const l=n.account||this.getActiveAccount();if(!l)throw q(_v);return this.acquireTokenSilentDeduped(n,l,a).then(d=>(r.end({success:!0,fromCache:d.fromCache,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),{...d,state:n.state,correlationId:a})).catch(d=>{throw d instanceof xe&&d.setCorrelationId(a),r.end({success:!1},d,l),d})}async acquireTokenSilentDeduped(n,a,r){const l=mc(this.config.auth.clientId,{...n,authority:n.authority||this.config.auth.authority},a.homeAccountId),d=JSON.stringify(l),h=this.activeSilentTokenRequests.get(d);if(typeof h>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const g=M(this.acquireTokenSilentAsync.bind(this),v.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...n,correlationId:r},a);return this.activeSilentTokenRequests.set(d,g),g.finally(()=>{this.activeSilentTokenRequests.delete(d)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),h}async acquireTokenSilentAsync(n,a){const r=()=>this.trackPageVisibility(n.correlationId);this.performanceClient.addQueueMeasurement(v.AcquireTokenSilentAsync,n.correlationId),this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_START,te.Silent,n),n.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},n.correlationId),document.addEventListener("visibilitychange",r);const l=await M(xb,v.InitializeSilentRequest,this.logger,this.performanceClient,n.correlationId)(n,a,this.config,this.performanceClient,this.logger),d=n.cacheLookupPolicy||Dt.Default;return this.acquireTokenSilentNoIframe(l,d).catch(async g=>{if(fw(g,d))if(this.activeIframeRequest)if(d!==Dt.Skip){const[y,T]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${T}`,l.correlationId);const _=this.performanceClient.startMeasurement(v.AwaitConcurrentIframe,l.correlationId);_.add({awaitIframeCorrelationId:T});const O=await y;if(_.end({success:O}),O)return this.logger.verbose(`Parallel iframe request with correlationId: ${T} succeeded. Retrying cache and/or RT redemption`,l.correlationId),this.acquireTokenSilentNoIframe(l,d);throw this.logger.info(`Iframe request with correlationId: ${T} failed. Interaction is required.`),g}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",l.correlationId),M(this.acquireTokenBySilentIframe.bind(this),v.AcquireTokenBySilentIframe,this.logger,this.performanceClient,l.correlationId)(l);else{let y;return this.activeIframeRequest=[new Promise(T=>{y=T}),l.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",l.correlationId),M(this.acquireTokenBySilentIframe.bind(this),v.AcquireTokenBySilentIframe,this.logger,this.performanceClient,l.correlationId)(l).then(T=>(y(!0),T)).catch(T=>{throw y(!1),T}).finally(()=>{this.activeIframeRequest=void 0})}else throw g}).then(g=>(this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_SUCCESS,te.Silent,g),this.performanceClient.addFields({fromCache:g.fromCache},n.correlationId),g)).catch(g=>{throw this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_FAILURE,te.Silent,null,g),g}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(n,a){return Zr(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme)&&n.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},n.correlationId),this.acquireTokenNative(n,ye.acquireTokenSilent_silentFlow,n.account.nativeAccountId,a).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},n.correlationId),r instanceof Bn&&Ro(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,B(ea)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),a===Dt.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),M(this.acquireTokenFromCache.bind(this),v.AcquireTokenFromCache,this.logger,this.performanceClient,n.correlationId)(n,a).catch(r=>{if(a===Dt.AccessToken)throw r;return this.eventHandler.emitEvent(Z.ACQUIRE_TOKEN_NETWORK_START,te.Silent,n),M(this.acquireTokenByRefreshToken.bind(this),v.AcquireTokenByRefreshToken,this.logger,this.performanceClient,n.correlationId)(n,a)}))}async preGeneratePkceCodes(n){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await M(Pa,v.GeneratePkceCodes,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),Promise.resolve()}getPreGeneratedPkceCodes(n){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const a=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${a?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!a},n),a}logMultipleInstances(n){const a=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(a),hw(a,n,this.logger)}}function fw(u,n){const a=!(u instanceof Cn&&u.subError!==yc),r=u.errorCode===jt.INVALID_GRANT_ERROR||u.errorCode===ea,l=a&&r||u.errorCode===Wl||u.errorCode===jh,d=q_.includes(n);return l&&d}async function gw(u,n){const a=new za(u);return await a.initialize(),_c.createController(a,n)}class Tf{static async createPublicClientApplication(n){const a=await gw(n);return new Tf(n,a)}constructor(n,a){this.isBroker=!1,this.controller=a||new _c(new za(n))}async initialize(n){return this.controller.initialize(n,this.isBroker)}async acquireTokenPopup(n){return this.controller.acquireTokenPopup(n)}acquireTokenRedirect(n){return this.controller.acquireTokenRedirect(n)}acquireTokenSilent(n){return this.controller.acquireTokenSilent(n)}acquireTokenByCode(n){return this.controller.acquireTokenByCode(n)}addEventCallback(n,a){return this.controller.addEventCallback(n,a)}removeEventCallback(n){return this.controller.removeEventCallback(n)}addPerformanceCallback(n){return this.controller.addPerformanceCallback(n)}removePerformanceCallback(n){return this.controller.removePerformanceCallback(n)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(n){return this.controller.getAccount(n)}getAccountByHomeId(n){return this.controller.getAccountByHomeId(n)}getAccountByLocalId(n){return this.controller.getAccountByLocalId(n)}getAccountByUsername(n){return this.controller.getAccountByUsername(n)}getAllAccounts(n){return this.controller.getAllAccounts(n)}handleRedirectPromise(n){return this.controller.handleRedirectPromise(n)}loginPopup(n){return this.controller.loginPopup(n)}loginRedirect(n){return this.controller.loginRedirect(n)}logout(n){return this.controller.logout(n)}logoutRedirect(n){return this.controller.logoutRedirect(n)}logoutPopup(n){return this.controller.logoutPopup(n)}ssoSilent(n){return this.controller.ssoSilent(n)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(n){this.controller.setLogger(n)}setActiveAccount(n){this.controller.setActiveAccount(n)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(n,a){return this.controller.initializeWrapperLibrary(n,a)}setNavigationClient(n){this.controller.setNavigationClient(n)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(n,a){return this.controller.hydrateCache(n,a)}clearCache(n){return this.controller.clearCache(n)}}const mw="81dcae7c-55a9-4e4e-86e1-e364b25fc990",pw="https://login.microsoftonline.com/common",yw="https://localhost:8443/",uh=["User.Read","Mail.Read"],yn=new Tf({auth:{clientId:mw,authority:pw,redirectUri:yw},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}});let Fd=null;function bc(){return Fd||(Fd=yn.initialize()),Fd}const Sf="msal_last_user";function uT(u){if(u)try{localStorage.setItem(Sf,u)}catch{}}function Cw(){try{return localStorage.getItem(Sf)}catch{return null}}function Jy(){try{localStorage.removeItem(Sf)}catch{}}function Af(u){if(!u.length)return null;const n=yn.getActiveAccount();if(n)return n;const a=Cw();if(a){const r=u.find(l=>l.username?.toLowerCase()===a.toLowerCase());if(r)return r}return u[0]}async function vw(){await bc();const u=await yn.loginPopup({scopes:uh,prompt:"select_account"});return u.account&&(yn.setActiveAccount(u.account),uT(u.account.username)),(await yn.acquireTokenSilent({account:u.account,scopes:uh})).accessToken}async function Tw(){await bc();const u=yn.getAllAccounts(),n=Af(u);if(!n)return null;try{const a=await yn.acquireTokenSilent({account:n,scopes:uh});return yn.setActiveAccount(n),uT(n.username),a.accessToken}catch(a){if(a instanceof Cn)return null;throw a}}async function Zy(){await bc();const u=yn.getAllAccounts(),n=Af(u);return n?(yn.setActiveAccount(n),{username:n.username,name:n.name}):null}async function Sw(){await bc();const u=yn.getAllAccounts(),n=Af(u);if(!n){Jy();return}Jy(),await yn.logoutPopup({account:n})}const Aw="",Ew=Aw.replace(/\/+$/,"");async function jn(u,n,a={}){const r=`${Ew}${u}`,l={"Content-Type":"application/json",...a.headers||{}};n&&(l.Authorization=`Bearer ${n}`);const d=await fetch(r,{...a,headers:l});if(!d.ok){const h=await d.text();throw new Error(`backend ${d.status}: ${h}`)}return d.json()}function $y(){return jn("/index/status",null)}function _w(u,n=50){return jn(`/index/ingestions?limit=${encodeURIComponent(String(n))}`,u)}function bw(u,n){return jn("/index/clear_ingestion",u,{method:"POST",body:JSON.stringify({ingestion_id:n})})}function ww(u){return jn("/graph/folders",u)}function Rw(u,n,a=25){const r=new URLSearchParams({folder_id:n,top:String(a)}).toString();return jn(`/graph/messages?${r}`,u)}function Qd(u,n){const a=new URLSearchParams;return n.folder_id&&a.set("folder_id",n.folder_id),typeof n.top=="number"&&a.set("top",String(n.top)),n.next_link&&a.set("next_link",n.next_link),jn(`/graph/messages_page?${a.toString()}`,u)}function Iw(u,n){const a=new URLSearchParams({message_id:n}).toString();return jn(`/graph/message_link?${a}`,u)}function kw(u,n,a,r){return jn("/ingest",u,{method:"POST",body:JSON.stringify({folder_id:n,message_ids:a,ingestion_id:r?.ingestion_id,ingestion_label:r?.ingestion_label,ingest_mode:r?.ingest_mode})})}function Ow(u,n,a=4){return jn("/query",u,{method:"POST",body:JSON.stringify({question:n,n_results:a})})}function Mw(u){return jn("/clear",u,{method:"POST",body:JSON.stringify({})})}function Nw(u,n){return u?u.length<=n?u:u.slice(0,n)+"":""}function Vd(u){return u?u.replace("T"," "):""}function Dw(u){return Array.from(new Set(u))}function Xd(u){return new Promise(n=>setTimeout(n,u))}function Uw(u,n){const a=[];for(let r=0;r<u.length;r+=n)a.push(u.slice(r,r+n));return a}function xw(){const u=new Date,n=a=>String(a).padStart(2,"0");return`${u.getFullYear()}-${n(u.getMonth()+1)}-${n(u.getDate())}T${n(u.getHours())}:${n(u.getMinutes())}:${n(u.getSeconds())}`}function Hw(){const u=globalThis.crypto;return u?.randomUUID?u.randomUUID():`ing_${Date.now()}_${Math.random().toString(16).slice(2)}`}function Wy(u){try{const r=window?.Office?.context?.mailbox,l=r?.convertToLocalClientUrl;if(typeof l=="function"){const d=l.call(r,u);if(typeof d=="string"&&d.length>0)return d}}catch{}return null}function Lw(){const[u,n]=ne.useState("SIGNIN"),[a,r]=ne.useState("starting..."),[l,d]=ne.useState(""),[h,g]=ne.useState(""),[m,y]=ne.useState("");function T(x,K=""){g(x),y(K)}const[_,O]=ne.useState(!1),[P,J]=ne.useState(""),[V,Ce]=ne.useState(""),[ve,de]=ne.useState(null),[Te,Ke]=ne.useState(!1),[Qe,Je]=ne.useState([]),[ce,ht]=ne.useState("ALL"),[It,qn]=ne.useState("");async function an(){try{const x=await _w(null,50);Je(x.ingestions||[]),!It&&(x.ingestions||[]).length&&qn(x.ingestions[0].ingestion_id||"")}catch{}}async function Ze(x=null){const K=await $y();de(K),(K?.indexed_count||0)<=0?(n("INDEX"),Ke(!0)):x?n(x):u==="SIGNIN"&&n("CHAT"),await an()}const[kt,on]=ne.useState([]),[Ot,D]=ne.useState(""),[G,$]=ne.useState(""),[Se,Ae]=ne.useState([]),[A,H]=ne.useState(""),[j,Y]=ne.useState(null),[ie,ae]=ne.useState("SELECT"),[oe,rt]=ne.useState("FOLDERS"),[Re,pi]=ne.useState(new Set),[vn,Ka]=ne.useState(100),[Mn,Ft]=ne.useState(new Set),[oa,ra]=ne.useState(!1),[Bo,Ga]=ne.useState(!1),[ja,Yn]=ne.useState("FETCHING"),[yi,Wr]=ne.useState(null),[wc,ut]=ne.useState(0),[Rc,qa]=ne.useState(0),[es,Fn]=ne.useState(!1),[Ic,Nn]=ne.useState(""),[kc,ts]=ne.useState(""),Tn=ne.useRef(null),$e=ne.useRef(!1),ft=ne.useRef(!1),je=ne.useRef(null);function ns(){return new Promise(x=>{je.current=x})}const is=ne.useRef(""),[as,sa]=ne.useState(""),[Ya,la]=ne.useState(""),[Dn,ca]=ne.useState([]),[ua,Fa]=ne.useState(!1),[Ko,Qn]=ne.useState(!1),da=ne.useMemo(()=>["You are about to store selected email content locally on this device.","This tool stores selected email text locally for search and question answering.","No email content is uploaded to a remote server by this tool.","You can clear the local index at any time."].join(" "),[]);async function os(x){d("loading folders...");const K=await ww(x);on(K.folders||[]),d("")}async function rs(){T(""),r("checking session..."),d("");try{const x=await Tw();if(!x){O(!1),J(""),Ce(""),de(null),n("SIGNIN"),r("not signed in");return}O(!0),J(x);const K=await Zy();Ce(K?.username||K?.name||""),r("loading local index status..."),await Ze(),r("loading folders..."),await os(x),r("ready")}catch(x){O(!1),J(""),Ce(""),de(null),n("SIGNIN"),r("error"),T("Initialization failed. Please try signing in again.",String(x?.message||x))}}ne.useEffect(()=>{rs().catch(()=>{})},[]);async function ss(){T(""),d("signing in...");try{const x=await vw();O(!0),J(x);const K=await Zy();Ce(K?.username||K?.name||""),r("loading local index status..."),await Ze(),r("loading folders..."),await os(x),r("ready")}catch(x){O(!1),J(""),Ce(""),de(null),n("SIGNIN"),r("error"),T("Sign in failed. Please try again.",String(x?.message||x))}finally{d("")}}async function ls(){T(""),d("signing out...");try{await Sw(),O(!1),J(""),Ce(""),de(null),on([]),ha(),sa(""),la(""),ca([]),n("SIGNIN"),r("not signed in")}catch(x){r("error"),T("Sign out failed.",String(x?.message||x))}finally{d("")}}function ha(){ae("SELECT"),rt("FOLDERS"),pi(new Set),Ka(100),$(""),Ae([]),H(""),Y(null),Ft(new Set),ra(!1),Ga(!1),Yn("FETCHING"),Wr(null),ut(0),qa(0),Fn(!1),Nn(""),ts(""),Tn.current=null,$e.current=!1,ft.current=!1,je.current=null,is.current=""}const Go=(ve?.indexed_count||0)<=0,jo=ne.useMemo(()=>{const x=Ot.trim().toLowerCase();return x?kt.filter(K=>(K.displayName||"").toLowerCase().includes(x)):kt},[kt,Ot]),fa=ne.useMemo(()=>{const x=A.trim().toLowerCase();return x?Se.filter(K=>{const W=(K.subject||"").toLowerCase(),et=(K.from?.emailAddress?.address||"").toLowerCase();return W.includes(x)||et.includes(x)}):Se},[Se,A]);function Un(x){pi(K=>{const W=new Set(K);return W.has(x)?W.delete(x):W.add(x),W})}function st(x){Ft(K=>{const W=new Set(K);return W.has(x)?W.delete(x):W.add(x),W})}function Et(){Ft(x=>{const K=new Set(x);for(const W of fa)K.add(W.id);return K})}function Ci(){Ft(new Set)}const Sn=ne.useMemo(()=>{const x=Re.size,K=Mn.size,W=x?kt.filter(Ge=>Re.has(Ge.id)).reduce((Ge,Mt)=>Ge+Math.min(vn,Mt.totalItemCount||vn),0):0,et=oe==="FOLDERS"?W:K;return{folderCount:x,emailCount:K,approxFolderTotal:W,effectiveTotal:et,large:et>=200}},[Re,Mn,kt,oe,vn]);async function Oc(x){if($(x),Ae([]),Y(null),Ft(new Set),H(""),!!x&&!(!_||!P)){d("loading messages..."),T("");try{const K=await Rw(P,x,25);Ae(K.value||[]),Y(K["@odata.nextLink"]||null)}catch(K){T("Failed to load messages. Please try again.",String(K?.message||K))}finally{d("")}}}async function Mc(){if(!(!_||!P)&&j){d("loading more messages..."),T("");try{const x=await Qd(P,{next_link:j,top:25}),K=x.value||[];Ae(W=>[...W,...K]),Y(x["@odata.nextLink"]||null)}catch(x){T("Failed to load more messages. Please try again.",String(x?.message||x))}finally{d("")}}}function cs(){return oe==="FOLDERS"?Re.size>0:Mn.size>0}function ga(){T(""),ra(!1),Ga(!1),Nn(""),ae("PREVIEW")}function qo(){T(""),Nn(""),ae("SELECT")}function vi(){ft.current=!0,Fn(!0)}function Ti(){Fn(!1),ft.current=!1,je.current?.("continue"),je.current=null}function ma(){Fn(!1),$e.current=!0,ft.current=!1,je.current?.("cancel"),je.current=null,Tn.current&&Tn.current.abort(),Nn("Indexing cancelled. Some items may already be indexed."),ae("CANCELLED")}async function Si(){if(!_||!P){alert("Please sign in first.");return}if(!oa||Sn.large&&!Bo)return;T(""),Nn(""),$e.current=!1,ft.current=!1,je.current=null;const x=Hw();is.current=x;const K=`${oe} ${xw()}`;ae("RUNNING"),Yn("FETCHING"),Wr(Sn.effectiveTotal||null),ut(0),qa(0);const W=300;let et=Date.now();const rn=new AbortController;Tn.current=rn;try{let Ge=[];if(oe==="EMAILS")Ge=Array.from(Mn),ut(Ge.length);else{const gt=kt.filter(_i=>Re.has(_i.id)),Vo=[];let Ts=0;for(const _i of gt){const sn=Math.max(1,vn);let bi=null,pa=0;for(;pa<sn;){if(ft.current&&await ns()==="cancel")throw new Error("CANCELLED_BY_USER");if(rn.signal.aborted||$e.current)throw new Error("CANCELLED_BY_USER");let En;bi?En=await Qd(P,{next_link:bi,top:25}):En=await Qd(P,{folder_id:_i.id,top:25});const Xn=En.value||[];if(bi=En["@odata.nextLink"]||null,!Xn.length)break;for(const Xo of Xn){if(pa>=sn)break;Vo.push(Xo.id),pa+=1,Ts+=1,ut(Ts)}if(!bi)break}}Ge=Dw(Vo)}if(!Ge.length)throw new Error("No messages selected.");{const gt=Date.now()-et;gt<W&&await Xd(W-gt)}Yn("STORING"),et=Date.now();const ys=oe==="EMAILS"?G||"selected":"multi",Ei=Uw(Ge,5);let Cs=0;for(const gt of Ei){if(ft.current&&await ns()==="cancel")throw new Error("CANCELLED_BY_USER");if($e.current)throw new Error("CANCELLED_BY_USER");await kw(P,ys,gt,{ingestion_id:x,ingestion_label:K,ingest_mode:oe}),Cs+=gt.length,qa(Cs)}{const gt=Date.now()-et;gt<W&&await Xd(W-gt)}Yn("INDEXING"),et=Date.now();{const gt=Date.now()-et;gt<W&&await Xd(W-gt)}Yn("DONE"),await Ze();const Qo=await $y();de(Qo);const vs=oe==="EMAILS"?`Indexed ${Ge.length} selected emails.`:`Indexed ${Ge.length} emails from selected folder(s).`;ts(`${vs} Index updated at ${Vd(Qo.last_updated)}.`),ae("COMPLETE")}catch(Ge){const Mt=String(Ge?.message||Ge);if(Mt==="CANCELLED_BY_USER"){await Ze(),Nn("Indexing cancelled. Some items may already be indexed."),ae("CANCELLED");return}ae("SELECT"),T("Indexing failed. If the local index is unavailable, clear local index and try again.",Mt)}finally{Tn.current=null,d(""),ft.current=!1,je.current=null}}async function We(){if(!(!_||!P)){T(""),d("clearing local index...");try{if(ce==="ALL")await Mw(P);else{if(!It)throw new Error("No ingestion selected.");await bw(null,It)}await Ze("INDEX"),ha(),Fa(!1),Qn(!1)}catch(x){T("Failed to clear. Please try again.",String(x?.message||x))}finally{d("")}}}async function us(){if(!_||!P){alert("Please sign in first.");return}const x=as.trim();if(x){d("querying local index..."),T("");try{const K=await Ow(P,x,4);la(K.answer||""),ca(K.sources||[])}catch(K){T("Query failed. If the local index is unavailable, clear it and re-ingest.",String(K?.message||K))}finally{d("")}}}function ds(){return h?E.jsx("div",{style:{marginTop:10},children:E.jsxs("div",{style:{border:"1px solid #c00",padding:10,background:"#fff5f5"},children:[E.jsx("strong",{children:"Error"}),E.jsx("div",{style:{marginTop:6,fontSize:12},children:h}),m?E.jsxs("details",{style:{marginTop:8},children:[E.jsx("summary",{style:{cursor:"pointer",fontSize:12},children:"Show details"}),E.jsx("pre",{style:{whiteSpace:"pre-wrap",marginTop:8,fontSize:12},children:m})]}):null]})}):null}function Vn(){return E.jsxs("div",{style:{marginBottom:10},children:[E.jsx("h2",{style:{marginTop:0,marginBottom:6},children:"Outlook Privacy Assistant"}),E.jsxs("div",{style:{fontSize:12,opacity:.85},children:[E.jsx("strong",{children:"Status:"})," ",a," ",l?` ${l}`:"",_&&V?E.jsxs("span",{children:["  ",E.jsx("strong",{children:"Signed in:"})," ",V]}):null]}),_?E.jsxs("div",{style:{display:"flex",gap:8,marginTop:10,flexWrap:"wrap"},children:[E.jsx("button",{onClick:()=>n("CHAT"),disabled:(ve?.indexed_count||0)<=0,title:(ve?.indexed_count||0)<=0?"Index emails first":"Go to chat",children:"Chat"}),E.jsx("button",{onClick:()=>n("INDEX"),children:"Index management"}),E.jsx("button",{onClick:()=>ls(),children:"Sign out"})]}):null,ds(),E.jsx("hr",{style:{marginTop:12}})]})}function Ai(){return E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:12,opacity:.85},children:"Sign in to access Microsoft Graph and fetch emails for local indexing."}),E.jsx("div",{style:{marginTop:10},children:E.jsx("button",{onClick:()=>ss(),children:"Sign in"})})]})}function Nc(){return ja==="FETCHING"?wc:Rc}function hs(){const x=[{key:"FETCHING",label:"Fetching emails"},{key:"STORING",label:"Storing locally"},{key:"INDEXING",label:"Indexing for search"},{key:"DONE",label:"Done"}],K=x.findIndex(et=>et.key===ja),W=Nc();return E.jsxs("div",{style:{border:"1px solid #ddd",padding:10,background:"#fafafa"},children:[E.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:6},children:E.jsx("strong",{children:"Progress"})}),E.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",fontSize:12},children:x.map((et,rn)=>{const Ge=rn===K,Mt=rn<K;return E.jsxs("span",{style:{padding:"2px 6px",border:"1px solid #ddd",background:Ge?"#fff":Mt?"#f0f0f0":"#fafafa"},children:[Mt?" ":Ge?" ":"",et.label]},et.key)})}),E.jsxs("div",{style:{marginTop:10},children:[E.jsx("div",{style:{height:8,background:"#eee",borderRadius:4,overflow:"hidden"},children:E.jsx("div",{style:{height:8,width:yi?`${Math.min(100,Math.round(W/Math.max(1,yi)*100))}%`:"25%",background:"#bbb"}})}),E.jsx("div",{style:{fontSize:12,opacity:.8,marginTop:6},children:yi?E.jsxs("span",{children:["Processed ",W," / ",yi," emails"]}):E.jsxs("span",{children:["Processed ",W," emails"]})})]}),E.jsx("div",{style:{marginTop:10},children:E.jsx("button",{onClick:vi,children:"Cancel"})})]})}function fs(){return es?E.jsxs("div",{style:{border:"2px solid #c00",padding:12,background:"#fff5f5",marginTop:10},children:[E.jsx("strong",{children:"Cancel indexing now?"}),E.jsx("div",{style:{fontSize:12,marginTop:6},children:"Indexing is paused. Some emails may already be indexed."}),E.jsxs("div",{style:{marginTop:10},children:[E.jsx("button",{onClick:Ti,children:"Continue indexing"})," ",E.jsx("button",{onClick:ma,children:"Cancel indexing now"})]})]}):null}function gs(){if(!ua)return null;const x=Qe.length>0;return E.jsxs("div",{style:{border:"2px solid #c00",padding:12,background:"#fff5f5",marginTop:10},children:[E.jsx("strong",{children:"Clear local index?"}),E.jsxs("div",{style:{marginTop:10,fontSize:12},children:[E.jsxs("label",{style:{display:"block",marginBottom:6},children:[E.jsx("input",{type:"radio",name:"clearMode",checked:ce==="ALL",onChange:()=>ht("ALL")})," ","Clear entire index (all ingestions)"]}),E.jsxs("label",{style:{display:"block",marginBottom:6,opacity:x?1:.5},children:[E.jsx("input",{type:"radio",name:"clearMode",checked:ce==="ONE",disabled:!x,onChange:()=>ht("ONE")})," ","Clear a specific ingestion run"]}),ce==="ONE"?E.jsxs("div",{style:{marginTop:8},children:[E.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:4},children:"Select ingestion"}),E.jsx("select",{style:{width:"100%"},value:It,onChange:K=>qn(K.target.value),disabled:!x,children:Qe.map(K=>E.jsxs("option",{value:K.ingestion_id,children:[K.created_at,"  ",K.label,"  ",K.email_count," emails"]},K.ingestion_id))})]}):null]}),E.jsxs("ul",{style:{marginTop:10,fontSize:12},children:[E.jsx("li",{children:"Deletes locally stored indexed email text"}),E.jsx("li",{children:"Deletes local search index entries for the selected scope"}),E.jsx("li",{children:"Cannot be undone"})]}),E.jsxs("label",{style:{display:"block",fontSize:12,marginTop:8},children:[E.jsx("input",{type:"checkbox",checked:Ko,onChange:K=>Qn(K.target.checked)})," ","I understand this cannot be undone."]}),E.jsxs("div",{style:{marginTop:10},children:[E.jsx("button",{disabled:!Ko,onClick:We,children:"Clear"})," ",E.jsx("button",{onClick:()=>{Fa(!1),Qn(!1)},children:"Cancel"})]})]})}function Qa(){return E.jsxs("div",{children:[Go?E.jsxs("div",{style:{border:"1px solid #c00",padding:10,background:"#fff5f5",marginBottom:10},children:[E.jsx("strong",{children:"No emails indexed yet"}),E.jsx("div",{style:{fontSize:12,marginTop:6},children:"Select folders or individual emails to index locally."})]}):E.jsx("div",{style:{border:"1px solid #ddd",padding:10,background:"#fafafa",marginBottom:10},children:E.jsxs("div",{style:{fontSize:12},children:[E.jsx("strong",{children:"Indexed:"})," ",ve?.indexed_count??0," emails  ",E.jsx("strong",{children:"Last updated:"})," ",Vd(ve?.last_updated)]})}),E.jsx("h3",{style:{marginTop:0},children:"Index management"}),E.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:10},children:[E.jsx("button",{onClick:()=>rt("FOLDERS"),disabled:oe==="FOLDERS",children:"Select folders"}),E.jsx("button",{onClick:()=>rt("EMAILS"),disabled:oe==="EMAILS",children:"Select emails"})]}),oe==="FOLDERS"?E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:6},children:"Choose one or more folders. The system will index the latest N emails per folder."}),E.jsx("label",{style:{display:"block",fontSize:12,opacity:.85},children:"Folder filter"}),E.jsx("input",{value:Ot,onChange:x=>D(x.target.value),placeholder:"Type to filter folders...",style:{width:"100%",marginBottom:8}}),E.jsx("label",{style:{display:"block",fontSize:12,opacity:.85},children:"Per-folder limit (latest emails)"}),E.jsx("input",{type:"number",value:vn,min:1,max:2e3,onChange:x=>Ka(Math.max(1,Math.min(2e3,Number(x.target.value||100)))),style:{width:"100%",marginBottom:8}}),E.jsxs("div",{style:{maxHeight:220,overflow:"auto",border:"1px solid #ddd",padding:6},children:[jo.map(x=>{const K=Re.has(x.id);return E.jsxs("label",{style:{display:"block",padding:"6px 4px",borderBottom:"1px solid #eee"},children:[E.jsx("input",{type:"checkbox",checked:K,onChange:()=>Un(x.id)})," ",E.jsx("strong",{children:x.displayName})," ",E.jsx("span",{style:{fontSize:12,opacity:.8},children:typeof x.totalItemCount=="number"?`(${x.totalItemCount})`:""})]},x.id)}),jo.length?null:E.jsx("div",{style:{fontSize:12,opacity:.8,padding:6},children:"No folders match your filter."})]})]}):E.jsxs("div",{children:[E.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:6},children:"Select a folder, then choose individual emails."}),E.jsx("label",{style:{display:"block",fontSize:12,opacity:.85},children:"Folder"}),E.jsxs("select",{style:{width:"100%",marginBottom:8},value:G,onChange:x=>Oc(x.target.value),disabled:!_,children:[E.jsx("option",{value:"",children:"Select"}),kt.map(x=>E.jsxs("option",{value:x.id,children:[x.displayName," ",typeof x.totalItemCount=="number"?`(${x.totalItemCount})`:""]},x.id))]}),E.jsx("label",{style:{display:"block",fontSize:12,opacity:.85},children:"Email filter"}),E.jsx("input",{value:A,onChange:x=>H(x.target.value),placeholder:"Filter by subject or sender...",style:{width:"100%",marginBottom:8}}),E.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:[E.jsx("button",{disabled:!fa.length,onClick:Et,children:"Select all (filtered)"}),E.jsx("button",{disabled:!Mn.size,onClick:Ci,children:"Clear selection"}),E.jsx("button",{disabled:!j,onClick:Mc,children:"Load more"})]}),E.jsx("div",{style:{maxHeight:220,overflow:"auto",border:"1px solid #ddd",padding:6},children:fa.length?fa.map(x=>{const K=x.from?.emailAddress?.address||"",W=Mn.has(x.id);return E.jsxs("label",{style:{display:"block",padding:"6px 4px",borderBottom:"1px solid #eee"},children:[E.jsx("input",{type:"checkbox",checked:W,onChange:()=>st(x.id)})," ",E.jsx("strong",{children:x.subject||"(no subject)"}),E.jsxs("div",{style:{fontSize:12,opacity:.85},children:[K,"  ",x.receivedDateTime||""]}),E.jsx("div",{style:{fontSize:12},children:Nw(x.bodyPreview||"",160)})]},x.id)}):E.jsx("div",{style:{fontSize:12,opacity:.8,padding:6},children:G?"No messages loaded yet (or none match filter).":"Select a folder to view emails."})})]}),E.jsxs("div",{style:{border:"1px solid #eee",padding:10,marginTop:10},children:[E.jsx("div",{style:{fontSize:12},children:E.jsx("strong",{children:"Selection summary"})}),E.jsxs("div",{style:{fontSize:12,opacity:.85,marginTop:6},children:["Folders selected: ",Re.size,"  Emails selected: ",Mn.size]}),E.jsxs("div",{style:{fontSize:12,opacity:.85,marginTop:2},children:["Total to index (approx): ",Sn.effectiveTotal]}),Sn.large?E.jsx("div",{style:{fontSize:12,color:"#900",marginTop:6},children:"Large selections take longer to process and may impact responsiveness."}):null]}),E.jsx("div",{style:{marginTop:10},children:E.jsx("button",{disabled:!cs(),onClick:ga,children:"Continue"})}),E.jsx("hr",{}),E.jsx("h3",{children:"Clear local index"}),E.jsx("div",{style:{fontSize:12,opacity:.8},children:"Clear the full index or clear a specific ingestion run."}),E.jsx("button",{style:{marginTop:8},disabled:!_,onClick:()=>{Fa(!0),Qn(!1)},children:"Clear"}),gs()]})}function Va(){return E.jsxs("div",{children:[E.jsx("h3",{style:{marginTop:0},children:"Consent and confirmation"}),E.jsxs("div",{style:{border:"1px solid #ddd",padding:10,background:"#fafafa"},children:[E.jsx("div",{style:{fontSize:12},children:E.jsx("strong",{children:"Summary"})}),E.jsxs("div",{style:{fontSize:12,opacity:.85,marginTop:6},children:["Mode: ",oe==="FOLDERS"?"Folders":"Emails"]}),E.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Total to index (approx): ",Sn.effectiveTotal]}),oe==="FOLDERS"?E.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Per-folder limit: ",vn]}):null]}),Sn.large?E.jsxs("div",{style:{border:"1px solid #c00",padding:10,background:"#fff5f5",marginTop:10},children:[E.jsx("strong",{children:"Large selection warning"}),E.jsx("div",{style:{fontSize:12,marginTop:6},children:"Large selections take longer to process and may impact responsiveness."}),E.jsxs("label",{style:{display:"block",fontSize:12,marginTop:8},children:[E.jsx("input",{type:"checkbox",checked:Bo,onChange:x=>Ga(x.target.checked)})," ","I understand this may take several minutes."]})]}):null,E.jsxs("div",{style:{border:"1px solid #ddd",padding:10,marginTop:10},children:[E.jsx("strong",{children:"Consent required"}),E.jsx("p",{style:{marginTop:8,fontSize:12},children:da}),E.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:12},children:[E.jsx("input",{type:"checkbox",checked:oa,onChange:x=>ra(x.target.checked)})," ","I consent to local storage and indexing."]})]}),E.jsxs("div",{style:{marginTop:10},children:[E.jsx("button",{onClick:qo,children:"Back"})," ",E.jsx("button",{disabled:!oa||Sn.large&&!Bo,onClick:Si,children:"Start indexing"})]})]})}function An(){return E.jsxs("div",{children:[hs(),fs(),E.jsx("div",{style:{marginTop:10,fontSize:12,opacity:.85},children:"Keep Outlook open while indexing runs."})]})}function Ht(){return E.jsxs("div",{children:[E.jsxs("div",{style:{border:"1px solid #c00",padding:10,background:"#fff5f5"},children:[E.jsx("strong",{children:"Indexing cancelled"}),E.jsx("div",{style:{fontSize:12,marginTop:6},children:Ic||"Indexing cancelled. Some items may already be indexed."})]}),E.jsxs("div",{style:{marginTop:10,display:"flex",gap:8,flexWrap:"wrap"},children:[E.jsx("button",{onClick:()=>{Fa(!0),Qn(!1)},children:"Clear"}),E.jsx("button",{onClick:()=>{Nn(""),$e.current=!1,ae("SELECT")},children:"Return to selection"})]}),gs()]})}function ms(){return E.jsxs("div",{children:[E.jsxs("div",{style:{border:"1px solid #0a0",padding:10,background:"#f5fff5"},children:[E.jsx("strong",{children:"Indexing complete"}),E.jsx("div",{style:{fontSize:12,marginTop:6},children:kc||"Indexing completed successfully."})]}),E.jsxs("div",{style:{marginTop:10},children:[E.jsx("button",{onClick:()=>n("CHAT"),children:"Go to chat"})," ",E.jsx("button",{onClick:()=>ha(),children:"Index more emails"})]})]})}function Yo(x){const K=E.jsxs("div",{children:[ie==="SELECT"&&Qa(),ie==="PREVIEW"&&Va(),ie==="RUNNING"&&An(),ie==="CANCELLED"&&Ht(),ie==="COMPLETE"&&ms()]});return x?E.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:6,padding:10,background:"#fafafa"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsx("strong",{children:"Index management"}),E.jsx("button",{onClick:()=>Ke(W=>!W),children:Te?"Hide":"Show"})]}),Te?E.jsx("div",{style:{marginTop:10},children:K}):E.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:8},children:["Indexed: ",ve?.indexed_count??0,"  Last updated: ",Vd(ve?.last_updated)]})]}):K}async function Fo(x,K){if(!_||!P){window.open(K,"_blank","noopener,noreferrer");return}try{const rn=(await Iw(P,x)).weblink||""||K,Ge=Wy(rn);window.open(Ge||rn,"_blank","noopener,noreferrer")}catch{const W=Wy(K);window.open(W||K,"_blank","noopener,noreferrer")}}function ps(){return(ve?.indexed_count||0)<=0?E.jsxs("div",{children:[E.jsxs("div",{style:{border:"1px solid #c00",padding:10,background:"#fff5f5"},children:[E.jsx("strong",{children:"No emails indexed"}),E.jsx("div",{style:{fontSize:12,marginTop:6},children:"Index emails first using Index management."})]}),E.jsx("div",{style:{marginTop:10},children:Yo(!1)})]}):E.jsxs("div",{children:[Yo(!0),E.jsx("hr",{}),E.jsx("h3",{children:"Chat"}),E.jsx("div",{style:{fontSize:12,opacity:.8},children:"Ask questions about your indexed emails."}),E.jsx("textarea",{value:as,onChange:K=>sa(K.target.value),rows:3,style:{width:"100%",marginTop:8},placeholder:"Ask a question about your indexed emails..."}),E.jsx("div",{style:{marginTop:8},children:E.jsx("button",{onClick:()=>us(),disabled:!_,children:"ask"})}),E.jsx("h3",{style:{marginTop:14},children:"Answer"}),E.jsx("div",{style:{whiteSpace:"pre-wrap",border:"1px solid #ddd",padding:8,minHeight:70},children:Ya||"No answer yet."}),E.jsx("h3",{style:{marginTop:14},children:"Sources"}),Dn.length?Dn.map((K,W)=>E.jsxs("div",{style:{border:"1px solid #eee",padding:8,marginBottom:8},children:[E.jsx("div",{children:E.jsxs("strong",{children:["[",W+1,"] ",K.subject||"(no subject)"]})}),E.jsxs("div",{style:{fontSize:12,opacity:.8},children:[K.sender,"  ",K.received_dt," ",typeof K.score=="number"?` score: ${K.score.toFixed(4)}`:""]}),E.jsxs("details",{style:{marginTop:6},children:[E.jsx("summary",{style:{cursor:"pointer",fontSize:12},children:"Show excerpt"}),E.jsx("div",{style:{fontSize:12,marginTop:6},children:K.snippet})]}),E.jsx("button",{style:{marginTop:6},onClick:()=>Fo(K.message_id,K.weblink),children:"Open email"})]},K.message_id)):E.jsx("div",{style:{fontSize:12,opacity:.8},children:"No sources yet."})]})}return E.jsxs("div",{style:{fontFamily:"Segoe UI, Arial",padding:12,lineHeight:1.35},children:[Vn(),u==="SIGNIN"&&Ai(),u==="INDEX"&&Yo(!1),u==="CHAT"&&ps()]})}_A.createRoot(document.getElementById("root")).render(E.jsx(pA.StrictMode,{children:E.jsx(Lw,{})}));
